(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{202:function(e,t,n){},203:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=203},210:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(50),i=n.n(c),o=n(101),s=n(35),l=n(12),u=n(10),d=n(22),h=(n(202),n(27)),j=new Map([[0,"green"],[1,"purple"],[4,"red"],[18,"cyan"],[34,"pink"]]),b=["Pedestrian","Bicycle","Light vehicle","Heavy vehicle","Unknown"],f=n(6),g=n(7),m=n(4),O=n(5),x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(m.a)(this,e),this._pos=void 0,this._pos=[t,n,a]}return Object(O.a)(e,[{key:"x",get:function(){return this._pos[0]},set:function(e){this._pos[0]=e}},{key:"y",get:function(){return this._pos[1]},set:function(e){this._pos[1]=e}},{key:"z",get:function(){return this._pos[2]},set:function(e){this._pos[2]=e}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}}],[{key:"cross",value:function(t,n){return new e(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z,t.x*n.y-t.y*n.x)}}]),e}(),v=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Object(m.a)(this,n),(e=t.call(this,a,r,c))._angles=void 0,e._angles=[i,o,s],e}return Object(O.a)(n,[{key:"yaw",get:function(){return this._angles[0]},set:function(e){this._angles[0]=e}},{key:"pitch",get:function(){return this._angles[1]},set:function(e){this._angles[1]=e}},{key:"roll",get:function(){return this._angles[2]},set:function(e){this._angles[2]=e}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.yaw===e.yaw&&this.pitch===e.pitch&&this.roll===e.roll}}]),n}(x);function p(){var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return e[0][0]=1,e[1][1]=1,e[2][2]=1,e[3][3]=1,e}function k(e,t){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=0;a<4;a++)for(var r=0;r<4;r++)n[a][r]=e[a][0]*t[0][r]+e[a][1]*t[1][r]+e[a][2]*t[2][r]+e[a][3]*t[3][r];return n}function y(e,t){var n=new x;return n.x=e[0][0]*t.x+e[0][1]*t.y+e[0][2]*t.z+e[0][3],n.y=e[1][0]*t.x+e[1][1]*t.y+e[1][2]*t.z+e[1][3],n.z=e[2][0]*t.x+e[2][1]*t.y+e[2][2]*t.z+e[2][3],n}function w(e,t){var n=Math.cos(t),a=Math.sin(t),r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return r[0][0]=1,r[1][1]=n,r[1][2]=-a,r[2][1]=a,r[2][2]=n,r[3][3]=1,k(r,e)}function C(e,t){var n=Math.cos(t),a=Math.sin(t),r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return r[0][0]=n,r[0][2]=a,r[1][1]=1,r[2][0]=-a,r[2][2]=n,r[3][3]=1,k(r,e)}function M(e,t){var n=Math.cos(t),a=Math.sin(t),r=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return r[0][0]=n,r[0][1]=-a,r[1][0]=a,r[1][1]=n,r[2][2]=1,r[3][3]=1,k(r,e)}function L(e,t,n,a){return e=w(e=C(e=M(e,t),n),a)}function S(e,t,n,a){var r=JSON.parse(JSON.stringify(e));return r[0][0]+=e[3][0]*t,r[0][1]+=e[3][1]*t,r[0][2]+=e[3][2]*t,r[0][3]+=e[3][3]*t,r[1][0]+=e[3][0]*n,r[1][1]+=e[3][1]*n,r[1][2]+=e[3][2]*n,r[1][3]+=e[3][3]*n,r[2][0]+=e[3][0]*a,r[2][1]+=e[3][1]*a,r[2][2]+=e[3][2]*a,r[2][3]+=e[3][3]*a,r}function T(e,t,n,a){var r=JSON.parse(JSON.stringify(e));return r[0][0]*=t,r[0][1]*=t,r[0][2]*=t,r[0][3]*=t,r[1][0]*=n,r[1][1]*=n,r[1][2]*=n,r[1][3]*=n,r[2][0]*=a,r[2][1]*=a,r[2][2]*=a,r[2][3]*=a,r}function D(e,t,n,a){return[(a=y(I(e,t,n),a)).x,a.y]}function I(e,t,n){var a=p();return a=S(a,-e.pos.x,-e.pos.y,-e.pos.z),a=S(a=T(a=L(a,-e.pos.yaw,-e.pos.pitch,-e.pos.roll),t/e.width,n/e.height,1),.5*t-.5,.5*n-.5,0)}function _(e,t,n,a,r,c,i,o,s){var l,d=new Map,j=Object(h.a)(e);try{for(j.s();!(l=j.n()).done;){var f=Object(u.a)(l.value,5),g=f[0],m=f[1],O=f[2],v=f[3],p=f[4];if(n.onlyConfirmed&&1===p||-1===t.indexOf(b[v]));else if(d.has(g)){var k=d.get(g),y=Object(u.a)(k,5),w=y[0],C=y[1],M=(y[2],y[3],y[4]),L=D(i,o,s,new x(m,O,0)),S=Object(u.a)(L,2),T=S[0],I=S[1];w.push(T),C.push(I),M.push(p)}else{var _=D(i,o,s,new x(m,O,0)),N=Object(u.a)(_,2),F=N[0],E=N[1];d.set(g,[[F],[E],v,g,[p]])}}}catch(z){j.e(z)}finally{j.f()}return d.forEach((function(e,t){a&&(e[0].length<r||e[0].length>c)&&d.delete(t)})),Array.from(d.values(),(function(e){return function(e,t,n){var a=Object(u.a)(e,5),r=a[0],c=a[1],i=a[2],o=a[3],s=a[4],l=[r[0],c[0],0],d=[r[r.length-1],c[c.length-1],0],h=r.map((function(e,a){var i=s[a],o="L ".concat(e," ").concat(c[a]);if((t&&0===i||n&&1===i)&&0!==a){var l=0===i?6:3,u=[r[a-1],c[a-1]],d=u[0],h=u[1],j=[e,c[a]],b=j[0],f=j[1],g=Math.sqrt(Math.pow(b-d,2)+Math.pow(f-h,2)),m=0===g?1:g,O=[(h-f)/m,(b-d)/m],x=.707,v=O[0]*x-O[1]*x,p=O[0]*x+O[1]*x;o+="L ".concat(e+v*l," ").concat(c[a]+p*l," L ").concat(e," ").concat(c[a]," L ").concat(e-p*l," ").concat(c[a]+v*l," L ").concat(e," ").concat(c[a])}return o})).join(" ");return["M ".concat(r[0]," ").concat(c[0]," ").concat(h),i,o,l,d]}(e,n.markMeasurements,n.markEstimated)}))}var N=n(2),F=function(e){var t=e.WIDTH,n=e.HEIGHT,a=e.scale,r=e.pathStrings,c=e.showId,i=e.selectedIndices,o=e.vertices;return Object(N.jsxs)("svg",{width:t*a,height:n*a,style:{transform:"scale(".concat(a,")"),transformOrigin:"top left"},children:[r.map((function(e,t){var n=j.get(e[1]);return i.has(t)?Object(N.jsx)(N.Fragment,{}):Object(N.jsxs)("g",{children:[Object(N.jsx)("path",{d:e[0],stroke:n||"black",fill:"none"}),Object(N.jsx)("circle",{cx:e[3][0],cy:e[3][1],r:4,fill:"green",strokeWidth:"4"}),Object(N.jsx)("circle",{cx:e[4][0],cy:e[4][1],r:4,fill:"red",strokeWidth:"4"}),c&&Object(N.jsx)("text",{x:e[4][0],y:e[4][1],fill:"white",fontFamily:"sans-serif",fontSize:10,children:e[2]})]},e[0])})),o]})},E=n(145),z=n.n(E),H=n(275),R=n(277),W=n(299),Y=n(314),B=n(315),J=n(280),P=n(316),A=n(317),G=n(318),V=n(301),q=function(e){e.label;var t,n=e.image,r=e.WIDTH,c=e.HEIGHT,i=e.tracks,o=e.from,s=e.to,l=e.showType,h=e.filterLength,j=e.minLength,b=e.maxLength,f=e.ground,g=Object(a.useState)(1),m=Object(u.a)(g,2),O=m[0],x=m[1],v=Object(a.useState)({markMeasurements:!1,markEstimated:!1,onlyConfirmed:!1,trackId:!1,showLines:!1}),p=Object(u.a)(v,2),k=p[0],y=p[1],w=Object(a.useState)(new Map),C=Object(u.a)(w,2),M=C[0],L=C[1],S=Object(a.useMemo)((function(){return _(i.slice(o,s),l,k,h,j,b,f,r,c)}),[o,s,l,k,h,j,b]),T=Object(N.jsx)(F,{WIDTH:r,HEIGHT:c,scale:O,pathStrings:S,showId:k.trackId,selectedIndices:M,vertices:[]});return Object(N.jsxs)("div",{children:[Object(N.jsx)("div",{className:"control-container",children:Object(N.jsx)(W.a,{value:O,"aria-label":"Default",valueLabelDisplay:"auto",onChange:function(e,t){"number"===typeof t&&x(t)},min:0,max:10,step:.01,color:"primary",className:"slider",style:{width:300,margin:0}})}),Object(N.jsxs)("div",{style:{overflow:"hidden",display:"flex"},children:[Object(N.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(N.jsx)(z.a,{children:Object(N.jsx)("div",{className:"image-container",style:{width:r*O,height:c*O,backgroundImage:"url(".concat(n,")")},children:T})}),Object(N.jsx)("div",{style:{marginTop:10},children:Object(N.jsxs)(Y.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",position:"relative",overflow:"auto",maxHeight:400,"& ul":{padding:0},borderRadius:1},subheader:Object(N.jsx)(B.a,{children:"Tracks"}),component:"nav","aria-label":"main mailbox folders",children:[Object(N.jsx)(J.a,{}),(t=S,t.map((function(e,t){return Object(N.jsxs)(H.a,{selected:M.has(t),onClick:function(e){M.has(t)?L((function(e){return e.delete(t),new Map(e)})):function(e,t){L((function(e){return new Map(e.set(t,!0))}))}(0,t)},children:[Object(N.jsx)(R.a,{primary:e[2]}),Object(N.jsx)(R.a,{primary:e[1]})]},t)})))]})})]}),Object(N.jsx)(P.a,{sx:{margin:0,marginLeft:2},component:"fieldset",variant:"standard",children:Object(N.jsxs)(A.a,{children:[Object(N.jsx)(G.a,{control:Object(N.jsx)(V.a,{checked:k.markMeasurements,onChange:function(e){y((function(t){return Object(d.a)(Object(d.a)({},t),{},{markMeasurements:e.target.checked})}))}}),label:"Mark measurments"}),Object(N.jsx)(G.a,{control:Object(N.jsx)(V.a,{checked:k.markEstimated,onChange:function(e){y((function(t){return Object(d.a)(Object(d.a)({},t),{},{markEstimated:e.target.checked})}))}}),label:"Mark estimated"}),Object(N.jsx)(G.a,{control:Object(N.jsx)(V.a,{checked:k.onlyConfirmed,onChange:function(e){y((function(t){return Object(d.a)(Object(d.a)({},t),{},{onlyConfirmed:e.target.checked})}))}}),label:"Show only confirmed"}),Object(N.jsx)(G.a,{control:Object(N.jsx)(V.a,{checked:k.trackId,onChange:function(e){y((function(t){return Object(d.a)(Object(d.a)({},t),{},{trackId:e.target.checked})}))}}),label:"Show track id"}),Object(N.jsx)(G.a,{control:Object(N.jsx)(V.a,{checked:k.showLines,onChange:function(e){y((function(t){return Object(d.a)(Object(d.a)({},t),{},{showLines:e.target.checked})}))}}),label:"Show lines"})]})})]})]})},U=n(32),X=n.n(U),K=n(100),Q=n(306),Z=n(307),$=n(297),ee=n(309),te=n(312),ne=n(308),ae=n(151),re=n(295),ce=n(296),ie=n(281),oe=function(e){var t=e.date,n=e.setDate,a=e.fromTime,r=e.setFromTime,c=e.setToTime,i=e.interval,o=e.setDir,s=e.setInterval,l=e.showType,u=e.handleChange,d=e.filterLength,h=e.setFilterLength,j=e.minLength,f=e.setMinLength,g=e.maxLength,m=e.setMaxLength,O=e.handleBackwardClick,x=e.handleForwardClick,v={PaperProps:{style:{maxHeight:224,width:250}}};return Object(N.jsxs)("div",{children:[Object(N.jsxs)(ae.a,{dateAdapter:ie.a,children:[Object(N.jsx)(re.a,{label:"Date",format:"YYYY-MM-DD",value:t,onChange:function(e){e&&n(e)},sx:{backgroundColor:"background.default",borderRadius:1,marginRight:2}}),Object(N.jsx)(ce.a,{label:"From time",value:a,onChange:function(e){e&&(r(e),c(e.add(i,"minutes")),o(0))},ampm:!1,sx:{backgroundColor:"background.default",borderRadius:1,marginRight:2}})]}),Object(N.jsx)(Q.a,{label:"Interval in minutes",id:"outlined-start-adornment",sx:{width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:i,onChange:function(e){var t=Number(e.target.value);isNaN(t)||(s(t),c(a.add(t,"minutes")))}}),Object(N.jsxs)(P.a,{sx:{m:1,width:300,margin:0},children:[Object(N.jsx)(Z.a,{id:"demo-multiple-name-label",children:"Show types"}),Object(N.jsx)($.a,{labelId:"demo-multiple-name-label",id:"demo-multiple-name",multiple:!0,value:l,onChange:u,input:Object(N.jsx)(ee.a,{label:"Show types"}),renderValue:function(e){return e.join(", ")},MenuProps:v,sx:{backgroundColor:"background.default"},children:b.map((function(e){return Object(N.jsxs)(te.a,{value:e,children:[Object(N.jsx)(V.a,{checked:l.indexOf(e)>-1}),Object(N.jsx)(R.a,{primary:e})]},e)}))})]}),Object(N.jsx)("div",{children:Object(N.jsx)(G.a,{control:Object(N.jsx)(V.a,{checked:d,onChange:function(e){h(e.target.checked)}}),label:"Filter length",style:{margin:0,marginTop:10}})}),d&&Object(N.jsxs)("div",{style:{marginTop:10},children:[Object(N.jsx)(Q.a,{label:"Minimum length",id:"outlined-start-adornment",sx:{m:1,width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:j,onChange:function(e){var t=Number(e.target.value);isNaN(t)||f(t)}}),Object(N.jsx)(Q.a,{label:"Maximum length",id:"outlined-start-adornment",sx:{m:1,width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:g,onChange:function(e){var t=Number(e.target.value);isNaN(t)||m(t)}})]}),Object(N.jsxs)("div",{style:{margin:0,marginTop:10},children:[Object(N.jsx)(ne.a,{sx:{marginRight:2,backgroundColor:"background.default"},onClick:function(){return O()},children:"<"}),Object(N.jsx)(ne.a,{sx:{marginRight:2,backgroundColor:"background.default"},onClick:function(){return x()},children:">"})]})]})},se=function(){var e=Object(o.useRenderData)(),t=Object(a.useState)(0),n=Object(u.a)(t,2),c=n[0],i=n[1],d=Object(a.useState)(0),h=Object(u.a)(d,2),j=h[0],f=h[1],g=Object(a.useState)(0),m=Object(u.a)(g,2),O=m[0],x=m[1],p=Object(a.useState)(X()(e.args.date)),k=Object(u.a)(p,2),y=k[0],w=k[1],C=Object(a.useState)(X()(e.args.date)),M=Object(u.a)(C,2),L=M[0],S=M[1],T=Object(a.useState)(X()(e.args.date)),D=Object(u.a)(T,2),I=D[0],_=D[1],F=Object(a.useState)(1),E=Object(u.a)(F,2),z=E[0],H=E[1],R=r.a.useState(b),W=Object(u.a)(R,2),Y=W[0],B=W[1],J=Object(a.useState)(!1),P=Object(u.a)(J,2),A=P[0],G=P[1],V=Object(a.useState)(0),U=Object(u.a)(V,2),Q=U[0],Z=U[1],$=Object(a.useState)(0),ee=Object(u.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(e.args.tracks),re=Object(u.a)(ae,2),ce=re[0],ie=(re[1],e.args.image),se=e.args.height,le=e.args.width,ue=e.args.ground,de={pos:Object(s.a)(v,Object(l.a)(ue[0])),height:ue[1],width:ue[2]};Object(a.useEffect)((function(){y.isValid()&&K.Streamlit.setComponentValue(y.format("YYYY-MM-DD"))}),[y]),Object(a.useEffect)((function(){!function(){var e,t;if(0===O)e=he(L,0,ce.length-1),t=he(I,0,ce.length-1);else if(1===O){var n=e=j+1;for(console.log("INDEX:",n,ce.length-1,n<ce.length-1);n<ce.length&&X()(ce[n][5]).isBefore(I);)n++;t=n}else{var a=t=c;for(console.log("INDEX:",a,ce.length);a>0&&a<ce.length&&L.isBefore(X()(ce[a][5]));)a--;e=a+1}i(e),f(t),console.log("First track:",ce[e]),console.log("Last track",ce[t-1]),console.log("From ".concat(e," to ").concat(t))}()}),[L,I,z]);function he(e,t,n){for(;t<n;){var a=Math.floor(t+n>>>1);if(0===a)return 0;var r=X()(ce[a][5]);if(r.isAfter(e)&&X()(ce[a-1][5]).isBefore(e))return a;r.isAfter(e)?n=a:t=a+1}return t}var je=[Object(N.jsx)(q,{image:ie,WIDTH:le,HEIGHT:se,tracks:ce,from:c,to:j,label:"Version 1",showType:Y,filterLength:A,minLength:Q,maxLength:te,ground:de})];return Object(N.jsxs)("div",{style:{flexDirection:"column",marginTop:30},children:[Object(N.jsx)(oe,{date:y,setDate:w,fromTime:L,setFromTime:S,setToTime:_,interval:z,setDir:x,setInterval:H,showType:Y,handleChange:function(e){var t=e.target.value;B("string"===typeof t?t.split(","):t)},filterLength:A,setFilterLength:G,minLength:Q,setMinLength:Z,maxLength:te,setMaxLength:ne,handleBackwardClick:function(){S((function(e){return e.subtract(z,"minutes")})),_((function(e){return e.subtract(z,"minutes")})),x(-1)},handleForwardClick:function(){S((function(e){return e.add(z,"minutes")})),_((function(e){return e.add(z,"minutes")})),x(1)}}),Object(N.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(N.jsxs)("div",{style:{flexDirection:"row",flexWrap:"wrap"},children:[je.map((function(e){return e})),Object(N.jsx)("div",{style:{height:1e4}})]})})]})},le=n(156),ue=n(303);console.warn=function(){};var de=Object(le.a)({palette:{primary:{main:"#F63366"},common:{black:"#F63366"},secondary:{main:"#F0F2F6"},text:{primary:"#fff",secondary:"#fff"},action:{active:"#fff"},background:{default:"#262730",paper:"#262730"}}});i.a.render(Object(N.jsx)(r.a.StrictMode,{children:Object(N.jsx)(o.StreamlitProvider,{children:Object(N.jsx)(ue.a,{theme:de,children:Object(N.jsx)(se,{})})})}),document.getElementById("root"))}},[[210,1,2]]]);
//# sourceMappingURL=main.547adb78.chunk.js.map