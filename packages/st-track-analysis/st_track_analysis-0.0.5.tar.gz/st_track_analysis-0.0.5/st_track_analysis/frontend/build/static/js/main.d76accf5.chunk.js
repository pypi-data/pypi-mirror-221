(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{204:function(e,t,n){},205:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=205},212:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(50),c=n.n(i),o=n(78),s=n(18),l=n(11),u=n(304),h=n(309),d=n(318),f=n(310),j=n(300),m=n(312),b=n(325),g=n(307),O=n(280),x=n(320),p=n(311),v=n(153),y=n(298),k=n(299),w=n(284),L=new Map([[0,"green"],[1,"purple"],[4,"red"],[18,"cyan"],[34,"pink"]]),T="Pedestrian",C="Bicycle",M="Light vehicle",S="Heavy vehicle",I="Unknown",_=[T,C,M,S,I];var D=n(34),N=n.n(D),R=n(102),H=n(35),z=n(12),E=n(7),F=n(8),W=n(4),Y=n(5),A=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(W.a)(this,e),this._pos=void 0,this._pos=[t,n,r]}return Object(Y.a)(e,[{key:"x",get:function(){return this._pos[0]},set:function(e){this._pos[0]=e}},{key:"y",get:function(){return this._pos[1]},set:function(e){this._pos[1]=e}},{key:"z",get:function(){return this._pos[2]},set:function(e){this._pos[2]=e}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z}}],[{key:"cross",value:function(t,n){return new e(t.y*n.z-t.z*n.y,t.z*n.x-t.x*n.z,t.x*n.y-t.y*n.x)}}]),e}(),B=function(e){Object(E.a)(n,e);var t=Object(F.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return Object(W.a)(this,n),(e=t.call(this,r,a,i))._angles=void 0,e._angles=[c,o,s],e}return Object(Y.a)(n,[{key:"yaw",get:function(){return this._angles[0]},set:function(e){this._angles[0]=e}},{key:"pitch",get:function(){return this._angles[1]},set:function(e){this._angles[1]=e}},{key:"roll",get:function(){return this._angles[2]},set:function(e){this._angles[2]=e}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y&&this.z===e.z&&this.yaw===e.yaw&&this.pitch===e.pitch&&this.roll===e.roll}}]),n}(A);n(204);var J=n(27);function P(){var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return e[0][0]=1,e[1][1]=1,e[2][2]=1,e[3][3]=1,e}function G(e,t){for(var n=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=0;r<4;r++)for(var a=0;a<4;a++)n[r][a]=e[r][0]*t[0][a]+e[r][1]*t[1][a]+e[r][2]*t[2][a]+e[r][3]*t[3][a];return n}function V(e,t){var n=new A;return n.x=e[0][0]*t.x+e[0][1]*t.y+e[0][2]*t.z+e[0][3],n.y=e[1][0]*t.x+e[1][1]*t.y+e[1][2]*t.z+e[1][3],n.z=e[2][0]*t.x+e[2][1]*t.y+e[2][2]*t.z+e[2][3],n}function q(e,t){var n=Math.cos(t),r=Math.sin(t),a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return a[0][0]=1,a[1][1]=n,a[1][2]=-r,a[2][1]=r,a[2][2]=n,a[3][3]=1,G(a,e)}function U(e,t){var n=Math.cos(t),r=Math.sin(t),a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return a[0][0]=n,a[0][2]=r,a[1][1]=1,a[2][0]=-r,a[2][2]=n,a[3][3]=1,G(a,e)}function K(e,t){var n=Math.cos(t),r=Math.sin(t),a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return a[0][0]=n,a[0][1]=-r,a[1][0]=r,a[1][1]=n,a[2][2]=1,a[3][3]=1,G(a,e)}function Q(e,t,n,r){return e=q(e=U(e=K(e,t),n),r)}function X(e,t,n,r){var a=JSON.parse(JSON.stringify(e));return a[0][0]+=e[3][0]*t,a[0][1]+=e[3][1]*t,a[0][2]+=e[3][2]*t,a[0][3]+=e[3][3]*t,a[1][0]+=e[3][0]*n,a[1][1]+=e[3][1]*n,a[1][2]+=e[3][2]*n,a[1][3]+=e[3][3]*n,a[2][0]+=e[3][0]*r,a[2][1]+=e[3][1]*r,a[2][2]+=e[3][2]*r,a[2][3]+=e[3][3]*r,a}function Z(e,t,n,r){var a=JSON.parse(JSON.stringify(e));return a[0][0]*=t,a[0][1]*=t,a[0][2]*=t,a[0][3]*=t,a[1][0]*=n,a[1][1]*=n,a[1][2]*=n,a[1][3]*=n,a[2][0]*=r,a[2][1]*=r,a[2][2]*=r,a[2][3]*=r,a}function $(e,t,n,r){return[(r=V(ee(e,t,n),r)).x,r.y]}function ee(e,t,n){var r=P();return r=X(r,-e.pos.x,-e.pos.y,-e.pos.z),r=X(r=Z(r=Q(r,-e.pos.yaw,-e.pos.pitch,-e.pos.roll),t/e.width,n/e.height,1),.5*t-.5,.5*n-.5,0)}function te(e,t,n,r,a,i,c,o,s){var u,h=new Map,d=Object(J.a)(e);try{for(d.s();!(u=d.n()).done;){var f=Object(l.a)(u.value,5),j=f[0],m=f[1],b=f[2],g=f[3],O=f[4];if(n.onlyConfirmed&&1===O||-1===t.indexOf(_[g]));else if(h.has(j)){var x=h.get(j),p=Object(l.a)(x,5),v=p[0],y=p[1],k=(p[2],p[3],p[4]),w=$(c,o,s,new A(m,b,0)),L=Object(l.a)(w,2),T=L[0],C=L[1];v.push(T),y.push(C),k.push(O)}else{var M=$(c,o,s,new A(m,b,0)),S=Object(l.a)(M,2),I=S[0],D=S[1];h.set(j,[[I],[D],g,j,[O]])}}}catch(N){d.e(N)}finally{d.f()}return h.forEach((function(e,t){r&&(e[0].length<a||e[0].length>i)&&h.delete(t)})),Array.from(h.values(),(function(e){return function(e,t,n){var r=Object(l.a)(e,5),a=r[0],i=r[1],c=r[2],o=r[3],s=r[4],u=[a[0],i[0],0],h=[a[a.length-1],i[i.length-1],0],d=a.map((function(e,r){var c=s[r],o="L ".concat(e," ").concat(i[r]);if((t&&0===c||n&&1===c)&&0!==r){var l=0===c?6:3,u=[a[r-1],i[r-1]],h=u[0],d=u[1],f=[e,i[r]],j=f[0],m=f[1],b=Math.sqrt(Math.pow(j-h,2)+Math.pow(m-d,2)),g=0===b?1:b,O=[(d-m)/g,(j-h)/g],x=.707,p=O[0]*x-O[1]*x,v=O[0]*x+O[1]*x;o+="L ".concat(e+p*l," ").concat(i[r]+v*l," L ").concat(e," ").concat(i[r]," L ").concat(e-v*l," ").concat(i[r]+p*l," L ").concat(e," ").concat(i[r])}return o})).join(" ");return["M ".concat(a[0]," ").concat(i[0]," ").concat(d),c,o,u,h]}(e,n.markMeasurements,n.markEstimated)}))}var ne=n(2),re=function(e){var t=e.WIDTH,n=e.HEIGHT,r=e.scale,a=e.pathStrings,i=e.showId,c=e.selectedIndices,o=e.filterSelected,s=e.vertices;return Object(ne.jsxs)("svg",{width:t,height:n,style:{transform:"scale(".concat(r,")"),transformOrigin:"top left",overflow:"visible"},children:[a.map((function(e,t){var n=L.get(e[1]);return!o!=c.has(t)?Object(ne.jsxs)("g",{children:[Object(ne.jsx)("path",{d:e[0],stroke:n||"black",fill:"none"}),Object(ne.jsx)("circle",{cx:e[3][0],cy:e[3][1],r:4,fill:"green",strokeWidth:"4"}),Object(ne.jsx)("circle",{cx:e[4][0],cy:e[4][1],r:4,fill:"red",strokeWidth:"4"}),i&&Object(ne.jsx)("text",{x:e[4][0],y:e[4][1],fill:"white",fontFamily:"sans-serif",fontSize:10,children:e[2]})]},e[0]):Object(ne.jsx)(ne.Fragment,{})})),s]})},ae=n(146),ie=n.n(ae),ce=n(277),oe=n(279),se=n(302),le=n(316),ue=n(118),he=n(317),de=n(283),fe=n(319),je=function(e){e.label;var t,n=e.image,a=e.WIDTH,i=e.HEIGHT,c=e.tracks,o=e.from,u=e.to,h=e.showType,f=e.filterLength,j=e.minLength,m=e.maxLength,b=e.ground,p=Object(r.useState)(1),v=Object(l.a)(p,2),y=v[0],k=v[1],w=Object(r.useState)({markMeasurements:!1,markEstimated:!1,onlyConfirmed:!1,trackId:!1,showLines:!1,filterSelected:!1}),L=Object(l.a)(w,2),_=L[0],D=L[1],N=Object(r.useState)(new Map),R=Object(l.a)(N,2),H=R[0],z=R[1],E=Object(r.useMemo)((function(){return te(c.slice(o,u),h,_,f,j,m,b,a,i)}),[o,u,h,_,f,j,m]),F=Object(ne.jsx)(re,{WIDTH:a,HEIGHT:i,scale:y,pathStrings:E,showId:_.trackId,selectedIndices:H,filterSelected:_.filterSelected,vertices:[]});return Object(ne.jsxs)("div",{children:[Object(ne.jsx)("div",{className:"control-container",children:Object(ne.jsx)(se.a,{value:y,"aria-label":"Default",valueLabelDisplay:"auto",onChange:function(e,t){"number"===typeof t&&k(t)},min:0,max:10,step:.01,color:"primary",className:"slider",style:{width:300,margin:0}})}),Object(ne.jsxs)("div",{style:{overflow:"hidden",display:"flex"},children:[Object(ne.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(ne.jsx)(ie.a,{children:Object(ne.jsx)("div",{className:"image-container",style:{width:a*y,height:i*y,backgroundImage:"url(".concat(n,")")},children:F})}),Object(ne.jsx)("div",{style:{marginTop:10},children:Object(ne.jsxs)(le.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",position:"relative",overflow:"auto",maxHeight:400,"& ul":{padding:0},borderRadius:1},dense:!0,subheader:Object(ne.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginRight:20,marginLeft:20},children:[Object(ne.jsx)(ue.a,{children:"Tracks"}),Object(ne.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(ne.jsx)(ue.a,{children:"Hide"}),Object(ne.jsx)(he.a,{onChange:function(e){D((function(t){return Object(s.a)(Object(s.a)({},t),{},{filterSelected:e.target.checked})}))}}),Object(ne.jsx)(ue.a,{children:"Show"})]})]}),component:"nav","aria-label":"tracks list",children:[Object(ne.jsx)(de.a,{sx:{borderBottomWidth:3}}),(t=E,t.map((function(e,t){return Object(ne.jsxs)(ce.a,{onClick:function(e){H.has(t)?z((function(e){return e.delete(t),new Map(e)})):function(e,t){z((function(e){return new Map(e.set(t,!0))}))}(0,t)},children:[Object(ne.jsx)(oe.a,{children:Object(ne.jsx)(g.a,{edge:"start",checked:H.has(t),tabIndex:-1,disableRipple:!0})}),Object(ne.jsx)(O.a,{style:{width:"50%"},primary:e[2]}),Object(ne.jsx)(O.a,{style:{width:"50%"},primary:(n=e[1],0===n?I:1===n?C:4===n?T:18===n?M:34===n?S:I)})]},t);var n})))]})})]}),Object(ne.jsx)(d.a,{sx:{margin:0,marginLeft:2},component:"fieldset",variant:"standard",children:Object(ne.jsxs)(fe.a,{children:[Object(ne.jsx)(x.a,{control:Object(ne.jsx)(g.a,{checked:_.markMeasurements,onChange:function(e){D((function(t){return Object(s.a)(Object(s.a)({},t),{},{markMeasurements:e.target.checked})}))}}),label:"Mark measurments"}),Object(ne.jsx)(x.a,{control:Object(ne.jsx)(g.a,{checked:_.markEstimated,onChange:function(e){D((function(t){return Object(s.a)(Object(s.a)({},t),{},{markEstimated:e.target.checked})}))}}),label:"Mark estimated"}),Object(ne.jsx)(x.a,{control:Object(ne.jsx)(g.a,{checked:_.onlyConfirmed,onChange:function(e){D((function(t){return Object(s.a)(Object(s.a)({},t),{},{onlyConfirmed:e.target.checked})}))}}),label:"Show only confirmed"}),Object(ne.jsx)(x.a,{control:Object(ne.jsx)(g.a,{checked:_.trackId,onChange:function(e){D((function(t){return Object(s.a)(Object(s.a)({},t),{},{trackId:e.target.checked})}))}}),label:"Show track id"}),Object(ne.jsx)(x.a,{control:Object(ne.jsx)(g.a,{checked:_.showLines,onChange:function(e){D((function(t){return Object(s.a)(Object(s.a)({},t),{},{showLines:e.target.checked})}))}}),label:"Show lines"})]})})]})]})},me=function(e){var t=e.fromTime,n=e.toTime,a=e.dir,i=e.showType,c=e.filterLength,s=e.minLength,u=e.maxLength,h=Object(o.useRenderData)(),d=h.args.tracks,f=h.args.images,j=h.args.shapes,m=h.args.grounds,b=h.args.names,g=m.map((function(e){return{pos:Object(H.a)(B,Object(z.a)(e[0])),height:e[1],width:e[2]}})),O=Object(r.useState)(Array(d.length).fill(0)),x=Object(l.a)(O,2),p=x[0],v=x[1],y=Object(r.useState)(Array(d.length).fill(0)),k=Object(l.a)(y,2),w=k[0],L=k[1];function T(e,t,n,r){for(;t<n;){var a=Math.floor(t+n>>>1);if(0===a)return 0;var i=N()(r[a][5]);if(i.isAfter(e)&&N()(r[a-1][5]).isBefore(e))return a;i.isAfter(e)?n=a:t=a+1}return t}Object(r.useEffect)((function(){for(var e=function(e){var r=d[e],i=0,c=0;if(0===a)i=T(t,0,r.length-1,r),c=T(n,0,r.length-1,r);else if(1===a){for(var o=i=w[e]+1;o<r.length&&N()(r[o][5]).isBefore(n);)o++;c=o}else{for(var s=c=p[e];s>0&&s<r.length&&t.isBefore(N()(r[s][5]));)s--;i=s+1}return[i,c]},r=[],i=[],c=0;c<d.length;c++){var o=e(c),s=Object(l.a)(o,2),u=s[0],h=s[1];r.push(u),i.push(h)}v(r),L(i)}),[t,n]);var C=d.map((function(e,t){return Object(ne.jsx)(je,{image:f[t],HEIGHT:j[t][0],WIDTH:j[t][1],tracks:e,from:p[t]?p[t]:0,to:w[t]?w[t]:0,label:b[t],showType:i,filterLength:c,minLength:s,maxLength:u,ground:g[t]})}));return Object(ne.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(ne.jsxs)("div",{style:{flexDirection:"row",flexWrap:"wrap"},children:[C.map((function(e){return e})),Object(ne.jsx)("div",{style:{height:1e4}})]})})},be=n(158),ge=Object(be.a)({palette:{primary:{main:"#F63366"},common:{black:"#F63366"},secondary:{main:"#F0F2F6"},text:{primary:"#fff",secondary:"#fff"},action:{active:"#fff"},background:{default:"#262730",paper:"#262730"}}}),Oe=function(){var e=Object(o.useRenderData)(),t=N()(e.args.date),n={date:t,fromTime:t,interval:0,dir:0,showType:_,filterLength:{filter:!1,minLength:0,maxLength:0}},a=Object(r.useState)(n),i=Object(l.a)(a,2),c=i[0],L=i[1];Object(r.useEffect)((function(){c.date.isValid()&&R.Streamlit.setComponentValue(c.date.format("YYYY-MM-DD"))}),[c.date]);var T={PaperProps:{style:{maxHeight:224,width:250}}};return Object(ne.jsx)(u.a,{theme:ge,children:Object(ne.jsxs)("div",{style:{marginTop:30},children:[Object(ne.jsxs)(v.a,{dateAdapter:w.a,children:[Object(ne.jsx)(y.a,{label:"Date",format:"YYYY-MM-DD",value:c.date,onChange:function(e){e&&L((function(t){return t.date=e,e.isValid()&&(t.fromTime=e.set("hour",t.fromTime.hour()).set("minute",t.fromTime.minute())),Object(s.a)({},t)}))},sx:{backgroundColor:"background.default",borderRadius:1,marginRight:2}}),Object(ne.jsx)(k.a,{label:"From time",value:c.fromTime,onChange:function(e){e&&L((function(t){return t.fromTime=e,Object(s.a)({},t)}))},ampm:!1,sx:{backgroundColor:"background.default",borderRadius:1,marginRight:2}})]}),Object(ne.jsx)(h.a,{label:"Interval in minutes",id:"outlined-start-adornment",sx:{width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:c.interval,onChange:function(e){var t=Number(e.target.value);isNaN(t)||L((function(e){return e.interval=t,Object(s.a)({},e)}))}}),Object(ne.jsxs)(d.a,{sx:{m:1,width:300,margin:0},children:[Object(ne.jsx)(f.a,{id:"demo-multiple-name-label",children:"Show types"}),Object(ne.jsx)(j.a,{labelId:"demo-multiple-name-label",id:"demo-multiple-name",multiple:!0,value:c.showType,onChange:function(e){var t=e.target.value;L((function(e){return e.showType="string"===typeof t?t.split(","):t,Object(s.a)({},e)}))},input:Object(ne.jsx)(m.a,{label:"Show types"}),renderValue:function(e){return e.join(", ")},MenuProps:T,sx:{backgroundColor:"background.default"},children:_.map((function(e){return Object(ne.jsxs)(b.a,{value:e,children:[Object(ne.jsx)(g.a,{checked:c.showType.indexOf(e)>-1}),Object(ne.jsx)(O.a,{primary:e})]},e)}))})]}),Object(ne.jsx)("div",{children:Object(ne.jsx)(x.a,{control:Object(ne.jsx)(g.a,{checked:c.filterLength.filter,onChange:function(e){L((function(t){return t.filterLength.filter=e.target.checked,Object(s.a)({},t)}))}}),label:"Filter length",style:{margin:0,marginTop:10}})}),c.filterLength.filter&&Object(ne.jsxs)("div",{style:{marginTop:10},children:[Object(ne.jsx)(h.a,{label:"Minimum length",id:"outlined-start-adornment",sx:{m:1,width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:c.filterLength.minLength,onChange:function(e){var t=Number(e.target.value);isNaN(t)||L((function(e){return e.filterLength.minLength=t,Object(s.a)({},e)}))}}),Object(ne.jsx)(h.a,{label:"Maximum length",id:"outlined-start-adornment",sx:{m:1,width:"25ch",backgroundColor:"background.default",borderRadius:1,margin:0,marginRight:2},value:c.filterLength.maxLength,onChange:function(e){var t=Number(e.target.value);isNaN(t)||L((function(e){return e.filterLength.maxLength=t,Object(s.a)({},e)}))}})]}),Object(ne.jsxs)("div",{style:{margin:0,marginTop:10},children:[Object(ne.jsx)(p.a,{sx:{marginRight:2,backgroundColor:"background.default"},onClick:function(){L((function(e){return e.fromTime=e.fromTime.subtract(e.interval,"minutes"),e.dir=-1,Object(s.a)({},e)}))},children:"<"}),Object(ne.jsx)(p.a,{sx:{marginRight:2,backgroundColor:"background.default"},onClick:function(){L((function(e){return e.fromTime=e.fromTime.add(e.interval,"minutes"),e.dir=1,Object(s.a)({},e)}))},children:">"})]}),Object(ne.jsx)(me,{fromTime:c.fromTime,toTime:c.fromTime.add(c.interval,"minutes"),dir:c.dir,showType:c.showType,filterLength:c.filterLength.filter,minLength:c.filterLength.minLength,maxLength:c.filterLength.maxLength})]})})};console.warn=function(){},c.a.render(Object(ne.jsx)(a.a.StrictMode,{children:Object(ne.jsx)(o.StreamlitProvider,{children:Object(ne.jsx)(Oe,{})})}),document.getElementById("root"))}},[[212,1,2]]]);
//# sourceMappingURL=main.d76accf5.chunk.js.map