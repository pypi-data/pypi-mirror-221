import{W as de,X as ce,Y as _e,al,am as il,Z as E,a1 as X,a0 as j,a2 as v,a3 as D,a4 as R,a6 as G,a5 as T,ao as ul,ap as sl,a9 as P,aa as V,ab as q,ac as I,ak as Fe,aU as Y,av as J,aB as $,a7 as U,aC as ee,aA as ge,$ as he,a8 as be,ax as le,aq as ue,aV as se,aW as oe,ar as fe,aw as ve,aT as Ae,as as De,an as ol,aP as fl}from"./index-00cfa2a7.js";import{U as dl}from"./Upload-699ac090.js";import{d as cl}from"./dsv-62f8cd07.js";var Le=Object.prototype.hasOwnProperty;function te(r,e){var l,t;if(r===e)return!0;if(r&&e&&(l=r.constructor)===e.constructor){if(l===Date)return r.getTime()===e.getTime();if(l===RegExp)return r.toString()===e.toString();if(l===Array){if((t=r.length)===e.length)for(;t--&&te(r[t],e[t]););return t===-1}if(!l||typeof r=="object"){t=0;for(l in r)if(Le.call(r,l)&&++t&&!Le.call(e,l)||!(l in e)||!te(r[l],e[l]))return!1;return Object.keys(e).length===t}}return r!==r&&e!==e}function Me(r){let e,l,t;return{c(){e=E("input"),v(e,"class","absolute outline-none inset-2 bg-transparent border-0 translate-x-px flex-1 "),v(e,"tabindex","-1"),D(e,"translate-x-px",!r[3]),D(e,"font-bold",r[3])},m(a,i){R(a,e,i),Ae(e,r[0]),r[8](e),l||(t=[U(e,"input",r[7]),U(e,"keydown",r[6]),U(e,"blur",bl)],l=!0)},p(a,i){i&1&&e.value!==a[0]&&Ae(e,a[0]),i&8&&D(e,"translate-x-px",!a[3]),i&8&&D(e,"font-bold",a[3])},d(a){a&&q(e),r[8](null),l=!1,ge(t)}}}function _l(r){let e;return{c(){e=he(r[0])},m(l,t){R(l,e,t)},p(l,t){t&1&&be(e,l[0])},d(l){l&&q(e)}}}function gl(r){let e,l;return{c(){e=new fl(!1),l=ol(),e.a=l},m(t,a){e.m(r[0],t,a),R(t,l,a)},p(t,a){a&1&&e.p(t[0])},d(t){t&&q(l),t&&e.d()}}}function hl(r){let e,l,t,a,i=r[2]&&Me(r);function g(u,_){return u[4]==="markdown"||u[4]==="html"?gl:_l}let h=g(r),o=h(r);return{c(){i&&i.c(),e=j(),l=E("span"),o.c(),v(l,"tabindex","-1"),v(l,"role","button"),v(l,"class","p-2 outline-none border-0 flex-1"),D(l,"opacity-0",r[2]),D(l,"pointer-events-none",r[2])},m(u,_){i&&i.m(u,_),R(u,e,_),R(u,l,_),o.m(l,null),t||(a=U(l,"dblclick",r[5]),t=!0)},p(u,[_]){u[2]?i?i.p(u,_):(i=Me(u),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),h===(h=g(u))&&o?o.p(u,_):(o.d(1),o=h(u),o&&(o.c(),o.m(l,null))),_&4&&D(l,"opacity-0",u[2]),_&4&&D(l,"pointer-events-none",u[2])},i:le,o:le,d(u){i&&i.d(u),u&&q(e),u&&q(l),o.d(),t=!1,a()}}}const bl=({currentTarget:r})=>r.setAttribute("tabindex","-1");function ml(r,e,l){let{edit:t}=e,{value:a=""}=e,{el:i}=e,{header:g=!1}=e,{datatype:h="str"}=e;function o(d){De.call(this,r,d)}function u(d){De.call(this,r,d)}function _(){a=this.value,l(0,a)}function y(d){J[d?"unshift":"push"](()=>{i=d,l(1,i)})}return r.$$set=d=>{"edit"in d&&l(2,t=d.edit),"value"in d&&l(0,a=d.value),"el"in d&&l(1,i=d.el),"header"in d&&l(3,g=d.header),"datatype"in d&&l(4,h=d.datatype)},[a,i,t,g,h,o,u,_,y]}class Ne extends de{constructor(e){super(),ce(this,e,ml,hl,_e,{edit:2,value:0,el:1,header:3,datatype:4})}}function Te(r,e,l){const t=r.slice();return t[52]=e[l],t[54]=l,t}function Ee(r,e,l){const t=r.slice();return t[55]=e[l].value,t[56]=e[l].id,t[57]=e,t[58]=l,t}function Be(r,e,l){const t=r.slice();return t[55]=e[l].value,t[56]=e[l].id,t[59]=e,t[54]=l,t}function Ce(r){let e,l;return{c(){e=E("p"),l=he(r[1]),v(e,"class","text-gray-600 text-[0.855rem] mb-2 block dark:text-gray-200 relative z-40")},m(t,a){R(t,e,a),T(e,l)},p(t,a){a[0]&2&&be(l,t[1])},d(t){t&&q(e)}}}function He(r){let e,l;return{c(){e=E("caption"),l=he(r[1]),v(e,"class","sr-only")},m(t,a){R(t,e,a),T(e,l)},p(t,a){a[0]&2&&be(l,t[1])},d(t){t&&q(e)}}}function Re(r,e){let l,t,a,i,g,h,o,u,_,y,d,b=e[56],f,A,O;function s(S){e[30](S,e[56])}function k(){return e[31](e[56])}let M={value:e[55],edit:e[13]===e[56],header:!0};e[10][e[56]].input!==void 0&&(M.el=e[10][e[56]].input),a=new Ne({props:M}),J.push(()=>$(a,"el",s)),a.$on("keydown",e[21]),a.$on("dblclick",k);function p(){return e[32](e[54])}const H=()=>e[33](l,b),N=()=>e[33](null,b);return{key:r,first:null,c(){l=E("th"),t=E("div"),X(a.$$.fragment),g=j(),h=E("div"),o=ve("svg"),u=ve("path"),y=j(),v(u,"d","M4.49999 0L8.3971 6.75H0.602875L4.49999 0Z"),v(o,"width","1em"),v(o,"height","1em"),v(o,"class","fill-current text-[10px]"),v(o,"viewBox","0 0 9 7"),v(o,"fill","none"),v(o,"xmlns","http://www.w3.org/2000/svg"),v(h,"class",_="flex flex-none items-center justify-center p-2 cursor-pointer leading-snug transform transition-all "+(e[12]!==e[54]?"text-gray-200 hover:text-gray-500":"text-orange-500")+" "+(e[12]===e[54]&&e[11]==="des"?"-scale-y-[1]":"")),D(h,"text-gray-200",e[12]!==e[54]),v(t,"class","min-h-[2.3rem] flex outline-none"),v(l,"class","p-0 relative focus-within:ring-1 ring-orange-500 ring-inset outline-none"),v(l,"aria-sort",d=e[15](e[55],e[12],e[11])),D(l,"bg-orange-50",e[13]===e[56]),D(l,"dark:bg-transparent",e[13]===e[56]),D(l,"rounded-tl-lg",e[54]===0),D(l,"rounded-tr-lg",e[54]===e[8].length-1),this.first=l},m(S,C){R(S,l,C),T(l,t),G(a,t,null),T(t,g),T(t,h),T(h,o),T(o,u),T(l,y),H(),f=!0,A||(O=U(h,"click",p),A=!0)},p(S,C){e=S;const W={};C[0]&256&&(W.value=e[55]),C[0]&8448&&(W.edit=e[13]===e[56]),!i&&C[0]&1280&&(i=!0,W.el=e[10][e[56]].input,ee(()=>i=!1)),a.$set(W),(!f||C[0]&6400&&_!==(_="flex flex-none items-center justify-center p-2 cursor-pointer leading-snug transform transition-all "+(e[12]!==e[54]?"text-gray-200 hover:text-gray-500":"text-orange-500")+" "+(e[12]===e[54]&&e[11]==="des"?"-scale-y-[1]":"")))&&v(h,"class",_),C[0]&6400&&D(h,"text-gray-200",e[12]!==e[54]),(!f||C[0]&6400&&d!==(d=e[15](e[55],e[12],e[11])))&&v(l,"aria-sort",d),b!==e[56]&&(N(),b=e[56],H()),C[0]&8448&&D(l,"bg-orange-50",e[13]===e[56]),C[0]&8448&&D(l,"dark:bg-transparent",e[13]===e[56]),C[0]&256&&D(l,"rounded-tl-lg",e[54]===0),C[0]&256&&D(l,"rounded-tr-lg",e[54]===e[8].length-1)},i(S){f||(P(a.$$.fragment,S),f=!0)},o(S){V(a.$$.fragment,S),f=!1},d(S){S&&q(l),I(a),N(),A=!1,O()}}}function qe(r,e){let l,t,a,i,g,h=e[56],o,u,_;function y(p){e[34](p,e[55],e[57],e[58])}function d(p){e[35](p,e[56])}let b={edit:e[6]===e[56],datatype:Array.isArray(e[0])?e[0][e[58]]:e[0]};e[55]!==void 0&&(b.value=e[55]),e[10][e[56]].input!==void 0&&(b.el=e[10][e[56]].input),a=new Ne({props:b}),J.push(()=>$(a,"value",y)),J.push(()=>$(a,"el",d));const f=()=>e[36](l,h),A=()=>e[36](null,h);function O(){return e[37](e[56])}function s(){return e[38](e[56])}function k(){return e[39](e[56])}function M(...p){return e[40](e[54],e[58],e[56],...p)}return{key:r,first:null,c(){l=E("td"),t=E("div"),X(a.$$.fragment),v(t,"class","min-h-[2.3rem] h-full outline-none flex items-center"),D(t,"border-transparent",e[7]!==e[56]),v(l,"tabindex","0"),v(l,"class","outline-none focus-within:ring-1 ring-orange-500 ring-inset focus-within:bg-orange-50 dark:focus-within:bg-gray-800 group-last:first:rounded-bl-lg group-last:last:rounded-br-lg relative"),this.first=l},m(p,H){R(p,l,H),T(l,t),G(a,t,null),f(),o=!0,u||(_=[U(l,"touchstart",O,{passive:!0}),U(l,"click",s),U(l,"dblclick",k),U(l,"keydown",M)],u=!0)},p(p,H){e=p;const N={};H[0]&576&&(N.edit=e[6]===e[56]),H[0]&513&&(N.datatype=Array.isArray(e[0])?e[0][e[58]]:e[0]),!i&&H[0]&512&&(i=!0,N.value=e[55],ee(()=>i=!1)),!g&&H[0]&1536&&(g=!0,N.el=e[10][e[56]].input,ee(()=>g=!1)),a.$set(N),H[0]&640&&D(t,"border-transparent",e[7]!==e[56]),h!==e[56]&&(A(),h=e[56],f())},i(p){o||(P(a.$$.fragment,p),o=!0)},o(p){V(a.$$.fragment,p),o=!1},d(p){p&&q(l),I(a),A(),u=!1,ge(_)}}}function Oe(r,e){let l,t=[],a=new Map,i,g,h=e[52];const o=u=>u[56];for(let u=0;u<h.length;u+=1){let _=Ee(e,h,u),y=o(_);a.set(y,t[u]=qe(y,_))}return{key:r,first:null,c(){l=E("tr");for(let u=0;u<t.length;u+=1)t[u].c();i=j(),v(l,"class","group border-b dark:border-gray-700 last:border-none divide-x dark:divide-gray-700 space-x-4 odd:bg-gray-50 dark:odd:bg-gray-900 group focus:bg-gradient-to-b focus:from-blue-100 dark:focus:from-blue-900 focus:to-blue-50 dark:focus:to-gray-900 focus:odd:bg-white"),this.first=l},m(u,_){R(u,l,_);for(let y=0;y<t.length;y+=1)t[y].m(l,null);T(l,i),g=!0},p(u,_){e=u,_[0]&460481&&(h=e[52],ue(),t=se(t,_,o,1,e,h,a,l,oe,qe,i,Ee),fe())},i(u){if(!g){for(let _=0;_<h.length;_+=1)P(t[_]);g=!0}},o(u){for(let _=0;_<t.length;_+=1)V(t[_]);g=!1},d(u){u&&q(l);for(let _=0;_<t.length;_+=1)t[_].d()}}}function pl(r){let e,l,t,a,i=[],g=new Map,h,o,u=[],_=new Map,y,d=r[1]&&r[1].length!==0&&He(r),b=r[8];const f=s=>s[56];for(let s=0;s<b.length;s+=1){let k=Be(r,b,s),M=f(k);g.set(M,i[s]=Re(M,k))}let A=r[9];const O=s=>s[52];for(let s=0;s<A.length;s+=1){let k=Te(r,A,s),M=O(k);_.set(M,u[s]=Oe(M,k))}return{c(){e=E("table"),d&&d.c(),l=j(),t=E("thead"),a=E("tr");for(let s=0;s<i.length;s+=1)i[s].c();h=j(),o=E("tbody");for(let s=0;s<u.length;s+=1)u[s].c();v(a,"class","border-b dark:border-gray-700 divide-x dark:divide-gray-700 text-left"),v(t,"class","sticky top-0 left-0 right-0 bg-white shadow-sm z-10"),v(o,"class","overflow-y-scroll"),v(e,"class","table-auto font-mono w-full text-gray-900 text-sm transition-opacity overflow-hidden"),D(e,"opacity-40",r[14])},m(s,k){R(s,e,k),d&&d.m(e,null),T(e,l),T(e,t),T(t,a);for(let M=0;M<i.length;M+=1)i[M].m(a,null);T(e,h),T(e,o);for(let M=0;M<u.length;M+=1)u[M].m(o,null);y=!0},p(s,k){s[1]&&s[1].length!==0?d?d.p(s,k):(d=He(s),d.c(),d.m(e,l)):d&&(d.d(1),d=null),k[0]&3718400&&(b=s[8],ue(),i=se(i,k,f,1,s,b,g,a,oe,Re,null,Be),fe()),k[0]&460481&&(A=s[9],ue(),u=se(u,k,O,1,s,A,_,o,oe,Oe,null,Te),fe()),k[0]&16384&&D(e,"opacity-40",s[14])},i(s){if(!y){for(let k=0;k<b.length;k+=1)P(i[k]);for(let k=0;k<A.length;k+=1)P(u[k]);y=!0}},o(s){for(let k=0;k<i.length;k+=1)V(i[k]);for(let k=0;k<u.length;k+=1)V(u[k]);y=!1},d(s){s&&q(e),d&&d.d();for(let k=0;k<i.length;k+=1)i[k].d();for(let k=0;k<u.length;k+=1)u[k].d()}}}function Se(r){let e,l,t=r[3][1]==="dynamic"&&Ue(r),a=r[2][1]==="dynamic"&&ze(r);return{c(){e=E("div"),t&&t.c(),l=j(),a&&a.c(),v(e,"class","flex justify-end space-x-1 pt-2 text-gray-800")},m(i,g){R(i,e,g),t&&t.m(e,null),T(e,l),a&&a.m(e,null)},p(i,g){i[3][1]==="dynamic"?t?t.p(i,g):(t=Ue(i),t.c(),t.m(e,l)):t&&(t.d(1),t=null),i[2][1]==="dynamic"?a?a.p(i,g):(a=ze(i),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(i){i&&q(e),t&&t.d(),a&&a.d()}}}function Ue(r){let e,l,t;return{c(){e=E("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="mr-1 group-hover:text-orange-500" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path fill="currentColor" d="M24.59 16.59L17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10l10-10l-1.41-1.41z"></path></svg>New row',v(e,"class","!flex-none gr-button group")},m(a,i){R(a,e,i),l||(t=U(e,"click",r[43]),l=!0)},p:le,d(a){a&&q(e),l=!1,t()}}}function ze(r){let e,l,t;return{c(){e=E("button"),e.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="mr-1 group-hover:text-orange-500" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path fill="currentColor" d="m18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z"></path></svg>
					New column`,v(e,"class","!flex-none gr-button group")},m(a,i){R(a,e,i),l||(t=U(e,"click",r[23]),l=!0)},p:le,d(a){a&&q(e),l=!1,t()}}}function kl(r){let e,l,t,a,i,g,h,o,u,_=r[1]&&r[1].length!==0&&Ce(r);function y(f){r[41](f)}let d={flex:!1,center:!1,boundedheight:!1,disable_click:!0,$$slots:{default:[pl]},$$scope:{ctx:r}};r[14]!==void 0&&(d.dragging=r[14]),a=new dl({props:d}),J.push(()=>$(a,"dragging",y)),a.$on("load",r[42]);let b=r[4]&&Se(r);return{c(){e=E("div"),_&&_.c(),l=j(),t=E("div"),X(a.$$.fragment),g=j(),b&&b.c(),v(t,"class","scroll-hide overflow-hidden rounded-lg relative border transition-colors overflow-x-scroll"),D(t,"border-green-400",r[14]),D(t,"whitespace-nowrap",!r[5]),D(e,"mt-6",r[1]&&r[1].length!==0)},m(f,A){R(f,e,A),_&&_.m(e,null),T(e,l),T(e,t),G(a,t,null),T(e,g),b&&b.m(e,null),h=!0,o||(u=[U(window,"click",r[24]),U(window,"touchstart",r[24])],o=!0)},p(f,A){f[1]&&f[1].length!==0?_?_.p(f,A):(_=Ce(f),_.c(),_.m(e,l)):_&&(_.d(1),_=null);const O={};A[0]&32707|A[1]&536870912&&(O.$$scope={dirty:A,ctx:f}),!i&&A[0]&16384&&(i=!0,O.dragging=f[14],ee(()=>i=!1)),a.$set(O),A[0]&16384&&D(t,"border-green-400",f[14]),A[0]&32&&D(t,"whitespace-nowrap",!f[5]),f[4]?b?b.p(f,A):(b=Se(f),b.c(),b.m(e,null)):b&&(b.d(1),b=null),A[0]&2&&D(e,"mt-6",f[1]&&f[1].length!==0)},i(f){h||(P(a.$$.fragment,f),h=!0)},o(f){V(a.$$.fragment,f),h=!1},d(f){f&&q(e),_&&_.d(),I(a),b&&b.d(),o=!1,ge(u)}}}function wl(r,e){return e.filter(l);function l(t){var a=-1;return r.split(`
`).every(i);function i(g){if(!g)return!0;var h=g.split(t).length;return a<0&&(a=h),a===h&&h>1}}}function yl(r){const e=atob(r.split(",")[1]),l=r.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(e.length),a=new Uint8Array(t);for(let i=0;i<e.length;i++)a[i]=e.charCodeAt(i);return new Blob([t],{type:l})}function vl(r,e,l){let{datatype:t}=e,{label:a=null}=e,{headers:i=[]}=e,{values:g=[[]]}=e,{col_count:h}=e,{row_count:o}=e,{editable:u=!0}=e,{wrap:_=!1}=e;const y=Fe();let d=!1,b=!1,f={};function A(n){let c=n||[];if(h[1]==="fixed"&&c.length<h[0]){const m=Array(h[0]-c.length).fill("").map((w,L)=>`${L+c.length}`);c=c.concat(m)}return!c||c.length===0?Array(h[0]).fill(0).map((m,w)=>{const L=`h-${w}`;return l(10,f[L]={cell:null,input:null},f),{id:L,value:JSON.stringify(w+1)}}):c.map((m,w)=>{const L=`h-${w}`;return l(10,f[L]={cell:null,input:null},f),{id:L,value:m??""}})}function O(n){const c=n.length>0?n.length:o[0];return Array(o[1]==="fixed"||c<o[0]?o[0]:c).fill(0).map((m,w)=>Array(h[1]==="fixed"?h[0]:n[0].length).fill(0).map((L,B)=>{var F,K;const x=`${w}-${B}`;return l(10,f[x]={input:null,cell:null},f),{value:(K=(F=n?.[w])==null?void 0:F[B])!=null?K:"",id:x}}))}let s=A(i),k;async function M(){var n,c,m,w;typeof d=="string"?(await Y(),(c=(n=f[d])==null?void 0:n.input)==null||c.focus()):typeof b=="string"&&(await Y(),(w=(m=f[b])==null?void 0:m.input)==null||w.focus())}let p=[[]],H;function N(n,c,m){if(!c)return"none";if(i[c]===n){if(m==="asc")return"ascending";if(m==="des")return"descending"}}function S(n){return p.reduce((c,m,w)=>{const L=m.reduce((B,F,K)=>n===F.id?K:B,-1);return L===-1?c:[w,L]},[-1,-1])}async function C(n,c){if(!u||d===n)return;if(c){const[w,L]=S(n);l(9,p[w][L].value="",p)}l(6,d=n),await Y();const{input:m}=f[n];m?.focus()}async function W(n,c,m,w){var L;let B;switch(n.key){case"ArrowRight":if(d)break;n.preventDefault(),B=p[c][m+1],l(7,b=B?B.id:b);break;case"ArrowLeft":if(d)break;n.preventDefault(),B=p[c][m-1],l(7,b=B?B.id:b);break;case"ArrowDown":if(d)break;n.preventDefault(),B=p[c+1],l(7,b=B?B[m].id:b);break;case"ArrowUp":if(d)break;n.preventDefault(),B=p[c-1],l(7,b=B?B[m].id:b);break;case"Escape":if(!u)break;n.preventDefault(),l(7,b=d),l(6,d=!1);break;case"Enter":if(!u)break;if(n.preventDefault(),n.shiftKey){re(c),await Y();const[rl]=S(w);l(7,b=p[rl+1][m].id)}else d===w?l(6,d=!1):C(w);break;case"Backspace":if(!u)break;d||(n.preventDefault(),l(9,p[c][m].value="",p));break;case"Delete":if(!u)break;d||(n.preventDefault(),l(9,p[c][m].value="",p));break;case"Tab":let F=n.shiftKey?-1:1,K=p[c][m+F],x=(L=p?.[c+F])==null?void 0:L[F>0?0:s.length-1],ie=K||x;ie&&(n.preventDefault(),l(7,b=ie?ie.id:b)),l(6,d=!1);break;default:(!d||d&&d!==w)&&n.key.length===1&&C(w,!0);break}}async function me(n){d!==n&&b!==n&&(l(6,d=!1),l(7,b=n))}async function pe(n,c){var m,w;if(c==="edit"&&typeof n=="string"&&(await Y(),(m=f[n].input)==null||m.focus()),c==="edit"&&typeof n=="boolean"&&typeof b=="string"){let L=(w=f[b])==null?void 0:w.cell;await Y(),L?.focus()}if(c==="select"&&typeof n=="string"){const{cell:L}=f[n];await Y(),L?.focus()}}let Z,Q;function Ye(n,c){c==="asc"?l(9,p=p.sort((m,w)=>m[n].value<w[n].value?-1:1)):c==="des"&&l(9,p=p.sort((m,w)=>m[n].value>w[n].value?-1:1))}function ke(n){typeof Q!="number"||Q!==n?(l(11,Z="asc"),l(12,Q=n)):Z==="asc"?l(11,Z="des"):Z==="des"&&l(11,Z="asc"),Ye(n,Z)}let z;function we(){var n;if(typeof b=="string"){const c=(n=f[b].input)==null?void 0:n.value;if(s.find(m=>m.id===b)){let m=s.find(w=>w.id===b);c&&(m.value=c)}else c&&s.push({id:b,value:c})}}async function ne(n,c){var m,w;!u||h[1]!=="dynamic"||d===n||(l(13,z=n),await Y(),(m=f[n].input)==null||m.focus(),c&&((w=f[n].input)==null||w.select()))}function je(n){if(u)switch(n.key){case"Escape":case"Enter":case"Tab":n.preventDefault(),l(7,b=z),l(13,z=!1),we();break}}function re(n){o[1]==="dynamic"&&(p.splice(n?n+1:p.length,0,Array(p[0].length).fill(0).map((c,m)=>{const w=`${p.length}-${m}`;return l(10,f[w]={cell:null,input:null},f),{id:w,value:""}})),l(9,p),l(27,g),l(29,H),l(26,i))}async function Ke(){if(h[1]!=="dynamic")return;for(let c=0;c<p.length;c++){const m=`${c}-${p[c].length}`;l(10,f[m]={cell:null,input:null},f),p[c].push({id:m,value:""})}const n=`h-${s.length}`;l(10,f[n]={cell:null,input:null},f),s.push({id:n,value:`Header ${s.length+1}`}),l(9,p),l(27,g),l(29,H),l(26,i),l(8,s),l(26,i),l(28,k),l(27,g),await Y(),ne(n,!0)}function Pe(n){var c,m;typeof d=="string"&&f[d]&&f[d].cell!==n.target&&!((c=f[d].cell)!=null&&c.contains(n?.target))&&l(6,d=!1),typeof z=="string"&&f[z]&&f[z].cell!==n.target&&!((m=f[z].cell)!=null&&m.contains(n.target))&&(l(7,b=z),l(13,z=!1),we(),l(13,z=!1))}function ye(n){const c=new FileReader;function m(w){var L;if(!((L=w?.target)!=null&&L.result)||typeof w.target.result!="string")return;const[B]=wl(w.target.result,[",","	"]),[F,...K]=cl(B).parseRows(w.target.result);l(8,s=A(h[1]==="fixed"?F.slice(0,h[0]):F)),l(27,g=K),c.removeEventListener("loadend",m)}c.addEventListener("loadend",m),c.readAsText(n)}let ae=!1;function Ve(n,c){r.$$.not_equal(f[c].input,n)&&(f[c].input=n,l(10,f))}const We=n=>ne(n),Ze=n=>ke(n);function Je(n,c){J[n?"unshift":"push"](()=>{f[c].cell=n,l(10,f)})}function Xe(n,c,m,w){m[w].value=n,l(9,p),l(27,g),l(29,H),l(26,i)}function Ge(n,c){r.$$.not_equal(f[c].input,n)&&(f[c].input=n,l(10,f))}function Ie(n,c){J[n?"unshift":"push"](()=>{f[c].cell=n,l(10,f)})}const Qe=n=>C(n),xe=n=>me(n),$e=n=>C(n),el=(n,c,m,w)=>W(w,n,c,m);function ll(n){ae=n,l(14,ae)}const tl=n=>ye(yl(n.detail.data)),nl=()=>re();return r.$$set=n=>{"datatype"in n&&l(0,t=n.datatype),"label"in n&&l(1,a=n.label),"headers"in n&&l(26,i=n.headers),"values"in n&&l(27,g=n.values),"col_count"in n&&l(2,h=n.col_count),"row_count"in n&&l(3,o=n.row_count),"editable"in n&&l(4,u=n.editable),"wrap"in n&&l(5,_=n.wrap)},r.$$.update=()=>{r.$$.dirty[0]&201326592&&(g&&!Array.isArray(g)?(l(26,i=g.headers),l(27,g=g.data.length===0?[Array(i.length).fill("")]:g.data)):g===null?l(27,g=[Array(i.length).fill("")]):(l(27,g),l(26,i))),r.$$.dirty[0]&335544320&&(te(i,k)||(l(8,s=A(i)),l(28,k=i),M())),r.$$.dirty[0]&671088640&&(te(g,H)||(l(9,p=O(g)),l(29,H=g),M())),r.$$.dirty[0]&768&&s&&y("change",{data:p.map(n=>n.map(({value:c})=>c)),headers:s.map(n=>n.value)}),r.$$.dirty[0]&64&&pe(d,"edit"),r.$$.dirty[0]&128&&pe(b,"select")},[t,a,h,o,u,_,d,b,s,p,f,Z,Q,z,ae,N,C,W,me,ke,ne,je,re,Ke,Pe,ye,i,g,k,H,Ve,We,Ze,Je,Xe,Ge,Ie,Qe,xe,$e,el,ll,tl,nl]}class Al extends de{constructor(e){super(),ce(this,e,vl,kl,_e,{datatype:0,label:1,headers:26,values:27,col_count:2,row_count:3,editable:4,wrap:5},null,[-1,-1])}}function Dl(r){let e,l,t,a,i;const g=[r[10]];let h={};for(let o=0;o<g.length;o+=1)h=al(h,g[o]);return l=new il({props:h}),a=new Al({props:{label:r[7],row_count:r[6],col_count:r[5],values:r[0],headers:r[1],editable:r[4]==="dynamic",wrap:r[8],datatype:r[9]}}),a.$on("change",r[12]),{c(){e=E("div"),X(l.$$.fragment),t=j(),X(a.$$.fragment),v(e,"id",r[2]),v(e,"class","relative overflow-hidden"),D(e,"!hidden",!r[3])},m(o,u){R(o,e,u),G(l,e,null),T(e,t),G(a,e,null),i=!0},p(o,[u]){const _=u&1024?ul(g,[sl(o[10])]):{};l.$set(_);const y={};u&128&&(y.label=o[7]),u&64&&(y.row_count=o[6]),u&32&&(y.col_count=o[5]),u&1&&(y.values=o[0]),u&2&&(y.headers=o[1]),u&16&&(y.editable=o[4]==="dynamic"),u&256&&(y.wrap=o[8]),u&512&&(y.datatype=o[9]),a.$set(y),(!i||u&4)&&v(e,"id",o[2]),u&8&&D(e,"!hidden",!o[3])},i(o){i||(P(l.$$.fragment,o),P(a.$$.fragment,o),i=!0)},o(o){V(l.$$.fragment,o),V(a.$$.fragment,o),i=!1},d(o){o&&q(e),I(l),I(a)}}}function Ll(r,e,l){let{headers:t=[]}=e,{elem_id:a=""}=e,{visible:i=!0}=e,{value:g={data:[["","",""]],headers:["1","2","3"]}}=e,{mode:h}=e,{col_count:o}=e,{row_count:u}=e,{label:_=null}=e,{wrap:y}=e,{datatype:d}=e;const b=Fe();let{loading_status:f}=e;async function A(s){l(0,g=s),await Y(),b("change",s)}const O=({detail:s})=>A(s);return r.$$set=s=>{"headers"in s&&l(1,t=s.headers),"elem_id"in s&&l(2,a=s.elem_id),"visible"in s&&l(3,i=s.visible),"value"in s&&l(0,g=s.value),"mode"in s&&l(4,h=s.mode),"col_count"in s&&l(5,o=s.col_count),"row_count"in s&&l(6,u=s.row_count),"label"in s&&l(7,_=s.label),"wrap"in s&&l(8,y=s.wrap),"datatype"in s&&l(9,d=s.datatype),"loading_status"in s&&l(10,f=s.loading_status)},[g,t,a,i,h,o,u,_,y,d,f,A,O]}class Ml extends de{constructor(e){super(),ce(this,e,Ll,Dl,_e,{headers:1,elem_id:2,visible:3,value:0,mode:4,col_count:5,row_count:6,label:7,wrap:8,datatype:9,loading_status:10})}}var Cl=Ml;const Hl=["static","dynamic"],Rl=r=>{var e;return{type:" { data: Array<Array<string | number>>; headers: Array<string> }",description:"hex color code",example_data:(e=r.value)!=null?e:"#000000"}};export{Cl as Component,Rl as document,Hl as modes};
