import{_ as vt,a as bt,b as Ee,i as Lt,S as nt,c as $,d as Or,E as Bt,e as Dr,f as zt,g as _r,h as Mt,j as He,k as kr,l as Fr,r as h,m as f,P as w,n as ze,s as W,o as Cr,w as ot,p as pe,I as Nt,q as Ut,B as $e,t as Ir,u as Vt,v as Wt,R as N,x as Ar,y as Xe,T as Ge,z as $r,A as Tr,C as Lr,D as Br,U as zr,F as Mr,G as Nr,H as Ur,J as Vr}from"./index-00cfa2a7.js";var Ht={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ye={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=Ye.delegate;return o?.setTimeout?o.setTimeout.apply(o,vt([e,t],bt(r))):setTimeout.apply(void 0,vt([e,t],bt(r)))},clearTimeout:function(e){var t=Ye.delegate;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Xt(e){Ye.setTimeout(function(){throw e})}function Ke(){}function Ce(e){e()}var it=function(e){Ee(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Lt(r)&&r.add(n)):n.destination=Gr,n}return t.create=function(r,n,o){return new Je(r,n,o)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(nt),Wr=Function.prototype.bind;function qe(e,t){return Wr.call(e,t)}var Hr=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){_e(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){_e(n)}else _e(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){_e(r)}},e}(),Je=function(e){Ee(t,e);function t(r,n,o){var i=e.call(this)||this,a;if($(r)||!r)a={next:r??void 0,error:n??void 0,complete:o??void 0};else{var s;i&&Ht.useDeprecatedNextContext?(s=Object.create(r),s.unsubscribe=function(){return i.unsubscribe()},a={next:r.next&&qe(r.next,s),error:r.error&&qe(r.error,s),complete:r.complete&&qe(r.complete,s)}):a=r}return i.destination=new Hr(a),i}return t}(it);function _e(e){Xt(e)}function Xr(e){throw e}var Gr={closed:!0,next:Ke,error:Xr,complete:Ke},at=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function qr(e){return e}function Qr(e){return e.length===0?qr:e.length===1?e[0]:function(r){return e.reduce(function(n,o){return o(n)},r)}}var U=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var o=this,i=Kr(t)?t:new Je(t,r,n);return Ce(function(){var a=o,s=a.operator,c=a.source;i.add(s?s.call(i,c):c?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=xt(r),new r(function(o,i){var a=new Je({next:function(s){try{t(s)}catch(c){i(c),a.unsubscribe()}},error:i,complete:o});n.subscribe(a)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[at]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Qr(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=xt(t),new t(function(n,o){var i;r.subscribe(function(a){return i=a},function(a){return o(a)},function(){return n(i)})})},e.create=function(t){return new e(t)},e}();function xt(e){var t;return(t=e??Ht.Promise)!==null&&t!==void 0?t:Promise}function Yr(e){return e&&$(e.next)&&$(e.error)&&$(e.complete)}function Kr(e){return e&&e instanceof it||Yr(e)&&Lt(e)}function Jr(e){return $(e?.lift)}function ge(e){return function(t){if(Jr(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(e,t,r,n,o){return new Zr(e,t,r,n,o)}var Zr=function(e){Ee(t,e);function t(r,n,o,i,a,s){var c=e.call(this,r)||this;return c.onFinalize=a,c.shouldUnsubscribe=s,c._next=n?function(u){try{n(u)}catch(d){r.error(d)}}:e.prototype._next,c._error=i?function(u){try{i(u)}catch(d){r.error(d)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(u){r.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(it),en=Or(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ie=function(e){Ee(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new wt(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new en},t.prototype.next=function(r){var n=this;Ce(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=zt(n.currentObservers),s=a.next();!s.done;s=a.next()){var c=s.value;c.next(r)}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var n=this;Ce(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var o=n.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;Ce(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,o=this,i=o.hasError,a=o.isStopped,s=o.observers;return i||a?Bt:(this.currentObservers=null,s.push(r),new nt(function(){n.currentObservers=null,Dr(s,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,o=n.hasError,i=n.thrownError,a=n.isStopped;o?r.error(i):a&&r.complete()},t.prototype.asObservable=function(){var r=new U;return r.source=this,r},t.create=function(r,n){return new wt(r,n)},t}(U),wt=function(e){Ee(t,e);function t(r,n){var o=e.call(this)||this;return o.destination=r,o.source=n,o}return t.prototype.next=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,r)},t.prototype.error=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&o!==void 0?o:Bt},t}(Ie);function tn(e){return e&&$(e.schedule)}function rn(e){return e[e.length-1]}function nn(e){return tn(rn(e))?e.pop():void 0}var Gt=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function qt(e){return $(e?.then)}function Qt(e){return $(e[at])}function Yt(e){return Symbol.asyncIterator&&$(e?.[Symbol.asyncIterator])}function Kt(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function on(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Jt=on();function Zt(e){return $(e?.[Jt])}function er(e){return _r(this,arguments,function(){var r,n,o,i;return Mt(this,function(a){switch(a.label){case 0:r=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,He(r.read())];case 3:return n=a.sent(),o=n.value,i=n.done,i?[4,He(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,He(o)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function tr(e){return $(e?.getReader)}function ce(e){if(e instanceof U)return e;if(e!=null){if(Qt(e))return an(e);if(Gt(e))return sn(e);if(qt(e))return un(e);if(Yt(e))return rr(e);if(Zt(e))return cn(e);if(tr(e))return ln(e)}throw Kt(e)}function an(e){return new U(function(t){var r=e[at]();if($(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sn(e){return new U(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function un(e){return new U(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,Xt)})}function cn(e){return new U(function(t){var r,n;try{for(var o=zt(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(t.next(a),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()})}function rr(e){return new U(function(t){fn(e,t).catch(function(r){return t.error(r)})})}function ln(e){return rr(er(e))}function fn(e,t){var r,n,o,i;return kr(this,void 0,void 0,function(){var a,s;return Mt(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),r=Fr(e),c.label=1;case 1:return[4,r.next()];case 2:if(n=c.sent(),!!n.done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),o={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function J(e,t,r,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=t.schedule(function(){r(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}function nr(e,t){return t===void 0&&(t=0),ge(function(r,n){r.subscribe(me(n,function(o){return J(n,e,function(){return n.next(o)},t)},function(){return J(n,e,function(){return n.complete()},t)},function(o){return J(n,e,function(){return n.error(o)},t)}))})}function or(e,t){return t===void 0&&(t=0),ge(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function dn(e,t){return ce(e).pipe(or(t),nr(t))}function pn(e,t){return ce(e).pipe(or(t),nr(t))}function hn(e,t){return new U(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}function mn(e,t){return new U(function(r){var n;return J(r,t,function(){n=e[Jt](),J(r,t,function(){var o,i,a;try{o=n.next(),i=o.value,a=o.done}catch(s){r.error(s);return}a?r.complete():r.next(i)},0,!0)}),function(){return $(n?.return)&&n.return()}})}function ir(e,t){if(!e)throw new Error("Iterable cannot be null");return new U(function(r){J(r,t,function(){var n=e[Symbol.asyncIterator]();J(r,t,function(){n.next().then(function(o){o.done?r.complete():r.next(o.value)})},0,!0)})})}function gn(e,t){return ir(er(e),t)}function yn(e,t){if(e!=null){if(Qt(e))return dn(e,t);if(Gt(e))return hn(e,t);if(qt(e))return pn(e,t);if(Yt(e))return ir(e,t);if(Zt(e))return mn(e,t);if(tr(e))return gn(e,t)}throw Kt(e)}function ar(e,t){return t?yn(e,t):ce(e)}function vn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=nn(e);return ar(e,r)}function bn(e,t){return ge(function(r,n){var o=0;r.subscribe(me(n,function(i){n.next(e.call(t,i,o++))}))})}function xn(e,t,r,n,o,i,a,s){var c=[],u=0,d=0,y=!1,E=function(){y&&!c.length&&!u&&t.complete()},x=function(S){return u<n?v(S):c.push(S)},v=function(S){i&&t.next(S),u++;var I=!1;ce(r(S,d++)).subscribe(me(t,function(R){o?.(R),i?x(R):t.next(R)},function(){I=!0},void 0,function(){if(I)try{u--;for(var R=function(){var O=c.shift();a?J(t,a,function(){return v(O)}):v(O)};c.length&&u<n;)R();E()}catch(O){t.error(O)}}))};return e.subscribe(me(t,x,function(){y=!0,E()})),function(){s?.()}}function sr(e,t,r){return r===void 0&&(r=1/0),$(t)?sr(function(n,o){return bn(function(i,a){return t(n,i,o,a)})(ce(e(n,o)))},r):(typeof t=="number"&&(r=t),ge(function(n,o){return xn(n,o,e,r)}))}function ur(e){return ge(function(t,r){var n=null,o=!1,i;n=t.subscribe(me(r,void 0,void 0,function(a){i=ce(e(a,ur(e)(t))),n?(n.unsubscribe(),n=null,i.subscribe(r)):o=!0})),o&&(n.unsubscribe(),n=null,i.subscribe(r))})}function wn(e){return ge(function(t,r){ce(e).subscribe(me(r,function(){return r.complete()},Ke)),!r.closed&&t.subscribe(r)})}const cr=e=>e.type?.startsWith("image")?"IMAGE":e.type?.startsWith("video")?"VIDEO":e.type?.startsWith("audio")?"AUDIO":e.name?.includes(".csv")?"CSV":e.name?.includes(".json")?"JSON":e.name?.includes(".jsonL")?"JSONL":"",Ae=e=>e?e.path?e.path:e.originFileObj?e.originFileObj?.webkitRelativePath??e.name:e.webkitRelativePath??e.name:"";function St(e){const t={};for(let o=0;o<e.length;o++){const i=cr(e[o]);t[i]?t[i]++:t[i]=1}let r="",n=0;for(const o in t)t[o]>n&&(r=o,n=t[o]);return r}const Sn=e=>e.reduce((t,r)=>(r.path&&t.push(r.path),r.originFileObj?.webkitRelativePath&&t.push(r.originFileObj?.webkitRelativePath),t),[]);function Qe(e){return{...e,path:e.path,originFileObj:e.file,name:e.name,size:e.size,type:e.type,lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,webkitRelativePath:e.webkitRelativePath}}function ye(e,t,r,n){function o(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function s(d){try{u(n.next(d))}catch(y){a(y)}}function c(d){try{u(n.throw(d))}catch(y){a(y)}}function u(d){d.done?i(d.value):o(d.value).then(s,c)}u((n=n.apply(e,t||[])).next())})}function ve(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(r=0)),r;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,o=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Pt(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],a;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return i}function Et(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var Pn=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function je(e,t){var r=En(e);if(typeof r.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(r,"path",{value:typeof t=="string"?t:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return r}function En(e){var t=e.name,r=t&&t.lastIndexOf(".")!==-1;if(r&&!e.type){var n=t.split(".").pop().toLowerCase(),o=Pn.get(n);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var jn=[".DS_Store","Thumbs.db"];function Rn(e){return ye(this,void 0,void 0,function(){return ve(this,function(t){return Te(e)&&On(e.dataTransfer)?[2,Fn(e.dataTransfer,e.type)]:Dn(e)?[2,_n(e)]:Array.isArray(e)&&e.every(function(r){return"getFile"in r&&typeof r.getFile=="function"})?[2,kn(e)]:[2,[]]})})}function On(e){return Te(e)}function Dn(e){return Te(e)&&Te(e.target)}function Te(e){return typeof e=="object"&&e!==null}function _n(e){return Ze(e.target.files).map(function(t){return je(t)})}function kn(e){return ye(this,void 0,void 0,function(){var t;return ve(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return t=r.sent(),[2,t.map(function(n){return je(n)})]}})})}function Fn(e,t){return ye(this,void 0,void 0,function(){var r,n;return ve(this,function(o){switch(o.label){case 0:return e.items?(r=Ze(e.items).filter(function(i){return i.kind==="file"}),t!=="drop"?[2,r]:[4,Promise.all(r.map(Cn))]):[3,2];case 1:return n=o.sent(),[2,jt(lr(n))];case 2:return[2,jt(Ze(e.files).map(function(i){return je(i)}))]}})})}function jt(e){return e.filter(function(t){return jn.indexOf(t.name)===-1})}function Ze(e){if(e===null)return[];for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n)}return t}function Cn(e){if(typeof e.webkitGetAsEntry!="function")return Rt(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?fr(t):Rt(e)}function lr(e){return e.reduce(function(t,r){return Et(Et([],Pt(t),!1),Pt(Array.isArray(r)?lr(r):[r]),!1)},[])}function Rt(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var r=je(t);return Promise.resolve(r)}function In(e){return ye(this,void 0,void 0,function(){return ve(this,function(t){return[2,e.isDirectory?fr(e):An(e)]})})}function fr(e){var t=e.createReader();return new Promise(function(r,n){var o=[];function i(){var a=this;t.readEntries(function(s){return ye(a,void 0,void 0,function(){var c,u,d;return ve(this,function(y){switch(y.label){case 0:if(s.length)return[3,5];y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return c=y.sent(),r(c),[3,4];case 3:return u=y.sent(),n(u),[3,4];case 4:return[3,6];case 5:d=Promise.all(s.map(In)),o.push(d),i(),y.label=6;case 6:return[2]}})})},function(s){n(s)})}i()})}function An(e){return ye(this,void 0,void 0,function(){return ve(this,function(t){return[2,new Promise(function(r,n){e.file(function(o){var i=je(o,e.fullPath);r(i)},function(o){n(o)})})]})})}var $n=function(e,t){if(e&&t){var r=Array.isArray(t)?t:t.split(","),n=e.name||"",o=(e.type||"").toLowerCase(),i=o.replace(/\/.*$/,"");return r.some(function(a){var s=a.trim().toLowerCase();return s.charAt(0)==="."?n.toLowerCase().endsWith(s):s.endsWith("/*")?i===s.replace(/\/.*$/,""):o===s})}return!0};const Tn="file-invalid-type",Ln="file-too-large",Bn="file-too-small",zn="too-many-files",Mn=e=>{e=Array.isArray(e)&&e.length===1?e[0]:e;const t=Array.isArray(e)?`one of ${e.join(", ")}`:e;return{code:Tn,message:`File type must be ${t}`}},Ot=e=>({code:Ln,message:`File is larger than ${e} ${e===1?"byte":"bytes"}`}),Dt=e=>({code:Bn,message:`File is smaller than ${e} ${e===1?"byte":"bytes"}`}),Nn={code:zn,message:"Too many files"};function dr(e,t){const r=e.type==="application/x-moz-file"||$n(e,t);return[r,r?null:Mn(t)]}function pr(e,t,r){if(ae(e.size))if(ae(t)&&ae(r)){if(e.size>r)return[!1,Ot(r)];if(e.size<t)return[!1,Dt(t)]}else{if(ae(t)&&e.size<t)return[!1,Dt(t)];if(ae(r)&&e.size>r)return[!1,Ot(r)]}return[!0,null]}function ae(e){return e!=null}function Un({files:e,accept:t,minSize:r,maxSize:n,multiple:o,maxFiles:i,validator:a}){return!o&&e.length>1||o&&i>=1&&e.length>i?!1:e.every(s=>{const[c]=dr(s,t),[u]=pr(s,r,n),d=a?a(s):null;return c&&u&&!d})}function Le(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function ke(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,t=>t==="Files"||t==="application/x-moz-file"):!!e.target&&!!e.target.files}function _t(e){e.preventDefault()}function Vn(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Wn(e){return e.indexOf("Edge/")!==-1}function Hn(e=window.navigator.userAgent){return Vn(e)||Wn(e)}function H(...e){return(t,...r)=>e.some(n=>(!Le(t)&&n&&n(t,...r),Le(t)))}function Xn(){return"showOpenFilePicker"in window}function Gn(e){return ae(e)?[{description:"Files",accept:Object.entries(e).filter(([r,n])=>{let o=!0;return hr(r)||(console.warn(`Skipped "${r}" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.`),o=!1),(!Array.isArray(n)||!n.every(mr))&&(console.warn(`Skipped "${r}" because an invalid file extension was provided.`),o=!1),o}).reduce((r,[n,o])=>({...r,[n]:o}),{})}]:e}function qn(e){if(ae(e))return Object.entries(e).reduce((t,[r,n])=>[...t,r,...n],[]).filter(t=>hr(t)||mr(t)).join(",")}function Qn(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Yn(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function hr(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function mr(e){return/^.*\.[\w]+$/.test(e)}const st=h.forwardRef(({children:e,...t},r)=>{const{open:n,...o}=yr(t);return h.useImperativeHandle(r,()=>({open:n}),[n]),f.jsx(h.Fragment,{children:e({...o,open:n})})});st.displayName="Dropzone";const gr={disabled:!1,getFilesFromEvent:Rn,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};st.defaultProps=gr;st.propTypes={children:w.func,accept:w.objectOf(w.arrayOf(w.string)),multiple:w.bool,preventDropOnDocument:w.bool,noClick:w.bool,noKeyboard:w.bool,noDrag:w.bool,noDragEventsBubbling:w.bool,minSize:w.number,maxSize:w.number,maxFiles:w.number,disabled:w.bool,getFilesFromEvent:w.func,onFileDialogCancel:w.func,onFileDialogOpen:w.func,useFsAccessApi:w.bool,autoFocus:w.bool,onDragEnter:w.func,onDragLeave:w.func,onDragOver:w.func,onDrop:w.func,onDropAccepted:w.func,onDropRejected:w.func,onError:w.func,validator:w.func};const et={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function yr(e={}){const{accept:t,disabled:r,getFilesFromEvent:n,maxSize:o,minSize:i,multiple:a,maxFiles:s,onDragEnter:c,onDragLeave:u,onDragOver:d,onDrop:y,onDropAccepted:E,onDropRejected:x,onFileDialogCancel:v,onFileDialogOpen:S,useFsAccessApi:I,autoFocus:R,preventDropOnDocument:O,noClick:T,noKeyboard:L,noDrag:X,noDragEventsBubbling:B,onError:q,validator:G}={...gr,...e},z=h.useMemo(()=>qn(t),[t]),ee=h.useMemo(()=>Gn(t),[t]),Q=h.useMemo(()=>typeof S=="function"?S:kt,[S]),Y=h.useMemo(()=>typeof v=="function"?v:kt,[v]),j=h.useRef(null),_=h.useRef(null),[le,k]=h.useReducer(Kn,et),{isFocused:be,isFileDialogActive:te}=le,K=h.useRef(typeof window<"u"&&window.isSecureContext&&I&&Xn()),p=()=>{!K.current&&te&&setTimeout(()=>{if(_.current){const{files:l}=_.current;l.length||(k({type:"closeDialog"}),Y())}},300)};h.useEffect(()=>(window.addEventListener("focus",p,!1),()=>{window.removeEventListener("focus",p,!1)}),[_,te,Y,K]);const m=h.useRef([]),b=l=>{j.current&&j.current.contains(l.target)||(l.preventDefault(),m.current=[])};h.useEffect(()=>(O&&(document.addEventListener("dragover",_t,!1),document.addEventListener("drop",b,!1)),()=>{O&&(document.removeEventListener("dragover",_t),document.removeEventListener("drop",b))}),[j,O]),h.useEffect(()=>(!r&&R&&j.current&&j.current.focus(),()=>{}),[j,R,r]);const P=h.useCallback(l=>{q?q(l):console.error(l)},[q]),F=h.useCallback(l=>{l.preventDefault(),l.persist(),De(l),m.current=[...m.current,l.target],ke(l)&&Promise.resolve(n(l)).then(g=>{if(Le(l)&&!B)return;const D=g.length,C=D>0&&Un({files:g,accept:z,minSize:i,maxSize:o,multiple:a,maxFiles:s,validator:G}),M=D>0&&!C;k({isDragAccept:C,isDragReject:M,isDragActive:!0,type:"setDraggedFiles"}),c&&c(l)}).catch(g=>P(g))},[n,c,P,B,z,i,o,a,s,G]),fe=h.useCallback(l=>{l.preventDefault(),l.persist(),De(l);const g=ke(l);if(g&&l.dataTransfer)try{l.dataTransfer.dropEffect="copy"}catch{}return g&&d&&d(l),!1},[d,B]),re=h.useCallback(l=>{l.preventDefault(),l.persist(),De(l);const g=m.current.filter(C=>j.current&&j.current.contains(C)),D=g.indexOf(l.target);D!==-1&&g.splice(D,1),m.current=g,!(g.length>0)&&(k({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),ke(l)&&u&&u(l))},[j,u,B]),ne=h.useCallback((l,g)=>{const D=[],C=[];l.forEach(M=>{const[Ne,Ue]=dr(M,z),[Ve,We]=pr(M,i,o),we=G?G(M):null;if(Ne&&Ve&&!we)D.push(M);else{let Se=[Ue,We];we&&(Se=Se.concat(we)),C.push({file:M,errors:Se.filter(Rr=>Rr)})}}),(!a&&D.length>1||a&&s>=1&&D.length>s)&&(D.forEach(M=>{C.push({file:M,errors:[Nn]})}),D.splice(0)),k({acceptedFiles:D,fileRejections:C,type:"setFiles"}),y&&y(D,C,g),C.length>0&&x&&x(C,g),D.length>0&&E&&E(D,g)},[k,a,z,i,o,s,y,E,x,G]),oe=h.useCallback(l=>{l.preventDefault(),l.persist(),De(l),m.current=[],ke(l)&&Promise.resolve(n(l)).then(g=>{Le(l)&&!B||ne(g,l)}).catch(g=>P(g)),k({type:"reset"})},[n,ne,P,B]),A=h.useCallback(()=>{if(K.current){k({type:"openDialog"}),Q();const l={multiple:a,types:ee};window.showOpenFilePicker(l).then(g=>n(g)).then(g=>{ne(g,null),k({type:"closeDialog"})}).catch(g=>{Qn(g)?(Y(g),k({type:"closeDialog"})):Yn(g)?(K.current=!1,_.current?(_.current.value=null,_.current.click()):P(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):P(g)});return}_.current&&(k({type:"openDialog"}),Q(),_.current.value=null,_.current.click())},[k,Q,Y,I,ne,P,ee,a]),Re=h.useCallback(l=>{!j.current||!j.current.isEqualNode(l.target)||(l.key===" "||l.key==="Enter"||l.keyCode===32||l.keyCode===13)&&(l.preventDefault(),A())},[j,A]),xe=h.useCallback(()=>{k({type:"focus"})},[]),ie=h.useCallback(()=>{k({type:"blur"})},[]),yt=h.useCallback(()=>{T||(Hn()?setTimeout(A,0):A())},[T,A]),de=l=>r?null:l,Me=l=>L?null:de(l),Oe=l=>X?null:de(l),De=l=>{B&&l.stopPropagation()},Pr=h.useMemo(()=>({refKey:l="ref",role:g,onKeyDown:D,onFocus:C,onBlur:M,onClick:Ne,onDragEnter:Ue,onDragOver:Ve,onDragLeave:We,onDrop:we,...Se}={})=>({onKeyDown:Me(H(D,Re)),onFocus:Me(H(C,xe)),onBlur:Me(H(M,ie)),onClick:de(H(Ne,yt)),onDragEnter:Oe(H(Ue,F)),onDragOver:Oe(H(Ve,fe)),onDragLeave:Oe(H(We,re)),onDrop:Oe(H(we,oe)),role:typeof g=="string"&&g!==""?g:"presentation",[l]:j,...!r&&!L?{tabIndex:0}:{},...Se}),[j,Re,xe,ie,yt,F,fe,re,oe,L,X,r]),Er=h.useCallback(l=>{l.stopPropagation()},[]),jr=h.useMemo(()=>({refKey:l="ref",onChange:g,onClick:D,...C}={})=>({...{accept:z,multiple:a,type:"file",style:{display:"none"},onChange:de(H(g,oe)),onClick:de(H(D,Er)),tabIndex:-1,[l]:_},...C}),[_,t,a,oe,r]);return{...le,isFocused:be&&!r,getRootProps:Pr,getInputProps:jr,rootRef:j,inputRef:_,open:de(A)}}function Kn(e,t){switch(t.type){case"focus":return{...e,isFocused:!0};case"blur":return{...e,isFocused:!1};case"openDialog":return{...et,isFileDialogActive:!0};case"closeDialog":return{...e,isFileDialogActive:!1};case"setDraggedFiles":return{...e,isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject};case"setFiles":return{...e,acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections};case"reset":return{...et};default:return e}}function kt(){}async function Jn(e,t){return(await ze.put("/api/v1/filestorage/signedurl",{files:e,pathPrefix:t})).data}async function Zn(e,t){return(await ze.delete("/api/v1/filestorage/file",{data:{files:e,pathPrefix:t}})).data}async function Ft(){return(await ze.get("/api/v1/filestorage/path/apply?flag=ds-build")).data}function eo({concurrent:e=4,onUpload:t,onDone:r,onError:n}){const o=h.useRef(new Ie),i=h.useRef(new Ie);return h.useEffect(()=>{const a=new nt,c=o.current.asObservable().pipe(sr(u=>ar(t(u)).pipe(ur(d=>vn(d))),e),wn(i.current)).subscribe({next:u=>{const d=u.config?.data;if(d){if(u instanceof Error){n?.(d,u);return}r?.(d)}}});return a.add(c),()=>{a.unsubscribe()}},[i.current]),{uploadQueue:o.current,cancel:()=>{i.current.next(),i.current.complete(),i.current=new Ie}}}var Z={small:"small",medium:"medium",large:"large"},Pe;function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ct(Object(r),!0).forEach(function(n){se(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vr(e){var t;return(t={},se(t,Z.small,"2px"),se(t,Z.medium,"4px"),se(t,Z.large,"8px"),t)[e]}var ut=W("div",function(e){return{width:"100%"}});ut.displayName="StyledRoot";ut.displayName="StyledRoot";var ct=W("div",function(e){var t=e.$theme,r=t.sizing;return{display:"flex",marginLeft:r.scale500,marginRight:r.scale500,marginTop:r.scale500,marginBottom:r.scale500}});ct.displayName="StyledBarContainer";ct.displayName="StyledBarContainer";var lt=W("div",function(e){var t=e.$theme,r=e.$size,n=e.$steps,o=t.colors,i=t.sizing,a=t.borders,s=a.useRoundedCorners?i.scale0:0;return ue({borderTopLeftRadius:s,borderTopRightRadius:s,borderBottomRightRadius:s,borderBottomLeftRadius:s,backgroundColor:Cr(o.progressbarTrackFill,"0.16"),height:vr(r),flex:1,overflow:"hidden"},n<2?{}:{marginLeft:i.scale300,":first-child":{marginLeft:"0"}})});lt.displayName="StyledBar";lt.displayName="StyledBar";var ft=W("div",function(e){var t=e.$theme,r=e.$value,n=e.$successValue,o=e.$steps,i=e.$index,a=e.$maxValue,s=e.$minValue,c=s===void 0?0:s,u=a||n,d=t.colors,y=t.sizing,E=t.borders,x="".concat(100-(r-c)*100/(u-c),"%"),v={default:"default",awaits:"awaits",inProgress:"inProgress",completed:"completed"},S=v.default;if(o>1){var I=(u-c)/o,R=(r-c)/(u-c)*100,O=Math.floor(R/I);i<O?S=v.completed:i===O?S=v.inProgress:S=v.awaits}var T=E.useRoundedCorners?y.scale0:0,L={transform:"translateX(-".concat(x,")")},X=S===v.inProgress?{animationDuration:"2.1s",animationIterationCount:"infinite",animationTimingFunction:t.animation.linearCurve,animationName:{"0%":{transform:"translateX(-102%)",opacity:1},"50%":{transform:"translateX(0%)",opacity:1},"100%":{transform:"translateX(0%)",opacity:0}}}:S===v.completed?{transform:"translateX(0%)"}:{transform:"translateX(-102%)"};return ue({borderTopLeftRadius:T,borderTopRightRadius:T,borderBottomRightRadius:T,borderBottomLeftRadius:T,backgroundColor:d.accent,height:"100%",width:"100%",transform:"translateX(-102%)",transition:"transform 0.5s"},o>1?X:L)});ft.displayName="StyledBarProgress";ft.displayName="StyledBarProgress";var dt=W("div",function(e){var t=e.$theme,r=e.$isLeft,n=r===void 0?!1:r,o=e.$size,i=o===void 0?Z.medium:o,a=t.colors,s=t.sizing,c=t.borders,u=c.useRoundedCorners?s.scale0:0,d=vr(i),y={display:"inline-block",flex:1,marginLeft:"auto",marginRight:"auto",transitionProperty:"background-position",animationDuration:"1.5s",animationIterationCount:"infinite",animationTimingFunction:t.animation.linearCurve,backgroundSize:"300% auto",backgroundRepeat:"no-repeat",backgroundPositionX:n?"-50%":"150%",backgroundImage:"linear-gradient(".concat(n?"90":"270","deg, transparent 0%, ").concat(a.accent," 25%, ").concat(a.accent," 75%, transparent 100%)"),animationName:n?{"0%":{backgroundPositionX:"-50%"},"33%":{backgroundPositionX:"50%"},"66%":{backgroundPositionX:"50%"},"100%":{backgroundPositionX:"150%"}}:{"0%":{backgroundPositionX:"150%"},"33%":{backgroundPositionX:"50%"},"66%":{backgroundPositionX:"50%"},"100%":{backgroundPositionX:"-50%"}}};return ue(ue({},n?{borderTopLeftRadius:u,borderBottomLeftRadius:u}:{borderTopRightRadius:u,borderBottomRightRadius:u}),{},{height:d},y)});dt.displayName="StyledInfiniteBar";dt.displayName="StyledInfiniteBar";var pt=W("div",function(e){return ue(ue({textAlign:"center"},e.$theme.typography.font150),{},{color:e.$theme.colors.contentTertiary})});pt.displayName="StyledLabel";pt.displayName="StyledLabel";var V=(Pe={},se(Pe,Z.large,{d:"M47.5 4H71.5529C82.2933 4 91 12.9543 91 24C91 35.0457 82.2933 44 71.5529 44H23.4471C12.7067 44 4 35.0457 4 24C4 12.9543 12.7067 4 23.4471 4H47.5195",width:95,height:48,strokeWidth:8,typography:"LabelLarge"}),se(Pe,Z.medium,{d:"M39 2H60.5833C69.0977 2 76 9.16344 76 18C76 26.8366 69.0977 34 60.5833 34H17.4167C8.90228 34 2 26.8366 2 18C2 9.16344 8.90228 2 17.4167 2H39.0195",width:78,height:36,strokeWidth:4,typography:"LabelMedium"}),se(Pe,Z.small,{d:"M32 1H51.6271C57.9082 1 63 6.37258 63 13C63 19.6274 57.9082 25 51.6271 25H12.3729C6.09181 25 1 19.6274 1 13C1 6.37258 6.09181 1 12.3729 1H32.0195",width:64,height:26,strokeWidth:2,typography:"LabelSmall"}),Pe),br=W("div",function(e){var t=e.$size,r=e.$inline;return{width:V[t].width+"px",height:V[t].height+"px",position:"relative",display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"}});br.displayName="StyledProgressBarRoundedRoot";br.displayName="StyledProgressBarRoundedRoot";var ht=W("svg",function(e){var t=e.$size;return{width:V[t].width+"px",height:V[t].height+"px",position:"absolute",fill:"none"}});ht.displayName="_StyledProgressBarRoundedSvg";ht.displayName="_StyledProgressBarRoundedSvg";ot(ht,function(e){return function(r){return f.jsx(e,{viewBox:"0 0 ".concat(V[r.$size].width," ").concat(V[r.$size].height),xmlns:"http://www.w3.org/2000/svg",...r})}});var mt=W("path",function(e){var t=e.$theme,r=e.$size;return{stroke:t.colors.backgroundTertiary,strokeWidth:V[r].strokeWidth+"px"}});mt.displayName="_StyledProgressBarRoundedTrackBackground";mt.displayName="_StyledProgressBarRoundedTrackBackground";ot(mt,function(e){return function(r){return f.jsx(e,{d:V[r.$size].d,...r})}});var gt=W("path",function(e){var t=e.$theme,r=e.$size,n=e.$visible,o=e.$pathLength,i=e.$pathProgress;return{visibility:n?"visible":"hidden",stroke:t.colors.borderAccent,strokeWidth:V[r].strokeWidth+"px",strokeDasharray:o,strokeDashoffset:o*(1-i)+""}});gt.displayName="_StyledProgressBarRoundedTrackForeground";gt.displayName="_StyledProgressBarRoundedTrackForeground";ot(gt,function(e){return function(r){return f.jsx(e,{d:V[r.$size].d,...r})}});var xr=W("div",function(e){var t=e.$theme,r=e.$size;return ue({color:t.colors.contentPrimary},t.typography[V[r].typography])});xr.displayName="StyledProgressBarRoundedText";xr.displayName="StyledProgressBarRoundedText";function tt(e){"@babel/helpers - typeof";return tt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(e)}var to=["overrides","getProgressLabel","value","size","steps","successValue","minValue","maxValue","showLabel","infinite","errorMessage","forwardedRef"];function he(e,t){return io(e)||oo(e,t)||no(e,t)||ro()}function ro(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function no(e,t){if(e){if(typeof e=="string")return It(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return It(e,t)}}function It(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oo(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,s;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(c){i=!0,s=c}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw s}}return n}}function io(e){if(Array.isArray(e))return e}function ao(e,t){if(e==null)return{};var r=so(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function so(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function At(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function co(e,t,r){return t&&At(e.prototype,t),r&&At(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},rt(e,t)}function fo(e){var t=mo();return function(){var n=Be(e),o;if(t){var i=Be(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return po(this,o)}}function po(e,t){if(t&&(tt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ho(e)}function ho(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Be(e)}function go(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wr=function(e){lo(r,e);var t=fo(r);function r(){return uo(this,r),t.apply(this,arguments)}return co(r,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var o=this.props,i=o.overrides,a=i===void 0?{}:i,s=o.getProgressLabel,c=o.value,u=o.size,d=o.steps,y=o.successValue,E=o.minValue,x=o.maxValue,v=o.showLabel,S=o.infinite,I=o.errorMessage,R=o.forwardedRef,O=ao(o,to),T=this.props["aria-label"]||this.props.ariaLabel,L=x!==100?x:y,X=pe(a.Root,ut),B=he(X,2),q=B[0],G=B[1],z=pe(a.BarContainer,ct),ee=he(z,2),Q=ee[0],Y=ee[1],j=pe(a.Bar,lt),_=he(j,2),le=_[0],k=_[1],be=pe(a.BarProgress,ft),te=he(be,2),K=te[0],p=te[1],m=pe(a.Label,pt),b=he(m,2),P=b[0],F=b[1],fe=pe(a.InfiniteBar,dt),re=he(fe,2),ne=re[0],oe=re[1],A={$infinite:S,$size:u,$steps:d,$successValue:L,$minValue:E,$maxValue:L,$value:c};function Re(){for(var xe=[],ie=0;ie<d;ie++)xe.push(f.jsx(le,{...A,...k,children:f.jsx(K,{$index:ie,...A,...p})},ie));return xe}return f.jsxs(q,{ref:R,"data-baseweb":"progress-bar",role:"progressbar","aria-label":T||s(c,L,E),"aria-valuenow":S?null:c,"aria-valuemin":S?null:E,"aria-valuemax":S?null:L,"aria-invalid":I?!0:null,"aria-errormessage":I,...O,...A,...G,children:[f.jsx(Q,{...A,...Y,children:S?f.jsxs(f.Fragment,{children:[f.jsx(ne,{$isLeft:!0,$size:A.$size,...oe}),f.jsx(ne,{$size:A.$size,...oe})]}):Re()}),v&&f.jsx(P,{...A,...F,children:s(c,L,E)})]})}}]),r}(h.Component);go(wr,"defaultProps",{getProgressLabel:function(t,r,n){return"".concat(Math.round((t-n)/(r-n)*100),"% Loaded")},infinite:!1,overrides:{},showLabel:!1,size:Z.medium,steps:1,successValue:100,minValue:0,maxValue:100,value:0});var Sr=h.forwardRef(function(e,t){return f.jsx(wr,{forwardedRef:t,...e})});Sr.displayName="ProgressBar";const yo=Sr,vo={BaseButton:{style:{marginLeft:"16px",backgroundColor:"transparent",color:" rgba(2,16,43,0.40);",":hover .icon-container":{color:"#D65E5E !important",backgroundColor:"transparent"},":focus":{color:"#D65E5E !important",backgroundColor:"transparent"}}}};function $t({percent:e=-1,file:t,onRemove:r}){const n=cr(t),o=Ae(t),i={IMAGE:"image",VIDEO:"video",AUDIO:"audio",CSV:"txt",JSON:"txt",JSONL:"txt"};return f.jsxs("div",{className:"ant-upload-list-item-container",children:[f.jsxs("div",{className:"ant-upload-list-item",children:[f.jsx("div",{className:"ant-upload-icon",children:f.jsx(Nt,{type:i[n]??"file2"})}),f.jsx("div",{className:"ant-upload-list-item-name",children:o}),f.jsx("div",{className:"ant-upload-list-item-size",children:Ut(t.size??0)}),f.jsx("div",{className:"ant-upload-list-item-actions",children:f.jsx($e,{as:"link",icon:"delete",onClick:()=>{r?.(t)},overrides:vo})})]}),e>=0&&f.jsx(yo,{value:e,overrides:{BarContainer:{style:{...Ir("0px","0px","0px","0px")}},BarProgress:{style:{height:"1px"}},Bar:{style:{height:"1px"}}}})]})}function bo(){const e=h.useRef(""),t=async()=>(e.current||(e.current=await Ft()),e.current);return h.useEffect(()=>{t()},[]),{getSign:t,resetSign:async()=>{e.current=await Ft()},signPrefix:e.current}}const xo=Vt({drag:{display:"flex",alignContent:"stretch",alignItems:"flex-start",flexDirection:"column",gap:"8px","& .ant-upload-drag":{backgroundColor:"#FAFBFC !important"},"& .ant-upload-btn":{height:"170px !important",alignItems:"center",justifyContent:"center",":hover":{border:"1px solid #5181E0; !important"}},"& .ant-upload-icon":{margin:"0 8px 0 12px"},"& .ant-upload-drag-icon":{color:"rgba(2,16,43,0.40) !important",marginBottom:"10px !important"},"& .ant-upload-text":{color:"rgba(2,16,43,0.40) !important",marginBottom:"30px !important",fontSize:"14px !important"},"& .ant-upload-action":{gap:"20px",display:"flex",justifyContent:"center",alignContent:"center"},"& .ant-upload-list":{maxHeight:"230px",width:"100%",overflow:"auto"},"& .ant-upload-list-item-container":{height:"32px !important",borderBottom:"1px solid #EEF1F6","&:hover":{backgroundColor:"#EBF1FF !important"}},"& .ant-upload-list-item":{height:"31px !important",display:"flex",alignItems:"center",marginTop:"0px !important",fontSize:"14px !important",paddingRight:"8px"},"& .ant-upload-list-item-name":{flex:1},"& .ant-upload-list-item-size":{color:" rgba(2,16,43,0.40)"}}}),wo={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:1,borderRadius:2,borderColor:"#CFD7E6;",borderStyle:"dashed",backgroundColor:"#fafbfc",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"},So={borderColor:"#5181E0"},Po={borderColor:"#5181E0"},Eo={borderColor:"#5181E0"},jo=1e3;function Ro({onChange:e}){const t=xo(),[r]=Wt(),{resetSign:n,signPrefix:o}=bo(),[i,a]=N.useState([]),[s,c]=N.useState([]),[u,d]=N.useState([]),[y,E]=N.useState([]),x=N.useMemo(()=>Ar.groupBy([...s,...y],"status"),[s,y]),v=N.useMemo(()=>i.length-y.length>jo,[i,y]),S=N.useCallback(p=>s.some(m=>m.path===Ae(p)),[s]),I=p=>v?(E(m=>[...m,{...p,status:"errorMax"}]),!1):S(p)?(E(m=>[...m,{...p,status:"errorExist"}]),!1):!0,{uploadQueue:R,cancel:O}=eo({onUpload:Xe(p=>{const m=ze.create();return d(b=>[...b,{...Qe(p.file),status:"uploading"}]),m({method:"PUT",url:p.oss,headers:{"Content-Type":"application/octet-stream","X-Requested-With":"XMLHttpRequest"},data:p.file,onUploadProgress:b=>(d(P=>{const F=P.findIndex(re=>re.path===p.file.path);if(F===-1)return[...P];const fe={...P[F],percent:100*(b.loaded/b.total)};return P.splice(F,1,fe),[...P]}),100*(b.loaded/b.total)),onDownloadProgress:b=>100*(b.loaded/b.total)})}),onDone:p=>{c(m=>[...m,{...Qe(p),status:"done"}]),d(m=>m.filter(b=>b.path!==p.path))},onError:p=>{E(m=>[...m,{...Qe(p),status:"errorUnknown"}]),d(m=>m.filter(b=>b.path!==p.path))}}),{getRootProps:T,getInputProps:L,isFocused:X,isDragAccept:B,isDragReject:q}=yr({onDrop:async p=>{const m=[];if(p.forEach(F=>{I(F)&&m.push(F)}),m.length===0)return;a(F=>[...F,...m]);const b=await Sn(m),P=await Jn(b,o);p.forEach(F=>{R.next({file:F,oss:P.signedUrls[F.path]})})}}),G=Xe(()=>{n(),a([]),c([]),E([]),d([]),O()}),z=Xe(async p=>{const m=Ae(p);await Zn([m],o),a(b=>b.filter(P=>P.path!==p.path)),c(b=>b.filter(P=>P.path!==p.path)),E(b=>b.filter(P=>P.path!==p.path))}),ee=N.useMemo(()=>s?.length?St(s):null,[s]),Q=s?.length??0,Y=Ut(s?.reduce((p,m)=>p+m.size,0)??0),j=p=>Ae(p),_=N.useMemo(()=>({...wo,...X?So:{},...B?Po:{},...q?Eo:{}}),[X,B,q]),le={},k=N.useMemo(()=>u.map(p=>f.jsx($t,{file:p,percent:p.percent,onRemove:z},p.path)),[u,z]),be=N.useMemo(()=>s.map(p=>f.jsx($t,{file:p,onRemove:z},p.path)),[s,z]),te=["done","success"].reduce((p,m)=>p+(x[m]?.length??0),0),K=["error","errorExist","errorMax","errorUnknown"].reduce((p,m)=>p+(x[m]?.length??0),0);return h.useEffect(()=>{const p=setTimeout(()=>{if(!i?.every(P=>P.status!=="uploading"))return;const b=s?St(s):"";e?.({storagePath:o,type:b})},1e3);return()=>{clearTimeout(p)}},[i,s,o]),f.jsxs("div",{className:t.drag,children:[f.jsxs("div",{...T({className:"dropzone ant-upload-btn"}),style:{..._,width:"100%",flexShrink:0,flexBasis:"auto"},children:[f.jsx("input",{...L(),multiple:!0,...le}),f.jsx("p",{children:r("dataset.create.upload.drag.desc")})]}),(Q>0||u.length>0)&&f.jsx("div",{style:{display:"flex",width:"100%",flex:1,justifyContent:"flex-end"},children:f.jsx($e,{kind:"secondary",onClick:G,startEnhancer:f.jsx(Nt,{type:"reset"}),children:r("Reset")})}),f.jsxs("div",{className:"ant-upload-list",children:[k,be]}),Q>0&&f.jsx("div",{style:{width:"100%",display:"flex",gap:"10px",alignItems:"flex-start",marginTop:10},children:f.jsxs("div",{style:{flex:1},children:[f.jsx("p",{style:{color:"rgba(2,16,43,0.60)"},children:r("dataset.create.upload.total.desc",[te,Y])}),K?f.jsxs("p",{style:{color:"#CC3D3D",display:"inline-flex",gap:"5px"},children:[r("dataset.create.upload.error.desc"),x.errorExist&&x.errorExist?.length&&f.jsxs(Ge,{tooltip:f.jsx("pre",{children:x.errorExist.map(j).join(`
`)}),children:[x.errorExist.length,"  (",r("dataset.create.upload.error.exist"),")"]},"exist"),x.errorMax&&x.errorMax?.length&&f.jsxs(Ge,{tooltip:f.jsx("pre",{children:x.errorMax.map(j).join(`
`)}),children:[x.errorMax.length," (",r("dataset.create.upload.error.max"),")"]},"max"),x.errorUnknown&&x.errorUnknown?.length&&f.jsxs(Ge,{tooltip:f.jsx("pre",{children:x.errorUnknown.map(j).join(`
`)}),children:[x.errorUnknown.length," (",r("dataset.create.upload.error.unknown"),")"]},"max")]}):null,!ee&&f.jsx("p",{style:{color:"#CC3D3D"},children:r("dataset.create.upload.error.type")})]})})]})}const{Form:Oo,FormItem:Fe,useForm:Do,FormItemLabel:Tt}=Vr(),_o=Vt({datasetName:{display:"flex",alignContent:"stretch",alignItems:"flex-start",gap:"8px"},shared:{display:"flex",alignItems:"center","& [data-baseweb=form-control-container]":{marginBottom:"0 !important"},"& > div:first-child":{marginLeft:"22px"},marginBottom:"20px"},row:{display:"grid",gap:40,gridTemplateColumns:"660px",gridTemplateRows:"minmax(0px, max-content)",marginBottom:"20px"},upload:{marginBottom:"20px","& .ant-upload-btn":{height:"200px !important"}}});function Fo({dataset:e,onSubmit:t}){const[r,n]=h.useState(void 0),{query:o}=$r(),{currentUser:i}=Tr(),{project:a}=Lr(),s=_o(),[c]=Do(),u=Br();h.useEffect(()=>{e&&n({datasetName:e.name})},[e]);const[d,y]=h.useState(!1),E=h.useCallback((R,O)=>{n(O)},[]),x=h.useCallback(async R=>{y(!0);try{await t(R)}finally{y(!1)}},[t]),[v]=Wt(),S=h.useCallback((R,O)=>{c.setFieldsValue({[R]:O}),n(T=>({...T,[R]:O}))},[c]);h.useEffect(()=>{o.datasetName&&S("datasetName",o.datasetName)},[o.datasetName,S]);const I=!r?.datasetName||!r?.upload?.type;return f.jsxs(Oo,{form:c,initialValues:r,onFinish:x,onValuesChange:E,children:[f.jsxs("div",{className:s.datasetName,children:[f.jsx(Tt,{label:v("dataset.create.owner"),children:f.jsxs("div",{className:"flex",style:{height:"32px",alignItems:"center",gap:"8px"},children:[f.jsx(zr,{user:i})," /"]})}),f.jsx(Tt,{label:v("Project Name"),children:f.jsxs("div",{className:"flex",style:{height:"32px",alignItems:"center",gap:"8px"},children:[a?.name," /"]})}),f.jsx(Fe,{name:"datasetName",rules:[{type:"string",min:3,message:v("form.rule.min",[v("sth name",[v("Dataset")])])}],label:v("sth name",[v("Dataset")]),style:{minWidth:280},required:!0,children:f.jsx(Mr,{size:"compact"})})]}),f.jsxs("div",{className:s.shared,children:[v("Shared"),":",f.jsx(Nr,{shared:c.getFieldValue("shared")?1:0}),f.jsx(Fe,{name:"shared",children:f.jsx(Ur,{})})]}),f.jsx("div",{className:s.upload,style:{overflow:"auto",maxWidth:800,width:"100%"},children:f.jsx(Fe,{name:"upload",label:v("dataset.create.files"),required:!0,children:f.jsx(Ro,{})})}),f.jsx(Fe,{children:f.jsxs("div",{style:{display:"flex",gap:20,marginTop:20},children:[f.jsx($e,{kind:"secondary",type:"button",onClick:()=>{u.goBack()},children:v("Cancel")}),f.jsx($e,{isLoading:d,type:"submit",disabled:I,children:v("submit")})]})})]})}export{Fo as default};
