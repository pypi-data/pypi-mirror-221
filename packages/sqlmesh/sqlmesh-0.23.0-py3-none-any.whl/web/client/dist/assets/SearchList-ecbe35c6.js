import{r as a,k as C,j as l,a3 as H,d as y,ah as R,i as $,c as f,R as K}from"./index-37f7281c.js";import{I as A}from"./Input-a281f2cb.js";import{k as T}from"./popover-0f0b8831.js";const v="",D=40;function O(n,t){return n.replaceAll(t,`<b class="inline-block text-brand-500 bg-brand-10">${t}</b>`)}function U(n=[],t){return n.reduce((u,[o,r])=>{const s=r.indexOf(t.toLocaleLowerCase());if(s>-1){const i=Math.max(0,s-D),m=Math.min(r.length-1,s+t.length+D);u.push([o,`${i>0?"... ":v}${r.slice(i,m)}${m<r.length?" ...":v}`])}return u},[])}function S({nativeEvent:n}){return window.TouchEvent?n instanceof TouchEvent:"touches"in n}function P(n){return n.nativeEvent instanceof MouseEvent}function B(n){const t=a.useRef(null),u=a.useRef(n);return a.useEffect(()=>{const o=r=>{const s=t.current;s&&!s.contains(r.target)&&u.current(r)};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[]),t}function Q(n,{threshold:t=400,onStart:u,onFinish:o,onCancel:r}={}){const s=a.useRef(!1),i=a.useRef(!1),m=a.useRef(),g=a.useRef(n),h=a.useCallback(()=>c=>{i.current||!P(c)&&!S(c)||(u&&u(c),i.current=!0,m.current=setTimeout(()=>{g.current(c),s.current=!0},t))},[u,t]),p=a.useCallback(()=>c=>{!P(c)&&!S(c)||(s.current?o&&o(c):i.current&&r&&r(c),s.current=!1,i.current=!1,m.current&&window.clearTimeout(m.current))},[o,r]);return a.useMemo(()=>{if(n===null)return{};const c={onMouseDown:h(),onMouseUp:p(),onMouseLeave:p()},w={onTouchStart:h(),onTouchEnd:p()};return{...c,...w}},[n,p,h])}const F=K.forwardRef(function({value:t,placeholder:u,size:o=f.md,autoFocus:r=!1,onInput:s,onKeyDown:i,className:m},g){return l.jsx(A,{className:m,size:o,children:({className:h})=>l.jsx(A.Textfield,{ref:g,className:y(h,"w-full"),autoFocus:r,placeholder:u,value:t,onInput:s,onKeyDown:i})})});function V({list:n,size:t=f.sm,searchBy:u,displayBy:o,onSelect:r,to:s,autoFocus:i=!1,isFullWidth:m=!1}){const g=C(),h=a.useRef(null),p=a.useRef(null),c=a.useMemo(()=>n.map(e=>[e,e[u]]),[n]),[w,N]=a.useState(v),[x,b]=a.useState(0),_=B(()=>{N(v)}),j=w!==v,E=U(c,w);function k(){var e;b(0),N(v),(e=p.current)==null||e.focus()}function M(){var d;const e=(d=E[x])==null?void 0:d[0];R(e)||(R(s)?r==null||r(e):g(s(e)),k())}return l.jsx("div",{className:"px-2 py-1 relative",ref:_,onKeyDown:e=>{e.key==="Escape"&&k()},children:l.jsxs(T,{className:"relative flex",children:[l.jsx(T.Button,{ref:p,as:F,className:"w-full !m-0",size:t,value:w,placeholder:"Search",onInput:e=>{N(e.target.value.trim())},onKeyDown:e=>{var d;(e.key==="ArrowDown"||e.key==="ArrowUp")&&((d=h.current)==null||d.focus())},autoFocus:i}),l.jsx(H,{show:j,as:a.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:l.jsx(T.Panel,{static:!0,focus:!0,className:y("absolute z-10  transform cursor-pointer rounded-lg bg-theme border-4 border-primary-20","p-2 bg-theme dark:bg-theme-lighter max-h-[25vh] overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal shadow-2xl",t===f.sm&&"mt-10",t===f.md&&"mt-12",t===f.lg&&"mt-14",m?"w-full":"w-full max-w-[20rem]"),ref:h,onKeyDown:e=>{e.key==="ArrowUp"&&x>0&&b(x-1),e.key==="ArrowDown"&&x<E.length-1&&b(x+1),e.key==="Enter"&&(e.preventDefault(),M())},onMouseOver:e=>{e.stopPropagation();const d=e.target.closest('[role="menuitem"]');if(R(d))return;const L=Number(d.dataset.index);b(Number(L))},children:$(E)&&j?l.jsx("div",{className:y(t===f.sm&&"p-1",t===f.md&&"p-2",t===f.lg&&"p-3"),children:"No Results Found"},"not-found"):E.map(([e,d],L)=>l.jsx("div",{role:"menuitem","data-index":L,className:y("cursor-pointer rounded-lg",x===L&&"bg-primary-20"),children:l.jsx(G,{item:e,index:d,search:w,displayBy:o,size:t,onClick:I=>{I.stopPropagation(),I.preventDefault(),M()}})},e.name))})})]})})}function G({item:n,index:t,search:u,displayBy:o,size:r,onClick:s}){return l.jsxs("div",{onClick:s,className:y("font-normal w-full overflow-hidden whitespace-nowrap overflow-ellipsis px-2",r===f.sm&&"text-sm py-1",r===f.md&&"text-md py-2",r===f.lg&&"text-lg py-3"),children:[l.jsx("span",{className:"font-bold",children:n[o]}),l.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",dangerouslySetInnerHTML:{__html:O(t,u)}})]})}export{V as S,Q as u};
