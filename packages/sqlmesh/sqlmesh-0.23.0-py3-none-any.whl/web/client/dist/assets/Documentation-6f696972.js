import{r as c,R as C,ab as ae,ac as ce,m as re,D as B,y as z,at as Y,o as S,w as H,X as U,I as se,p as _,K as k,ar as G,ap as de,z as w,aq as D,G as y,aO as fe,j as r,d as $,aH as xe,aP as pe,ak as me,av as be}from"./index-37f7281c.js";import{u as he,M as ge,C as M}from"./Graph-4e703103.js";import{u as ve}from"./context-8d5b0388.js";import{s as je}from"./popover-0f0b8831.js";import{v as Q,M as we,P as ye}from"./disclosure-0535eebb.js";function Ne({onFocus:e}){let[t,n]=c.useState(!0);return t?C.createElement(ae,{as:"button",type:"button",features:ce.Focusable,onFocus:a=>{a.preventDefault();let s,l=50;function i(){if(l--<=0){s&&cancelAnimationFrame(s);return}if(e()){n(!1),cancelAnimationFrame(s);return}s=requestAnimationFrame(i)}s=requestAnimationFrame(i)}}):null}const le=c.createContext(null);function Te(){return{groups:new Map,get(e,t){var n;let a=this.groups.get(e);a||(a=new Map,this.groups.set(e,a));let s=(n=a.get(t))!=null?n:0;a.set(t,s+1);let l=Array.from(a.keys()).indexOf(t);function i(){let p=a.get(t);p>1?a.set(t,p-1):a.delete(t)}return[l,i]}}}function Ie({children:e}){let t=c.useRef(Te());return c.createElement(le.Provider,{value:t},e)}function ie(e){let t=c.useContext(le);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let n=Pe(),[a,s]=t.current.get(e,n);return c.useEffect(()=>s,[]),a}function Pe(){var e,t,n;let a=(n=(t=(e=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)==null?void 0:e.ReactCurrentOwner)==null?void 0:t.current)!=null?n:null;if(!a)return Symbol();let s=[],l=a;for(;l;)s.push(l.index),l=l.return;return"$."+s.join(".")}var Ee=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ee||{}),Se=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(Se||{}),$e=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))($e||{});let De={0(e,t){var n;let a=k(e.tabs,u=>u.current),s=k(e.panels,u=>u.current),l=a.filter(u=>{var g;return!((g=u.current)!=null&&g.hasAttribute("disabled"))}),i={...e,tabs:a,panels:s};if(t.index<0||t.index>a.length-1){let u=_(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>_(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});return l.length===0?i:{...i,selectedIndex:_(u,{0:()=>a.indexOf(l[0]),1:()=>a.indexOf(l[l.length-1])})}}let p=a.slice(0,t.index),m=[...a.slice(t.index),...p].find(u=>l.includes(u));if(!m)return i;let d=(n=a.indexOf(m))!=null?n:e.selectedIndex;return d===-1&&(d=e.selectedIndex),{...i,selectedIndex:d}},1(e,t){var n;if(e.tabs.includes(t.tab))return e;let a=e.tabs[e.selectedIndex],s=k([...e.tabs,t.tab],i=>i.current),l=(n=s.indexOf(a))!=null?n:e.selectedIndex;return l===-1&&(l=e.selectedIndex),{...e,tabs:s,selectedIndex:l}},2(e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:k([...e.panels,t.panel],n=>n.current)}},4(e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},J=c.createContext(null);J.displayName="TabsDataContext";function F(e){let t=c.useContext(J);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,F),n}return t}let V=c.createContext(null);V.displayName="TabsActionsContext";function Z(e){let t=c.useContext(V);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Z),n}return t}function Ce(e,t){return _(t.type,De,e,t)}let Re=c.Fragment;function Fe(e,t){let{defaultIndex:n=0,vertical:a=!1,manual:s=!1,onChange:l,selectedIndex:i=null,...p}=e;const m=a?"vertical":"horizontal",d=s?"manual":"auto";let u=i!==null,g=z(t),[f,j]=c.useReducer(Ce,{selectedIndex:i??n,tabs:[],panels:[]}),b=c.useMemo(()=>({selectedIndex:f.selectedIndex}),[f.selectedIndex]),A=Y(l||(()=>{})),L=Y(f.tabs),h=c.useMemo(()=>({orientation:m,activation:d,...f}),[m,d,f]),v=S(x=>(j({type:1,tab:x}),()=>j({type:2,tab:x}))),I=S(x=>(j({type:3,panel:x}),()=>j({type:4,panel:x}))),P=S(x=>{E.current!==x&&A.current(x),u||j({type:0,index:x})}),E=Y(u?e.selectedIndex:f.selectedIndex),X=c.useMemo(()=>({registerTab:v,registerPanel:I,change:P}),[]);H(()=>{j({type:0,index:i??n})},[i]),H(()=>{if(E.current===void 0||f.tabs.length<=0)return;let x=k(f.tabs,T=>T.current);x.some((T,o)=>f.tabs[o]!==T)&&P(x.indexOf(f.tabs[E.current]))});let K={ref:g};return C.createElement(Ie,null,C.createElement(V.Provider,{value:X},C.createElement(J.Provider,{value:h},h.tabs.length<=0&&C.createElement(Ne,{onFocus:()=>{var x,T;for(let o of L.current)if(((x=o.current)==null?void 0:x.tabIndex)===0)return(T=o.current)==null||T.focus(),!0;return!1}}),U({ourProps:K,theirProps:p,slot:b,defaultTag:Re,name:"Tabs"}))))}let Ae="div";function Le(e,t){let{orientation:n,selectedIndex:a}=F("Tab.List"),s=z(t);return U({ourProps:{ref:s,role:"tablist","aria-orientation":n},theirProps:e,slot:{selectedIndex:a},defaultTag:Ae,name:"Tabs.List"})}let Me="button";function Oe(e,t){var n,a;let s=se(),{id:l=`headlessui-tabs-tab-${s}`,...i}=e,{orientation:p,activation:m,selectedIndex:d,tabs:u,panels:g}=F("Tab"),f=Z("Tab"),j=F("Tab"),b=c.useRef(null),A=z(b,t);H(()=>f.registerTab(b),[f,b]);let L=ie("tabs"),h=u.indexOf(b);h===-1&&(h=L);let v=h===d,I=S(o=>{var N;let q=o();if(q===G.Success&&m==="auto"){let oe=(N=de(b))==null?void 0:N.activeElement,ne=j.tabs.findIndex(ue=>ue.current===oe);ne!==-1&&f.change(ne)}return q}),P=S(o=>{let N=u.map(q=>q.current).filter(Boolean);if(o.key===w.Space||o.key===w.Enter){o.preventDefault(),o.stopPropagation(),f.change(h);return}switch(o.key){case w.Home:case w.PageUp:return o.preventDefault(),o.stopPropagation(),I(()=>D(N,y.First));case w.End:case w.PageDown:return o.preventDefault(),o.stopPropagation(),I(()=>D(N,y.Last))}if(I(()=>_(p,{vertical(){return o.key===w.ArrowUp?D(N,y.Previous|y.WrapAround):o.key===w.ArrowDown?D(N,y.Next|y.WrapAround):G.Error},horizontal(){return o.key===w.ArrowLeft?D(N,y.Previous|y.WrapAround):o.key===w.ArrowRight?D(N,y.Next|y.WrapAround):G.Error}}))===G.Success)return o.preventDefault()}),E=c.useRef(!1),X=S(()=>{var o;E.current||(E.current=!0,(o=b.current)==null||o.focus(),f.change(h),fe(()=>{E.current=!1}))}),K=S(o=>{o.preventDefault()}),x=c.useMemo(()=>({selected:v}),[v]),T={ref:A,onKeyDown:P,onMouseDown:K,onClick:X,id:l,role:"tab",type:je(e,b),"aria-controls":(a=(n=g[h])==null?void 0:n.current)==null?void 0:a.id,"aria-selected":v,tabIndex:v?0:-1};return U({ourProps:T,theirProps:i,slot:x,defaultTag:Me,name:"Tabs.Tab"})}let ke="div";function _e(e,t){let{selectedIndex:n}=F("Tab.Panels"),a=z(t),s=c.useMemo(()=>({selectedIndex:n}),[n]);return U({ourProps:{ref:a},theirProps:e,slot:s,defaultTag:ke,name:"Tabs.Panels"})}let Be="div",ze=re.RenderStrategy|re.Static;function Ue(e,t){var n,a,s,l;let i=se(),{id:p=`headlessui-tabs-panel-${i}`,tabIndex:m=0,...d}=e,{selectedIndex:u,tabs:g,panels:f}=F("Tab.Panel"),j=Z("Tab.Panel"),b=c.useRef(null),A=z(b,t);H(()=>j.registerPanel(b),[j,b]);let L=ie("panels"),h=f.indexOf(b);h===-1&&(h=L);let v=h===u,I=c.useMemo(()=>({selected:v}),[v]),P={ref:A,id:p,role:"tabpanel","aria-labelledby":(a=(n=g[h])==null?void 0:n.current)==null?void 0:a.id,tabIndex:v?m:-1};return!v&&((s=d.unmount)==null||s)&&!((l=d.static)!=null&&l)?C.createElement(ae,{as:"span",...P}):U({ourProps:P,theirProps:d,slot:I,defaultTag:Be,features:ze,visible:v,name:"Tabs.Panel"})}let qe=B(Oe),Ge=B(Fe),We=B(Le),He=B(_e),Xe=B(Ue),R=Object.assign(qe,{Group:Ge,List:We,Panels:He,Panel:Xe});function Ke({list:e,children:t=[],className:n}){return r.jsxs(R.List,{className:"w-full whitespace-nowrap px-2 py-0.5 flex justify-between items-center bg-primary-10 dark:bg-secondary-10",children:[r.jsx("div",{className:$("flex w-full overflow-hidden overflow-x-auto py-1 hover:scrollbar scrollbar--horizontal",n),children:r.jsx("div",{className:"flex items-center bg-secondary-10 dark:bg-primary-10 cursor-pointer rounded-full p-1 overflow-hidden",children:e.map(a=>r.jsx(R,{className:({selected:s})=>$("text-xs px-2 py-0.5 mr-2 last:mr-0 rounded-full relative align-middle",s?"bg-secondary-500 text-secondary-100 cursor-default font-bold":"cursor-pointer font-medium text-secondary-400 dark:text-secondary-400"),children:a},a))})}),t]})}const ee=function({model:t,withModel:n=!0,withDescription:a=!0,withColumns:s=!0,withCode:l=!0,withQuery:i=!0}){const{handleClickModel:p}=ve(),m=he(t.path,d=>{p==null||p(d.name)});return r.jsxs(te,{children:[n&&r.jsx(W,{headline:"Model",defaultOpen:!0,children:r.jsxs("ul",{className:"px-2 w-full",children:[r.jsx(O,{name:"Path",value:t.path.split("/").slice(0,-1).join("/")}),r.jsx(O,{name:"Name",value:t.name}),r.jsx(O,{name:"Dialect",value:t.dialect}),r.jsx(O,{name:"Type",value:t.type}),Object.entries(t.details??{}).map(([d,u])=>r.jsx(O,{name:d.replaceAll("_"," "),value:u,isCapitalize:!0},d))]})}),a&&r.jsx(W,{headline:"Description",defaultOpen:!0,children:t.description==null?"No description":t.description}),s&&r.jsx(W,{headline:"Columns",children:r.jsx(ge,{className:"max-h-[15rem]",nodeId:t.name,columns:t.columns,disabled:(t==null?void 0:t.type)==="python",withHandles:!1,withSource:!1,limit:10})}),(l||i)&&r.jsx(W,{headline:"SQL",children:r.jsx(M.RemoteFile,{path:t.path,children:({file:d})=>r.jsxs(R.Group,{defaultIndex:i?1:0,children:[r.jsx(Ke,{list:[l&&"Source Code",i&&"Compiled Query"].filter(Boolean),className:"!justify-center"}),r.jsxs(R.Panels,{className:"h-full w-full overflow-hidden bg-neutral-10 mt-4 rounded-lg",children:[l&&r.jsx(R.Panel,{unmount:!1,className:$("flex flex-col w-full h-full relative px-2 overflow-hidden p-2","ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2"),children:r.jsx(M.Default,{content:d.content,type:d.extension,children:({extensions:u,content:g})=>r.jsx(M,{extensions:u.concat(m),content:g,className:"text-xs"})})}),i&&r.jsx(R.Panel,{unmount:!1,className:"w-full h-full ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-400 focus:outline-none focus:ring-2 p-2",children:r.jsx(M.Default,{type:xe.SQL,content:t.sql??"",children:({extensions:u,content:g})=>r.jsx(M,{extensions:u.concat(m),content:g,className:"text-xs"})})})]})]})})})]})};function Ye({headline:e}){return r.jsx("div",{className:"text-lg font-bold whitespace-nowrap w-full",id:e,children:r.jsx("h3",{className:"py-2",children:e})})}function Qe(){return r.jsx(te,{className:"font-bold whitespace-nowrap w-full h-full",children:r.jsx("div",{className:"flex items-center justify-center w-full h-full",children:"Documentation Not Found"})})}function te({children:e,className:t}){return r.jsx("div",{className:$("w-full h-full rounded-xl",t),children:r.jsx("div",{className:"w-full h-full py-4 rounded-xl",children:r.jsx("div",{className:"w-full h-full overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal",children:e})})})}function W({children:e,className:t,headline:n,defaultOpen:a=!1}){return r.jsx("div",{className:"px-4",children:r.jsx(Q,{defaultOpen:a,children:({open:s})=>r.jsxs(r.Fragment,{children:[r.jsxs(Q.Button,{className:$("flex items-center justify-between rounded-lg text-left w-full bg-neutral-10 px-3 mb-2",t),children:[r.jsx(Ye,{headline:n}),r.jsx("div",{children:s?r.jsx(we,{className:"h-6 w-6 text-neutral-50"}):r.jsx(ye,{className:"h-6 w-6 text-neutral-50"})})]}),r.jsx(Q.Panel,{className:"pb-2 overflow-hidden",children:r.jsx("div",{className:"px-2",children:e})})]})})})}function O({className:e,name:t,value:n,isHighlighted:a=!1,isCapitalize:s=!1,children:l}){const i=new Date(n),p=pe(n)&&!isNaN(i.getTime()),m=typeof n=="boolean";return r.jsxs("li",{className:$("w-full border-b border-primary-10 py-1 mb-1",e),children:[r.jsxs("div",{className:"flex justify-between text-xs",children:[r.jsx("strong",{className:$("mr-2",s&&"capitalize",a&&"text-brand-500"),children:t}),r.jsx("p",{className:"text-xs rounded text-neutral-500 dark:text-neutral-400",children:m?me(n)?"True":"False":p?be(i):n})]}),r.jsx("p",{className:"text-xs ",children:l})]})}ee.NotFound=Qe;ee.Container=te;const nt=ee;export{nt as D,Ke as T,R as r};
