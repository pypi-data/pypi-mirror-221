{# -*- coding: utf-8 -*-

  This file is part of Invenio.
  Copyright (C) 2023 CERN.

  Invenio is free software; you can redistribute it and/or modify it
  under the terms of the MIT License; see LICENSE file for more details.
#}
{%- from "invenio_github/helpers.html" import doi_badge with context -%}
{%- set release = repo.get('latest') %}
{%- block repository_item %}
  <div class="ui grid">
    <div class="ten wide column">
      <div class="ui basic segment">
        <h4>
          <a href="https://github.com/{{ repo.full_name }}" data-tooltip="{{ _('Go to GitHub.') }}">
            <i class="github icon"></i>
          </a>
          <a href="{{ url_for('.get_repository', repo_name=repo.full_name) }}">{{ repo.full_name }}</a>
        </h4>
        {%- if release.record %}
          {%- set id_doi = release.record.pids.get('doi', {}).get('identifier') %}
        {%- endif %}
        {%- if id_doi %}
          <p>
            {{ doi_badge(id_doi, doi_url=release.record_url, github_id=repo_id) }}
          </p>
        {%- endif %}
      </div>
    </div>
    <div class="four wide column">
      <div id="repo-switch-message" class="ui label hidden"></div>
    </div>
    <div class="two wide column">
      {{ helpers.repo_switch(repo.instance, repo_id) }}
    </div>
  </div>
  {%- if not loop.last %}
    <div class="ui divider"></div>
  {%- endif %}
{%- endblock %}
