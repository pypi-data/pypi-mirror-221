{# -*- coding: utf-8 -*-

  This file is part of Invenio.
  Copyright (C) 2023 CERN.

  Invenio is free software; you can redistribute it and/or modify it
  under the terms of the MIT License; see LICENSE file for more details.
#}
{%- macro doi_badge(doi, doi_url, github_id) %}
{%- block doi_badge scoped %}
  {% set image_url = url_for('invenio_github_badge.index', repo_github_id=github_id, _external=True) %}
  <a class="ui blue image label">
    <img class="doi-badge-img" src="{{ url_for('invenio_formatter_badges.badge', title='DOI', value=doi, ext='svg', _external=True, _scheme='https') }}" alt="DOI: {{ doi }}">
  </a>

  <div class="ui modal fade doi-badge-modal">
    <div class="header">{{ _("DOI Badge") }}</div>
    <div class="content">
      <small>
        {{ _("This badge points to the latest released version of your repository. If you want a DOI badge for a specific release, please follow the DOI link for one of the specific releases and grab badge from the archived record.") }}
      </small>
      <h4>
        <small>{{ _("DOI") }}</small>
      </h4>
      <h4>
        <pre>{{ doi }}</pre>
      </h4>
      {% from "semantic-ui/invenio_formatter/macros/badges.html" import badges_formats_list %}
      {{ badges_formats_list(image_url, doi_url)}}
    </div>
  </div>
{%- endblock %}
{%- endmacro %}
