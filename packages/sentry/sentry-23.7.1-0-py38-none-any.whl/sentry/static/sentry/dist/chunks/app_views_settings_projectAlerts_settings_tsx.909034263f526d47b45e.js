"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectAlerts_settings_tsx"],{"./app/components/forms/formPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),o=s("./app/components/forms/fieldFromConfig.tsx"),a=s("./app/components/panels/panel.tsx"),l=s("./app/components/panels/panelBody.tsx"),r=s("./app/components/panels/panelHeader.tsx"),p=s("./app/icons/index.tsx"),d=s("./app/utils/sanitizeQuerySelector.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){let{additionalFieldProps:t={},title:s,fields:n,access:m,disabled:u,renderFooter:h,renderHeader:x,collapsible:f,initiallyCollapsed:b=!1,...y}=e;const[j,Z]=(0,i.useState)(b),v=(0,i.useCallback)((()=>Z((e=>!e))),[]);return(0,c.BX)(a.Z,{id:"string"==typeof s?(0,d.m)(s):void 0,children:[s&&(0,c.BX)(r.Z,{children:[s,f&&(0,c.tZ)(g,{onClick:v,children:(0,c.tZ)(p.g6,{"data-test-id":"form-panel-collapse-chevron",direction:j?"down":"up",size:"xs"})})]}),(0,c.BX)(l.Z,{hidden:j,children:["function"==typeof x&&x({title:s,fields:n}),n.map((e=>{if("function"==typeof e)return e();const{defaultValue:s,...n}=e;return!0===u&&(n.disabled=!0,n.disabledReason=void 0),(0,c.tZ)(o.Z,{access:m,disabled:u,...y,...t,field:n,highlighted:y.highlighted===`#${e.name}`},e.name)})),"function"==typeof h&&h({title:s,fields:n})]})]})}m.displayName="FormPanel";const u=m,g=(0,n.Z)("span",{target:"eovlw60"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/components/forms/jsonForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>g});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/react/index.js"),o=s("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),a=s("../node_modules/scroll-to-element/index.js"),l=s.n(a),r=s("./app/utils.tsx"),p=s("./app/utils/sanitizeQuerySelector.tsx"),d=s("./app/utils/withSentryRouter.tsx"),c=s("./app/components/forms/formPanel.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends i.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{highlighted:this.props.location?.hash})}componentDidMount(){this.scrollToHash()}componentDidUpdate(e){if(this.props.location&&this.props.location.hash!==e.location.hash){const e=this.props.location.hash;this.scrollToHash(e),this.setState({highlighted:e})}}scrollToHash(e){const t=e||this.props.location?.hash;if(t)try{l()((0,p.m)(decodeURIComponent(t)),{align:"middle",offset:-100})}catch(e){o.Tb(e)}}shouldDisplayForm(e){const t=e.filter((e=>"function"!=typeof e&&(0,r.ri)(e?.visible)));if(e.length===t.length){const{additionalFieldProps:e,...s}=this.props;return!t.every((t=>"function"==typeof t.visible?!t.visible({...s,...e}):!t.visible))}return!0}renderForm(e){let{fields:t,formPanelProps:s,title:n}=e;return this.shouldDisplayForm(t)||s?.renderFooter||s?.renderHeader?(0,m.tZ)(c.Z,{title:n,fields:t,...s}):null}render(){const{access:e,collapsible:t,initiallyCollapsed:s,fields:n,title:o,forms:a,disabled:l,features:r,additionalFieldProps:p,renderFooter:d,renderHeader:c,location:u,params:g,router:h,routes:x,...f}=this.props,b={access:e,disabled:l,features:r,additionalFieldProps:p,renderFooter:d,renderHeader:c,highlighted:this.state.highlighted,collapsible:t,initiallyCollapsed:s};return(0,m.BX)("div",{...f,children:[void 0!==a&&a.map(((e,t)=>(0,m.tZ)(i.Fragment,{children:this.renderForm({formPanelProps:b,...e})},t))),void 0===a&&void 0!==n&&this.renderForm({fields:n,formPanelProps:b,title:o})]})}}u.displayName="JsonForm";const g=(0,d.Z)(u)},"./app/components/pluginList.tsx":(e,t,s)=>{s.d(t,{Z:()=>P});var n=s("./app/actionCreators/plugins.tsx"),i=s("./app/components/acl/access.tsx"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("./app/components/button.tsx"),l=s("./app/components/panels/panel.tsx"),r=s("./app/components/panels/panelBody.tsx"),p=s("./app/components/panels/panelHeader.tsx"),d=s("./app/components/textOverflow.tsx"),c=s("./app/locale.tsx"),m=s("./app/plugins/components/pluginIcon.tsx"),u=s("./app/styles/space.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){let{disabled:t,plugins:s,onEnablePlugin:n}=e;return 0===s.length?null:(0,g.BX)(l.Z,{children:[(0,g.tZ)(p.Z,{children:(0,c.t)("Inactive Integrations")}),(0,g.tZ)(r.Z,{children:(0,g.tZ)(x,{children:s.map((e=>(0,g.tZ)(f,{disabled:t,title:t?(0,c.t)("You do not have permission to set up an integration."):"",onClick:()=>n(e),className:`ref-plugin-enable-${e.id}`,children:(0,g.BX)(b,{children:[(0,g.tZ)(y,{pluginId:e.id}),(0,g.tZ)(d.Z,{children:e.shortName||e.name})]})},e.id)))})})]})}h.displayName="InactivePlugins";const x=(0,o.Z)("div",{target:"e1mpcvbx3"})("display:flex;padding:",(0,u.D)(1),";flex:1;flex-wrap:wrap;"),f=(0,o.Z)(a.zx,{target:"e1mpcvbx2"})("margin:",(0,u.D)(1),";width:175px;text-align:center;font-size:",(e=>e.theme.fontSizeSmall),";color:#889ab0;letter-spacing:0.1px;font-weight:600;text-transform:uppercase;border:1px solid #eee;background:inherit;border-radius:",(e=>e.theme.borderRadius),";padding:10px;&:hover{border-color:#ccc;}"),b=(0,o.Z)("div",{target:"e1mpcvbx1"})({name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"}),y=(0,o.Z)(m.ZP,{target:"e1mpcvbx0"})("margin-right:",(0,u.D)(1),";"),j=h;var Z=s("./app/components/panels/panelItem.tsx"),v=s("./app/components/pluginConfig.tsx");function w(e){let{organization:t,project:s,pluginList:o,onDisablePlugin:a=(()=>{}),onEnablePlugin:r=(()=>{})}=e;const p=(0,i.d)(["project:write"],{organization:t,project:s}),d=e=>{(0,n.rR)({projectId:s.slug,orgId:t.slug,pluginId:e.slug}),a(e)};return o.length?(0,g.BX)("div",{children:[o.filter((e=>e.enabled)).map((e=>(0,g.tZ)(v.Z,{data:e,organization:t,project:s,onDisablePlugin:d},e.id))),(0,g.tZ)(j,{disabled:!p,plugins:o.filter((e=>!e.enabled&&!e.isHidden)),onEnablePlugin:e=>{(0,n.Cg)({projectId:s.slug,orgId:t.slug,pluginId:e.slug}),r(e)}})]}):(0,g.tZ)(l.Z,{children:(0,g.tZ)(Z.Z,{children:(0,c.t)("Oops! Looks like there aren't any available integrations installed.")})})}w.displayName="PluginList";const P=w},"./app/data/forms/projectAlerts.tsx":(e,t,s)=>{s.r(t),s.d(t,{fields:()=>a,route:()=>i});var n=s("./app/locale.tsx");const i="/settings/:orgId/projects/:projectId/alerts/",o=e=>(e=Number(e)/60,(0,n.tn)("%s minute","%s minutes",e)),a={subjectTemplate:{name:"subjectTemplate",type:"string",label:(0,n.t)("Subject Template"),placeholder:"e.g. $shortID - $title",help:(0,n.t)("The email subject to use (excluding the prefix) for individual alerts. Usable variables include: $title, $shortID, $projectID, $orgID, and ${tag:key}, such as ${tag:environment} or ${tag:release}.")},digestsMinDelay:{name:"digestsMinDelay",type:"range",min:60,max:3600,step:60,defaultValue:300,label:(0,n.t)("Minimum delivery interval"),help:(0,n.t)("Notifications will be delivered at most this often."),formatLabel:o},digestsMaxDelay:{name:"digestsMaxDelay",type:"range",min:60,max:3600,step:60,defaultValue:300,label:(0,n.t)("Maximum delivery interval"),help:(0,n.t)("Notifications will be delivered at least this often."),formatLabel:o}}},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});const n=function(e,t){let s=arguments.length>3?arguments[3]:void 0;const n=`${e} - ${t}`,i=s?`${n} - ${s}`:n;return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?i:`${i} - Sentry`}},"./app/views/deprecatedAsyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var n=s("./app/components/deprecatedAsyncComponent.tsx"),i=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends n.Z{getTitle(){return""}render(){return(0,o.tZ)(i.Z,{title:this.getTitle(),children:this.renderComponent()})}}a.displayName="DeprecatedAsyncView"},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>p});var n=s("./app/components/acl/access.tsx"),i=s("./app/components/alert.tsx"),o=s("./app/locale.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=(0,o.t)("These settings can only be edited by users with the organization-level owner, manager, or team-level admin roles.");function r(e){let{access:t=["project:write"],project:s,team:o,...r}=e;return(0,a.tZ)(n.Z,{access:t,project:s,team:o,children:e=>{let{hasAccess:t}=e;return!t&&(0,a.tZ)(i.bZ,{"data-test-id":"project-permission-alert",type:"warning",...r,children:l})}})}r.displayName="PermissionAlert";const p=r},"./app/views/settings/projectAlerts/settings.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/react/index.js"),o=s("./app/components/alertLink.tsx"),a=s("./app/components/button.tsx"),l=s("./app/components/forms/form.tsx"),r=s("./app/components/forms/jsonForm.tsx"),p=s("./app/components/panels/panelAlert.tsx"),d=s("./app/components/pluginList.tsx"),c=s("./app/data/forms/projectAlerts.tsx"),m=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),g=s("./app/utils/routeTitle.tsx"),h=s("./app/views/deprecatedAsyncView.tsx"),x=s("./app/views/settings/components/settingsPageHeader.tsx"),f=s("./app/views/settings/project/permissionAlert.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends h.Z{constructor(){super(...arguments),(0,n.Z)(this,"handleEnablePlugin",(e=>{this.setState((t=>({pluginList:(t.pluginList??[]).map((t=>t.id!==e.id?t:{...e,enabled:!0}))})))})),(0,n.Z)(this,"handleDisablePlugin",(e=>{this.setState((t=>({pluginList:(t.pluginList??[]).map((t=>t.id!==e.id?t:{...e,enabled:!1}))})))}))}getDefaultState(){return{...super.getDefaultState(),project:null,pluginList:[]}}getProjectEndpoint(){const{organization:e,params:t}=this.props;return`/projects/${e.slug}/${t.projectId}/`}getEndpoints(){const{organization:e,params:t}=this.props;return[["project",this.getProjectEndpoint()],["pluginList",`/projects/${e.slug}/${t.projectId}/plugins/`]]}getTitle(){const{projectId:e}=this.props.params;return(0,g.Z)((0,u.t)("Alerts Settings"),e,!1)}renderBody(){const{canEditRule:e,organization:t}=this.props,{project:s,pluginList:n}=this.state;if(!s)return null;const g=this.getProjectEndpoint();return(0,b.BX)(i.Fragment,{children:[(0,b.tZ)(x.Z,{title:(0,u.t)("Alerts Settings"),action:(0,b.tZ)(a.zx,{to:{pathname:`/organizations/${t.slug}/alerts/rules/`,query:{project:s.id}},size:"sm",children:(0,u.t)("View Alert Rules")})}),(0,b.tZ)(f.Z,{project:s}),(0,b.tZ)(o.Z,{to:"/settings/account/notifications/",icon:(0,b.tZ)(m.h,{}),children:(0,u.t)("Looking to fine-tune your personal notification preferences? Visit your Account Settings")}),(0,b.BX)(l.Z,{saveOnBlur:!0,allowUndo:!0,initialData:{subjectTemplate:s.subjectTemplate,digestsMinDelay:s.digestsMinDelay,digestsMaxDelay:s.digestsMaxDelay},apiMethod:"PUT",apiEndpoint:g,children:[(0,b.tZ)(r.Z,{disabled:!e,title:(0,u.t)("Email Settings"),fields:[c.fields.subjectTemplate]}),(0,b.tZ)(r.Z,{title:(0,u.t)("Digests"),disabled:!e,fields:[c.fields.digestsMinDelay,c.fields.digestsMaxDelay],renderHeader:()=>(0,b.tZ)(p.Z,{type:"info",children:(0,u.t)("Sentry will automatically digest alerts sent by some services to avoid flooding your inbox with individual issue notifications. To control how frequently notifications are delivered, use the sliders below.")})})]}),e&&(0,b.tZ)(d.Z,{organization:t,project:s,pluginList:(n??[]).filter((e=>"notification"===e.type&&e.hasConfiguration)),onEnablePlugin:this.handleEnablePlugin,onDisablePlugin:this.handleDisablePlugin})]})}}const j=y}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectAlerts_settings_tsx.757dd03812f8917cdf691579cadc277e.js.map