(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionSpans_spanDetails_index_tsx-node_modules_-727707"],{"./app/components/charts/barChartZoom.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),i=n("../node_modules/react-router/es/index.js"),r=n("./app/components/charts/components/dataZoomInside.tsx"),o=n("./app/components/charts/components/toolBox.tsx");class l extends s.Component{constructor(){super(...arguments),(0,a.Z)(this,"zooming",null),(0,a.Z)(this,"handleChartReady",(e=>{this.props.onChartReady?.(e)})),(0,a.Z)(this,"handleChartFinished",((e,t)=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null);const n=t._componentsViews?.find((e=>e._features&&e._features.dataZoom));n&&!n._features.dataZoom._isZoomActive&&t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0})})),(0,a.Z)(this,"handleDataZoom",((e,t)=>{const n=t.getModel(),{startValue:a,endValue:s}=n._payload.batch[0];if(null!==a&&null!==s){const{buckets:e,location:n,paramStart:r,paramEnd:o,minZoomWidth:l,onHistoryPush:p}=this.props,{start:c}=e[a],{end:u}=e[s];if(void 0===l||u-c>l){const e={pathname:n.pathname,query:{...n.query,[r]:c,[o]:u}};p?p(c,u):i.browserHistory.push(e)}else t.dispatchAction({type:"restore"}),this.props.onDataZoomCancelled?.()}else t.dispatchAction({type:"restore"}),this.props.onDataZoomCancelled?.();this.props.onDataZoom?.(e,t)}))}render(){const{children:e,xAxisIndex:t}=this.props;return e({onChartReady:this.handleChartReady,onFinished:this.handleChartFinished,dataZoom:(0,r.Z)({xAxisIndex:t}),toolBox:(0,o.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom})}}l.displayName="BarChartZoom";const p=l},"./app/components/charts/lineChart.tsx":(e,t,n)=>{"use strict";n.d(t,{w:()=>r});var a=n("./app/components/charts/series/lineSeries.tsx"),s=n("./app/components/charts/baseChart.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{series:t,seriesOptions:n,...r}=e;return(0,i.tZ)(s.Z,{...r,series:t.map((e=>{let{seriesName:t,data:s,dataArray:i,...r}=e;return(0,a.Z)({...n,...r,name:t,data:i||s?.map((e=>{let{value:t,name:n}=e;return[n,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}r.displayName="LineChart"},"./app/components/charts/optionSelector.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/react/index.js"),i=n("./app/components/compactSelect/index.tsx"),r=n("./app/components/featureBadge.tsx"),o=n("./app/components/truncate.tsx"),l=n("./app/utils.tsx"),p=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{options:t,onChange:n,selected:a,title:r,featureType:c,multiple:d,defaultValue:m,closeOnSelect:h,...g}=e;const x=(0,s.useMemo)((()=>t.map((e=>({...e,textValue:String(e.label),label:(0,p.tZ)(o.Z,{value:String(e.label),maxLength:60,expandDirection:"left"})})))),[t]),Z=(0,s.useMemo)((()=>d?{multiple:d,value:a,defaultValue:m,onChange:e=>{n?.(e.map((e=>e.value)))},closeOnSelect:h}:{multiple:d,value:a,defaultValue:m,onChange:e=>n?.(e.value),closeOnSelect:h}),[d,a,m,n,h]);return(0,p.tZ)(i.Z,{...g,...Z,size:"sm",options:x,isOptionDisabled:function(e){return e.disabled||d&&3===a.length&&!a.includes(e.value)},position:"bottom-end",triggerProps:{borderless:!0,prefix:(0,p.BX)(s.Fragment,{children:[r,(0,l.ri)(c)?(0,p.tZ)(u,{type:c}):null]})}})}c.displayName="OptionSelector";const u=(0,a.Z)(r.Z,{target:"e56rtee0"})({name:"6og82r",styles:"margin-left:0px"}),d=c},"./app/components/performanceDuration.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n("./app/components/duration.tsx"),s=n("./app/utils.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){const t=function(e){return(0,s.ri)(e.nanoseconds)}(e)?e.nanoseconds/1e9:function(e){return(0,s.ri)(e.milliseconds)}(e)?e.milliseconds/1e3:e.seconds;return(0,i.tZ)(a.Z,{abbreviation:e.abbreviation,seconds:t,fixedDigits:2})}r.displayName="PerformanceDuration";const o=r},"./app/utils/performance/histogram/constants.tsx":(e,t,n)=>{"use strict";n.d(t,{d:()=>s});var a=n("./app/locale.tsx");const s=[{label:(0,a.t)("Exclude"),value:"exclude_outliers"},{label:(0,a.t)("Include"),value:"all"}]},"./app/utils/performance/histogram/index.tsx":(e,t,n)=>{"use strict";n.d(t,{V:()=>p,Z:()=>c});var a=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),i=n("../node_modules/react-router/es/index.js"),r=n("./app/utils/queryString.tsx"),o=n("./app/utils/performance/histogram/constants.tsx");class l extends s.Component{constructor(){super(...arguments),(0,a.Z)(this,"handleResetView",(()=>{const{location:e,zoomKeys:t}=this.props;i.browserHistory.push({pathname:e.pathname,query:p(e,t)})})),(0,a.Z)(this,"handleFilterChange",(e=>{const{location:t,zoomKeys:n}=this.props;i.browserHistory.push({pathname:t.pathname,query:{...p(t,n),dataFilter:e}})}))}isZoomed(){const{location:e,zoomKeys:t}=this.props;return t.map((t=>e.query[t])).some((e=>void 0!==e))}getActiveFilter(){const{location:e}=this.props,t=e.query.dataFilter?(0,r.ro)(e.query.dataFilter):o.d[0].value;return o.d.find((e=>e.value===t))||o.d[0]}render(){const e={isZoomed:this.isZoomed(),handleResetView:this.handleResetView,activeFilter:this.getActiveFilter(),handleFilterChange:this.handleFilterChange,filterOptions:o.d};return this.props.children(e)}}function p(e,t){const n={...e.query,cursor:void 0};return delete n.dataFilter,t.forEach((e=>delete n[e])),n}l.displayName="Histogram";const c=l},"./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n("../node_modules/react/index.js"),s=n("./app/views/routeAnalyticsContextProvider.tsx");function i(e,t){const{setEventNames:n,previousUrl:i}=(0,a.useContext)(s.o);(0,a.useEffect)((()=>{n(e,t)}),[n,e,t,i])}},"./app/views/performance/transactionSummary/transactionSpans/spanDetails/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>rt});var a=n("./app/components/acl/feature.tsx"),s=n("./app/components/layouts/thirds.tsx"),i=n("./app/components/organizations/pageFilters/container.tsx"),r=n("./app/components/sentryDocumentTitle.tsx"),o=n("./app/locale.tsx"),l=n("./app/utils.tsx"),p=n("./app/utils/queryString.tsx"),c=n("./app/utils/useOrganization.tsx"),u=n("./app/utils/useProjects.tsx"),d=n("./app/views/performance/utils.tsx"),m=n("./app/views/performance/transactionSummary/pageLayout.tsx"),h=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),g=n("../node_modules/react/index.js"),x=n("./app/components/idBadge/index.tsx"),Z=n("./app/utils/discover/discoverQuery.tsx"),y=n("../node_modules/lodash/omit.js"),v=n.n(y),f=n("./app/utils/discover/genericDiscoverQuery.tsx"),S=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function b(e){const{spanOp:t,spanGroup:n,minExclusiveTime:a,maxExclusiveTime:s}=e,i=(0,l.ri)(t)&&(0,l.ri)(n)?`${t}:${n}`:void 0;return{...(0,l.ri)(i)?{span:i,min_exclusive_time:a,max_exclusive_time:s}:{},...v()(e.eventView.getEventsAPIPayload(e.location),["field"])}}function w(e){return(0,S.tZ)(f.ZP,{route:"events-spans",getRequestPayload:b,...v()(e,"children"),children:t=>{let{tableData:n,...a}=t;return e.children({examples:n??null,...a})}})}w.displayName="SuspectSpansQuery";const _=w;var j=n("./app/utils/performance/suspectSpans/suspectSpansQuery.tsx"),D=n("./app/utils/performanceForSentry/index.tsx"),C=n("./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx"),z=n("./app/utils/routeAnalytics/useRouteAnalyticsParams.tsx"),T=n("./app/views/performance/breadcrumb.tsx"),E=n("./app/views/performance/transactionSummary/tabs.tsx"),k=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),B=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react-router/es/index.js")),q=n("./app/components/charts/optionSelector.tsx"),A=n("./app/components/charts/styles.tsx"),N=n("./app/components/count.tsx"),P=n("./app/components/panels/panel.tsx"),F=n("./app/utils/analytics.tsx"),L=n("./app/utils/useLocation.tsx"),O=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),V=n("./app/components/charts/barChart.tsx"),X=n("./app/components/charts/barChartZoom.tsx"),R=n("./app/components/charts/errorPanel.tsx"),I=n("./app/components/charts/transitionChart.tsx"),M=n("./app/components/charts/transparentLoadingMask.tsx"),H=n("./app/components/performance/waterfall/utils.tsx"),G=n("./app/components/placeholder.tsx"),W=n("./app/components/questionTooltip.tsx"),$=n("./app/icons/index.tsx"),Q=n("./app/utils/discover/charts.tsx"),K=n("./app/utils/discover/fields.tsx"),J=n("./app/utils/getDynamicText.tsx");function U(e){const{span:t,numBuckets:n,min:a,max:s,precision:i,dataFilter:r,eventView:o,location:l}=e;return{span:`${t.op}:${t.group}`,numBuckets:n,min:a,max:s,precision:i,dataFilter:r,...v()(o.getEventsAPIPayload(l),["sort","per_page","cursor"])}}function Y(e){return(0,S.tZ)(f.ZP,{route:"events-spans-histogram",getRequestPayload:U,...v()(e,"children"),children:t=>{let{tableData:n,...a}=t;return e.children({histogram:n,...a})}})}Y.displayName="SpanHistogramQuery";const ee=Y;var te=n("./app/utils/performance/histogram/utils.tsx"),ne=n("./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx");const ae=50,se=0;function ie(e){const{organization:t,eventView:n,spanSlug:a}=e,s=(0,L.T)(),i=(0,p.ro)(s.query[ne.wL.MIN]),r=(0,p.ro)(s.query[ne.wL.MAX]);return(0,S.BX)(g.Fragment,{children:[(0,S.BX)(A.ws,{children:[(0,o.t)("Self Time Distribution"),(0,S.tZ)(W.Z,{size:"sm",position:"top",title:(0,o.t)("Distribution buckets counts of the same self time duration for the selected span op and group.")})]}),(0,S.tZ)(ee,{location:s,orgSlug:t.slug,eventView:n,numBuckets:ae,precision:se,span:a,dataFilter:"exclude_outliers",min:i,max:r,children:e=>{let{histogram:t,isLoading:n,error:i}=e;return i?(0,S.tZ)(R.Z,{"data-test-id":"histogram-error-panel",children:(0,S.tZ)($.FC,{color:"gray300",size:"lg"})}):(0,S.BX)(I.Z,{loading:n,reloading:n,children:[(0,S.tZ)(M.Z,{visible:n}),(0,S.tZ)(X.Z,{minZoomWidth:1,location:s,paramStart:ne.wL.MIN,paramEnd:ne.wL.MAX,xAxisIndex:[0],buckets:t?(0,te._W)(t):[],children:e=>(0,S.tZ)(re,{zoomProps:{...e},isLoading:n,isErrored:!!i,chartData:t,spanSlug:a})})]})}})]})}function re(e){const t=(0,O.u)(),{chartData:n,zoomProps:a,spanSlug:s}=e;if(!n)return(0,S.tZ)(G.Z,{height:"200px"});const i={grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},colors:()=>(0,H.hd)(s.op),seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:(e,t)=>(0,Q.CX)(e,(0,K.Px)(t))},yAxis:{type:"value",axisLabel:{color:t.chartLabel,formatter:e=>(0,Q.gu)(e,"number")}},xAxis:{type:"category",truncate:!0,axisTick:{alignWithLabel:!0}},height:200},r={seriesName:(0,o.t)("Count"),data:(0,te.GT)(n,{type:"duration"})};return(0,S.tZ)(g.Fragment,{children:(0,J.Z)({value:(0,S.tZ)(V.v,{...a,...i,series:[r],stacked:!0}),fixed:(0,S.tZ)(G.Z,{height:"200px"})})})}ie.displayName="ExclusiveTimeHistogram",re.displayName="Chart";var oe,le=n("./app/components/charts/chartZoom.tsx"),pe=n("./app/components/charts/eventsRequest.tsx"),ce=n("./app/components/charts/lineChart.tsx"),ue=n("./app/components/charts/utils.tsx"),de=n("./app/components/organizations/pageFilters/parse.tsx"),me=n("./app/utils/dates.tsx"),he=n("./app/utils/useApi.tsx"),ge=n("./app/utils/useRouter.tsx");function xe(e){const t=(0,L.T)(),n=(0,ge.Z)(),{organization:a,eventView:s,spanSlug:i,withoutZerofill:r}=e,l=(0,he.Z)(),p=(0,O.u)(),c=s.statsPeriod,u=s.start?(0,me.hC)(s.start):null,d=s.end?(0,me.hC)(s.end):null,{utc:m}=(0,de.fK)(t.query),x={start:u,end:d,period:c},Z=["percentileArray(spans_exclusive_time, 0.50)","percentileArray(spans_exclusive_time, 0.75)","percentileArray(spans_exclusive_time, 0.95)","percentileArray(spans_exclusive_time, 0.99)"],y=e=>{const{selected:n}=e,a=Object.keys(n).filter((e=>!n[e])),s={...t,query:{...t.query,unselectedSeries:a}};B.browserHistory.push(s)};return(0,S.BX)(g.Fragment,{children:[(0,S.BX)(A.ws,{children:[(0,o.t)("Self Time Breakdown"),(0,S.tZ)(W.Z,{size:"sm",position:"top",title:(0,o.t)("Self Time Breakdown reflects the span self time by percentile over time.")})]}),(0,S.tZ)(le.Z,{router:n,period:c,start:u,end:d,utc:"true"===m,children:e=>(0,S.tZ)(pe.Z,{api:l,organization:a,project:s.project,environment:s.environment,start:u,end:d,period:c,interval:(0,ue.ZS)(x,"high"),showLoading:!1,query:s.query,includePrevious:!1,yAxis:Z,partial:!0,withoutZerofill:r,queryExtras:{span:`${i.op}:${i.group}`},generatePathname:e=>`/organizations/${e.slug}/events-spans-stats/`,children:n=>{let{results:a,errored:s,loading:i,reloading:r,timeframe:o}=n;if(s)return(0,S.tZ)(R.Z,{children:(0,S.tZ)($.FC,{color:"gray300",size:"lg"})});const l={grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},colors:p.charts.getColorPalette(Z.length-2),seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:(e,t)=>(0,Q.CX)(e,"duration")},xAxis:o?{min:o.start,max:o.end}:void 0,yAxis:{axisLabel:{color:p.chartLabel,formatter:e=>(0,Q.gu)(e,"duration")}}},c={right:10,top:5,selected:(0,ue.RI)(t)},u=a?.map((e=>({...e,seriesName:(0,h.mV)(e.seriesName)})));return(0,S.BX)(I.Z,{loading:i,reloading:r,children:[(0,S.tZ)(M.Z,{visible:r}),(0,J.Z)({value:(0,S.tZ)(ce.w,{...e,...l,legend:c,onLegendSelectChanged:y,series:u??[]}),fixed:(0,S.tZ)(G.Z,{height:"200px"})})]})}})})]})}function Ze(e){const t=(0,L.T)(),n=(0,p.ro)(t.query.display,oe.TIMESERIES);return(0,S.BX)(P.Z,{children:[(0,S.tZ)(A.BO,{children:(0,S.tZ)(a.Z,{features:["performance-span-histogram-view"],children:t=>{let{hasFeature:a}=t;return a?n===oe.TIMESERIES?(0,S.tZ)(xe,{...e,withoutZerofill:!1}):(0,S.tZ)(ie,{...e}):(0,S.tZ)(xe,{...e,withoutZerofill:!1})}})}),(0,S.tZ)(a.Z,{features:["performance-span-histogram-view"],children:(0,S.BX)(A.xx,{children:[(0,S.BX)(A.m2,{children:[(0,S.tZ)(A.OT,{children:(0,o.t)("Total Events")}),(0,S.tZ)(A.uN,{"data-test-id":"total-value",children:(0,l.ri)(e.totalCount)?(0,S.tZ)(N.Z,{value:e.totalCount}):"—"})]}),(0,S.tZ)(A.m2,{"data-test-id":"display-toggle",children:(0,S.tZ)(q.Z,{title:(0,o.t)("Display"),selected:n,options:[{value:oe.TIMESERIES,label:(0,o.t)("Self Time Breakdown")},{value:oe.HISTOGRAM,label:(0,o.t)("Self Time Distribution")}],onChange:function(n){(0,F.Gi)("performance_views.span_summary.change_chart",{organization:e.organization,change_to_display:n}),B.browserHistory.push({pathname:t.pathname,query:{...t.query,display:n}})}})})]})})]})}xe.displayName="ExclusiveTimeTimeSeries",function(e){e.TIMESERIES="timeseries",e.HISTOGRAM="histogram"}(oe||(oe={})),Ze.displayName="Chart";const ye=Ze;var ve=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),fe=n("./app/components/button.tsx"),Se=n("./app/components/datePageFilter.tsx"),be=n("./app/components/environmentPageFilter.tsx"),we=n("./app/components/events/searchBar.tsx"),_e=n("./app/components/organizations/pageFilterBar.tsx"),je=n("./app/styles/space.tsx"),De=n("./app/utils/performance/histogram/index.tsx");function Ce(e){let{organization:t,eventView:n,location:a}=e;const s=(0,p.ro)(a.query.query,"");return(0,S.BX)(ze,{children:[(0,S.BX)(_e.Z,{condensed:!0,children:[(0,S.tZ)(be.Z,{}),(0,S.tZ)(Se.Z,{alignDropdown:"left",relativeOptions:h.CS,maxPickableDays:h.bc})]}),(0,S.tZ)(we.Z,{placeholder:(0,o.t)("Filter Transactions"),organization:t,projectIds:n.project,query:s,fields:n.fields,onSearch:e=>{B.browserHistory.push({pathname:a.pathname,query:{...a.query,cursor:void 0,query:String(e).trim()||void 0}})}}),(0,S.tZ)(fe.zx,{onClick:()=>{B.browserHistory.push({pathname:a.pathname,query:(0,De.V)(a,Object.values(ne.wL))})},disabled:!Object.values(ne.wL).some((e=>a.query[e])),children:(0,o.t)("Reset View")})]})}Ce.displayName="SpanDetailsControls";const ze=(0,ve.Z)("div",{target:"e1f3ccvz0"})("display:grid;gap:",(0,je.D)(2),";margin-bottom:",(0,je.D)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:auto 1fr auto;}");var Te=n("./app/components/performanceDuration.tsx"),Ee=n("./app/utils/formatters.tsx");function ke(e){const{spanSlug:t,suspectSpan:n,totalCount:a}=e,{description:s,frequency:i,avgOccurrences:r,p50ExclusiveTime:p,p75ExclusiveTime:c,p95ExclusiveTime:u,p99ExclusiveTime:d,sumExclusiveTime:m}=n??{};return(0,S.BX)(Be,{children:[(0,S.BX)(qe,{"data-test-id":"header-operation-name",children:[(0,S.tZ)(Ae,{children:(0,o.t)("Span Operation")}),(0,S.tZ)(Ne,{children:(0,S.tZ)(Le,{children:s??Ve})}),(0,S.tZ)(Pe,{"data-test-id":"operation-name",children:t.op})]}),(0,S.BX)(qe,{"data-test-id":"header-percentiles",children:[(0,S.tZ)(Ae,{children:(0,o.t)("Self Time Percentiles")}),(0,S.BX)(Fe,{children:[(0,S.BX)("div",{"data-test-id":"section-p50",children:[(0,S.tZ)(Ne,{children:(0,l.ri)(p)?(0,S.tZ)(Te.Z,{abbreviation:!0,milliseconds:p}):"—"}),(0,S.tZ)(Pe,{children:(0,o.t)("p50")})]}),(0,S.BX)("div",{"data-test-id":"section-p75",children:[(0,S.tZ)(Ne,{children:(0,l.ri)(c)?(0,S.tZ)(Te.Z,{abbreviation:!0,milliseconds:c}):"—"}),(0,S.tZ)(Pe,{children:(0,o.t)("p75")})]}),(0,S.BX)("div",{"data-test-id":"section-p95",children:[(0,S.tZ)(Ne,{children:(0,l.ri)(u)?(0,S.tZ)(Te.Z,{abbreviation:!0,milliseconds:u}):"—"}),(0,S.tZ)(Pe,{children:(0,o.t)("p95")})]}),(0,S.BX)("div",{"data-test-id":"section-p99",children:[(0,S.tZ)(Ne,{children:(0,l.ri)(d)?(0,S.tZ)(Te.Z,{abbreviation:!0,milliseconds:d}):"—"}),(0,S.tZ)(Pe,{children:(0,o.t)("p99")})]})]})]}),(0,S.BX)(qe,{"data-test-id":"header-frequency",children:[(0,S.tZ)(Ae,{children:(0,o.t)("Frequency")}),(0,S.tZ)(Ne,{children:(0,l.ri)(i)&&(0,l.ri)(a)?(0,Ee.rl)(Math.min(i,a)/a):"—"}),(0,S.tZ)(Pe,{children:(0,l.ri)(r)?(0,o._N)("[times] times per event",{times:r.toFixed(2)}):"—"})]}),(0,S.BX)(qe,{"data-test-id":"header-total-exclusive-time",children:[(0,S.tZ)(Ae,{children:(0,o.t)("Total Self Time")}),(0,S.tZ)(Ne,{children:(0,l.ri)(m)?(0,S.tZ)(Te.Z,{abbreviation:!0,milliseconds:m}):"—"}),(0,S.tZ)(Pe,{children:(0,l.ri)(i)?(0,o._N)("[events] events",{events:(0,S.tZ)(N.Z,{value:i})}):"—"})]})]})}ke.displayName="SpanDetailsHeader";const Be=(0,ve.Z)("div",{target:"e14vyzsa7"})("display:grid;grid-template-columns:1fr;gap:",(0,je.D)(4),";margin-bottom:",(0,je.D)(2),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:1fr repeat(3, max-content);}"),qe=(0,ve.Z)("div",{target:"e14vyzsa6"})((e=>e.theme.overflowEllipsis),";height:78px;"),Ae=(0,ve.Z)(A.OT,{target:"e14vyzsa5"})({name:"ti75j2",styles:"margin:0"}),Ne=(0,ve.Z)("div",{target:"e14vyzsa4"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";padding:",(0,je.D)(.5)," 0;max-height:32px;"),Pe=(0,ve.Z)("div",{target:"e14vyzsa3"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";"),Fe=(0,ve.Z)("div",{target:"e14vyzsa2"})("display:grid;grid-template-columns:repeat(4, max-content);gap:",(0,je.D)(3),";"),Le=(0,ve.Z)("div",{target:"e14vyzsa1"})((e=>e.theme.overflowEllipsis),";"),Oe=(0,ve.Z)("span",{target:"e14vyzsa0"})("color:",(e=>e.theme.gray300),";"),Ve=(0,S.tZ)(Oe,{children:(0,o.t)("(unnamed span)")});var Xe=n("./app/components/gridEditable/index.tsx"),Re=n("./app/components/gridEditable/sortLink.tsx"),Ie=n("./app/components/links/link.tsx"),Me=n("./app/components/pagination.tsx"),He=n("./app/components/performance/waterfall/rowBar.tsx"),Ge=n("./app/components/tooltip.tsx"),We=n("./app/utils/discover/fieldRenderers.tsx"),$e=n("./app/views/performance/transactionSummary/utils.tsx");function Qe(e){const{location:t,organization:n,project:a,examples:s,suspectSpan:i,transactionName:r,isLoading:o,pageLinks:p}=e;if(!(0,l.ri)(s))return null;const c=s.filter((e=>e.spans.length>0)).map((e=>({id:e.id,project:a?.slug,timestamp:1e3*e.finishTimestamp,transactionDuration:1e3*(e.finishTimestamp-e.startTimestamp),spanDuration:e.nonOverlappingExclusiveTime,occurrences:e.spans.length,cumulativeDuration:e.spans.reduce(((e,t)=>e+t.exclusiveTime),0),spans:e.spans})));return(0,S.BX)(g.Fragment,{children:[(0,S.tZ)(D.oF,{id:"SpanDetails-SpanDetailsTable",hasData:!!c.length,isLoading:o,children:(0,S.tZ)(Xe.ZP,{isLoading:o,data:c,columnOrder:Ye,columnSortBy:[],grid:{renderHeadCell:Ke,renderBodyCell:Je(t,n,r,i)},location:t})}),(0,S.tZ)(Me.Z,{pageLinks:p??null})]})}function Ke(e,t){const n=(0,K.qG)(e.key,Ue[e.key]);return(0,S.tZ)(Re.Z,{title:e.name,align:n,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function Je(e,t,n,a){return function(s,i){if("spanDuration"===s.key&&i.transactionDuration)return(0,S.tZ)(nt,{spanOp:a?.op??"",spanDuration:i.spanDuration,transactionDuration:i.transactionDuration});let r=(0,We.Js)(s.key,Ue)(i,{location:e,organization:t});if("id"===s.key){const a=i.spans.length?i.spans.reduce(((e,t)=>e.exclusiveTime>=t.exclusiveTime?e:t)):null,s=(0,$e.vd)(n)(t,i,e.query,a.id);r=(0,S.tZ)(Ie.Z,{to:s,children:r})}return r}}Qe.displayName="SpanTable",Ke.displayName="renderHeadCell";const Ue={id:"string",timestamp:"date",spanDuration:"duration",occurrences:"integer",cumulativeDuration:"duration"},Ye=[{key:"id",name:(0,o.t)("Event ID"),width:Xe.z7},{key:"timestamp",name:(0,o.t)("Timestamp"),width:Xe.z7},{key:"spanDuration",name:(0,o.t)("Span Duration"),width:Xe.z7},{key:"occurrences",name:(0,o.t)("Count"),width:Xe.z7},{key:"cumulativeDuration",name:(0,o.t)("Cumulative Duration"),width:Xe.z7}],et=(0,ve.Z)("div",{target:"e1y3mgni1"})("position:relative;display:flex;top:",(0,je.D)(.5),";background-color:",(e=>e.theme.gray100),";"),tt=(0,ve.Z)(He.e,{target:"e1y3mgni0"})({name:"1ics03r",styles:"position:relative;width:100%;top:0"});function nt(e){const{spanOp:t,spanDuration:n,transactionDuration:a}=e,s=n/a,i=s<.7?"right":"inset";return(0,S.tZ)(et,{children:(0,S.tZ)("div",{style:{width:(0,H.yI)(s)},children:(0,S.tZ)(Ge.u,{title:(0,o._N)("[percentage] of the transaction",{percentage:(0,Ee.rl)(s)}),containerDisplayMode:"block",children:(0,S.tZ)(tt,{style:{backgroundColor:(0,H.hd)(t)},children:(0,S.tZ)(He.R,{durationDisplay:i,showDetail:!1,children:(0,S.tZ)(Te.Z,{abbreviation:!0,milliseconds:n})})})})})})}function at(e){const{location:t,organization:n,eventView:a,project:i,transactionName:r,spanSlug:o}=e,l=(0,p.ro)(t.query[ne.wL.MIN]),c=(0,p.ro)(t.query[ne.wL.MAX]);return(0,C.Z)("performance_views.span_summary.view","Performance Views: Span Summary page viewed"),(0,z.Z)({project_platforms:i?(0,d.p9)(t,[i]):""}),(0,S.BX)(g.Fragment,{children:[(0,S.tZ)(s.h4,{children:(0,S.BX)(s.oB,{children:[(0,S.tZ)(T.Z,{organization:n,location:t,transaction:{project:i?.id??"",name:r},tab:E.Z.SPANS,spanSlug:o}),(0,S.BX)(s.Dx,{children:[i&&(0,S.tZ)(x.Z,{project:i,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:i.slug}}),r]})]})}),(0,S.tZ)(s.uT,{children:(0,S.tZ)(s.or,{fullWidth:!0,children:(0,S.tZ)(Z.Z,{eventView:(0,h.zW)(a),orgSlug:n.slug,location:t,referrer:"api.performance.transaction-spans",cursor:"0:0:1",noPagination:!0,children:e=>{let{tableData:s}=e;const p=s?.data?.[0]?.["count()"]??null;return p&&(0,D.r7)("spans.totalCount",1e3,p),(0,S.tZ)(j.Z,{location:t,orgSlug:n.slug,eventView:it(a),perSuspect:0,spanOps:[o.op],spanGroups:[o.group],cursor:"0:0:1",minExclusiveTime:l,maxExclusiveTime:c,children:e=>(0,S.tZ)(_,{location:t,orgSlug:n.slug,eventView:a,spanOp:o.op,spanGroup:o.group,limit:10,minExclusiveTime:l,maxExclusiveTime:c,children:s=>(0,S.tZ)(st,{location:t,organization:n,project:i,eventView:a,spanSlug:o,transactionName:r,totalCount:p,suspectSpansResults:e,spanExamplesResults:s})})})}})})})]})}function st(e){const{location:t,organization:n,project:s,eventView:i,spanSlug:r,transactionName:o,totalCount:l,suspectSpansResults:p,spanExamplesResults:c}=e,u=p.suspectSpans?.[0],d=c.examples?.[0]?.examples,m=u?.frequency;return(0,S.BX)(g.Fragment,{children:[(0,S.tZ)(a.Z,{features:["performance-span-histogram-view"],children:(0,S.tZ)(Ce,{organization:n,location:t,eventView:i})}),(0,S.tZ)(ke,{spanSlug:r,totalCount:l,suspectSpan:u}),(0,S.tZ)(ye,{totalCount:m,organization:n,eventView:i,spanSlug:r}),(0,S.tZ)(Qe,{location:t,organization:n,project:s,suspectSpan:u,transactionName:o,isLoading:c.isLoading,examples:d??[],pageLinks:c.pageLinks})]})}function it(e){return(e=e.withSorts([{field:k.g.AVG_OCCURRENCE,kind:"desc"}])).fields=[{field:"count()"},{field:"count_unique(id)"},{field:"equation|count() / count_unique(id)"},{field:"sumArray(spans_exclusive_time)"},{field:"percentileArray(spans_exclusive_time, 0.50)"},{field:"percentileArray(spans_exclusive_time, 0.75)"},{field:"percentileArray(spans_exclusive_time, 0.95)"},{field:"percentileArray(spans_exclusive_time, 0.99)"}],e}function rt(e){const{location:t,params:n}=e,o=(0,d.JY)(t),g=(0,h.W6)(n.spanSlug),x=(0,c.Z)(),{projects:Z}=(0,u.Z)(),y=(0,p.ro)(t.query.project);if(!(0,l.ri)(y)||!(0,l.ri)(o)||!(0,l.ri)(g))return(0,m.C1)(x,t),null;const v=Z.find((e=>e.id===y)),f=(0,h.xz)({location:t,transactionName:o});return(0,S.tZ)(r.Z,{title:ot(o),orgSlug:x.slug,projectSlug:v?.slug,children:(0,S.tZ)(a.Z,{features:["performance-view"],organization:x,renderDisabled:m.Ox,children:(0,S.tZ)(i.Z,{shouldForceProject:(0,l.ri)(v),forceProject:v,specificProjectSlugs:(0,l.ri)(v)?[v.slug]:[],children:(0,S.tZ)(s.T3,{children:(0,S.tZ)(at,{location:t,organization:x,eventView:f,project:v,transactionName:o,spanSlug:g})})})})})}function ot(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,o.t)("Performance")].join(" - "):[(0,o.t)("Summary"),(0,o.t)("Performance")].join(" - ")}nt.displayName="SpanDurationBar",at.displayName="SpanDetailsContentWrapper",st.displayName="SpanDetailsContent",rt.displayName="SpanDetails"},"../node_modules/lodash/assign.js":(e,t,n)=>{var a=n("../node_modules/lodash/_assignValue.js"),s=n("../node_modules/lodash/_copyObject.js"),i=n("../node_modules/lodash/_createAssigner.js"),r=n("../node_modules/lodash/isArrayLike.js"),o=n("../node_modules/lodash/_isPrototype.js"),l=n("../node_modules/lodash/keys.js"),p=Object.prototype.hasOwnProperty,c=i((function(e,t){if(o(t)||r(t))s(t,l(t),e);else for(var n in t)p.call(t,n)&&a(e,n,t[n])}));e.exports=c},"../node_modules/lodash/negate.js":e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"../node_modules/lodash/omitBy.js":(e,t,n)=>{var a=n("../node_modules/lodash/_baseIteratee.js"),s=n("../node_modules/lodash/negate.js"),i=n("../node_modules/lodash/pickBy.js");e.exports=function(e,t){return i(e,s(a(t)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionSpans_spanDetails_index_tsx-node_modules_-727707.316269fa5bacb1c0295d29d2abe903a3.js.map