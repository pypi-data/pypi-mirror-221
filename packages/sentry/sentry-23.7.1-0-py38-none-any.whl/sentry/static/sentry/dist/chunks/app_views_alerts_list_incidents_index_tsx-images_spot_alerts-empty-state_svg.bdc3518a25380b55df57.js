"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_alerts_list_incidents_index_tsx-images_spot_alerts-empty-state_svg"],{"./app/components/onboardingPanel.tsx":(t,e,n)=>{n.d(e,{Z:()=>c});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/components/panels/panel.tsx"),a=n("./app/styles/space.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(t){let{image:e,noCenter:n,children:i,...a}=t;return(0,r.tZ)(s.Z,{...a,children:(0,r.BX)(l,{children:[e?(0,r.tZ)(p,{children:e}):null,(0,r.tZ)(d,{centered:!e&&!n,children:i})]})})}o.displayName="OnboardingPanel";const l=(0,i.Z)("div",{target:"euclof22"})("padding:",(0,a.D)(3),";position:relative;@media (min-width: ",(t=>t.theme.breakpoints.small),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(t=>t.theme.breakpoints.medium),"){min-height:350px;}"),d=(0,i.Z)("div",{target:"euclof21"})("min-width:0;z-index:1;",(t=>t.centered?"text-align: center;":"")," ",(t=>t.centered?"max-width: 600px;":""),"@media (min-width: ",(t=>t.theme.breakpoints.small),"){flex:2;}"),p=(0,i.Z)(d,{target:"euclof20"})("position:relative;min-height:100px;max-width:300px;min-width:150px;margin:",(0,a.D)(2)," auto;@media (min-width: ",(t=>t.theme.breakpoints.small),"){flex:1;margin:",(0,a.D)(3),";max-width:auto;}"),c=o},"./app/views/alerts/list/incidents/index.tsx":(t,e,n)=>{n.r(e),n.d(e,{default:()=>at});var i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),r=n("./app/actionCreators/prompts.tsx"),o=n("./app/components/acl/feature.tsx"),l=n("./app/components/alert.tsx"),d=n("./app/components/button.tsx"),p=n("./app/components/createAlertButton.tsx"),c=n("./app/components/deprecatedAsyncComponent.tsx"),h=n("./app/components/layouts/thirds.tsx"),m=n("./app/components/links/externalLink.tsx"),u=n("./app/components/organizations/pageFilters/container.tsx"),g=n("./app/components/pagination.tsx"),x=n("./app/components/panels/panelTable.tsx"),Z=n("./app/components/sentryDocumentTitle.tsx"),f=n("./app/locale.tsx"),y=n("./app/styles/space.tsx"),w=n("./app/utils/analytics.tsx"),b=n("./app/utils/projects.tsx"),v=n("./app/views/alerts/filterBar.tsx"),S=n("./app/views/alerts/utils/index.tsx"),j=n("./app/views/alerts/list/header.tsx");const z=n.p+"assets/alerts-empty-state.4d03bc7c2675b8facd23.svg";var _=n("./app/components/buttonBar.tsx"),k=n("./app/components/onboardingPanel.tsx"),L=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function B(t){let{actions:e}=t;return(0,L.BX)(k.Z,{image:(0,L.tZ)(C,{src:z}),children:[(0,L.tZ)("h3",{children:(0,f.t)("More signal, less noise")}),(0,L.tZ)("p",{children:(0,f.t)("Not every error is worth an email. Set your own rules for alerts you need, with information that helps.")}),(0,L.tZ)(q,{gap:1,children:e})]})}B.displayName="Onboarding";const C=(0,s.Z)("img",{target:"e40hvrx1"})("@media (min-width: ",(t=>t.theme.breakpoints.small),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width: ",(t=>t.theme.breakpoints.large),"){transform:translateX(-60%);width:280px;}@media (min-width: ",(t=>t.theme.breakpoints.xlarge),"){transform:translateX(-75%);width:320px;}"),q=(0,s.Z)(_.ZP,{target:"e40hvrx0"})({name:"vpj881",styles:"grid-template-columns:repeat(auto-fit, minmax(130px, max-content))"}),A=B;var D=n("../node_modules/moment/moment.js"),T=n.n(D),X=n("./app/components/avatar/actorAvatar.tsx"),F=n("./app/components/duration.tsx"),I=n("./app/components/errorBoundary.tsx"),R=n("./app/components/idBadge/index.tsx"),E=n("./app/components/links/link.tsx"),P=n("./app/components/tag.tsx"),N=n("./app/components/timeSince.tsx"),O=n("./app/stores/teamStore.tsx"),M=n("./app/utils/getDynamicText.tsx"),V=n("./app/views/alerts/types.tsx");function G(t){let{incident:e,projectsLoaded:n,projects:i,organization:s}=t;const r=e.projects[0],o=T()(e.dateStarted),l=T().duration(T()(e.dateClosed||new Date).diff(o)).as("seconds"),d=(0,a.useMemo)((()=>i.find((t=>t.slug===r))),[r,i]),p={pathname:(0,S.Gu)(s,e),query:{alert:e.identifier}},c=e.alertRule.owner?.split(":")[1];let h="";c&&(h=O.Z.getById(c)?.name??"");const m=c?{type:"team",id:c,name:h}:null;return(0,L.BX)(I.Z,{children:[(0,L.tZ)(Y,{children:(0,L.tZ)(W,{"data-test-id":"alert-title",children:(0,L.tZ)(E.Z,{to:p,children:e.title})})}),(0,L.tZ)(H,{children:(0,M.Z)({value:(0,L.tZ)(N.Z,{date:e.dateStarted,unitStyle:"extraShort"}),fixed:"1w ago"})}),(0,L.tZ)(H,{children:e.status===V.vt.CLOSED?(0,L.tZ)(F.Z,{seconds:(0,M.Z)({value:l,fixed:1200})}):(0,L.tZ)(P.Z,{type:"warning",children:(0,f.t)("Still Active")})}),(0,L.tZ)(Y,{children:(0,L.tZ)($,{avatarSize:18,project:n?d:{slug:r}})}),(0,L.BX)(H,{children:["#",e.id]}),(0,L.tZ)(Y,{children:m?(0,L.BX)(a.Fragment,{children:[(0,L.tZ)(K,{actor:m,size:18,hasTooltip:!1})," ",(0,L.tZ)(J,{children:m.name})]}):"-"})]})}G.displayName="AlertListRow";const W=(0,s.Z)("div",{target:"edl5xpp5"})((t=>t.theme.overflowEllipsis)," min-width:130px;"),$=(0,s.Z)(R.Z,{target:"edl5xpp4"})({name:"ozd7xs",styles:"flex-shrink:0"}),Y=(0,s.Z)("div",{target:"edl5xpp3"})((t=>t.theme.overflowEllipsis)," display:flex;align-items:center;line-height:1.6;"),H=(0,s.Z)(Y,{target:"edl5xpp2"})({name:"1s45tu0",styles:"white-space:nowrap;font-variant-numeric:tabular-nums"}),J=(0,s.Z)("span",{target:"edl5xpp1"})((t=>t.theme.overflowEllipsis),";"),K=(0,s.Z)(X.Z,{target:"edl5xpp0"})("margin-right:",(0,y.D)(1),";"),Q=G,U="https://docs.sentry.io/workflow/alerts-notifications/alerts/?_ga=2.21848383.580096147.1592364314-1444595810.1582160976";class tt extends c.Z{constructor(){super(...arguments),(0,i.Z)(this,"handleChangeSearch",(t=>{const{router:e,location:n}=this.props,{cursor:i,page:s,...a}=n.query;e.push({pathname:n.pathname,query:{...a,title:t}})})),(0,i.Z)(this,"handleChangeFilter",(t=>{const{router:e,location:n}=this.props,{cursor:i,page:s,...a}=n.query;e.push({pathname:n.pathname,query:{...a,team:t.length>0?t:""}})})),(0,i.Z)(this,"handleChangeStatus",(t=>{const{router:e,location:n}=this.props,{cursor:i,page:s,...a}=n.query;e.push({pathname:n.pathname,query:{...a,status:"all"===t?void 0:t}})}))}getEndpoints(){const{organization:t,location:e}=this.props,{query:n}=e,i=(0,S.g2)(n.status);return[["incidentList",`/organizations/${t.slug}/incidents/`,{query:{...n,status:"all"===i?void 0:i,team:(0,S.LI)(n.team),expand:["original_alert_rule"]}}]]}async onLoadAllEndpointsSuccess(){const{incidentList:t}=this.state;if(!t||0!==t.length)return void this.setState({hasAlertRule:!0,firstVisitShown:!1});this.setState({loading:!0});const{location:e,organization:n}=this.props,i=(await this.api.requestPromise(`/organizations/${n.slug}/alert-rules/`,{method:"GET",query:e.query})).length>0;if(i)return void this.setState({hasAlertRule:i,firstVisitShown:!1,loading:!1});const s=await(0,r.vu)(this.api,{organizationId:n.id,feature:"alert_stream"}),a=!s?.dismissedTime;a&&(0,r.Xt)(this.api,{feature:"alert_stream",organizationId:n.id,status:"dismissed"}),this.setState({hasAlertRule:i,firstVisitShown:a,loading:!1})}get projectsFromIncidents(){const{incidentList:t}=this.state;return[...new Set(t?.map((t=>{let{projects:e}=t;return e})).flat())]}tryRenderOnboarding(){const{firstVisitShown:t}=this.state,{organization:e}=this.props;if(!t)return null;const n=(0,L.BX)(a.Fragment,{children:[(0,L.tZ)(d.zx,{size:"sm",external:!0,href:U,children:(0,f.t)("View Features")}),(0,L.tZ)(p.Z,{organization:e,iconProps:{size:"xs"},size:"sm",priority:"primary",referrer:"alert_stream",children:(0,f.t)("Create Alert")})]});return(0,L.tZ)(A,{actions:n})}renderLoading(){return this.renderBody()}renderList(){const{loading:t,incidentList:e,incidentListPageLinks:n,hasAlertRule:i}=this.state,{organization:s}=this.props,r=t||0===e?.length&&void 0===i;return(0,L.BX)(a.Fragment,{children:[this.tryRenderOnboarding()??(0,L.tZ)(nt,{isLoading:r,isEmpty:0===e?.length,emptyMessage:(0,f.t)("No incidents exist for the current query."),emptyAction:(0,L.tZ)(st,{children:(0,f._N)("Learn more about [link:Metric Alerts]",{link:(0,L.tZ)(m.Z,{href:U})})}),headers:[(0,f.t)("Alert Rule"),(0,f.t)("Triggered"),(0,f.t)("Duration"),(0,f.t)("Project"),(0,f.t)("Alert ID"),(0,f.t)("Team")],children:(0,L.tZ)(b.Z,{orgId:s.slug,slugs:this.projectsFromIncidents,children:t=>{let{initiallyLoaded:n,projects:i}=t;return e.map((t=>(0,L.tZ)(Q,{projectsLoaded:n,projects:i,incident:t,organization:s},t.id)))}})}),(0,L.tZ)(g.Z,{pageLinks:n})]})}renderBody(){const{organization:t,router:e,location:n}=this.props;return(0,L.tZ)(Z.Z,{title:(0,f.t)("Alerts"),orgSlug:t.slug,children:(0,L.BX)(u.Z,{children:[(0,L.tZ)(j.Z,{router:e,activeTab:"stream"}),(0,L.tZ)(h.uT,{children:(0,L.BX)(h.or,{fullWidth:!0,children:[!this.tryRenderOnboarding()&&(0,L.BX)(a.Fragment,{children:[(0,L.tZ)(it,{showIcon:!0,children:(0,f.t)("This page only shows metric alerts.")}),(0,L.tZ)(v.Z,{location:n,onChangeFilter:this.handleChangeFilter,onChangeSearch:this.handleChangeSearch,onChangeStatus:this.handleChangeStatus,hasStatusFilters:!0})]}),this.renderList()]})})]})})}}function et(t){return(0,a.useEffect)((()=>{(0,w.Gi)("alert_stream.viewed",{organization:t.organization})}),[]),(0,L.tZ)(o.Z,{features:["incidents"],hookName:"feature-disabled:alerts-page",renderDisabled:()=>(0,L.tZ)(h.uT,{children:(0,L.tZ)(h.or,{fullWidth:!0,children:(0,L.tZ)(l.bZ,{type:"warning",children:(0,f.t)("You don't have access to this feature")})})}),children:(0,L.tZ)(tt,{...t})})}et.displayName="IncidentsListContainer";const nt=(0,s.Z)(x.Z,{target:"eqdnd472"})("font-size:",(t=>t.theme.fontSizeMedium),";&>div{padding:",(0,y.D)(1.5)," ",(0,y.D)(2),";}"),it=(0,s.Z)(l.bZ,{target:"eqdnd471"})("margin-bottom:",(0,y.D)(1.5),";"),st=(0,s.Z)("p",{target:"eqdnd470"})("font-size:",(t=>t.theme.fontSizeLarge),";"),at=et}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_list_incidents_index_tsx-images_spot_alerts-empty-state_svg.de34c5fb57399a4d7e095abc0436a6cd.js.map