"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_pageLayout_tsx","app_components_pickProjectToContinue_tsx"],{"./app/components/createAlertButton.tsx":(e,t,r)=>{r.d(t,{K:()=>E,Z:()=>g});var a=r("./app/actionCreators/indicator.tsx"),s=r("./app/actionCreators/navigation.tsx"),n=r("./app/components/acl/access.tsx"),o=r("./app/components/assistant/guideAnchor.tsx"),i=r("./app/components/button.tsx"),c=r("./app/components/links/link.tsx"),l=r("./app/icons/index.tsx"),p=r("./app/locale.tsx"),u=r("./app/utils/useApi.tsx"),d=r("./app/utils/useRouter.tsx"),S=r("./app/utils/withProjects.tsx"),m=r("./app/views/alerts/wizard/options.tsx"),h=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function E(e){let{projects:t,eventView:r,organization:a,referrer:s,onClick:n,alertType:o,disableMetricDataset:i,...c}=e;const l=t.find((e=>e.id===`${r.project[0]}`)),u=r.generateQueryStringObject();u.query?.includes(`project:${l?.slug}`)&&(u.query=u.query.replace(`project:${l?.slug}`,""));const d=o?m.FZ[o]:m.F4,S={pathname:`/organizations/${a.slug}/alerts/new/metric/`,query:{...u,createFromDiscover:!0,disableMetricDataset:i,referrer:s,...d,project:l?.slug,aggregate:u.yAxis??d.aggregate}};return(0,h.tZ)(T,{organization:a,projects:t,onClick:()=>{n?.()},to:S,"aria-label":(0,p.t)("Create Alert"),...c})}function T(e){let{organization:t,projects:r,projectSlug:S,iconProps:m,referrer:E,hideIcon:T,showPermissionGuide:g,alertOption:R,onEnter:_,...A}=e;const N=(0,d.Z)(),f=(0,u.Z)(),y=e=>{const r=new URLSearchParams;return E&&r.append("referrer",E),":projectId"!==e&&r.append("project",e),R&&r.append("alert_option",R),`/organizations/${t.slug}/alerts/wizard/?${r.toString()}`};function I(e){e.preventDefault(),_?.(),(0,s.T)(y(":projectId"),N)}const O=(0,p._N)("Ask your organization owner or manager to [settingsLink:enable alerts access] for you.",{settingsLink:(0,h.tZ)(c.Z,{to:`/settings/${t.slug}`})}),C=e=>(0,h.tZ)(i.zx,{disabled:!e,title:e?void 0:O,icon:!T&&(0,h.tZ)(l.vr,{...m}),to:S?y(S):void 0,tooltipProps:{isHoverable:!0,position:"top",overlayStyle:{maxWidth:"270px"}},onClick:S?_:I,...A,children:A.children??(0,p.t)("Create Alert")}),x=!t.alertsMemberWrite&&!!g,v=(0,n.d)(["alerts:write"],{organization:t})||r.some((e=>(0,n.d)(["alerts:write"],{project:e}))),j=(0,n.d)(["org:write"],{organization:t});return x?(0,h.tZ)(o.Z,{target:j?"alerts_write_owner":"alerts_write_member",onFinish:j?async function(){const e=`/organizations/${t.slug}/`;(0,a.E3)();try{await f.requestPromise(e,{method:"PUT",data:{alertsMemberWrite:!0}}),(0,a.S9)((0,p.t)("Successfully updated organization settings"))}catch(e){(0,a.Iw)((0,p.t)("Unable to update organization settings"))}}:void 0,children:C(v)}):C(v)}E.displayName="CreateAlertFromViewButton";const g=(0,S.Z)(T)},"./app/components/pickProjectToContinue.tsx":(e,t,r)=>{r.d(t,{Z:()=>l});var a=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/es.array.push.js"),r("./app/actionCreators/modal.tsx")),n=r("./app/components/contextPickerModal.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{noProjectRedirectPath:t,nextPath:r,router:a,projects:i,allowAllProjectsSelection:l=!1}=e;const p=r.query;let u=!1,d=`${r.pathname}?project=`;if(p){const e=[...Object.entries(p).filter((e=>{let[t,r]=e;return"project"!==t})).map((e=>{let[t,r]=e;return`${t}=${r}`})),"project="].join("&");d=`${r.pathname}?${e}`}return 1===i.length?(a.replace(d+i[0].id),null):((0,s.openModal)((e=>(0,o.tZ)(n.Z,{...e,needOrg:!1,needProject:!0,nextPath:`${d}:project`,onFinish:e=>{u=!0,a.replace(e)},projectSlugs:i.map((e=>e.slug)),allowAllProjectsSelection:l})),{onClose(){u||a.push(t)}}),(0,o.tZ)(c,{}))}i.displayName="PickProjectToContinue";const c=(0,a.Z)("div",{target:"e1pnb7yr0"})({name:"4wiox3",styles:"height:100vh;width:100%"}),l=i},"./app/components/replays/replayCountBadge.tsx":(e,t,r)=>{r.d(t,{Z:()=>o});var a=r("./app/components/badge.tsx"),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{count:t}=e;const r=t&&t>50?"50+":t??null;return(0,s.tZ)(a.Z,{text:r})}n.displayName="ReplayCountBadge";const o=n},"./app/utils/replays/projectSupportsReplay.tsx":(e,t,r)=>{r.d(t,{Z:()=>n,u:()=>s});var a=r("./app/data/platformCategories.tsx");function s(e){return!(!e||!e.platform)&&(a.Vq.includes(e.platform)||a.y3.some((t=>t===e.platform)))}const n=function(e){return Boolean(e.platform&&a.Vq.includes(e.platform))}},"./app/views/alerts/rules/metric/types.tsx":(e,t,r)=>{r.d(t,{F4:()=>n,GM:()=>c,LO:()=>m,Lm:()=>h,Tb:()=>d,Us:()=>S,XH:()=>u,Yh:()=>l,hd:()=>E,lK:()=>p,lT:()=>s,qz:()=>i,t6:()=>o});var a=r("./app/locale.tsx");let s,n,o,i,c,l,p,u,d,S;!function(e){e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW"}(s||(s={})),function(e){e.CRITICAL="critical",e.WARNING="warning",e.RESOLVE="resolve"}(n||(n={})),function(e){e.COUNT="count",e.CHANGE="change",e.PERCENT="percent"}(o||(o={})),function(e){e.ERRORS="events",e.TRANSACTIONS="transactions",e.GENERIC_METRICS="generic_metrics",e.SESSIONS="sessions",e.METRICS="metrics"}(i||(i={})),function(e){e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction",e.USER="user",e.SESSION="session"}(c||(c={})),function(e){e.ERROR_DEFAULT="error_default",e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(l||(l={})),function(e){e.CRASH_FREE_SESSIONS="percentage(sessions_crashed, sessions) AS _crash_rate_alert_aggregate",e.CRASH_FREE_USERS="percentage(users_crashed, users) AS _crash_rate_alert_aggregate"}(p||(p={})),function(e){e.SIX_HOURS="6h",e.ONE_DAY="1d",e.THREE_DAYS="3d",e.SEVEN_DAYS="10000m",e.FOURTEEN_DAYS="14d",e.THIRTY_DAYS="30d"}(u||(u={})),function(e){e[e.ONE_MINUTE=1]="ONE_MINUTE",e[e.FIVE_MINUTES=5]="FIVE_MINUTES",e[e.TEN_MINUTES=10]="TEN_MINUTES",e[e.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",e[e.THIRTY_MINUTES=30]="THIRTY_MINUTES",e[e.ONE_HOUR=60]="ONE_HOUR",e[e.TWO_HOURS=120]="TWO_HOURS",e[e.FOUR_HOURS=240]="FOUR_HOURS",e[e.ONE_DAY=1440]="ONE_DAY"}(d||(d={})),function(e){e.EMAIL="email",e.SLACK="slack",e.PAGERDUTY="pagerduty",e.MSTEAMS="msteams",e.SENTRY_APP="sentry_app"}(S||(S={}));const m={[S.EMAIL]:(0,a.t)("Emaiâ€‹l"),[S.SLACK]:(0,a.t)("Slack"),[S.PAGERDUTY]:(0,a.t)("Pagerduty"),[S.MSTEAMS]:(0,a.t)("MS Teams"),[S.SENTRY_APP]:(0,a.t)("Notification")};let h;!function(e){e.SPECIFIC="specific",e.USER="user",e.TEAM="team",e.SENTRY_APP="sentry_app"}(h||(h={}));const E={[h.USER]:(0,a.t)("Member"),[h.TEAM]:(0,a.t)("Team")}},"./app/views/alerts/wizard/options.tsx":(e,t,r)=>{r.d(t,{A_:()=>d,F4:()=>m,F7:()=>h,FZ:()=>S,KV:()=>A,LH:()=>E,LU:()=>f,S:()=>y,VS:()=>p,gb:()=>u});var a=r("../node_modules/lodash/mapValues.js"),s=r.n(a),n=r("./app/locale.tsx"),o=r("./app/utils/fields/index.ts"),i=r("./app/views/alerts/rules/metric/types.tsx");let c,l;!function(e){e[e.ERROR=0]="ERROR",e[e.PERFORMANCE=1]="PERFORMANCE",e[e.CRASH_RATE=2]="CRASH_RATE"}(c||(c={})),function(e){e.DISCOVER="discover",e.METRICS="metrics",e.METRICS_ENHANCED="metricsEnhanced"}(l||(l={}));const p={[i.qz.ERRORS]:c.ERROR,[i.qz.TRANSACTIONS]:c.PERFORMANCE,[i.qz.GENERIC_METRICS]:c.PERFORMANCE,[i.qz.METRICS]:c.CRASH_RATE,[i.qz.SESSIONS]:c.CRASH_RATE},u={issues:(0,n.t)("Issues"),num_errors:(0,n.t)("Number of Errors"),users_experiencing_errors:(0,n.t)("Users Experiencing Errors"),throughput:(0,n.t)("Throughput"),trans_duration:(0,n.t)("Transaction Duration"),apdex:(0,n.t)("Apdex"),failure_rate:(0,n.t)("Failure Rate"),lcp:(0,n.t)("Largest Contentful Paint"),fid:(0,n.t)("First Input Delay"),cls:(0,n.t)("Cumulative Layout Shift"),custom:(0,n.t)("Custom Metric"),crash_free_sessions:(0,n.t)("Crash Free Session Rate"),crash_free_users:(0,n.t)("Crash Free User Rate")},d=e=>[{categoryHeading:(0,n.t)("Errors"),options:["issues","num_errors","users_experiencing_errors"]},...e.features.includes("crash-rate-alerts")?[{categoryHeading:(0,n.t)("Sessions"),options:["crash_free_sessions","crash_free_users"]}]:[],{categoryHeading:(0,n.t)("Performance"),options:["throughput","trans_duration","apdex","failure_rate","lcp","fid","cls"]},{categoryHeading:(0,n.t)("Other"),options:["custom"]}],S={num_errors:{aggregate:"count()",dataset:i.qz.ERRORS,eventTypes:i.GM.ERROR},users_experiencing_errors:{aggregate:"count_unique(user)",dataset:i.qz.ERRORS,eventTypes:i.GM.ERROR},throughput:{aggregate:"count()",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},trans_duration:{aggregate:"p95(transaction.duration)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},apdex:{aggregate:"apdex(300)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},failure_rate:{aggregate:"failure_rate()",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},lcp:{aggregate:"p95(measurements.lcp)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},fid:{aggregate:"p95(measurements.fid)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},cls:{aggregate:"p95(measurements.cls)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},custom:{aggregate:"p95(measurements.fp)",dataset:i.qz.TRANSACTIONS,eventTypes:i.GM.TRANSACTION},crash_free_sessions:{aggregate:i.lK.CRASH_FREE_SESSIONS,dataset:i.qz.SESSIONS,eventTypes:i.GM.SESSION},crash_free_users:{aggregate:i.lK.CRASH_FREE_USERS,dataset:i.qz.SESSIONS,eventTypes:i.GM.USER}},m=S.num_errors,h=new Set(["num_errors","users_experiencing_errors","throughput","apdex","failure_rate","crash_free_sessions","crash_free_users"]),E=new Set(["trans_duration","lcp","fid","cls"]),T=[o.Sh.RELEASE,o.Sh.TRANSACTION,o.Sh.TRANSACTION_OP,o.Sh.TRANSACTION_STATUS,o.Sh.HTTP_METHOD,o.Sh.HTTP_STATUS_CODE,o.Sh.BROWSER_NAME,o.Sh.GEO_COUNTRY_CODE,o.Sh.OS_NAME],g=[o.Sh.RELEASE],R=[o.Sh.AGE,o.Sh.ASSIGNED,o.Sh.ASSIGNED_OR_SUGGESTED,o.Sh.BOOKMARKS,o.Sh.DEVICE_MODEL_ID,o.Sh.EVENT_TIMESTAMP,o.Sh.EVENT_TYPE,o.Sh.FIRST_RELEASE,o.Sh.FIRST_SEEN,o.Sh.IS,o.Sh.ISSUE_CATEGORY,o.Sh.ISSUE_TYPE,o.Sh.LAST_SEEN,o.Sh.PLATFORM_NAME,...Object.values(o.Zl),...Object.values(o.$n),...Object.values(o.pd),...Object.values(o.P2)],_=[o.Sh.RELEASE,o.Sh.DIST,o.Sh.ENVIRONMENT,o.Sh.TRANSACTION,o.Sh.PLATFORM,o.Sh.USER_EMAIL,o.Sh.USER_ID,o.Sh.USER_IP,o.Sh.USER_USERNAME,o.Sh.USER_SEGMENT,o.Sh.GEO_CITY,o.Sh.GEO_COUNTRY_CODE,o.Sh.GEO_REGION,o.Sh.GEO_SUBDIVISION,o.Sh.HTTP_METHOD,o.Sh.DEVICE_NAME,o.Sh.DEVICE_FAMILY,o.Sh.OS_NAME,o.Sh.OS_KERNEL_VERSION,o.Sh.BROWSER_NAME,o.Sh.TRANSACTION_OP,o.Sh.TRANSACTION_STATUS,o.Sh.HTTP_STATUS_CODE,o.Sh.TRANSACTION_DURATION,o.Sh.RELEASE_BUILD,o.Sh.RELEASE_PACKAGE,o.Sh.RELEASE_VERSION,...Object.values(o.Zl),...Object.values(o.$n)];function A(e,t){return s()({[i.qz.ERRORS]:void 0,[i.qz.TRANSACTIONS]:t.features.includes("alert-allow-indexed")?void 0:N(t),[i.qz.METRICS]:g,[i.qz.GENERIC_METRICS]:t.features.includes("alert-allow-indexed")?void 0:N(t),[i.qz.SESSIONS]:g},(e=>e?(0,o.yE)(e):void 0))[e]}function N(e){return e.features.includes("on-demand-metrics-extraction")?_:T}function f(e,t){return{[i.qz.ERRORS]:[o.Sh.EVENT_TYPE,o.Sh.RELEASE_VERSION,o.Sh.RELEASE_STAGE,o.Sh.RELEASE_BUILD,o.Sh.PROJECT,...Object.values(o.Zl),...Object.values(o.$n),...Object.values(o.l1),o.Sh.TRANSACTION,o.Sh.TRANSACTION_DURATION,o.Sh.TRANSACTION_OP,o.Sh.TRANSACTION_STATUS],[i.qz.TRANSACTIONS]:t.features.includes("alert-allow-indexed")?R:void 0,[i.qz.METRICS]:void 0,[i.qz.GENERIC_METRICS]:t.features.includes("alert-allow-indexed")?R:void 0,[i.qz.SESSIONS]:void 0}[e]}function y(e,t){return e===i.qz.ERRORS?l.DISCOVER:t?l.METRICS_ENHANCED:e===i.qz.GENERIC_METRICS?l.METRICS:l.DISCOVER}},"./app/views/performance/transactionSummary/pageLayout.tsx":(e,t,r)=>{r.d(t,{Ox:()=>Ne,ZP:()=>Ie,C1:()=>ye});var a=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/react/index.js")),n=r("../node_modules/react-router/es/index.js"),o=r("../node_modules/@sentry/utils/esm/is.js"),i=r("./app/actionCreators/indicator.tsx"),c=r("./app/components/acl/feature.tsx"),l=r("./app/components/alert.tsx"),p=r("./app/components/gridEditable/index.tsx"),u=r("./app/components/layouts/thirds.tsx"),d=r("./app/components/loadingIndicator.tsx"),S=r("./app/components/organizations/pageFilters/container.tsx"),m=r("./app/components/pickProjectToContinue.tsx"),h=r("./app/components/sentryDocumentTitle.tsx"),E=r("./app/components/tabs/index.tsx"),T=r("./app/locale.tsx"),g=r("./app/utils.tsx"),R=r("./app/utils/analytics.tsx"),_=r("./app/utils/discover/discoverQuery.tsx"),A=r("./app/utils/performance/contexts/metricsCardinality.tsx"),N=r("./app/utils/performance/contexts/performanceEventViewContext.tsx"),f=r("./app/utils/queryString.tsx"),y=r("./app/utils/useRouter.tsx"),I=r("./app/utils/withDomainRequired.tsx"),O=r("./app/views/performance/utils.tsx"),C=r("./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx"),x=r("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),v=r("./app/views/performance/transactionSummary/transactionSpans/utils.tsx"),j=r("./app/views/performance/transactionSummary/transactionTags/utils.tsx"),Z=r("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),w=r("./app/components/assistant/guideAnchor.tsx"),M=r("./app/components/buttonBar.tsx"),P=r("./app/components/createAlertButton.tsx"),b=r("./app/components/featureBadge.tsx"),z=r("./app/components/idBadge/index.tsx"),q=r("./app/components/replays/replayCountBadge.tsx"),D=r("./app/components/replays/useReplaysCount.tsx"),U=r("./app/components/tooltip.tsx"),L=r("../node_modules/lodash/omit.js"),V=r.n(L),G=r("../node_modules/lodash/pick.js"),F=r.n(G),B=r("./app/utils/discover/genericDiscoverQuery.tsx"),H=r("./app/utils/tokenizeSearch.tsx"),k=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Y(e){const{eventView:t,location:r,transaction:a,type:s}=e,n={transaction:`"${(0,g.d9)((0,H.Bn)(a))}"`,type:s},o=F()(t.getEventsAPIPayload(r),["project","environment"]);return Object.assign(n,o)}function $(e){return(0,k.tZ)(B.ZP,{route:"events-has-measurements",getRequestPayload:Y,...V()(e,"children"),children:t=>{let{tableData:r,...a}=t;return e.children({hasMeasurements:r?.measurements??null,...a})}})}$.displayName="HasMeasurementsQuery";const W=$;var K=r("./app/utils/profiling/platforms.tsx"),X=r("./app/utils/replays/projectSupportsReplay.tsx"),Q=r("./app/views/performance/breadcrumb.tsx"),J=r("./app/views/performance/landing/utils.tsx"),ee=r("./app/views/performance/transactionSummary/tabs.tsx"),te=r("./app/components/button.tsx"),re=r("./app/components/performance/teamKeyTransaction.tsx"),ae=r("./app/components/performance/teamKeyTransactionsManager.tsx"),se=r("./app/icons/index.tsx"),ne=r("./app/utils/useTeams.tsx"),oe=r("./app/utils/withProjects.tsx");function ie(e){let{counts:t,getKeyedTeams:r,project:a,transactionName:s,isLoading:n,error:o,...i}=e;const c=r(a.id,s),l=c?.size??0,p=n||!!o;return(0,k.tZ)(re.Z,{counts:t,keyedTeams:c,project:a,transactionName:s,offset:8,size:"md",trigger:(e,t)=>(0,k.tZ)(U.u,{disabled:p||t,title:c?.size?a.teams.filter((e=>c.has(e.id))).map((e=>{let{slug:t}=e;return t})).join(", "):null,children:(0,k.tZ)(te.zx,{...e,disabled:p,size:"sm",icon:(0,k.tZ)(se.GK,{isSolid:!!l,color:l?"yellow400":"subText"}),children:l?(0,T.tn)("Starred for Team","Starred for Teams",l):(0,T.t)("Star for Team")})}),...i})}function ce(e){let{eventView:t,organization:r,projects:a,...s}=e;const{teams:n,initiallyLoaded:o}=(0,ne.y)({provideUserTeams:!0});if(1!==t.project.length)return(0,k.tZ)(te.zx,{disabled:!0,size:"sm",icon:(0,k.tZ)(se.GK,{}),children:(0,T.t)("Star for Team")});const i=String(t.project[0]),c=a.find((e=>e.id===i));return(0,g.ri)(c)?(0,k.tZ)(ae.z,{organization:r,teams:n,selectedTeams:["myteams"],selectedProjects:[String(i)],children:(0,k.tZ)(ae.$,{children:e=>{let{isLoading:t,...a}=e;return(0,k.tZ)(ie,{organization:r,project:c,isLoading:t||!o,...s,...a})}})}):(0,k.tZ)(te.zx,{disabled:!0,size:"sm",icon:(0,k.tZ)(se.GK,{}),children:(0,T.t)("Star for Team")})}ie.displayName="TeamKeyTransactionButton",ce.displayName="TeamKeyTransactionButtonWrapper";const le=(0,oe.Z)(ce);var pe=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),ue=r("./app/actionCreators/modal.tsx"),de=r("./app/utils/withApi.tsx"),Se=r("./app/views/performance/transactionSummary/transactionThresholdModal.tsx");class me extends s.Component{constructor(){super(...arguments),(0,pe.Z)(this,"state",{transactionThreshold:void 0,transactionThresholdMetric:void 0,loadingThreshold:!1}),(0,pe.Z)(this,"fetchTransactionThreshold",(()=>{const{api:e,organization:t,transactionName:r}=this.props,a=this.getProject();if(!(0,g.ri)(a))return;const s=`/organizations/${t.slug}/project-transaction-threshold-override/`;this.setState({loadingThreshold:!0}),e.requestPromise(s,{method:"GET",includeAllArgs:!0,query:{project:a.id,transaction:r}}).then((e=>{let[t]=e;this.setState({loadingThreshold:!1,transactionThreshold:t.threshold,transactionThresholdMetric:t.metric})})).catch((()=>{const e=`/projects/${t.slug}/${a.slug}/transaction-threshold/configure/`;this.props.api.requestPromise(e,{method:"GET",includeAllArgs:!0,query:{project:a.id}}).then((e=>{let[t]=e;this.setState({loadingThreshold:!1,transactionThreshold:t.threshold,transactionThresholdMetric:t.metric})})).catch((e=>{this.setState({loadingThreshold:!1});const t=e.responseJSON?.threshold??null;(0,i.Iw)(t)}))}))}))}componentDidMount(){this.fetchTransactionThreshold()}getProject(){const{projects:e,eventView:t}=this.props;if(!(0,g.ri)(t))return;const r=String(t.project[0]);return e.find((e=>e.id===r))}onChangeThreshold(e,t){const{onChangeThreshold:r}=this.props;this.setState({transactionThreshold:e,transactionThresholdMetric:t}),(0,g.ri)(r)&&r(e,t)}openModal(){const{organization:e,transactionName:t,eventView:r}=this.props,{transactionThreshold:a,transactionThresholdMetric:s}=this.state;(0,ue.openModal)((n=>(0,k.tZ)(Se.ZP,{...n,organization:e,transactionName:t,eventView:r,transactionThreshold:a,transactionThresholdMetric:s,onApply:(e,t)=>this.onChangeThreshold(e,t)})),{modalCss:Se.fY,closeEvents:"escape-key"})}render(){const{loadingThreshold:e}=this.state;return(0,k.tZ)(te.zx,{size:"sm",onClick:()=>this.openModal(),icon:(0,k.tZ)(se.iC,{}),disabled:e,"aria-label":(0,T.t)("Settings"),"data-test-id":"set-transaction-threshold"})}}me.displayName="TransactionThresholdButton";const he=(0,de.Z)((0,oe.Z)(me));function Ee(e){let{eventView:t,organization:r,projects:a,projectId:n,metricsCardinality:o,location:i,transactionName:l,onChangeThreshold:p,currentTab:d,hasWebVitals:S}=e;function m(){(0,R.Gi)("performance_views.summary.create_alert_clicked",{organization:r})}const h=a.find((e=>e.id===n)),g=r.features?.includes("performance-anomaly-detection-ui"),_=r.features.includes("session-replay")&&h&&(0,X.Z)(h),A=h&&r.features.includes("profiling")&&(0,K.kI)(h),N=(0,s.useCallback)((e=>{switch(S){case"maybe":return(0,J.Q_)(i,a,t).field===J.BY.FRONTEND_PAGELOAD||e;case"yes":return!0;default:return!1}}),[S,i,a,t]),f=(0,D.Z)({transactionNames:l,organization:r})[l];return(0,k.BX)(u.h4,{children:[(0,k.BX)(u.oB,{children:[(0,k.tZ)(Q.Z,{organization:r,location:i,transaction:{project:n,name:l},tab:d}),(0,k.BX)(u.Dx,{children:[h&&(0,k.tZ)(z.Z,{project:h,avatarSize:28,hideName:!0,avatarProps:{hasTooltip:!0,tooltip:h.slug}}),(0,k.tZ)(U.u,{showOnlyOnOverflow:!0,skipWrapper:!0,title:l,children:(0,k.tZ)(Te,{children:l})})]})]}),(0,k.tZ)(u.kP,{children:(0,k.BX)(M.ZP,{gap:1,children:[(0,k.tZ)(c.Z,{organization:r,features:["incidents"],children:e=>{let{hasFeature:s}=e;return s&&!o?.isLoading?(0,k.tZ)(P.K,{size:"sm",eventView:t,organization:r,projects:a,onClick:m,referrer:"performance",alertType:"trans_duration","aria-label":(0,T.t)("Create Alert"),disableMetricDataset:o?.outcome?.forceTransactionsOnly}):null}}),(0,k.tZ)(le,{transactionName:l,eventView:t,organization:r}),(0,k.tZ)(w.Z,{target:"project_transaction_threshold_override",position:"bottom",children:(0,k.tZ)(he,{organization:r,transactionName:l,eventView:t,onChangeThreshold:p})})]})}),(0,k.tZ)(W,{location:i,orgSlug:r.slug,eventView:t,transaction:l,type:"web",children:e=>{let{hasMeasurements:t}=e;const r=N(!!t);return(0,k.BX)(E.td,{hideBorder:!0,outerWrapStyles:{gridColumn:"1 / -1"},children:[(0,k.tZ)(E.td.Item,{children:(0,T.t)("Overview")},ee.Z.TRANSACTION_SUMMARY),(0,k.tZ)(E.td.Item,{children:(0,T.t)("All Events")},ee.Z.EVENTS),(0,k.tZ)(E.td.Item,{children:(0,T.t)("Tags")},ee.Z.TAGS),(0,k.tZ)(E.td.Item,{children:(0,T.t)("Spans")},ee.Z.SPANS),(0,k.BX)(E.td.Item,{textValue:(0,T.t)("Anomalies"),hidden:!g,children:[(0,T.t)("Anomalies"),(0,k.tZ)(b.Z,{type:"alpha",tooltipProps:{disabled:!0}})]},ee.Z.ANOMALIES),(0,k.tZ)(E.td.Item,{textValue:(0,T.t)("Web Vitals"),hidden:!r,children:(0,T.t)("Web Vitals")},ee.Z.WEB_VITALS),(0,k.BX)(E.td.Item,{textValue:(0,T.t)("Replays"),hidden:!_,children:[(0,T.t)("Replays"),(0,k.tZ)(q.Z,{count:f})]},ee.Z.REPLAYS),(0,k.tZ)(E.td.Item,{textValue:(0,T.t)("Profiling"),hidden:!A,children:(0,T.t)("Profiles")},ee.Z.PROFILING)]})}})]})}Ee.displayName="TransactionHeader";const Te=(0,a.Z)("div",{target:"edjdq7i0"})((e=>e.theme.overflowEllipsis),";"),ge=Ee;var Re=r("./app/views/performance/transactionSummary/utils.tsx");const _e={[ee.Z.WEB_VITALS]:"performance_views.vitals.vitals_tab_clicked",[ee.Z.TAGS]:"performance_views.tags.tags_tab_clicked",[ee.Z.EVENTS]:"performance_views.events.events_tab_clicked",[ee.Z.SPANS]:"performance_views.spans.spans_tab_clicked",[ee.Z.ANOMALIES]:"performance_views.anomalies.anomalies_tab_clicked"};function Ae(e){const{location:t,organization:r,projects:a,tab:l,getDocumentTitle:w,generateEventView:M,childComponent:P,features:b=[]}=e;let z;const q=t.query.project;(0,o.HD)(q)&&"-1"!==q&&(z=q);const D=(0,y.Z)(),U=(0,O.JY)(t),[L,V]=(0,s.useState)(),G=(0,A.e0)(),[F,B]=(0,s.useState)(),[H,Y]=(0,s.useState)(),$=(0,s.useCallback)((e=>{if(!U)return{};const a={orgSlug:r.slug,transaction:U,projectID:z,query:t.query};switch(e){case ee.Z.TAGS:return(0,j.vG)(a);case ee.Z.EVENTS:return(0,x.xr)(a);case ee.Z.SPANS:return(0,v.hN)(a);case ee.Z.ANOMALIES:return(0,C.az)(a);case ee.Z.REPLAYS:return function(e){let{orgSlug:t,transaction:r,projectID:a,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/replays/`,query:{transaction:r,project:a,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}(a);case ee.Z.PROFILING:return function(e){let{orgSlug:t,transaction:r,projectID:a,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/profiles/`,query:{transaction:r,project:a,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}(a);case ee.Z.WEB_VITALS:return(0,Z.Pl)({orgSlug:r.slug,transaction:U,projectID:(0,f.ro)(t.query.project),query:t.query});case ee.Z.TRANSACTION_SUMMARY:default:return(0,Re.e1)(a)}}),[t.query,r.slug,z,U]),W=(0,s.useCallback)((e=>{if(e===l)return;const s=_e[e];s&&(0,R.Gi)(s,{organization:r,project_platforms:(0,O.p9)(t,a)}),n.browserHistory.push((0,I.D)($(e)))}),[$,l,r,t,a]);if(!(0,g.ri)(U))return ye(r,t),null;const K=M({location:t,transactionName:U,organization:r});if(!(0,g.ri)(z)){const e=K.clone();return e.query=`transaction:"${U}"`,e.fields=[{field:"project",width:p.z7},{field:"count()",width:p.z7}],(0,k.tZ)(_.Z,{eventView:e,location:t,orgSlug:r.slug,queryExtras:{project:q||void 0},referrer:"api.performance.transaction-summary",children:e=>{let{isLoading:s,tableData:n,error:o}=e;if(o)return(0,i.Iw)((0,T.t)("Unable to get projects associated with transaction")),ye(r,t),null;if(s)return(0,k.tZ)(d.Z,{});const c=n?.data.map((e=>a.find((t=>t.slug===e.project)))).filter((e=>void 0!==e));return c&&(0,k.tZ)(m.Z,{"data-test-id":"transaction-sumamry-project-picker-modal",projects:c,router:D,nextPath:{pathname:(0,Re.u4)({orgSlug:r.slug}),query:{project:z,transaction:U,statsPeriod:K.statsPeriod,referrer:"performance-transaction-summary",...t.query}},noProjectRedirectPath:"/performance/",allowAllProjectsSelection:!0})}})}const X=a.find((e=>e.id===z));return(0,k.tZ)(h.Z,{title:w(U),orgSlug:r.slug,projectSlug:X?.slug,children:(0,k.tZ)(c.Z,{features:["performance-view",...b],organization:r,renderDisabled:Ne,children:(0,k.tZ)(N.bq,{value:{eventView:K},children:(0,k.tZ)(S.Z,{shouldForceProject:(0,g.ri)(X),forceProject:X,specificProjectSlugs:(0,g.ri)(X)?[X.slug]:[],children:(0,k.tZ)(E.mQ,{value:l,onChange:W,children:(0,k.BX)(u.T3,{children:[(0,k.tZ)(ge,{eventView:K,location:t,organization:r,projects:a,projectId:z,transactionName:U,currentTab:l,hasWebVitals:l===ee.Z.WEB_VITALS?"yes":"maybe",onChangeThreshold:(e,t)=>{B(e),Y(t)},metricsCardinality:G}),(0,k.BX)(u.uT,{children:[(0,g.ri)(L)&&(0,k.tZ)(fe,{type:"error",showIcon:!0,children:L}),(0,k.tZ)(P,{location:t,organization:r,projects:a,eventView:K,projectId:z,transactionName:U,setError:V,transactionThreshold:F,transactionThresholdMetric:H})]})]})})})})})})}function Ne(){return(0,k.tZ)(l.bZ,{type:"warning",children:(0,T.t)("You don't have access to this feature")})}Ae.displayName="PageLayout",Ne.displayName="NoAccess";const fe=(0,a.Z)(l.bZ,{target:"e2hnjro0"})({name:"3hfw1i",styles:"grid-column:1/3;margin:0"});function ye(e,t){n.browserHistory.replace((0,I.D)({pathname:`/organizations/${e.slug}/performance/`,query:{...t.query}}))}const Ie=Ae},"./app/views/performance/transactionSummary/transactionAnomalies/utils.tsx":(e,t,r)=>{r.d(t,{ES:()=>c,az:()=>i,h2:()=>l,uT:()=>o});var a=r("./app/utils/discover/eventView.tsx"),s=r("./app/utils/queryString.tsx"),n=r("./app/utils/tokenizeSearch.tsx");const o="performance-anomaly-detection-ui";function i(e){let{orgSlug:t,transaction:r,projectID:a,query:s}=e;const n=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/anomalies/`}({orgSlug:t});return{pathname:n,query:{transaction:r,project:a,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function c(e,t){return{high:t.red300,low:t.yellow300}[e]}function l(e){let{location:t,transactionName:r}=e;const o=(0,s.ro)(t.query.query,""),i=new n.MY(o);return i.setFilterValues("transaction",[r]),a.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:r,fields:["tpm()"],query:i.formatString(),projects:[]},t)}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_pageLayout_tsx.45986c4f3a4c462cea63e93e300bab72.js.map