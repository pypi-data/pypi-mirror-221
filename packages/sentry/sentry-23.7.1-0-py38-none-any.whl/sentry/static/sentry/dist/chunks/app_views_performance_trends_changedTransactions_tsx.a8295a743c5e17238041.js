"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_trends_changedTransactions_tsx"],{"./app/components/charts/lineChart.tsx":(e,t,n)=>{n.d(t,{w:()=>o});var r=n("./app/components/charts/series/lineSeries.tsx"),a=n("./app/components/charts/baseChart.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{series:t,seriesOptions:n,...o}=e;return(0,i.tZ)(a.Z,{...o,series:t.map((e=>{let{seriesName:t,data:a,dataArray:i,...o}=e;return(0,r.Z)({...n,...o,name:t,data:i||a?.map((e=>{let{value:t,name:n}=e;return[n,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}o.displayName="LineChart"},"./app/components/gridEditable/sortLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>u});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/react-router/es/index.js"),i=n("./app/components/links/link.tsx"),o=n("./app/icons/index.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{align:t,title:n,canSort:r,generateSortLink:i,onClick:o,direction:d,replace:u}=e;const m=i();if(!m||!r)return(0,s.tZ)(l,{align:t,children:n});const g=d?(0,s.tZ)(p,{size:"xs",direction:"desc"===d?"down":"up"}):null;return(0,s.BX)(c,{align:t,to:m,onClick:e=>{u&&(e.preventDefault(),a.browserHistory.replace(m)),o?.(e)},children:[n," ",g]})}d.displayName="SortLink";const c=(0,r.Z)((e=>{const{align:t,css:n,...r}=e;return(0,s.tZ)(i.Z,{...r})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),l=(0,r.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),p=(0,r.Z)(o.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),u=d},"./app/utils/performance/trends/trendsDiscoverQuery.tsx":(e,t,n)=>{n.d(t,{ZP:()=>p,iC:()=>l});var r=n("./app/utils/discover/genericDiscoverQuery.tsx"),a=n("./app/utils/withProjects.tsx"),i=n("./app/views/performance/trends/utils.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){const{eventView:t,projects:n}=e,r=t?.getEventsAPIPayload(e.location),a=(0,i.CE)(e.location,e.trendFunctionField),o=(0,i.IO)(e.location,n,t.project);return r.trendFunction=(0,i.ed)(a.field,o.column),r.trendType=t?.trendType||e.trendChangeType,r.interval=t?.interval,r.middle=t?.middle,r}function d(e){const t=e.withBreakpoint?"events-trends-statsv2":"events-trends-stats";return(0,o.tZ)(r.ZP,{...e,route:t,getRequestPayload:s,children:t=>{let{tableData:n,...r}=t;return e.children({trendsData:n,...r})}})}function c(e){return(0,o.tZ)(r.ZP,{...e,route:"events-trends",getRequestPayload:s,children:t=>{let{tableData:n,...r}=t;return e.children({trendsData:n,...r})}})}d.displayName="TrendsDiscoverQuery",c.displayName="EventsDiscoverQuery";const l=(0,a.Z)(c),p=(0,a.Z)(d)},"./app/utils/useKeyPress.tsx":(e,t,n)=>{n.d(t,{Z:()=>a});var r=n("../node_modules/react/index.js");const a=(e,t)=>{const[n,a]=(0,r.useState)(!1),i=t??document.body;return(0,r.useEffect)((()=>{const t=t=>{let{key:n}=t;n===e&&a(!0)},n=t=>{let{key:n}=t;n===e&&a(!1)};return i.addEventListener("keydown",t),i.addEventListener("keyup",n),()=>{i.removeEventListener("keydown",t),i.removeEventListener("keyup",n)}}),[e,i]),n}},"./app/views/performance/trends/changedTransactions.tsx":(e,t,n)=>{n.d(t,{H:()=>Ne,Z:()=>et});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/react/index.js")),i=n("../node_modules/react-router/es/index.js"),o=n("./app/components/acl/feature.tsx"),s=n("./app/components/button.tsx"),d=n("./app/components/charts/styles.tsx"),c=n("./app/components/count.tsx"),l=n("./app/components/dropdownLink.tsx"),p=n("./app/components/duration.tsx"),u=n("./app/components/emptyStateWarning.tsx"),m=n("./app/components/forms/controls/radioGroup.tsx"),g=n("./app/components/idBadge/index.tsx"),h=n("./app/components/links/link.tsx"),f=n("./app/components/loadingIndicator.tsx"),x=n("./app/components/menuItem.tsx"),y=n("./app/components/pagination.tsx"),Z=n("./app/components/panels/panel.tsx"),v=n("./app/components/questionTooltip.tsx"),w=n("./app/components/radio.tsx"),b=n("./app/components/tooltip.tsx"),_=n("./app/icons/index.tsx"),C=n("./app/locale.tsx"),S=n("./app/styles/space.tsx"),D=n("./app/utils/analytics.tsx"),E=n("./app/utils/formatters.tsx"),j=n("./app/utils/performance/contexts/metricsCardinality.tsx"),k=n("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),T=n("./app/utils/queryString.tsx"),P=n("./app/utils/tokenizeSearch.tsx"),z=n("./app/utils/useApi.tsx"),R=n("./app/utils/withOrganization.tsx"),L=n("./app/utils/withProjects.tsx"),N=n("./app/views/performance/transactionSummary/utils.tsx"),M=n("../node_modules/moment/moment.js"),F=n.n(M),I=n("./app/components/organizations/timeRangeSelector/utils.tsx"),q=n("./app/constants/index.tsx"),O=n("./app/utils/theme.tsx"),B=n("./app/utils/withDomainRequired.tsx"),V=n("./app/components/gridEditable/index.tsx"),A=n("./app/components/gridEditable/sortLink.tsx"),X=n("./app/utils/dates.tsx"),H=n("./app/utils/discover/discoverQuery.tsx"),G=n("./app/utils/discover/fields.tsx"),Y=n("./app/utils/discover/styles.tsx"),Q=n("./app/utils/discover/types.tsx"),$=n("./app/views/performance/transactionSummary/transactionThresholdModal.tsx"),U=n("./app/views/performance/trends/types.tsx"),K=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const W=["tps","p50","p95"],J=["metric","before","after","change"],ee={metric:{key:"metric",name:(0,C.t)("Metric"),width:V.z7},before:{key:"before",name:(0,C.t)("Before"),width:V.z7},after:{key:"after",name:(0,C.t)("After"),width:V.z7},change:{key:"change",name:(0,C.t)("Change"),width:V.z7}},te={metric:"string",before:"duration",after:"duration",change:"percentage"};function ne(e){const{trendFunction:t,transaction:n,trendView:r,organization:i,location:o,isLoading:s}=e,d=t===U.Z2.P50?ae(n,U.Z2.P50):void 0,c=t===U.Z2.P95?ae(n,U.Z2.P95):void 0,l=n.breakpoint,p=r.statsPeriod?(0,X.YJ)(r.statsPeriod):0,u=(0,a.useMemo)((()=>r.start?r.start:F()().subtract(p,"h").toISOString()),[p,r.start]),m=l?new Date(1e3*l).toISOString():"",g=(0,a.useMemo)((()=>r.end?r.end:F()().toISOString()),[r.end]),{data:h,isLoading:f}=(0,H._)(de(u,m,W,"transaction",Q.as.METRICS,i,r,n.transaction,o)),{data:x,isLoading:y}=(0,H._)(de(m,g,W,"transaction",Q.as.METRICS,i,r,n.transaction,o)),{data:Z,isLoading:v}=(0,H._)(de(u,m,["count"],"error",Q.as.DISCOVER,i,r,n.transaction,o)),{data:w,isLoading:b}=(0,H._)(de(m,g,["count"],"error",Q.as.DISCOVER,i,r,n.transaction,o)),_=re("tps()","Throughput","ps","-",!1,h,x),C=d||re("p50()","P50","ms","-",!1,h,x),S=c||re("p95()","P95","ms","-",!1,h,x),D=re("count()","Errors","",0,!0,Z,w),E=J.map((e=>ee[e]));return(0,K.tZ)(V.ZP,{data:[_,C,S,D],columnOrder:E,columnSortBy:[],grid:{renderHeadCell:oe,renderBodyCell:se},location:o,isLoading:f||y||s||v||b})}function re(e,t,n,r,a,i,o){return i?.data[0][e]&&o?.data[0][e]?{metric:t,before:a?i.data[0][e]:ie(i.data[0][e].toString(),1)+" "+n,after:a?o.data[0][e]:ie(o.data[0][e].toString(),1)+" "+n,change:(0,E.rl)((s=i.data[0][e],d=o.data[0][e],(d-s)/s),1)}:{metric:t,before:r,after:r,change:"-"};var s,d}function ae(e,t){if(e)return{metric:t.toString().toUpperCase(),before:e?.aggregate_range_1.toFixed(1)+" ms",after:e?.aggregate_range_2.toFixed(1)+" ms",change:1!==e?.trend_percentage?(0,E.rl)(e?.trend_percentage-1,1):"-"}}function ie(e,t){return parseFloat(e).toFixed(t)}function oe(e,t){const n=(0,G.qG)(e.key,te[e.key]);return(0,K.tZ)(A.Z,{title:e.name,align:n,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function se(e,t){let n="",r="";return"change"===e.key?"0%"===t[e.key]||"+NaN%"===t[e.key]||"-"===t[e.key]?n="-":"-"!==t[e.key].charAt(0)?(r=O.ZP.red300,n="+"+t[e.key]):(r=O.ZP.green300,n=t[e.key]):n=t[e.key],(0,K.tZ)(Y.W2,{"data-test-id":"pce-metrics-chart-row-"+e.key,children:(0,K.tZ)(Ee,{"data-test-id":"pce-metrics-text-"+e.key,align:"metric"!==e.key?"right":"left",color:r,children:n})})}function de(e,t,n,r,a,i,o,s,d){const c={...d,start:e,end:t,statsPeriod:void 0,dataset:a,sort:void 0,query:{query:`event.type: ${r} transaction: ${s}`,statsPeriod:void 0,start:e,end:t}},l=function(e,t,n,r,a,i,o,s){const d=t.clone();d.start=n,d.end=r,d.statsPeriod=void 0,d.dataset=s,d.query="event.type:"+i+" transaction:"+o,d.additionalConditions=new P.MY("");const c=a.map((e=>({kind:"function",function:[e,"",void 0,void 0]})));return d.withColumns(c)}(0,o,e,t,n,r,s,a);return{eventView:l,location:c,orgSlug:i.slug,transactionName:s,transactionThresholdMetric:$.b9.TRANSACTION_DURATION,options:{refetchOnWindowFocus:!1}}}ne.displayName="MetricsTable",oe.displayName="renderHeadCell",se.displayName="renderBodyCell";var ce=n("./app/views/performance/trends/chart.tsx"),le=n("./app/views/performance/trends/utils.tsx"),pe=n("./app/views/starfish/components/detailPanel.tsx");function ue(e){let{collapsed:t,transaction:n,onClose:r,trendChangeType:a,trendFunction:i,trendView:o,statsData:s,isLoading:d,organization:c,projects:l,trendParameter:p,location:u}=e;return(0,K.tZ)(pe.Z,{detailKey:t?"":n.transaction,onClose:r,children:!t&&(0,K.tZ)(fe,{children:(0,K.tZ)(me,{transaction:n,trendChangeType:a,trendFunction:i,trendView:o,statsData:s,isLoading:d,organization:c,projects:l,trendParameter:p,location:u})})})}function me(e){const{transaction:t,trendChangeType:n,trendFunction:r,trendView:i,trendParameter:o,isLoading:s,location:d,organization:c,projects:l}=e,p=t.breakpoint?F()(1e3*t.breakpoint).format("ddd, DD MMM YYYY HH:mm:ss z"):"",u=F()(i.start).format("DD MMM YYYY HH:mm:ss z"),m=F()(i.end).format("DD MMM YYYY HH:mm:ss z");return(0,K.BX)(a.Fragment,{children:[(0,K.tZ)(he,{transaction:t,trendChangeType:n,trendView:i,projects:l,organization:c,trendFunction:r,trendParameter:o}),(0,K.BX)("div",{style:{display:"flex",gap:(0,S.D)(4)},children:[(0,K.tZ)(ge,{label:n===U.ER.REGRESSION?(0,C.t)("Regression Metric"):(0,C.t)("Improvement Metric"),value:r}),(0,K.tZ)(ge,{label:(0,C.t)("Start Time"),value:p})]}),(0,K.BX)(De,{"data-test-id":"pce-graph",children:[(0,K.tZ)("strong",{children:`${o.label} (${r})`}),(0,K.tZ)(Ee,{color:O.ZP.gray300,margin:`-${(0,S.D)(3)}`,children:i.statsPeriod?q.wh[i.statsPeriod]||(0,I.om)(i.statsPeriod)[i.statsPeriod]:`${u} - ${m}`}),(0,K.tZ)(ce.k,{query:i.query,project:i.project,environment:i.environment,start:i.start,end:i.end,statsPeriod:i.statsPeriod,disableXAxis:!0,disableLegend:!0,neutralColor:!0,...e})]}),(0,K.tZ)(ne,{isLoading:s,location:d,transaction:t,trendFunction:r,trendView:i,organization:c})]})}function ge(e){let{label:t,value:n}=e;return(0,K.BX)("div",{children:[(0,K.tZ)(Ce,{children:t}),(0,K.tZ)(Se,{children:n})]})}function he(e){const{transaction:t,trendChangeType:n,trendView:r,projects:a,organization:i,trendFunction:o,trendParameter:s}=e,d=n===U.ER.REGRESSION,c=function(e,t,n,r,a,i){const o=e.clone(),s=(0,le._H)(t,n);return(0,N.e1)({orgSlug:r.slug,transaction:String(t.transaction),query:o.generateQueryStringObject(),projectID:s,display:N.DC.TREND,trendFunction:a,additionalQuery:{trendParameter:i.column}})}(r,t,a,i,o,s);return(0,K.BX)(xe,{"data-test-id":"pce-header",children:[(0,K.tZ)(ve,{regression:d,children:(0,K.tZ)(_.zC,{color:"white"})}),(0,K.BX)(ye,{children:[(0,K.tZ)(Ze,{regression:d,children:d?(0,C.t)("Ongoing Regression"):(0,C.t)("Ongoing Improvement")}),(0,K.BX)(be,{children:[(0,K.tZ)(we,{children:t.transaction}),(0,K.tZ)(_e,{borderless:!0,to:(0,B.D)(c),icon:(0,K.tZ)(_.V$,{}),"aria-label":(0,C.t)("View transaction summary")})]})]})]})}ue.displayName="PerformanceChangeExplorer",me.displayName="ExplorerBody",ge.displayName="InfoItem",he.displayName="Header";const fe=(0,r.Z)("div",{target:"e1air7oo11"})("padding:0 ",(0,S.D)(2),";margin-top:",(0,S.D)(4),";"),xe=(0,r.Z)("div",{target:"e1air7oo10"})("display:flex;flex-wrap:nowrap;margin-bottom:",(0,S.D)(3),";"),ye=(0,r.Z)("div",{target:"e1air7oo9"})((e=>e.theme.overflowEllipsis),";"),Ze=(0,r.Z)("p",{target:"e1air7oo8"})("color:",(e=>e.regression?e.theme.danger:e.theme.success),";margin-bottom:",(0,S.D)(0),";"),ve=(0,r.Z)("div",{target:"e1air7oo7"})("padding:",(0,S.D)(1.5),";background-color:",(e=>e.regression?e.theme.danger:e.theme.success),";border-radius:",(0,S.D)(.5),";margin-right:",(0,S.D)(2),";float:left;height:40px;"),we=(0,r.Z)("h4",{target:"e1air7oo6"})("margin-right:",(0,S.D)(1),";margin-bottom:",(0,S.D)(0),";",(e=>e.theme.overflowEllipsis),";"),be=(0,r.Z)("div",{target:"e1air7oo5"})("display:flex;align-items:center;margin-bottom:",(0,S.D)(3),";width:fit-content;"),_e=(0,r.Z)(s.zx,{target:"e1air7oo4"})("padding:",(0,S.D)(0),";height:min-content;min-height:0px;"),Ce=(0,r.Z)("strong",{target:"e1air7oo3"})("color:",(e=>e.theme.gray300),";"),Se=(0,r.Z)("h3",{target:"e1air7oo2"})({name:"lugakg",styles:"font-weight:normal"}),De=(0,r.Z)("div",{target:"e1air7oo1"})("border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.panelBorderRadius),";margin-bottom:",(0,S.D)(2),";padding:",(0,S.D)(3),";display:block;"),Ee=(0,r.Z)("p",{target:"e1air7oo0"})("margin-bottom:",(e=>e.margin?e.margin:(0,S.D)(0)),";color:",(e=>e.color),";text-align:",(e=>e.align),";");var je,ke=n("./app/views/performance/utils.tsx");function Te(e){switch(e){case U.ER.IMPROVED:return(0,C.t)("Most Improved Transactions");case U.ER.REGRESSION:return(0,C.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}function Pe(e,t,n){return function(r){const a=(0,le.j_)(n),o={...e.query};r?o[a]=r?`${r.transaction}-${r.project}`:void 0:delete o[a],i.browserHistory.push({pathname:e.pathname,query:o}),(0,D.Gi)("performance_views.trends.widget_interaction",{organization:t,widget_type:n})}}function ze(e,t,n,r,a,o,s){const d=(0,le.IO)(e,o,s).column,c=(0,T.ro)(e.query.query),l=new P.MY(c??""),p=l.getFilterValues(d),u=r===je.GREATER_THAN_EQUALS?">":"<";p&&p.forEach((e=>{(e.startsWith(r)||e.startsWith(u))&&l.removeFilterValue(d,e)})),l.addFilterValues(d,[`${r}${n}`]);const m=l.formatString();i.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(m).trim()}}),(0,D.Gi)("performance_views.trends.change_duration",{organization:t,widget_type:Te(a),value:`${r}${n}`})}function Re(e){const{location:t,trendChangeType:n,previousTrendFunction:r,previousTrendColumn:o,organization:s,projects:d,setError:c,withBreakpoint:l}=e,p=(0,z.Z)(),{isLoading:u,outcome:m}=(0,j.e0)(),g=l&&!m?.forceTransactionsOnly,h=e.trendView.clone(),x=Te(n);(0,le.kM)(h,t,n,d,g);const Z=(e=>(t,n,r)=>{const a={};e===U.ER.IMPROVED?a.improvedCursor=t:e===U.ER.REGRESSION&&(a.regressionCursor=t),delete r[(0,le.j_)(e)],i.browserHistory.push({pathname:n,query:{...r,...a}})})(n),w=(0,T.ro)(t.query[le.vt[n]]),b=e=>{(0,D.Gi)("performance_views.trends.widget_pagination",{organization:s,direction:e,widget_type:Te(n)})};return(0,K.tZ)(k.ZP,{eventView:h,orgSlug:s.slug,location:t,trendChangeType:n,cursor:w,limit:5,setError:e=>c(e?.message),withBreakpoint:g,children:i=>{let{isLoading:c,trendsData:l,pageLinks:m}=i;const g=(0,le.CE)(t),w=(0,le.IO)(t,d,h.project),_=(0,le.RP)(l&&l.events&&l.events.data||[]),S=(0,ke.J6)(t,n,_),D=l?.stats||{},E=_&&_.slice?_.slice(0,5):[],j=c&&r?r:g.field,k=c&&o?o:w.column,T=(0,C.t)("This compares the baseline (%s) of the past with the present.",g.legendLabel);return(0,K.BX)(Ie,{"data-test-id":"changed-transactions",children:[(0,K.BX)(qe,{children:[(0,K.BX)(Be,{children:[x,(0,K.tZ)(v.Z,{size:"sm",position:"top",title:T})]}),c||u?(0,K.tZ)(f.Z,{style:{margin:"237px auto"}}):(0,K.tZ)(a.Fragment,{children:E.length?(0,K.BX)(a.Fragment,{children:[(0,K.tZ)(Oe,{children:(0,K.tZ)(ce.Z,{statsData:D,query:h.query,project:h.project,environment:h.environment,start:h.start,end:h.end,statsPeriod:h.statsPeriod,transaction:S,isLoading:c,...e})}),E.map(((e,r)=>(0,K.tZ)(Le,{api:p,currentTrendFunction:j,currentTrendColumn:k,trendView:h,organization:s,transaction:e,index:r,trendChangeType:n,transactions:E,location:t,projects:d,statsData:D,handleSelectTransaction:Pe(t,s,n),isLoading:c,trendParameter:w},e.transaction)))]}):(0,K.tZ)(Xe,{small:!0,children:(0,C.t)("No results")})})]}),(0,K.tZ)(y.Z,{pageLinks:m,onCursor:Z,paginationAnalyticsEvent:b})]})}})}function Le(e){const{transaction:t,transactions:n,trendChangeType:r,currentTrendFunction:s,currentTrendColumn:d,index:p,location:u,organization:h,projects:f,handleSelectTransaction:y,trendView:Z,statsData:v,isLoading:S,trendParameter:D}=e,j=le.es[r].default,[k,z]=(0,a.useState)(null),R=(0,ke.J6)(u,r,n)===t,L=f.find((e=>{let{slug:n}=e;return n===t.project})),N=t.aggregate_range_2,M=t.aggregate_range_1,F=(0,E.rl)(Math.abs(t.trend_percentage-1),0),I=(0,E.g9)(M/1e3,M<1e3&&M>10?0:2),q=(0,E.g9)(N/1e3,N<1e3&&N>10?0:2),O=(0,C.t)("Over this period, the %s for %s has %s %s from %s to %s",s,d,r===U.ER.IMPROVED?(0,C.t)("decreased"):(0,C.t)("increased"),F,I,q),B=r===U.ER.IMPROVED?M:N,V=r===U.ER.IMPROVED?I:q;return(0,K.BX)(a.Fragment,{children:[(0,K.BX)(He,{"data-test-id":"trends-list-item-"+r,children:[(0,K.tZ)(Ge,{color:j,children:t.count_range_1&&t.count_range_2?(0,K.tZ)(b.u,{title:(0,K.BX)(We,{children:[(0,K.tZ)("span",{children:(0,C.t)("Total Events")}),(0,K.BX)("span",{children:[(0,K.tZ)(c.Z,{value:t.count_range_1}),(0,K.tZ)(Je,{direction:"right",size:"xs"}),(0,K.tZ)(c.Z,{value:t.count_range_2})]})]}),disableForVisualTest:!0,children:(0,K.tZ)(m.V,{index:p,role:"radio",children:(0,K.tZ)(w.Z,{checked:R,onChange:()=>y(t)})})}):(0,K.tZ)(m.V,{index:p,role:"radio",children:(0,K.tZ)(w.Z,{checked:R,onChange:()=>y(t)})})}),(0,K.tZ)(Fe,{...e,onItemClicked:z}),(0,K.tZ)(Ue,{children:(0,K.tZ)(b.u,{title:O,children:(0,K.BX)(a.Fragment,{children:[r===U.ER.REGRESSION?"+":"",(0,E.rl)(t.trend_percentage-1,0)]})})}),(0,K.BX)(l.Z,{caret:!1,anchorRight:!0,title:(0,K.tZ)(Ve,{size:"xs",icon:(0,K.tZ)(_.YR,{"data-test-id":"trends-item-action",size:"xs"}),"aria-label":(0,C.t)("Actions")}),children:[!h.features.includes("performance-new-trends")&&(0,K.BX)(a.Fragment,{children:[(0,K.tZ)(x.Z,{onClick:()=>ze(u,h,B,je.LESS_THAN_EQUALS,r,f,Z.project),children:(0,K.tZ)(Ae,{children:(0,C.t)("Show ≤ %s",V)})}),(0,K.tZ)(x.Z,{onClick:()=>ze(u,h,B,je.GREATER_THAN_EQUALS,r,f,Z.project),children:(0,K.tZ)(Ae,{children:(0,C.t)("Show ≥ %s",V)})})]}),(0,K.tZ)(x.Z,{onClick:()=>function(e,t){const n=(0,T.ro)(e.query.query),r=new P.MY(n??"");r.addFilterValues("!transaction",[t]);const a=r.formatString();i.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(a).trim()}})}(u,t.transaction),children:(0,K.tZ)(Ae,{children:(0,C.t)("Hide from list")})})]}),(0,K.BX)(Qe,{children:[L&&(0,K.tZ)(b.u,{title:t.project,children:(0,K.tZ)(g.Z,{avatarSize:16,project:L,hideName:!0})}),(0,K.tZ)(Ne,{...e})]}),(0,K.tZ)(Ke,{color:j,children:(0,K.tZ)(Me,{...e})})]}),(0,K.tZ)(o.Z,{features:["performance-change-explorer"],children:(0,K.tZ)(ue,{collapsed:null===k,onClose:()=>z(null),transaction:t,trendChangeType:r,trendFunction:s,trendView:Z,statsData:v,isLoading:S,organization:h,projects:f,trendParameter:D,location:u})})]})}function Ne(e){let{transaction:t}=e;const{fromSeconds:n,toSeconds:r,showDigits:a}=(0,le.Kt)(t.aggregate_range_1,t.aggregate_range_2);return(0,K.BX)($e,{children:[(0,K.tZ)(p.Z,{seconds:n,fixedDigits:a?1:0,abbreviation:!0}),(0,K.tZ)(Je,{direction:"right",size:"xs"}),(0,K.tZ)(p.Z,{seconds:r,fixedDigits:a?1:0,abbreviation:!0})]})}function Me(e){let{transaction:t,trendChangeType:n}=e;const{seconds:r,fixedDigits:a,changeLabel:i}=(0,le.wx)(t.trend_difference,n);return(0,K.BX)("span",{children:[(0,K.tZ)(p.Z,{seconds:r,fixedDigits:a,abbreviation:!0})," ",i]})}function Fe(e){const{organization:t,trendView:n,transaction:r,projects:i,location:o,currentTrendFunction:s,onItemClicked:d}=e,c=n.clone(),l=(0,le._H)(r,i),p=(0,N.e1)({orgSlug:t.slug,transaction:String(r.transaction),query:c.generateQueryStringObject(),projectID:l,display:N.DC.TREND,trendFunction:s,additionalQuery:{trendParameter:o.query.trendParameter?.toString()}}),u=(0,a.useCallback)((()=>{d(r.transaction)}),[d,r.transaction]);return t.features.includes("performance-change-explorer")?(0,K.tZ)(Ye,{to:"","data-test-id":"item-transaction-name",onClick:u,children:r.transaction}):(0,K.tZ)(Ye,{to:p,"data-test-id":"item-transaction-name",children:r.transaction})}!function(e){e.GREATER_THAN_EQUALS=">=",e.LESS_THAN_EQUALS="<="}(je||(je={})),Re.displayName="ChangedTransactions",Le.displayName="TrendsListItem",Ne.displayName="CompareDurations",Me.displayName="ValueDelta",Fe.displayName="TransactionSummaryLink";const Ie=(0,r.Z)("div",{target:"efd374915"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),qe=(0,r.Z)(Z.Z,{target:"efd374914"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),Oe=(0,r.Z)("div",{target:"efd374913"})("padding:",(0,S.D)(3),";"),Be=(0,r.Z)(d.ws,{target:"efd374912"})("border-radius:",(e=>e.theme.borderRadius),";margin:",(0,S.D)(2)," ",(0,S.D)(3),";"),Ve=(0,r.Z)(s.zx,{target:"efd374911"})({name:"1989ovb",styles:"vertical-align:middle"}),Ae=(0,r.Z)("div",{target:"efd374910"})("white-space:nowrap;color:",(e=>e.theme.textColor),";");Ae.defaultProps={"data-test-id":"menu-action"};const Xe=(0,r.Z)(u.Z,{target:"efd37499"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),He=(0,r.Z)("div",{target:"efd37498"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,S.D)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,S.D)(1)," ",(0,S.D)(2),";"),Ge=(0,r.Z)("div",{target:"efd37497"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}"),Ye=(0,r.Z)(h.Z,{target:"efd37496"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,S.D)(1),";",(e=>e.theme.overflowEllipsis),";"),Qe=(0,r.Z)("div",{target:"efd37495"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),$e=(0,r.Z)("span",{target:"efd37494"})("color:",(e=>e.theme.gray300),";margin:0 ",(0,S.D)(1),";"),Ue=(0,r.Z)("div",{target:"efd37493"})("text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";"),Ke=(0,r.Z)("div",{target:"efd37492"})("color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeSmall),";"),We=(0,r.Z)("div",{target:"efd37491"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),Je=(0,r.Z)(_.CC,{target:"efd37490"})("margin:0 ",(0,S.D)(1),";"),et=(0,L.Z)((0,R.Z)(Re))},"./app/views/performance/trends/chart.tsx":(e,t,n)=>{n.d(t,{Z:()=>b,k:()=>w}),n("../node_modules/core-js/modules/es.array.push.js");var r=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),i=n("./app/components/charts/chartZoom.tsx"),o=n("./app/components/charts/lineChart.tsx"),s=n("./app/components/charts/transitionChart.tsx"),d=n("./app/components/charts/transparentLoadingMask.tsx"),c=n("./app/components/organizations/pageFilters/parse.tsx"),l=n("./app/utils/dates.tsx"),p=n("./app/utils/discover/charts.tsx"),u=n("./app/utils/discover/fields.tsx"),m=n("./app/utils/getDynamicText.tsx"),g=n("./app/utils/queryString.tsx"),h=n("./app/utils/useLocation.tsx"),f=n("./app/utils/useRouter.tsx"),x=n("./app/views/performance/utils.tsx"),y=n("./app/views/performance/trends/utils.tsx"),Z=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function v(e){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases"},{name:e}]}}function w(e){let{trendChangeType:t,statsPeriod:n,transaction:w,statsData:b,isLoading:_,start:C,end:S,trendFunctionField:D,disableXAxis:E,disableLegend:j,neutralColor:k,grid:T,height:P,projects:z,project:R,organization:L}=e;const N=(0,h.T)(),M=(0,f.Z)(),F=(0,a.u)(),I=e=>{const{selected:n}=e,a=Object.keys(n).filter((e=>!n[e])),i={...N.query};i[(0,y.P4)(t)]=a;const o={...N,query:i};r.browserHistory.push(o)},q=L.features.includes("performance-new-trends")?w?.change:t,O=y.es[k?"neutral":q||t],B=b&&w?.project&&w?.transaction?b[[w.project,w.transaction].join(",")]:void 0,V=B?.data??[],A=(0,y.CE)(N,D),X=(0,y.IO)(N,z,R),H=(0,y.ed)(A.field,X.column),G=function(e,t){return[{seriesName:t||"Current",data:e.map((e=>{let[t,n]=e;return{name:1e3*t,value:n.reduce(((e,t)=>{let{count:n}=t;return e+n}),0)}}))}]}(V,H),{smoothedResults:Y,minValue:Q,maxValue:$}=(0,y.vq)(G,H),U=C?(0,l.hC)(C):null,K=S?(0,l.hC)(S):null,{utc:W}=(0,c.fK)(N.query),J=(0,g.qP)(N.query[(0,y.P4)(t)]).reduce(((e,t)=>(e[t]=!1,e)),{}),ee=j?{show:!1}:{...v(H),selected:J},te=_,ne=_,re=Math.max($,w?.aggregate_range_2||0,w?.aggregate_range_1||0),ae=Math.min(Q,w?.aggregate_range_1||Number.MAX_SAFE_INTEGER,w?.aggregate_range_2||Number.MAX_SAFE_INTEGER),ie=.1*(re-ae),oe=[...Y?Y.map((e=>({...e,color:O.default,lineStyle:{opacity:1}}))):[],...(0,x.Qt)(F,Y||[],.5,!0,w)],se=(0,p.Xp)(oe),de={tooltip:{valueFormatter:(e,t)=>(0,p.CX)(e,(0,u.Px)(t))},yAxis:{min:Math.max(0,ae-ie),max:re+ie,minInterval:se,axisLabel:{color:F.chartLabel,formatter:e=>(0,p.gu)(e,"duration",void 0,se)}}};return(0,Z.tZ)(i.Z,{router:M,period:n,start:U,end:K,utc:"true"===W,children:e=>(0,Z.BX)(s.Z,{loading:te,reloading:ne,children:[(0,Z.tZ)(d.Z,{visible:ne}),(0,m.Z)({value:(0,Z.tZ)(o.w,{height:P,...e,...de,onLegendSelectChanged:I,series:oe,seriesOptions:{showSymbol:!1},legend:ee,toolBox:{show:!1},grid:T??{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:E?{show:!1}:void 0}),fixed:"Duration Chart"})]})})}w.displayName="Chart";const b=w},"./app/views/starfish/components/detailPanel.tsx":(e,t,n)=>{n.d(t,{Z:()=>w});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/react/index.js"),i=n("./app/components/button.tsx"),o=n("./app/icons/iconClose.tsx"),s=n("./app/locale.tsx"),d=n("./app/styles/space.tsx"),c=n("./app/utils/useKeyPress.tsx"),l=n("./app/utils/useOnClickOutside.tsx"),p=n("../node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js"),u=n("../node_modules/framer-motion/dist/es/render/dom/motion.mjs"),m=n("./app/utils/analytics.tsx"),g=n("./app/utils/useLocation.tsx"),h=n("./app/utils/useOrganization.tsx"),f=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x="50vw",y=(0,a.forwardRef)(Z);function Z(e,t){let{collapsed:n,children:r}=e;const{query:i}=(0,g.T)(),o=(0,h.Z)();return(0,a.useEffect)((()=>{n||(0,m.Gi)("starfish.panel.open",{organization:o})}),[i,n,o]),(0,f.tZ)(v,{ref:t,collapsed:n,initial:{opacity:0,x},animate:n?{opacity:0,x}:{opacity:1,x:0},transition:{type:"spring",stiffness:500,damping:50},children:r})}Z.displayName="SlideOverPanel";const v=(0,r.Z)(u.E.div,{shouldForwardProp:e=>["animate","transition","initial"].includes(e)||"collapsed"!==e&&(0,p.Z)(e),target:"e1iwvxg00"})("width:",x,";position:fixed;top:0;bottom:0;right:0;background:",(e=>e.theme.background),";color:",(e=>e.theme.textColor),";border-left:1px solid ",(e=>e.theme.border),";text-align:left;z-index:",(e=>e.theme.zIndex.sidebar-1),";",(e=>e.collapsed?"overflow: hidden;":"overflow-x: hidden;\n  overflow-y: scroll;"),";");function w(e){let{children:t,detailKey:n,onClose:r}=e;const[i,d]=(0,a.useState)({collapsed:!0}),p=(0,c.Z)("Escape");(0,a.useEffect)((()=>{d(n?{collapsed:!1}:{collapsed:!0})}),[n]);const u=(0,a.useRef)(null);return(0,l.Z)(u,(()=>{i.collapsed||(r?.(),d({collapsed:!0}))})),(0,a.useEffect)((()=>{p&&(i.collapsed||(r?.(),d({collapsed:!0})))}),[p]),(0,f.BX)(y,{collapsed:i.collapsed,ref:u,children:[(0,f.tZ)(_,{children:(0,f.tZ)(b,{priority:"link",size:"zero",borderless:!0,"aria-label":(0,s.t)("Close Details"),icon:(0,f.tZ)(o.b,{size:"sm"}),onClick:()=>{d({collapsed:!0}),r?.()}})}),(0,f.tZ)(C,{children:t})]})}w.displayName="Detail";const b=(0,r.Z)(i.zx,{target:"e1clb2dw2"})("color:",(e=>e.theme.gray300),";&:hover{color:",(e=>e.theme.gray400),";}"),_=(0,r.Z)("div",{target:"e1clb2dw1"})("justify-content:flex-end;display:flex;padding:",(0,d.D)(2),";"),C=(0,r.Z)("div",{target:"e1clb2dw0"})("padding:0 ",(0,d.D)(4),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_trends_changedTransactions_tsx.d26d927628c9595bc469eb687e7fcc73.js.map