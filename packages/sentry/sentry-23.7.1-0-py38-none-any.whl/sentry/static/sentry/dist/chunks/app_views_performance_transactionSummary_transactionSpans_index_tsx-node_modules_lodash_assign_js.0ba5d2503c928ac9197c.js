(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionSpans_index_tsx-node_modules_lodash_assign_js"],{"./app/views/performance/transactionSummary/transactionSpans/index.tsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>W});var i=n("./app/locale.tsx"),s=n("./app/utils/withOrganization.tsx"),a=n("./app/utils/withProjects.tsx"),o=n("./app/views/performance/transactionSummary/pageLayout.tsx"),r=n("./app/views/performance/transactionSummary/tabs.tsx"),p=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),c=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),l=n("../node_modules/react-router/es/index.js"),u=n("../node_modules/lodash/omit.js"),m=n.n(u),d=n("./app/components/compactSelect/index.tsx"),g=n("./app/components/datePageFilter.tsx"),x=n("./app/components/environmentPageFilter.tsx"),v=n("./app/components/events/searchBar.tsx"),y=n("./app/components/layouts/thirds.tsx"),h=n("./app/components/organizations/pageFilterBar.tsx"),f=n("./app/components/organizations/pageFilters/parse.tsx"),S=n("./app/components/pagination.tsx"),E=n("./app/styles/space.tsx"),T=n("./app/utils.tsx"),b=n("./app/utils/analytics.tsx"),w=n("./app/utils/discover/discoverQuery.tsx"),_=n("./app/utils/performance/suspectSpans/suspectSpansQuery.tsx"),Z=n("./app/utils/performanceForSentry/index.tsx"),k=n("./app/utils/queryString.tsx"),j=n("./app/utils/useProjects.tsx"),q=n("./app/components/performance/waterfall/utils.tsx"),z=n("./app/icons/index.tsx"),O=n("./app/utils/discover/genericDiscoverQuery.tsx"),P=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function C(e){return(0,P.tZ)(O.ZP,{route:"events-span-ops",limit:20,...m()(e,"children"),children:t=>{let{tableData:n,...i}=t;return e.children({spanOps:n,...i})}})}C.displayName="SpanOpsQuery";const L=C;var V=n("./app/utils/tokenizeSearch.tsx");function I(e){let{spanOps:t,isLoading:n,error:s}=e;return n?[{value:"isLoading",disabled:!0,label:(0,i.t)("Loadingâ€¦")}]:s?[{value:"error",disabled:!0,label:(0,i.t)("Error loading operations"),leadingItems:(0,P.tZ)(z.FC,{color:"subText"})}]:t.map((e=>({value:e.op,label:e.op,leadingItems:(0,P.tZ)(N,{backgroundColor:(0,q.hd)(e.op)})})))}function F(e){const{location:t,eventView:n,organization:s,handleOpChange:a,transactionName:o}=e,r=new V.MY("");r.setFilterValues("event.type",["transaction"]).setFilterValues("transaction",[o]);const p=n.clone();p.query=r.formatString();const c=(0,k.ro)(t.query.spanOp);return(0,P.tZ)(L,{location:t,orgSlug:s.slug,eventView:p,cursor:"0:0:1",noPagination:!0,children:e=>(0,P.tZ)(d.Z,{clearable:!0,maxMenuWidth:"24rem",disallowEmptySelection:!1,menuTitle:(0,i.t)("Filter by operation"),options:I(e),onChange:e=>a(e?.value),value:c,triggerLabel:c??(0,i.t)("Filter"),triggerProps:{icon:(0,P.tZ)(z.wH,{})}})})}F.displayName="OpsFilter";const N=(0,p.Z)("div",{target:"e8oacth0"})("display:block;width:",(0,E.D)(1),";height:",(0,E.D)(1),";border-radius:100%;background-color:",(e=>e.backgroundColor),";");var D=n("./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx"),B=n("./app/views/performance/transactionSummary/transactionSpans/utils.tsx");const M={spanOp:(e,t)=>(0,b.Gi)("performance_views.spans.change_op",{organization:e,operation_name:t}),sort:(e,t)=>(0,b.Gi)("performance_views.spans.change_sort",{organization:e,sort_column:t})};function X(e){const{location:t,organization:n,eventView:i,projectId:s,transactionName:a}=e,o=(0,k.ro)(t.query.query,"");function r(e){return function(i){M[e]?.(n,i);const s=(0,f.fK)({...t.query||{},[e]:i}),a=["cursor"];(0,T.ri)(i)||a.push(e);const o=m()(s,a);l.browserHistory.push({...t,query:o})}}const p=(0,k.ro)(t.query.spanOp),u=(0,k.ro)(t.query.spanGroup),v=(0,B.KK)(i),E=function(e,t){e=e.clone();const n=B.uQ[t];return e.fields=n?n.map((e=>({field:e}))):[],e}(i,v.field),b=(0,B.zW)(i),{projects:q}=(0,j.Z)();return(0,P.BX)(y.or,{fullWidth:!0,children:[(0,P.BX)(U,{children:[(0,P.tZ)(F,{location:t,eventView:i,organization:n,handleOpChange:r("spanOp"),transactionName:a}),(0,P.BX)(h.Z,{condensed:!0,children:[(0,P.tZ)(x.Z,{}),(0,P.tZ)(g.Z,{alignDropdown:"left",maxPickableDays:B.bc,relativeOptions:B.CS})]}),(0,P.tZ)(G,{organization:n,projectIds:i.project,query:o,fields:i.fields,onSearch:r("query")}),(0,P.tZ)(d.Z,{value:v.field,options:B.E5.map((e=>({value:e.field,label:e.label}))),onChange:e=>r("sort")(e.value),triggerProps:{prefix:v.prefix},triggerLabel:v.label})]}),(0,P.tZ)(w.Z,{eventView:b,orgSlug:n.slug,location:t,referrer:"api.performance.transaction-spans",cursor:"0:0:1",noPagination:!0,children:e=>{let{tableData:i}=e;const o=i?.data?.[0]??null;return(0,P.tZ)(_.Z,{location:t,orgSlug:n.slug,eventView:E,limit:10,perSuspect:0,spanOps:(0,T.ri)(p)?[p]:[],spanGroups:(0,T.ri)(u)?[u]:[],children:e=>{let{suspectSpans:i,isLoading:r,pageLinks:p}=e;return(0,P.BX)(c.Fragment,{children:[(0,P.tZ)(Z.oF,{id:"TransactionSpans-SuspectSpansTable",hasData:!!i?.length,isLoading:r,children:(0,P.tZ)(D.Z,{location:t,organization:n,transactionName:a,project:q.find((e=>e.id===s)),isLoading:r,suspectSpans:i??[],totals:o,sort:v.field})}),(0,P.tZ)(S.Z,{pageLinks:p??null})]})}})}})]})}X.displayName="SpansContent";const U=(0,p.Z)("div",{target:"e13h24431"})("display:grid;gap:",(0,E.D)(2),";margin-bottom:",(0,E.D)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(3, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto auto 1fr auto;}"),G=(0,p.Z)(v.Z,{target:"e13h24430"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/5;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),A=X;function Q(e){const{location:t,organization:n,projects:i}=e;return(0,P.tZ)(o.ZP,{location:t,organization:n,projects:i,tab:r.Z.SPANS,getDocumentTitle:H,generateEventView:B.xz,childComponent:A})}function H(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,i.t)("Performance")].join(" - "):[(0,i.t)("Summary"),(0,i.t)("Performance")].join(" - ")}Q.displayName="TransactionSpans";const W=(0,a.Z)((0,s.Z)(Q))},"./app/views/performance/transactionSummary/transactionSpans/suspectSpansTable.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var i=n("./app/components/gridEditable/index.tsx"),s=n("./app/components/gridEditable/sortLink.tsx"),a=n("./app/components/links/link.tsx"),o=n("./app/locale.tsx"),r=n("./app/utils.tsx"),p=n("./app/utils/discover/fieldRenderers.tsx"),c=n("./app/utils/discover/fields.tsx"),l=n("./app/utils/discover/styles.tsx"),u=n("./app/views/performance/transactionSummary/transactionSpans/spanDetails/utils.tsx"),m=n("./app/views/performance/transactionSummary/transactionSpans/types.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){const{location:t,organization:n,transactionName:s,isLoading:a,suspectSpans:o,totals:p,sort:c,project:l}=e,u=o.map((e=>({operation:e.op,group:e.group,description:e.description,frequency:(0,r.ri)(e.frequency)&&(0,r.ri)(p?.["count()"])?Math.min(1,e.frequency/p["count()"]):null,avgOccurrences:e.avgOccurrences,p50ExclusiveTime:e.p50ExclusiveTime,p75ExclusiveTime:e.p75ExclusiveTime,p95ExclusiveTime:e.p95ExclusiveTime,p99ExclusiveTime:e.p99ExclusiveTime,sumExclusiveTime:e.sumExclusiveTime})));return(0,d.tZ)(i.ZP,{isLoading:a,data:u,columnOrder:y[c].map((e=>h[e])),columnSortBy:[],grid:{renderHeadCell:x,renderBodyCell:v(t,n,s,l)},location:t})}function x(e,t){const n=(0,c.qG)(e.key,f[e.key]);return(0,d.tZ)(s.Z,{title:e.name,align:n,direction:void 0,canSort:!1,generateSortLink:()=>{}})}function v(e,t,n,i){return function(s,r){const c=(0,p.Js)(s.key,f);if("description"===s.key){const p=(0,u.BP)({orgSlug:t.slug,transaction:n,query:e.query,spanSlug:{op:r.operation,group:r.group},projectID:i?.id});return(0,d.tZ)(l.W2,{children:(0,d.tZ)(a.Z,{to:p,children:r[s.key]??(0,o.t)("(unnamed span)")})})}return c(r,{location:e,organization:t})}}g.displayName="SuspectSpansTable",x.displayName="renderHeadCell";const y={[m.g.AVG_OCCURRENCE]:["operation","description","avgOccurrences","frequency","p75ExclusiveTime","sumExclusiveTime"],[m.g.SUM_EXCLUSIVE_TIME]:["operation","description","frequency","p75ExclusiveTime","sumExclusiveTime"],[m.p.P50_EXCLUSIVE_TIME]:["operation","description","frequency","p50ExclusiveTime","sumExclusiveTime"],[m.p.P75_EXCLUSIVE_TIME]:["operation","description","frequency","p75ExclusiveTime","sumExclusiveTime"],[m.p.P95_EXCLUSIVE_TIME]:["operation","description","frequency","p95ExclusiveTime","sumExclusiveTime"],[m.p.P99_EXCLUSIVE_TIME]:["operation","description","frequency","p99ExclusiveTime","sumExclusiveTime"]},h={operation:{key:"operation",name:(0,o.t)("Span Operation"),width:i.z7},description:{key:"description",name:(0,o.t)("Span Name"),width:i.z7},frequency:{key:"frequency",name:(0,o.t)("Frequency"),width:i.z7},avgOccurrences:{key:"avgOccurrences",name:(0,o.t)("Average Occurrences"),width:i.z7},p50ExclusiveTime:{key:"p50ExclusiveTime",name:(0,o.t)("P50 Self Time"),width:i.z7},p75ExclusiveTime:{key:"p75ExclusiveTime",name:(0,o.t)("P75 Self Time"),width:i.z7},p95ExclusiveTime:{key:"p95ExclusiveTime",name:(0,o.t)("P95 Self Time"),width:i.z7},p99ExclusiveTime:{key:"p99ExclusiveTime",name:(0,o.t)("P99 Self Time"),width:i.z7},sumExclusiveTime:{key:"sumExclusiveTime",name:(0,o.t)("Total Self Time"),width:i.z7}},f={operation:"string",description:"string",frequency:"percentage",avgOccurrences:"number",p50ExclusiveTime:"duration",p75ExclusiveTime:"duration",p95ExclusiveTime:"duration",p99ExclusiveTime:"duration",sumExclusiveTime:"duration"}},"../node_modules/lodash/assign.js":(e,t,n)=>{var i=n("../node_modules/lodash/_assignValue.js"),s=n("../node_modules/lodash/_copyObject.js"),a=n("../node_modules/lodash/_createAssigner.js"),o=n("../node_modules/lodash/isArrayLike.js"),r=n("../node_modules/lodash/_isPrototype.js"),p=n("../node_modules/lodash/keys.js"),c=Object.prototype.hasOwnProperty,l=a((function(e,t){if(r(t)||o(t))s(t,p(t),e);else for(var n in t)c.call(t,n)&&i(e,n,t[n])}));e.exports=l}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionSpans_index_tsx-node_modules_lodash_assign_js.40f62643f37d373f84f958a9cde97354.js.map