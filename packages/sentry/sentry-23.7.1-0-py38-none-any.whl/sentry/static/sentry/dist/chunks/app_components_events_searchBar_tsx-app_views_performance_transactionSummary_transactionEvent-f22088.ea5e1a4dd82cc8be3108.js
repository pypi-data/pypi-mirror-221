(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_events_searchBar_tsx-app_views_performance_transactionSummary_transactionEvent-f22088"],{"./app/components/events/searchBar.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>L}),n("../node_modules/core-js/modules/es.error.cause.js");var s=n("../node_modules/react/index.js"),o=n("../node_modules/lodash/assign.js"),r=n.n(o),i=n("../node_modules/lodash/flatten.js"),a=n.n(i),l=n("../node_modules/lodash/memoize.js"),d=n.n(l),c=n("../node_modules/lodash/omit.js"),p=n.n(c),u=n("./app/actionCreators/tags.tsx"),m=n("./app/components/smartSearchBar/index.tsx"),h=n("./app/constants/index.tsx"),g=n("./app/types/index.tsx"),f=n("./app/utils.tsx"),y=n("./app/utils/discover/fields.tsx"),x=n("./app/utils/fields/index.ts"),b=n("./app/utils/measurements/measurements.tsx"),v=n("./app/utils/useApi.tsx"),w=n("./app/utils/withTags.tsx"),Z=n("./app/views/dashboards/utils.tsx"),k=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const j=new RegExp(`^${h.c$}|\\${h.ir}`,"g"),C=new Set(Object.keys(y.wZ)),S=Object.keys(y.wZ).reduce(((e,t)=>(e[t]={...y.wZ[t],kind:x.IV.FIELD},e)),{}),_=p()(S,y.J8),E=y.$4.reduce(((e,t)=>(e[t]={name:t,kind:x.IV.METRICS},e)),{}),O=Object.keys(y.jg).reduce(((e,t)=>(e[t]={...y.jg[t],kind:x.IV.FIELD},e)),{});function I(e){const{maxSearchItems:t,organization:n,tags:o,omitTags:i,fields:l,projectIds:c,includeSessionTagsValues:h,maxMenuHeight:w,customMeasurements:I}=e,L=(0,v.Z)(),M=(0,s.useMemo)((()=>(e=>e?.length?e.reduce(((e,t)=>(C.has(t.field)||(0,y.GO)(t.field)||(0,Z.nk)(t.field)||(e[t.field]={key:t.field,name:t.field,kind:x.IV.FUNCTION}),e)),{}):[])(l)),[l]),T=(0,s.useMemo)((()=>Object.keys(o).reduce(((e,t)=>(e[t]={...o[t],kind:x.IV.TAG},e)),{})),[o]);(0,s.useEffect)((()=>{z.cache.clear?.()}),[c]);const z=d()(((e,t,s)=>{const o=c?.map(String);return(0,y.h1)(e.key)||(0,y.Xr)(e.key)?Promise.resolve([]):(0,x.bn)(e.key)?Promise.resolve(x.BF):(0,u.Fo)({api:L,orgSlug:n.slug,tagKey:e.key,search:t,projectIds:o,endpointParams:s,includeTransactions:!0,includeSessions:h}).then((e=>a()(e.filter((e=>{let{name:t}=e;return(0,f.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:n}=e;return`${n}-${t}`})),A=e=>{const t=((e,t)=>{const n=Object.keys(e).reduce(((t,n)=>(t[n]={...e[n],kind:x.IV.MEASUREMENT},t)),{});return t?Object.keys(t).reduce(((e,n)=>(e[n]={...t[n],kind:x.IV.MEASUREMENT},e)),n):n})(e,I),s=n.features.includes("performance-view")?Object.assign({},t,M,E,S):Object.assign({},_);return r()(s,T,S,O),s.has={key:x.Sh.HAS,name:"Has property",values:Object.keys(s).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))),predefined:!0,kind:x.IV.FIELD},i&&i.length>0?p()(s,i):s};return(0,k.tZ)(b.Z,{children:n=>{let{measurements:s}=n;return(0,k.tZ)(m.Z,{hasRecentSearches:!0,savedSearchType:g.L4.EVENT,onGetTagValues:z,supportedTags:A(s),prepareQuery:e=>e.replace(j,""),maxSearchItems:t,excludedTags:[x.Sh.ENVIRONMENT,x.Sh.TOTAL_COUNT],maxMenuHeight:w??300,customPerformanceMetrics:I,...e})}})}I.displayName="SearchBar";const L=(0,w.Z)(I)},"./app/components/gridEditable/sortLink.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react-router/es/index.js"),r=n("./app/components/links/link.tsx"),i=n("./app/icons/index.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{align:t,title:n,canSort:s,generateSortLink:r,onClick:i,direction:l,replace:u}=e;const m=r();if(!m||!s)return(0,a.tZ)(c,{align:t,children:n});const h=l?(0,a.tZ)(p,{size:"xs",direction:"desc"===l?"down":"up"}):null;return(0,a.BX)(d,{align:t,to:m,onClick:e=>{u&&(e.preventDefault(),o.browserHistory.replace(m)),i?.(e)},children:[n," ",h]})}l.displayName="SortLink";const d=(0,s.Z)((e=>{const{align:t,css:n,...s}=e;return(0,a.tZ)(r.Z,{...s})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),c=(0,s.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),p=(0,s.Z)(i.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),u=l},"./app/components/radio.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),r=n("./app/styles/animations.tsx");const i=(0,s.Z)("input",{target:"e72tocb0"})("display:flex;padding:0;width:",(e=>"small"===e.radioSize?"1rem":"1.5rem"),";height:",(e=>"small"===e.radioSize?"1rem":"1.5rem"),";position:relative;border-radius:50%;align-items:center;justify-content:center;border:1px solid ",(e=>e.theme.border),";box-shadow:inset ",(e=>e.theme.dropShadowMedium),";background:none;appearance:none;transition:border 0.1s,box-shadow 0.1s;margin:0!important;&:focus,&.focus-visible{outline:none;border-color:",(e=>e.theme.focusBorder),";box-shadow:",(e=>e.theme.focusBorder)," 0 0 0 1px;}&:checked:after{content:'';",(e=>((e,t)=>(0,o.iv)("display:block;width:","small"===e.radioSize?"0.5rem":"0.875rem",";height:","small"===e.radioSize?"0.5rem":"0.875rem",";border-radius:50%;background-color:",t.active,";animation:0.2s ",r.kQ," ease;opacity:",e.disabled?.4:null,";",""))(e,e.theme)),";}");i.defaultProps={type:"radio"};const a=i},"./app/components/replays/replayIdCountProvider.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var s=n("../node_modules/react/index.js"),o=n("./app/components/replays/replayCountContext.tsx"),r=n("./app/components/replays/useReplaysCount.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{children:t,organization:n,replayIds:a}=e;const l=(0,s.useMemo)((()=>a?.map(String)?.filter(Boolean)||[]),[a]),d=(0,r.Z)({replayIds:(c=l,Array.from(new Set(c))),organization:n});var c;return(0,i.tZ)(o.Z.Provider,{value:d,children:t})}a.displayName="ReplayIdCountProvider";const l=a},"./app/utils/discover/viewReplayLink.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react/index.js"),r=n("./app/components/links/link.tsx"),i=n("./app/components/replays/replayCountContext.tsx"),a=n("./app/components/tooltip.tsx"),l=n("./app/locale.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{children:t,replayId:n,to:s}=e;return((0,o.useContext)(i.Z)[n]||0)<1?(0,d.tZ)(a.u,{title:(0,l.t)("This replay may have been rate limited or deleted."),children:(0,d.tZ)(u,{children:(0,l.t)("(missing)")})}):(0,d.tZ)(a.u,{title:(0,l.t)("View Replay"),children:(0,d.tZ)(p,{to:s,children:t})})}c.displayName="ViewReplayLink";const p=(0,s.Z)(r.Z,{target:"ed9jpq61"})({name:"50z4ny",styles:"& div{display:inline;}"}),u=(0,s.Z)("span",{target:"ed9jpq60"})("color:",(e=>e.theme.gray300),";"),m=c},"./app/utils/withTags.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/react/index.js"),r=n("./app/stores/tagStore.tsx"),i=n("./app/utils/getDisplayName.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends o.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{tags:r.Z.getState()}),(0,s.Z)(this,"unsubscribe",r.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...n}=this.props;return(0,a.tZ)(e,{tags:t??this.state.tags,...n})}}return t.displayName="WithTags",(0,s.Z)(t,"displayName",`withTags(${(0,i.Z)(e)})`),t}},"./app/views/performance/transactionSummary/transactionEvents/eventsTable.tsx":(e,t,n)=>{"use strict";n.d(t,{Z:()=>se});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),i=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/lodash/groupBy.js"),l=n.n(a),d=n("./app/api.tsx"),c=n("./app/components/gridEditable/index.tsx"),p=n("./app/components/gridEditable/sortLink.tsx"),u=n("./app/components/links/link.tsx"),m=n("./app/components/pagination.tsx"),h=n("./app/components/questionTooltip.tsx"),g=n("./app/components/replays/replayIdCountProvider.tsx"),f=n("./app/components/tooltip.tsx"),y=n("./app/locale.tsx"),x=n("./app/utils/analytics.tsx"),b=n("./app/utils/discover/discoverQuery.tsx"),v=n("./app/utils/discover/eventView.tsx"),w=n("./app/utils/discover/fieldRenderers.tsx"),Z=n("./app/utils/discover/fields.tsx"),k=n("./app/utils/discover/viewReplayLink.tsx"),j=n("./app/utils/parseLinkHeader.tsx"),C=n("./app/utils/performanceForSentry/index.tsx"),S=n("./app/views/discover/table/cellAction.tsx"),_=n("./app/views/performance/data.tsx"),E=n("./app/views/performance/transactionSummary/utils.tsx"),O=n("../node_modules/react-dom/profiling.js"),I=r.createContext(),L=r.createContext();function M(e){var t=e.children,n=r.useState(null),s=n[0],o=n[1],i=r.useRef(!1);r.useEffect((function(){return function(){i.current=!0}}),[]);var a=r.useCallback((function(e){i.current||o(e)}),[]);return r.createElement(I.Provider,{value:s},r.createElement(L.Provider,{value:a},t))}var T=n("../node_modules/react-popper/lib/esm/utils.js"),z=n("../node_modules/react-popper/lib/esm/usePopper.js"),A=function(){},B=function(){return Promise.resolve(null)},P=[];function R(e){var t=e.placement,n=void 0===t?"bottom":t,s=e.strategy,o=void 0===s?"absolute":s,i=e.modifiers,a=void 0===i?P:i,l=e.referenceElement,d=e.onFirstUpdate,c=e.innerRef,p=e.children,u=r.useContext(I),m=r.useState(null),h=m[0],g=m[1],f=r.useState(null),y=f[0],x=f[1];r.useEffect((function(){(0,T.k$)(c,h)}),[c,h]);var b=r.useMemo((function(){return{placement:n,strategy:o,onFirstUpdate:d,modifiers:[].concat(a,[{name:"arrow",enabled:null!=y,options:{element:y}}])}}),[n,o,d,a,y]),v=(0,z.D)(l||u,h,b),w=v.state,Z=v.styles,k=v.forceUpdate,j=v.update,C=r.useMemo((function(){return{ref:g,style:Z.popper,placement:w?w.placement:n,hasPopperEscaped:w&&w.modifiersData.hide?w.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:w&&w.modifiersData.hide?w.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:Z.arrow,ref:x},forceUpdate:k||A,update:j||B}}),[g,x,n,w,Z,j,k]);return(0,T.$p)(p)(C)}var V=n("../node_modules/react-popper/node_modules/warning/warning.js"),D=n.n(V);function N(e){var t=e.children,n=e.innerRef,s=r.useContext(L),o=r.useCallback((function(e){(0,T.k$)(n,e),(0,T.DL)(s,e)}),[n,s]);return r.useEffect((function(){return function(){return(0,T.k$)(n,null)}}),[]),r.useEffect((function(){D()(Boolean(s),"`Reference` should not be used outside of a `Manager` component.")}),[s]),(0,T.$p)(t)({ref:o})}var q=n("./app/components/menuItem.tsx"),H=n("./app/components/radio.tsx"),$=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class F extends r.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{isOpen:!1}),(0,s.Z)(this,"menuEl",null),(0,s.Z)(this,"handleClickOutside",(e=>{this.menuEl&&e.target instanceof Element&&(this.menuEl.contains(e.target)||this.setState({isOpen:!1}))})),(0,s.Z)(this,"toggleOpen",(()=>{this.setState((e=>{let{isOpen:t}=e;return{isOpen:!t}}))}))}componentDidUpdate(e,t){this.state.isOpen&&!1===t.isOpen&&document.addEventListener("click",this.handleClickOutside,!0),!1===this.state.isOpen&&t.isOpen&&document.removeEventListener("click",this.handleClickOutside,!0)}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutside,!0)}generateSortLink(e){const{eventView:t,tableMeta:n,location:s}=this.props;if(!n)return;const o=t.sortOnField(e,n,"desc").generateQueryStringObject();return{...s,query:{...s.query,sort:o.sort}}}renderMenuItem(e,t){const{eventView:n}=this.props;return(0,$.tZ)(X,{children:(0,$.tZ)(G,{children:(0,$.BX)(W,{children:[(0,$.tZ)(Q,{readOnly:!0,radioSize:"small",checked:n.sorts.some((t=>{let{field:n}=t;return n===e})),onClick:()=>{const t=this.generateSortLink({field:e});t&&i.browserHistory.push(t)}}),(0,$.tZ)("span",{children:t})]})})})}renderMenuContent(){return(0,$.BX)(K,{children:[this.renderMenuItem("spans.http",(0,y.t)("Sort By HTTP")),this.renderMenuItem("spans.db",(0,y.t)("Sort By DB")),this.renderMenuItem("spans.resource",(0,y.t)("Sort By Resource")),this.renderMenuItem("spans.browser",(0,y.t)("Sort By Browser"))]})}renderMenu(){return(0,O.createPortal)((0,$.tZ)(R,{placement:"top",modifiers:[{name:"hide",enabled:!1},{name:"preventOverflow",enabled:!0,options:{padding:10}}],children:e=>{let{ref:t,style:n,placement:s}=e;return(0,$.tZ)(U,{ref:e=>{t(e),this.menuEl=e},style:n,"data-placement":s,children:this.renderMenuContent()})}}),document.body)}render(){const{title:e}=this.props,{isOpen:t}=this.state,n=t?this.renderMenu():null;return(0,$.BX)(M,{children:[(0,$.tZ)(N,{children:t=>{let{ref:n}=t;return(0,$.tZ)(J,{ref:n,children:(0,$.tZ)(e,{onClick:this.toggleOpen})})}}),n]})}}F.displayName="OperationSort";const U=(0,o.Z)("div",{target:"eiqklt36"})("border:none;border-radius:2px;box-shadow:0 0 0 1px rgba(52, 60, 69, 0.2),0 1px 3px rgba(70, 82, 98, 0.25);background-clip:padding-box;background-color:",(e=>e.theme.background),";width:220px;overflow:visible;z-index:",(e=>e.theme.zIndex.tooltip),";&:before,&:after{width:0;height:0;content:'';display:block;position:absolute;right:auto;}&:before{border-left:9px solid transparent;border-right:9px solid transparent;left:calc(50% - 9px);z-index:-2;}&:after{border-left:8px solid transparent;border-right:8px solid transparent;left:calc(50% - 8px);z-index:-1;}&[data-placement*='bottom']{margin-top:9px;&:before{border-bottom:9px solid ",(e=>e.theme.border),";top:-9px;}&:after{border-bottom:8px solid ",(e=>e.theme.background),";top:-8px;}}&[data-placement*='top']{margin-bottom:9px;&:before{border-top:9px solid ",(e=>e.theme.border),";bottom:-9px;}&:after{border-top:8px solid ",(e=>e.theme.background),";bottom:-8px;}}"),X=(0,o.Z)(q.Z,{target:"eiqklt35"})("font-size:",(e=>e.theme.fontSizeMedium),";&:not(:last-child){border-bottom:1px solid ",(e=>e.theme.innerBorder),";}"),G=(0,o.Z)("div",{target:"eiqklt34"})({name:"1bxfgt5",styles:"display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:100%"}),W=(0,o.Z)("label",{target:"eiqklt33"})({name:"12ir9nx",styles:"display:grid;cursor:pointer;gap:0.25em 0.5em;grid-template-columns:max-content auto;align-items:center;outline:none;font-weight:normal;margin:0"}),Q=(0,o.Z)(H.Z,{target:"eiqklt32"})({name:"ti75j2",styles:"margin:0"}),K=(0,o.Z)("div",{target:"eiqklt31"})({name:"1okymkx",styles:"max-height:250px;overflow-y:auto"}),J=(0,o.Z)("div",{target:"eiqklt30"})({name:"e0dnmk",styles:"cursor:pointer"}),Y=F;function ee(e){let{onClick:t}=e;return(0,$.BX)("div",{onClick:t,children:[(0,$.tZ)("span",{children:(0,y.t)("operation duration")}),(0,$.tZ)(ne,{size:"xs",position:"top",title:(0,y.t)("Span durations are summed over the course of an entire transaction. Any overlapping spans are only counted once.")})]})}ee.displayName="OperationTitle";class te extends r.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{widths:[],lastFetchedCursor:"",attachments:[],hasMinidumps:!1}),(0,s.Z)(this,"api",new d.KU),(0,s.Z)(this,"replayLinkGenerator",(0,E.MF)(this.props.routes)),(0,s.Z)(this,"handleCellAction",(e=>(t,n)=>{const{eventView:s,location:o,organization:r,excludedTags:a}=this.props;(0,x.Gi)("performance_views.transactionEvents.cellaction",{organization:r,action:t});const l=(0,E.xf)(s.query);a&&a.forEach((e=>{l.removeFilter(e)})),(0,S.rh)(l,t,e,n),i.browserHistory.push({pathname:o.pathname,query:{...o.query,cursor:void 0,query:l.formatString()}})})),(0,s.Z)(this,"renderBodyCellWithData",(e=>(t,n)=>this.renderBodyCell(e,t,n))),(0,s.Z)(this,"renderHeadCellWithMeta",(e=>{const t=this.props.columnTitles??_.hj;return(n,s)=>this.renderHeadCell(e,n,t[s])})),(0,s.Z)(this,"handleResizeColumn",((e,t)=>{const n=[...this.state.widths];n[e]=t.width?Number(t.width):c.z7,this.setState({...this.state,widths:n})}))}renderBodyCell(e,t,n){const{eventView:s,organization:o,location:r,transactionName:i,projectSlug:a}=this.props;if(!e||!e.meta)return n[t.key];const l=e.meta,d=String(t.key),c=(0,w.Js)(d,l)(n,{organization:o,location:r,eventView:s,projectSlug:a}),p=[S.eX.ADD,S.eX.EXCLUDE,S.eX.SHOW_GREATER_THAN,S.eX.SHOW_LESS_THAN];if(["attachments","minidump"].includes(d))return c;if("id"===d||"trace"===d){const{issueId:e}=this.props;let s={};return e&&"id"===d?s.pathname=`/organizations/${o.slug}/issues/${e}/events/${n.id}/`:s=("id"===d?E.vd:E.Z6)(i)(o,n,r.query),(0,$.tZ)(S.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:p,children:(0,$.tZ)(u.Z,{to:s,children:c})})}if("replayId"===d){const e=n.replayId?this.replayLinkGenerator(o,n,void 0):null;return(0,$.tZ)(S.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:p,children:e?(0,$.tZ)(k.Z,{replayId:n.replayId,to:e,children:c}):c})}if("profile.id"===d){const e=(0,E.nx)()(o,n,void 0);return(0,$.tZ)(S.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:p,children:e?(0,$.tZ)(u.Z,{to:e,children:c}):c})}const m=(0,Z.LY)(d),h=n[m];return"integer"===l[m]&&"number"==typeof h&&h>999?(0,$.tZ)(f.u,{title:h.toLocaleString(),containerDisplayMode:"block",position:"right",children:(0,$.tZ)(S.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:p,children:c})}):(0,$.tZ)(S.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:p,children:c})}onSortClick(e,t){const{organization:n}=this.props;(0,x.Gi)("performance_views.transactionEvents.sort",{organization:n,field:t,direction:e})}renderHeadCell(e,t,n){const{eventView:s,location:o}=this.props,r=(0,Z.qG)(t.name,t.type,e),i={field:t.name,width:t.width},a=s.sortForField(i,e),l="id"!==i.field&&"trace"!==i.field&&"replayId"!==i.field&&i.field!==Z.zD&&(0,v.M3)(i,e),d=a?a.kind:void 0,c=a?a.field:void 0;return i.field===Z.zD&&(n=(0,$.tZ)(Y,{title:ee,eventView:s,tableMeta:e,location:o})),(0,$.tZ)(p.Z,{align:r,title:n||i.field,direction:d,canSort:l,generateSortLink:function(){if(!e)return;const t=s.sortOnField(i,e).generateQueryStringObject();return{...o,query:{...o.query,sort:t.sort}}},onClick:()=>this.onSortClick(d,c)})}render(){const{eventView:e,organization:t,location:n,setError:s,referrer:o,isEventLoading:r}=this.props,i=e.clone();i.sorts=[],i.fields=[{field:"count()",width:-1}];const{widths:a}=this.state,d=e.getColumns().find((e=>e.name===Z.zD)),p=e.getColumns().filter((e=>!d||!(0,Z.yK)(e.name))).map(((e,t)=>"number"==typeof a[t]?{...e,width:a[t]}:e));this.props.customColumns?.includes("attachments")&&this.state.attachments.length&&p.push({isSortable:!1,key:"attachments",name:"attachments",type:"never",column:{field:"attachments",kind:"field",alias:void 0}}),this.props.customColumns?.includes("minidump")&&this.state.hasMinidumps&&p.push({isSortable:!1,key:"minidump",name:"minidump",type:"never",column:{field:"minidump",kind:"field",alias:void 0}});const u=e=>{let{data:t}=e;const n=l()(this.state.attachments,"event_id");t.forEach((e=>{e.attachments=n[e.id]||[]}))},h=async(e,t)=>{let{data:n}=e;const s=n.map((e=>e.id)),o=["per_page=50",...this.props.customColumns?.includes("attachments")?[]:["types=event.minidump"],...s.map((e=>`event_id=${e}`))].join("&"),r=await this.api.requestPromise(`/api/0/issues/${this.props.issueId}/attachments/?${o}`);let i=!1;r.forEach((e=>{"event.minidump"===e.type&&(i=!0)})),this.setState({...this.state,lastFetchedCursor:t,attachments:r,hasMinidumps:i})};return(0,$.tZ)("div",{"data-test-id":"events-table",children:(0,$.tZ)(b.Z,{eventView:i,orgSlug:t.slug,location:n,setError:e=>s(e?.message),referrer:"api.performance.transaction-summary",cursor:"0:0:0",children:i=>{let{isLoading:a,tableData:l}=i;const d=l?.data[0]?.["count()"]??0;return(0,$.tZ)(b.Z,{eventView:e,orgSlug:t.slug,location:n,setError:e=>s(e?.message),referrer:o||"api.performance.transaction-events",children:s=>{let{pageLinks:o,isLoading:i,tableData:l}=s;l??={data:[]};const f=l?.data?.length??0,x=(0,j.Z)(o),b=x?.next?.cursor,v=t.features.includes("event-attachments")&&!!this.props.issueId&&!!b&&this.state.lastFetchedCursor!==b,w=d&&f?(0,y._N)("Showing [pageEventsCount] of [totalEventsCount] events",{pageEventsCount:f.toLocaleString(),totalEventsCount:d.toLocaleString()}):void 0;v&&h(l,b),u(l);const Z=l.data.map((e=>e.replayId));return(0,$.BX)(g.Z,{organization:t,replayIds:Z,children:[(0,$.tZ)(C.oF,{id:"TransactionEvents-EventsTable",hasData:!!l?.data?.length,children:(0,$.tZ)(c.ZP,{isLoading:a||i||v||r,data:l?.data??[],columnOrder:p,columnSortBy:e.getSorts(),grid:{onResizeColumn:this.handleResizeColumn,renderHeadCell:this.renderHeadCellWithMeta(l?.meta),renderBodyCell:this.renderBodyCellWithData(l)},location:n})}),(0,$.tZ)(m.Z,{disabled:i,caption:w,pageLinks:o})]})}})}})})}}te.displayName="EventsTable";const ne=(0,o.Z)(h.Z,{target:"e9qaxer0"})({name:"1dgfen9",styles:"position:relative;top:1px;left:4px"}),se=te},"../node_modules/lodash/assign.js":(e,t,n)=>{var s=n("../node_modules/lodash/_assignValue.js"),o=n("../node_modules/lodash/_copyObject.js"),r=n("../node_modules/lodash/_createAssigner.js"),i=n("../node_modules/lodash/isArrayLike.js"),a=n("../node_modules/lodash/_isPrototype.js"),l=n("../node_modules/lodash/keys.js"),d=Object.prototype.hasOwnProperty,c=r((function(e,t){if(a(t)||i(t))o(t,l(t),e);else for(var n in t)d.call(t,n)&&s(e,n,t[n])}));e.exports=c},"../node_modules/lodash/groupBy.js":(e,t,n)=>{var s=n("../node_modules/lodash/_baseAssignValue.js"),o=n("../node_modules/lodash/_createAggregator.js"),r=Object.prototype.hasOwnProperty,i=o((function(e,t,n){r.call(e,n)?e[n].push(t):s(e,n,[t])}));e.exports=i},"../node_modules/react-popper/node_modules/warning/warning.js":e=>{"use strict";e.exports=function(){}}}]);
//# sourceMappingURL=../sourcemaps/app_components_events_searchBar_tsx-app_views_performance_transactionSummary_transactionEvent-f22088.d0baf4b6c49ddb10175504b70b218b59.js.map