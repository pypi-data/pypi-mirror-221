"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionEvents_index_tsx"],{"./app/utils/performance/histogram/constants.tsx":(e,t,n)=>{n.d(t,{d:()=>a});var r=n("./app/locale.tsx");const a=[{label:(0,r.t)("Exclude"),value:"exclude_outliers"},{label:(0,r.t)("Include"),value:"all"}]},"./app/utils/performance/histogram/index.tsx":(e,t,n)=>{n.d(t,{V:()=>p,Z:()=>c});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),s=n("../node_modules/react-router/es/index.js"),o=n("./app/utils/queryString.tsx"),i=n("./app/utils/performance/histogram/constants.tsx");class l extends a.Component{constructor(){super(...arguments),(0,r.Z)(this,"handleResetView",(()=>{const{location:e,zoomKeys:t}=this.props;s.browserHistory.push({pathname:e.pathname,query:p(e,t)})})),(0,r.Z)(this,"handleFilterChange",(e=>{const{location:t,zoomKeys:n}=this.props;s.browserHistory.push({pathname:t.pathname,query:{...p(t,n),dataFilter:e}})}))}isZoomed(){const{location:e,zoomKeys:t}=this.props;return t.map((t=>e.query[t])).some((e=>void 0!==e))}getActiveFilter(){const{location:e}=this.props,t=e.query.dataFilter?(0,o.ro)(e.query.dataFilter):i.d[0].value;return i.d.find((e=>e.value===t))||i.d[0]}render(){const e={isZoomed:this.isZoomed(),handleResetView:this.handleResetView,activeFilter:this.getActiveFilter(),handleFilterChange:this.handleFilterChange,filterOptions:i.d};return this.props.children(e)}}function p(e,t){const n={...e.query,cursor:void 0};return delete n.dataFilter,t.forEach((e=>delete n[e])),n}l.displayName="Histogram";const c=l},"./app/views/performance/transactionSummary/transactionEvents/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>M}),n("../node_modules/core-js/modules/es.array.push.js");var r=n("../node_modules/react-router/es/index.js"),a=n("./app/components/layouts/thirds.tsx"),s=n("./app/components/loadingIndicator.tsx"),o=n("./app/locale.tsx"),i=n("./app/utils/analytics.tsx"),l=n("./app/utils/discover/discoverQuery.tsx"),p=n("./app/utils/discover/eventView.tsx"),c=n("./app/utils/discover/fields.tsx"),u=n("./app/utils/fields/index.ts"),d=n("./app/utils/performance/histogram/index.tsx"),m=n("./app/utils/queryString.tsx"),h=n("./app/utils/tokenizeSearch.tsx"),y=n("./app/utils/withOrganization.tsx"),g=n("./app/utils/withProjects.tsx"),f=n("./app/views/performance/transactionSummary/filter.tsx"),v=n("./app/views/performance/transactionSummary/pageLayout.tsx"),w=n("./app/views/performance/transactionSummary/tabs.tsx"),x=n("./app/views/performance/transactionSummary/transactionOverview/latencyChart/utils.tsx"),b=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),Z=n("../node_modules/lodash/omit.js"),j=n.n(Z),q=n("./app/components/button.tsx"),F=n("./app/components/compactSelect/index.tsx"),_=n("./app/components/datePageFilter.tsx"),E=n("./app/components/environmentPageFilter.tsx"),S=n("./app/components/events/searchBar.tsx"),z=n("./app/components/organizations/pageFilterBar.tsx"),V=n("./app/components/organizations/pageFilters/parse.tsx"),k=n("./app/styles/space.tsx"),N=n("./app/utils/replays/projectSupportsReplay.tsx"),C=n("./app/utils/useRoutes.tsx"),O=n("./app/views/performance/utils.tsx"),B=n("./app/views/performance/transactionSummary/transactionEvents/eventsTable.tsx"),D=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),P=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const T=[(0,o.t)("event id"),(0,o.t)("user"),(0,o.t)("operation duration"),(0,o.t)("total duration"),(0,o.t)("trace id"),(0,o.t)("timestamp")];function I(e){const{location:t,organization:n,eventView:r,transactionName:s,spanOperationBreakdownFilter:i,webVital:l,setError:p,projectId:c,projects:u}=e,d=(0,C.V)(),m=r.clone(),h=T.slice(),y=u.find((e=>e.id===c)),g=[...m.fields];l&&h.splice(3,0,l);const v=(0,f.Is)(i,t);if(v&&(m.query=`${m.query} ${v}`.trim(),h.splice(2,1,(0,o.t)("%s duration",i))),(0,O.Bh)(u,m.project)===O.jq.BACKEND){const e=h.indexOf("user");e>0&&(h.splice(e+1,0,"http.method"),g.splice(e+1,0,{field:"http.method"}))}return n.features.includes("profiling")&&y&&y.hasProfiles&&(h.push((0,o.t)("profile")),g.push({field:"profile.id"})),n.features.includes("session-replay")&&y&&(0,N.Z)(y)&&(h.push((0,o.t)("replay")),g.push({field:"replayId"})),m.fields=g,(0,P.BX)(a.or,{fullWidth:!0,children:[(0,P.tZ)(H,{...e,eventView:m}),(0,P.tZ)(B.Z,{eventView:m,organization:n,routes:d,location:t,setError:p,columnTitles:h,transactionName:s})]})}function H(e){const{eventView:t,location:n,organization:a,spanOperationBreakdownFilter:s,onChangeSpanOperationBreakdownFilter:l,eventsDisplayFilterName:p,onChangeEventsDisplayFilter:c,percentileValues:u}=e,d=(0,m.ro)(n.query.query,""),h=(0,D._S)(s,u);return(0,P.BX)(K,{children:[(0,P.tZ)(f.ZP,{organization:a,currentFilter:s,onChangeFilter:l}),(0,P.BX)(z.Z,{condensed:!0,children:[(0,P.tZ)(E.Z,{}),(0,P.tZ)(_.Z,{alignDropdown:"left"})]}),(0,P.tZ)(R,{organization:a,projectIds:t.project,query:d,fields:t.fields,onSearch:e=>{const t=(0,V.fK)({...n.query||{},query:e}),a=j()(t,"cursor");r.browserHistory.push({pathname:n.pathname,query:a})}}),(0,P.tZ)(F.Z,{triggerProps:{prefix:(0,o.t)("Percentile")},value:p,onChange:e=>c(e.value),options:Object.entries(h).map((e=>{let[t,n]=e;return{value:t,label:n.label}}))}),(0,P.tZ)(q.zx,{to:t.getResultsViewUrlTarget(a.slug),onClick:()=>{(0,i.Gi)("performance_views.all_events.open_in_discover",{organization:a})},children:(0,o.t)("Open in Discover")})]})}I.displayName="EventsContent",H.displayName="Search";const K=(0,b.Z)("div",{target:"erzg08z1"})("display:grid;gap:",(0,k.D)(2),";margin-bottom:",(0,k.D)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(4, min-content);}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:auto auto 1fr auto auto;}"),R=(0,b.Z)(S.Z,{target:"erzg08z0"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/6;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),L=I;function W(e){const{location:t,organization:n,projects:r}=e;return(0,P.tZ)(v.ZP,{location:t,organization:n,projects:r,tab:w.Z.EVENTS,getDocumentTitle:A,generateEventView:X,childComponent:$})}function $(e){const{location:t,organization:n,eventView:o,transactionName:p,setError:c,projectId:u,projects:m}=e,y=(0,D.tb)(t),g=(0,f.q0)(t),v=G(t),w=(0,D.Lc)(o),b=e=>{(0,i.Gi)("performance_views.transactionEvents.ops_filter_dropdown.selection",{organization:n,action:e});const a=(0,D._S)(g)[y].sort,s=o?.sorts?.[0];let l={};a?.kind===s?.kind&&a?.field===s?.field&&(l=(0,D.qg)(y,e));const p={...(0,d.V)(t,[x.Oo,x.mo]),...(0,f.bz)(e),...l};e===f.f1.NONE&&delete p.breakdown,r.browserHistory.push({pathname:t.pathname,query:p})},Z=e=>{(0,i.Gi)("performance_views.transactionEvents.display_filter_dropdown.selection",{organization:n,action:e});const a={...(0,d.V)(t,[x.Oo,x.mo]),...(0,D.qg)(e,g)};e===D.q3.P100&&delete a.showTransaction,r.browserHistory.push({pathname:t.pathname,query:a})};return(0,P.tZ)(l.Z,{eventView:w,orgSlug:n.slug,location:t,referrer:"api.performance.transaction-events",children:e=>{let{isLoading:r,tableData:i}=e;if(r)return(0,P.tZ)(a.or,{fullWidth:!0,children:(0,P.tZ)(s.Z,{})});const l=i?.data?.[0],d=(0,D.Kc)(l),f=(e=>{const t=(0,D._S)(g,e)[y],n=o?.clone();if(n&&t?.query){const e=new h.MY(n.query);t.query.forEach((t=>e.setFilterValues(t[0],[t[1]]))),n.query=e.formatString()}return n})(d);return(0,P.tZ)(L,{location:t,organization:n,eventView:f,transactionName:p,spanOperationBreakdownFilter:g,onChangeSpanOperationBreakdownFilter:b,eventsDisplayFilterName:y,onChangeEventsDisplayFilter:Z,percentileValues:d,projectId:u,projects:m,webVital:v,setError:c})}})}function A(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,o.t)("Events")].join(" — "):[(0,o.t)("Summary"),(0,o.t)("Events")].join(" — ")}function G(e){const t=(0,m.ro)(e.query.webVital,"");if(Object.values(u.Zl).includes(t))return t}function X(e){let{location:t,transactionName:n}=e;const r=(0,m.ro)(t.query.query,""),a=new h.MY(r);a.setFilterValues("event.type",["transaction"]),a.setFilterValues("transaction",[n]),Object.keys(a.filters).forEach((e=>{(0,c.h1)(e)&&a.removeFilter(e)}));const s=["id","user.display",c.zD,"transaction.duration","trace","timestamp"],o=(0,f.q0)(t);o!==f.f1.NONE?s.splice(2,1,`spans.${o}`):s.push(...c.$4);const i=G(t);return i&&s.splice(3,0,i),p.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:s,query:a.formatString(),projects:[],orderby:(0,m.ro)(t.query.sort,"-timestamp")},t)}W.displayName="TransactionEvents",$.displayName="EventsContentWrapper";const M=(0,g.Z)((0,y.Z)(W))}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionEvents_index_tsx.191d6514af1e8e7124e95e52856ecef9.js.map