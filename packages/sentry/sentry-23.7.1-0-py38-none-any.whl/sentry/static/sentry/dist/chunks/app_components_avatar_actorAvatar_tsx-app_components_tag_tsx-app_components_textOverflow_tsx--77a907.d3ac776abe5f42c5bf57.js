"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx--77a907"],{"./app/actionCreators/teams.tsx":(e,t,s)=>{s.d(t,{Cm:()=>u,PX:()=>i,s:()=>d,tT:()=>m,um:()=>c,z_:()=>l});var o=s("./app/actionCreators/indicator.tsx"),r=s("./app/locale.tsx"),n=s("./app/stores/teamStore.tsx");const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var s=arguments.length,o=new Array(s>2?s-2:0),r=2;r<s;r++)o[r-2]=arguments[r];return e[t]?.(...o)};async function i(e,t){const s=await e.requestPromise(`/organizations/${t.orgId}/user-teams/`);n.Z.loadUserTeams(s)}function l(e,t){n.Z.onUpdateSuccess(e,t)}function c(e,t,s){const o=`/organizations/${t.orgId}/members/${t.memberId??"me"}/teams/${t.teamId}/`;return e.request(o,{method:"POST",success:e=>{n.Z.onUpdateSuccess(t.teamId,e),a(s,"success",e)},error:e=>{a(s,"error",e)}})}function d(e,t,s){const o=`/organizations/${t.orgId}/members/${t.memberId||"me"}/teams/${t.teamId}/`;return e.request(o,{method:"DELETE",success:e=>{n.Z.onUpdateSuccess(t.teamId,e),a(s,"success",e)},error:e=>{a(s,"error",e)}})}function u(e,t,s){return e.requestPromise(`/organizations/${s.orgId}/teams/`,{method:"POST",data:t}).then((e=>(n.Z.onCreateSuccess(e),(0,o.S9)((0,r._N)("[team] has been added to the [organization] organization",{team:`#${e.slug}`,organization:s.orgId})),e)),(e=>{throw(0,o.Iw)((0,r._N)("Unable to create [team] in the [organization] organization",{team:`#${t.slug}`,organization:s.orgId})),e}))}function m(e,t){return e.requestPromise(`/teams/${t.orgId}/${t.teamId}/`,{method:"DELETE"}).then((e=>(n.Z.onRemoveSuccess(t.teamId),(0,o.S9)((0,r._N)("[team] has been removed from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e)),(e=>{throw(0,o.Iw)((0,r._N)("Unable to remove [team] from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e}))}},"./app/components/avatar/actorAvatar.tsx":(e,t,s)=>{s.d(t,{Z:()=>d}),s("../node_modules/core-js/modules/es.error.cause.js");var o=s("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),r=s("./app/components/avatar/teamAvatar.tsx"),n=s("./app/components/avatar/userAvatar.tsx"),a=s("./app/components/loadingIndicator.tsx"),i=s("./app/stores/memberListStore.tsx"),l=s("./app/utils/teams.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=function(e){let{size:t=24,hasTooltip:s=!0,actor:d,...u}=e;const m={size:t,hasTooltip:s,...u};if("user"===d.type){const e=d.id?i.Z.getById(d.id)??d:d;return(0,c.tZ)(n.Z,{user:e,...m})}return"team"===d.type?(0,c.tZ)(l.Z,{ids:[d.id],children:e=>{let{initiallyLoaded:t,teams:s}=e;return t?(0,c.tZ)(r.Z,{team:s[0],...m}):(0,c.tZ)(a.Z,{mini:!0})}}):(o.$e((e=>{e.setExtra("actor",d),o.Tb(new Error("Unknown avatar type"))})),null)}},"./app/components/tag.tsx":(e,t,s)=>{s.d(t,{A:()=>y,Z:()=>S});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("./app/components/button.tsx"),a=s("./app/components/links/externalLink.tsx"),i=s("./app/components/links/link.tsx"),l=s("./app/components/tooltip.tsx"),c=s("./app/icons/index.tsx"),d=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),m=s("./app/utils.tsx"),p=s("./app/utils/analytics.tsx"),h=s("./app/utils/theme.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const x="20px";function f(e){let{type:t="default",icon:s,tooltipText:o,tooltipProps:n,to:u,onClick:x,href:f,onDismiss:S,children:M,textMaxWidth:C=150,...z}=e;const _={size:"xs",color:h.ZP.tag[t].iconColor},j=(0,g.tZ)(l.u,{title:o,containerDisplayMode:"inline-flex",...n,children:(0,g.BX)(y,{type:t,children:[(0,r.isValidElement)(s)?(0,g.tZ)(b,{children:(0,r.cloneElement)(s,{..._})}):((0,m.ri)(f)||(0,m.ri)(u))&&void 0===s?(0,g.tZ)(b,{children:(0,g.tZ)(c.V$,{..._})}):null,(0,g.tZ)(v,{type:t,maxWidth:C,children:M}),(0,m.ri)(S)&&(0,g.tZ)(w,{onClick:function(e){e.preventDefault(),S?.()},size:"zero",priority:"link","aria-label":(0,d.t)("Dismiss"),icon:(0,g.tZ)(c.bM,{isCircled:!0,..._})})]})});return(0,g.tZ)(Z,{...z,onClick:()=>{(0,p.Gi)("tag.clicked",{is_clickable:(0,m.ri)(x)||(0,m.ri)(u)||(0,m.ri)(f),organization:null})},children:(0,m.ri)(f)?(0,g.tZ)(a.Z,{href:f,children:j}):(0,m.ri)(u)&&(0,m.ri)(x)?(0,g.tZ)(i.Z,{to:u,onClick:x,children:j}):(0,m.ri)(u)?(0,g.tZ)(i.Z,{to:u,children:j}):j})}f.displayName="Tag";const Z=(0,o.Z)("span",{target:"ecaysl4"})("font-size:",(e=>e.theme.fontSizeSmall),";"),y=(0,o.Z)("div",{target:"ecaysl3"})("display:inline-flex;align-items:center;height:",x,";border-radius:",x,";background-color:",(e=>e.theme.tag[e.type].background),";border:solid 1px ",(e=>e.theme.tag[e.type].border),";padding:0 ",(0,u.D)(1),";"),b=(0,o.Z)("span",{target:"ecaysl2"})("margin-right:",(0,u.D)(.5),";display:inline-flex;"),v=(0,o.Z)("span",{target:"ecaysl1"})("color:",(e=>["black","white"].includes(e.type)?e.theme.tag[e.type].iconColor:e.theme.textColor),";max-width:",(e=>e.maxWidth),"px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:",x,";"),w=(0,o.Z)(n.zx,{target:"ecaysl0"})("margin-left:",(0,u.D)(.5),";margin-right:-",(0,u.D)(.5),";border:none;"),S=f},"./app/components/textOverflow.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,o.Z)((e=>{let{children:t,className:s,ellipsisDirection:o,isParagraph:n,"data-test-id":a}=e;const i=n?"p":"div";return"left"===o?(0,r.tZ)(i,{className:s,"data-test-id":a,children:(0,r.tZ)("bdi",{children:t})}):(0,r.tZ)(i,{className:s,"data-test-id":a,children:t})}),{target:"e1lyrgnz0"})((e=>e.theme.overflowEllipsis)," ",(e=>"left"===e.ellipsisDirection&&"\n      direction: rtl;\n      text-align: left;\n    "),";width:auto;line-height:1.2;");n.defaultProps={ellipsisDirection:"right",isParagraph:!1};const a=n},"./app/components/timeSince.tsx":(e,t,s)=>{s.d(t,{Z:()=>Z});var o=s("../node_modules/react/index.js"),r=s("../node_modules/lodash/isNumber.js"),n=s.n(r),a=s("../node_modules/lodash/isString.js"),i=s.n(a),l=s("../node_modules/moment-timezone/index.js"),c=s.n(l),d=s("./app/components/tooltip.tsx"),u=s("./app/locale.tsx"),m=s("./app/stores/configStore.tsx"),p=s("./app/utils/formatters.tsx"),h=s("./app/utils/getDynamicText.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e){return i()(e)||n()(e)?new Date(e):e}function f(e){let{date:t,disabledAbsoluteTooltip:s,tooltipShowSeconds:r,tooltipPrefix:n,tooltipBody:a,tooltipSuffix:i,tooltipUnderlineColor:l,unitStyle:f,prefix:Z=(0,u.t)("in"),suffix:y=(0,u.t)("ago"),liveUpdateInterval:b="minute",...v}=e;const w=(0,o.useRef)(),S=(0,o.useCallback)((()=>function(e,t,s){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"human";const r=c()(x(e)),n=r.isAfter(c()());let a="";return a="human"===o?r.fromNow(!0):(0,p.g9)(c()().diff(r,"seconds"),0,"short"===o,"extraShort"===o,n),t||s?n?`${s} ${a}`:`${a} ${t}`:a}(t,y,Z,f)),[t,y,Z,f]),[M,C]=(0,o.useState)(S());(0,o.useEffect)((()=>{C(S());const e="minute"===b?6e4:"second"===b?1e3:b;return w.current=window.setInterval((()=>C(S())),e),()=>window.clearInterval(w.current)}),[b,S]);const z=x(t),_=m.Z.get("user"),j=_?_.options:null,k=r?"MMM D, YYYY h:mm:ss A z":"MMMM D, YYYY h:mm A z",I=j?.clock24Hours?"MMMM D, YYYY HH:mm z":k,$=(0,h.Z)({fixed:j?.clock24Hours?"November 3, 2020 08:57 UTC":"November 3, 2020 8:58 AM UTC",value:c().tz(z,j?.timezone??"").format(I)});return(0,g.tZ)(d.u,{disabled:s,underlineColor:l,showUnderline:!0,title:(0,g.BX)(o.Fragment,{children:[n&&(0,g.tZ)("div",{children:n}),a??$,i&&(0,g.tZ)("div",{children:i})]}),children:(0,g.tZ)("time",{dateTime:z?.toISOString(),...v,children:M})})}f.displayName="TimeSince";const Z=f},"./app/stores/memberListStore.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const o={state:{members:[],loading:!0,hasMore:null,cursor:null},init(){this.reset()},reset(){this.state={members:[],loading:!0,hasMore:null,cursor:null}},loadInitialData(e,t,s){this.state={members:e,loading:!1,hasMore:t??this.state.hasMore,cursor:s??this.state.cursor},this.trigger(this.state,"initial")},getById(e){return this.state.members.find((t=>{let{id:s}=t;return e===s}))},getAll(){return this.state.members},getState(){return this.state}},r=(0,s("../node_modules/reflux/src/index.js").createStore)(o)},"./app/utils/isActiveSuperuser.tsx":(e,t,s)=>{s.d(t,{M:()=>i});var o=s("../node_modules/js-cookie/dist/js.cookie.mjs"),r=s("./app/stores/configStore.tsx");const n=window.superUserCookieName??"su",a=window.superUserCookieDomain;function i(){const{isSuperuser:e}=r.Z.get("user")||{};if(e){const e=r.Z.get("superUserCookieName")||n,t=r.Z.get("superUserCookieDomain")||a;if(o.Z.set(e,"set-in-isActiveSuperuser",{domain:t}),void 0===o.Z.get(e))return!0}return!1}},"./app/utils/teams.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("../node_modules/react/index.js"),r=s("./app/utils/useTeams.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{children:t,...s}=e;const a=(0,r.y)(s);return(0,n.tZ)(o.Fragment,{children:t(a)})}a.displayName="Teams";const i=a},"./app/utils/useTeams.tsx":(e,t,s)=>{s.d(t,{y:()=>h});var o=s("../node_modules/react/index.js"),r=s("../node_modules/lodash/uniqBy.js"),n=s.n(r),a=s("./app/actionCreators/teams.tsx"),i=s("./app/stores/organizationStore.tsx"),l=s("./app/stores/teamStore.tsx"),c=s("./app/stores/useLegacyStore.tsx"),d=s("./app/utils/isActiveSuperuser.tsx"),u=s("./app/utils/parseLinkHeader.tsx"),m=s("./app/utils/useApi.tsx");async function p(e,t){let{slugs:s,ids:o,search:r,limit:n,lastSearch:a,cursor:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l={};void 0!==s&&s.length>0&&(l.query=s.map((e=>`slug:${e}`)).join(" ")),void 0!==o&&o.length>0&&(l.query=o.map((e=>`id:${e}`)).join(" ")),r&&(l.query=`${l.query??""} ${r}`.trim()),(a===r||!a&&!r)&&i&&(l.cursor=i),void 0!==n&&(l.per_page=n);let c=!1,d=null;const[m,,p]=await e.requestPromise(`/organizations/${t}/teams/`,{includeAllArgs:!0,query:l}),h=p?.getResponseHeader("Link");if(h){const e=(0,u.Z)(h);c=e?.next?.results,d=e?.next?.cursor}return{results:m,hasMore:c,nextCursor:d}}function h(){let{limit:e,slugs:t,ids:s,provideUserTeams:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u=(0,m.Z)(),{organization:h}=(0,c.X)(i.Z),g=(0,c.X)(l.Z),x=h?.slug,f=(0,o.useMemo)((()=>new Set(g.teams.map((e=>e.slug)))),[g.teams]),Z=(0,o.useMemo)((()=>new Set(g.teams.map((e=>e.id)))),[g.teams]),y=(0,o.useMemo)((()=>t?.filter((e=>!f.has(e)))??[]),[t,f]),b=(0,o.useMemo)((()=>s?.filter((e=>!Z.has(e)))??[]),[s,Z]),v=y.length>0||b.length>0,w=r&&!g.loadedUserTeams,S=!w&&!v,[M,C]=(0,o.useState)({initiallyLoaded:S,fetching:!1,hasMore:g.hasMore,lastSearch:null,nextCursor:g.cursor,fetchError:null}),z=(0,o.useCallback)((async function(){if(void 0!==x){C((e=>({...e,fetching:!0})));try{await(0,a.PX)(u,{orgId:x}),C((e=>({...e,fetching:!1,initiallyLoaded:!0})))}catch(e){console.error(e),C((t=>({...t,fetching:!1,initiallyLoaded:!0,fetchError:e})))}}}),[u,x]),_=(0,o.useCallback)((async function(){if(void 0!==x){C((e=>({...e,fetching:!0})));try{const{results:t,hasMore:s,nextCursor:o}=await p(u,x,{slugs:y,ids:b,limit:e}),r=n()([...t,...g.teams],(e=>{let{id:t}=e;return t}));l.Z.loadInitialData(r),C((e=>({...e,hasMore:s,fetching:!1,initiallyLoaded:!0,nextCursor:o})))}catch(e){console.error(e),C((t=>({...t,fetching:!1,initiallyLoaded:!0,fetchError:e})))}}}),[u,b,e,x,y,g.teams]),j=(0,o.useCallback)((async function(t){const s=M.lastSearch,o=t?M.nextCursor:g.cursor;if(void 0!==x){C((e=>({...e,fetching:!0})));try{u.clear();const{results:r,hasMore:a,nextCursor:i}=await p(u,x,{search:t,limit:e,lastSearch:s,cursor:o}),c=n()([...g.teams,...r],(e=>{let{slug:t}=e;return t}));t?c.length>g.teams.length&&l.Z.loadInitialData(c):l.Z.loadInitialData(c,a,i),C((e=>({...e,hasMore:a&&g.hasMore,fetching:!1,lastSearch:t??null,nextCursor:i})))}catch(e){console.error(e),C((t=>({...t,fetching:!1,fetchError:e})))}}else console.error("Cannot fetch teams without an organization in context")}),[u,e,x,M.lastSearch,M.nextCursor,g.cursor,g.hasMore,g.teams]),k=(0,o.useCallback)((function(e){return""!==e?j(e):(M.hasMore===g.hasMore&&M.nextCursor===g.cursor||C((t=>({...t,lastSearch:e,hasMore:g.hasMore,nextCursor:g.cursor}))),Promise.resolve())}),[j,M.hasMore,M.nextCursor,g.cursor,g.hasMore]);(0,o.useEffect)((()=>{v&&_()}),[v,_]),(0,o.useEffect)((()=>{w&&z()}),[w,z]);const I=(0,d.M)();return{teams:(0,o.useMemo)((()=>t?g.teams.filter((e=>t.includes(e.slug))):s?g.teams.filter((e=>s.includes(e.id))):r&&!I?g.teams.filter((e=>e.isMember)):g.teams),[g.teams,s,t,r,I]),fetching:M.fetching||g.loading,initiallyLoaded:M.initiallyLoaded,fetchError:M.fetchError,hasMore:M.hasMore??g.hasMore,onSearch:k,loadMore:j}}}}]);
//# sourceMappingURL=../sourcemaps/app_components_avatar_actorAvatar_tsx-app_components_tag_tsx-app_components_textOverflow_tsx--77a907.cb74a80dfecdf6be156c7923beb1c62f.js.map