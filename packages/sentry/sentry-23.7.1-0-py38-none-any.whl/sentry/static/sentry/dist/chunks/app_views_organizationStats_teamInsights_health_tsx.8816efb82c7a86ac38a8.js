(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationStats_teamInsights_health_tsx"],{"./app/utils/discover/discoverQuery.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>l,_:()=>o});var s=r("./app/utils/discover/genericDiscoverQuery.tsx"),n=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function i(e){return(0,n.tZ)(s.ZP,{route:"events",shouldRefetchData:a,afterFetch:(e,t)=>{const{fields:r,...s}=e.meta??{};return{...e,meta:{...r,...s}}},...e})}function o(e){const t=(0,s.JC)({route:"events",shouldRefetchData:a,afterFetch:(e,t)=>{const{fields:r,...s}=e.meta??{};return{...e,meta:{...r,...s}}},...e}),r=t.response?.getResponseHeader("Link")??void 0;return{...t,pageLinks:r}}i.displayName="DiscoverQuery";const l=i},"./app/utils/sessions.tsx":(e,t,r)=>{"use strict";r.d(t,{BN:()=>Z,FS:()=>x,Lv:()=>E,Pn:()=>y,SU:()=>f,U5:()=>R,VH:()=>m,Xz:()=>w,Y5:()=>S,hD:()=>b,iy:()=>A,sA:()=>g,wt:()=>v}),r("../node_modules/core-js/modules/es.array.push.js");var s=r("../node_modules/lodash/compact.js"),n=r.n(s),a=r("../node_modules/lodash/mean.js"),i=r.n(a),o=r("../node_modules/moment/moment.js"),l=r.n(o),d=r("./app/components/charts/utils.tsx"),c=r("./app/types/index.tsx"),u=r("./app/utils.tsx"),h=r("./app/views/releases/utils/index.tsx"),p=r("./app/views/releases/utils/sessionTerm.tsx");const m=10;function g(){let e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((t,r)=>t+r.totals[e]),0)}function f(){let e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((r,s)=>r+s.series[e][t]),0)}function y(){const e=Z(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1?arguments[1]:void 0,c.$y.CRASHED);return(0,u.ri)(e)?(0,h.Mf)(100-e):null}function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const r=Array((arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).length).fill(0);return e.map((e=>e.series[t])).forEach((e=>{e.forEach(((e,t)=>r[t]+=e))})),r}function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;const s=g(e,t),n=g(e.filter((e=>{let{by:t}=e;return t["session.status"]===r})),t);return(0,u.ri)(s)&&0!==s?(0,u.aQ)(n??0,s??0):null}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return n()(t.map(((t,s)=>{const n=e.reduce(((e,t)=>e+(t.series[r]?.[s]??0)),0),a=e.find((e=>e.by["session.status"]===c.$y.CRASHED))?.series[r]?.[s]??0,i=(0,u.aQ)(a,n);return 0===n?null:{name:t,value:(0,h.Mf)(100-i)}})))}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return n()(t.map(((t,n)=>{const a=e.reduce(((e,t)=>e+t.series[r][n]),0),i=e.find((e=>e.by["session.status"]===s))?.series[r][n]??0,o=(0,u.aQ)(i,a);return 0===a?null:{name:t,value:(0,h.r)(o)}})))}function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>3?arguments[3]:void 0;return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).map(((s,n)=>{const a=e.reduce(((e,t)=>e+(t.series[r]?.[n]??0)),0),i=t.reduce(((e,t)=>e+(t.series[r]?.[n]??0)),0),o=(0,u.aQ)(a,i);return{name:s,value:Math.round(o)}}))}function A(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).map(((r,s)=>({name:r,value:t?.series[e][s]??0})))}function E(e){const t=e.charts.getColorPalette(14);return{[c.$y.HEALTHY]:{seriesName:p.U1.healthy,data:[],color:e.green300,areaStyle:{color:e.green300,opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.ERRORED]:{seriesName:p.U1.errored,data:[],color:t[12],areaStyle:{color:t[12],opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.ABNORMAL]:{seriesName:p.U1.abnormal,data:[],color:t[15],areaStyle:{color:t[15],opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.CRASHED]:{seriesName:p.U1.crashed,data:[],color:e.red300,areaStyle:{color:e.red300,opacity:1},lineStyle:{opacity:0,width:.4}}}}function w(e){let{highFidelity:t,dailyInterval:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(0,d.Nm)(e);return l()(e.start).isSameOrBefore(l()().subtract(30,"days"))&&(t=!1),!0===r&&s>d.w3||s>=d.Zn?"1d":s>=d.B8?"4h":s>=d.aC?"1h":t?s<=m?"10s":s<=30?"1m":"5m":"1h"}function R(e,t,r){if(!t||!r)return e;const s=[],n=e.intervals.filter(((e,n)=>{const a=l().utc(e).isBetween(l().utc(t),l().utc(r),void 0,"[]");return a&&s.push(n),a})),a=e.groups.map((e=>{const t={},r={};return Object.keys(e.series).forEach((n=>{r[n]=0,t[n]=e.series[n].filter(((e,t)=>{const a=s.includes(t);return a&&(r[n]=(r[n]??0)+e),a})),n.startsWith("p50")&&(r[n]=i()(t[n])),n.startsWith("count_unique")&&(r[n]=e.totals[n])})),{...e,series:t,totals:r}}));return{start:n[0],end:n[n.length-1],query:e.query,intervals:n,groups:a}}},"./app/views/organizationStats/teamInsights/health.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_e});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("../node_modules/react/index.js"),a=r("./app/components/layouts/thirds.tsx"),i=r("./app/components/loadingIndicator.tsx"),o=r("./app/components/noProjectMessage.tsx"),l=r("./app/components/sentryDocumentTitle.tsx"),d=r("./app/locale.tsx"),c=r("./app/utils/localStorage.tsx"),u=r("./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx"),h=r("./app/utils/useOrganization.tsx"),p=r("./app/utils/useTeams.tsx"),m=r("./app/views/organizationStats/header.tsx"),g=r("./app/views/organizationStats/teamInsights/controls.tsx"),f=r("./app/views/organizationStats/teamInsights/descriptionCard.tsx"),y=r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),v=r("../node_modules/lodash/round.js"),Z=r.n(v),x=r("./app/components/button.tsx"),S=r("./app/components/charts/barChart.tsx"),b=r("./app/components/links/link.tsx"),A=r("./app/components/loadingError.tsx"),E=r("./app/components/organizations/pageFilters/parse.tsx"),w=r("./app/components/panels/panelTable.tsx"),R=r("./app/icons/index.tsx"),N=r("./app/styles/space.tsx"),D=r("./app/utils/formatters.tsx"),j=r("./app/utils/queryClient.tsx"),T=r("./app/views/organizationStats/teamInsights/styles.tsx"),_=r("./app/views/organizationStats/teamInsights/utils.tsx"),z=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function C(e){let{organization:t,projects:r,teamSlug:s,start:a,end:o,period:l,utc:c}=e;const u={start:a,end:o,period:l,utc:c},{data:h,isLoading:p,isError:m,refetch:g}=(0,j.WE)([`/teams/${t.slug}/${s}/alerts-triggered/`,{query:{...(0,E.fK)(u)}}],{staleTime:5e3}),{data:f,isLoading:y,isError:v,refetch:w}=(0,j.WE)([`/teams/${t.slug}/${s}/alerts-triggered-index/`,{query:{...(0,E.fK)(u)}}],{staleTime:5e3});if(p||y)return(0,z.tZ)(H,{children:(0,z.tZ)(i.Z,{})});if(m||v)return(0,z.tZ)(A.Z,{onRetry:()=>{g(),w()}});function R(e){const{weeklyAvg:t,totalThisWeek:r}=e,s=r-t;return 0===t?"—":(0,z.BX)(I,{color:s<=0?"successText":"errorText",children:[(0,D.rl)(Math.abs(s/t),0),(0,z.tZ)(B,{direction:s<=0?"down":"up",size:"xs"})]})}const N=(0,_.Gs)((0,_.E7)(h??{}));return(0,z.BX)(n.Fragment,{children:[(0,z.tZ)(H,{children:(0,z.tZ)(S.v,{style:{height:190},isGroupedByDate:!0,useShortDate:!0,period:"7d",legend:{right:0,top:0},yAxis:{minInterval:1},xAxis:(0,_.tP)(),series:[{seriesName:(0,d.t)("Alerts Triggered"),data:N,silent:!0,barCategoryGap:"5%"}]})}),(0,z.tZ)(M,{isEmpty:!h||!f||0===f?.length,emptyMessage:(0,d.t)("No alerts triggered for team’s projects"),emptyAction:(0,z.BX)($,{children:[(0,z.tZ)(x.zx,{priority:"primary",size:"sm",to:`/organizations/${t.slug}/alerts/rules/`,children:(0,d.t)("Create Alert")}),(0,z.tZ)(x.zx,{size:"sm",external:!0,to:"https://docs.sentry.io/product/alerts/create-alerts/",children:(0,d.t)("Learn more")})]}),headers:[(0,d.t)("Alert Rule"),(0,d.t)("Project"),(0,z.tZ)(k,{children:(0,d._N)("Last [period] Average",{period:l})},"last"),(0,z.tZ)(k,{children:(0,d.t)("This Week")},"curr"),(0,z.tZ)(k,{children:(0,d.t)("Difference")},"diff")],children:f?.map((e=>{const s=r.find((t=>t.slug===e.projects[0]));return(0,z.BX)(n.Fragment,{children:[(0,z.tZ)(O,{children:(0,z.tZ)(b.Z,{to:`/organizations/${t.slug}/alerts/rules/details/${e.id}/`,children:e.name})}),(0,z.tZ)(T.R,{children:s&&(0,z.tZ)(T.W,{avatarSize:18,project:s})}),(0,z.tZ)(k,{children:Z()(e.weeklyAvg,2)}),(0,z.tZ)(k,{children:e.totalThisWeek}),(0,z.tZ)(k,{children:R(e)})]},e.id)}))})]})}C.displayName="TeamAlertsTriggered";const L=C,H=(0,s.Z)("div",{target:"e1hbez306"})("padding:",(0,N.D)(2)," ",(0,N.D)(2)," 0 ",(0,N.D)(2),";border-bottom:1px solid ",(e=>e.theme.border),";"),M=(0,s.Z)(w.Z,{target:"e1hbez305"})("grid-template-columns:1fr 0.5fr 0.2fr 0.2fr 0.2fr;font-size:",(e=>e.theme.fontSizeMedium),";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;&>div{padding:",(0,N.D)(1)," ",(0,N.D)(2),";}",(e=>e.isEmpty&&(0,y.iv)("&>div:last-child{padding:48px ",(0,N.D)(2),";}","")),";"),O=(0,s.Z)("div",{target:"e1hbez304"})((e=>e.theme.overflowEllipsis),";"),k=(0,s.Z)("div",{target:"e1hbez303"})({name:"mnwtso",styles:"text-align:right;font-variant-numeric:tabular-nums"}),B=(0,s.Z)(R.CC,{target:"e1hbez302"})("margin:0 ",(0,N.D)(.5),";"),I=(0,s.Z)("div",{target:"e1hbez301"})("color:",(e=>e.theme[e.color]),";"),$=(0,s.Z)("div",{target:"e1hbez300"})("&>a{margin-right:",(0,N.D)(.5),";margin-left:",(0,N.D)(.5),";}");var F=r("./app/components/collapsePanel.tsx"),P=r("./app/utils/discover/discoverQuery.tsx"),q=r("./app/utils/discover/eventView.tsx"),U=r("./app/utils/discover/fieldRenderers.tsx"),W=r("./app/views/performance/transactionSummary/utils.tsx");function X(e){let{organization:t,location:r,projects:s,periodTableData:a,weekTableData:i,isLoading:o,period:l,error:c}=e;const u=a?.meta&&(0,U.Js)("user_misery()",a.meta,!1),h=(a?.data??[]).map((e=>{const t=i?.data.find((t=>t.project===e.project&&t.transaction===e.transaction)),r=t?100*(e["user_misery()"]-t["user_misery()"]):null;return{...e,trend:r}})).filter((e=>null!==e.trend)).sort(((e,t)=>Math.abs(t.trend)-Math.abs(e.trend))),p=(0,_.NW)(h);return c?(0,z.tZ)(A.Z,{}):(0,z.tZ)(F.Z,{items:p.length,children:e=>{let{isExpanded:c,showMoreButton:h}=e;return(0,z.BX)(n.Fragment,{children:[(0,z.tZ)(Q,{isEmpty:0===s.length||0===a?.data?.length,emptyMessage:(0,d.t)("No key transactions starred by this team"),emptyAction:(0,z.tZ)(x.zx,{size:"sm",external:!0,href:"https://docs.sentry.io/product/performance/transaction-summary/#starring-key-transactions",children:(0,d.t)("Learn More")}),headers:[(0,z.BX)(K,{children:[(0,z.tZ)(J,{isSolid:!0,color:"yellow400"})," ",(0,d.t)("Key transaction")]},"transaction"),(0,d.t)("Project"),(0,d._N)("Last [period]",{period:l}),(0,d.t)("Last 7 Days"),(0,z.tZ)(te,{children:(0,d.t)("Change")},"change")],isLoading:o,children:p.map(((e,a)=>{const o=s.find((t=>{let{slug:r}=t;return e.project===r})),{trend:l,project:h,transaction:p}=e,m=i?.data.find((e=>e.project===h&&e.transaction===p));if(!m||null===l)return null;const g=u?.(e,{organization:t,location:r}),f=m&&u?.(m,{organization:t,location:r}),y=Math.round(Math.abs(l));return a>=F.$&&!c?null:(0,z.BX)(n.Fragment,{children:[(0,z.BX)(V,{children:[(0,z.tZ)("div",{children:(0,z.tZ)(J,{isSolid:!0,color:"yellow400"})}),(0,z.tZ)(ee,{children:(0,z.tZ)(b.Z,{to:(0,W.e1)({orgSlug:t.slug,transaction:e.transaction,projectID:o?.id,query:{query:"transaction.duration:<15m"}}),children:e.transaction})})]}),(0,z.tZ)(K,{children:(0,z.tZ)(T.R,{children:o&&(0,z.tZ)(T.W,{avatarSize:18,project:o})})}),(0,z.tZ)(K,{children:g}),(0,z.tZ)(K,{children:f??"—"}),(0,z.tZ)(re,{children:0===y?(0,z.BX)(se,{children:["0% ",(0,d.t)("change")]}):(0,z.BX)(ne,{color:l>=0?"successText":"errorText",children:[`${y}% `,l>=0?(0,d.t)("better"):(0,d.t)("worse")]})})]},a)}))}),!o&&h]})}})}function G(e){let{organization:t,teamId:r,projects:s,location:n,period:a,start:i,end:o}=e;if(0===s.length)return(0,z.tZ)(X,{isLoading:!1,organization:t,location:n,projects:[],period:a,periodTableData:{data:[]},weekTableData:{data:[]}});const l={id:void 0,query:"transaction.duration:<15m team_key_transaction:true",projects:[],version:2,orderby:"-tpm",teams:[Number(r)],fields:["transaction","project","tpm()","count_unique(user)","count_miserable(user)","user_misery()"]},d=q.ZP.fromSavedQuery({...l,name:"periodMisery",range:a??void 0,start:i,end:o}),c=q.ZP.fromSavedQuery({...l,name:"weekMisery",range:"7d"});return(0,z.tZ)(P.Z,{eventView:d,orgSlug:t.slug,location:n,children:e=>{let{isLoading:r,tableData:i,error:o}=e;return(0,z.tZ)(P.Z,{eventView:c,orgSlug:t.slug,location:n,children:e=>{let{isLoading:l,tableData:d,error:c}=e;return(0,z.tZ)(X,{isLoading:r||l,organization:t,location:n,projects:s,period:a,periodTableData:i,weekTableData:d,error:o??c})}})}})}X.displayName="TeamMisery",G.displayName="TeamMiseryWrapper";const Y=G,Q=(0,s.Z)(w.Z,{target:"e1w8o4d28"})("grid-template-columns:1.25fr 0.5fr 112px 112px 0.25fr;font-size:",(e=>e.theme.fontSizeMedium),";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;&>div{padding:",(0,N.D)(1)," ",(0,N.D)(2),";}",(e=>e.isEmpty&&(0,y.iv)("&>div:last-child{padding:48px ",(0,N.D)(2),";}","")),";"),K=(0,s.Z)("div",{target:"e1w8o4d27"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),V=(0,s.Z)("div",{target:"e1w8o4d26"})((e=>e.theme.overflowEllipsis),";display:flex;align-items:center;"),J=(0,s.Z)(R.GK,{target:"e1w8o4d25"})("display:block;margin-right:",(0,N.D)(1),";margin-bottom:",(0,N.D)(.5),";"),ee=(0,s.Z)("div",{target:"e1w8o4d24"})((e=>e.theme.overflowEllipsis),";"),te=(0,s.Z)("span",{target:"e1w8o4d23"})({name:"2qga7i",styles:"text-align:right"}),re=(0,s.Z)("div",{target:"e1w8o4d22"})({name:"4os8x4",styles:"display:flex;align-items:center;justify-content:flex-end;text-align:right"}),se=(0,s.Z)("div",{target:"e1w8o4d21"})("color:",(e=>e.theme.subText),";"),ne=(0,s.Z)("div",{target:"e1w8o4d20"})("color:",(e=>e.theme[e.color]),";");var ae=r("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),ie=r("../node_modules/moment/moment.js"),oe=r.n(ie),le=r("./app/components/charts/components/markLine.tsx"),de=r("./app/components/placeholder.tsx"),ce=r("./app/utils/toArray.tsx");function ue(e){let{organization:t,projects:r,teamSlug:s,theme:a,start:i,end:o,period:l,utc:c}=e;const u={start:i,end:o,period:l,utc:c},{data:h,isLoading:p,isError:m,refetch:g}=(0,j.WE)([`/teams/${t.slug}/${s}/release-count/`,{query:{...(0,E.fK)(u)}}],{staleTime:5e3}),{data:f,isLoading:y,isError:v,refetch:w}=(0,j.WE)([`/teams/${t.slug}/${s}/release-count/`,{query:{statsPeriod:"7d"}}],{staleTime:5e3}),R=p||y;if(m||v)return(0,z.tZ)(A.Z,{onRetry:()=>{g(),w()}});function N(e,t){const r="week"===t?f?.last_week_totals:h?.project_avgs;return r?.[e]?Math.ceil(r?.[e]):0}function D(e){const t=N(e,"period"),r=N(e,"week");return null===t||null===r?null:r-t}function C(e,t){if(R)return(0,z.tZ)("div",{children:(0,z.tZ)(de.Z,{width:"80px",height:"25px"})});const r=N(Number(e),t);return null===r?"—":r}function L(e){if(R)return(0,z.tZ)("div",{children:(0,z.tZ)(de.Z,{width:"80px",height:"25px"})});const t=D(Number(e));return null===t?"—":(0,z.BX)(ve,{color:t>=0?"successText":"errorText",children:[`${Z()(Math.abs(t),3)}`,(0,z.tZ)(ye,{direction:t>=0?"up":"down",size:"xs"})]})}const H=r.map((e=>({project:e,trend:D(Number(e.id))??0}))).sort(((e,t)=>Math.abs(t.trend)-Math.abs(e.trend))),M=(0,_.NW)(H),O=Object.entries(h?.release_counts??{}).map((e=>{let[t,r]=e;return{value:Math.ceil(r),name:new Date(t).getTime()}})),k=(0,_.Gs)(O),B=Object.values(h?.project_avgs??{}),I=B.reduce(((e,t)=>e+t),0),$=Math.ceil(I/B.length);return(0,z.BX)("div",{children:[(0,z.tZ)(pe,{children:(0,z.tZ)(S.v,{style:{height:190},isGroupedByDate:!0,useShortDate:!0,period:"7d",legend:{right:3,top:0},yAxis:{minInterval:1},xAxis:(0,_.tP)(),series:[{seriesName:(0,d.t)("This Period"),silent:!0,data:k,markLine:(0,le.Z)({silent:!0,lineStyle:{color:a.gray200,type:"dashed",width:1},data:[{yAxis:$}],label:{show:!1}}),barCategoryGap:"5%"}],tooltip:{formatter:e=>{const[t]=(0,ce.Z)(e),r="MMM D",s=oe()(t.data[0]).format(r),n=oe()(t.data[0]).add(7,"days").format(r);return['<div class="tooltip-series">',`<div><span class="tooltip-label">${t.marker} <strong>${t.seriesName}</strong></span> ${t.data[1]}</div>`,`<div><span class="tooltip-label"><strong>Last ${l} Average</strong></span> ${$}</div>`,"</div>",`<div class="tooltip-footer">${s} - ${n}</div>`,'<div class="tooltip-arrow"></div>'].join("")}}})}),(0,z.tZ)(me,{isEmpty:0===r.length,emptyMessage:(0,d.t)("No releases were setup for this team’s projects"),emptyAction:(0,z.tZ)(x.zx,{size:"sm",external:!0,href:"https://docs.sentry.io/product/releases/setup/",children:(0,d.t)("Learn More")}),headers:[(0,d.t)("Releases Per Project"),(0,z.tZ)(ge,{children:(0,d._N)("Last [period] Average",{period:l})},"last"),(0,z.tZ)(ge,{children:(0,d.t)("Last 7 Days")},"curr"),(0,z.tZ)(ge,{children:(0,d.t)("Difference")},"diff")],children:M.map((e=>{let{project:r}=e;return(0,z.BX)(n.Fragment,{children:[(0,z.tZ)(T.R,{children:(0,z.tZ)(T.W,{avatarSize:18,project:r,to:{pathname:`/organizations/${t.slug}/releases/`,query:{project:r.id}}})}),(0,z.tZ)(fe,{children:C(r.id,"period")}),(0,z.tZ)(fe,{children:(0,z.tZ)(b.Z,{to:{pathname:`/organizations/${t.slug}/releases/`,query:{project:r.id,statsPeriod:"7d"}},children:C(r.id,"week")})}),(0,z.tZ)(fe,{children:L(r.id)})]},r.id)}))})]})}ue.displayName="TeamReleases";const he=(0,ae.b)(ue),pe=(0,s.Z)("div",{target:"e1t40s8f5"})("padding:",(0,N.D)(2)," ",(0,N.D)(2)," 0 ",(0,N.D)(2),";border-bottom:1px solid ",(e=>e.theme.border),";"),me=(0,s.Z)(w.Z,{target:"e1t40s8f4"})("grid-template-columns:1fr 0.2fr 0.2fr 0.2fr;white-space:nowrap;margin-bottom:0;border:0;font-size:",(e=>e.theme.fontSizeMedium),";box-shadow:unset;&>div{padding:",(0,N.D)(1)," ",(0,N.D)(2),";}",(e=>e.isEmpty&&(0,y.iv)("&>div:last-child{padding:48px ",(0,N.D)(2),";}","")),";"),ge=(0,s.Z)("span",{target:"e1t40s8f3"})({name:"2qga7i",styles:"text-align:right"}),fe=(0,s.Z)("div",{target:"e1t40s8f2"})({name:"4os8x4",styles:"display:flex;align-items:center;justify-content:flex-end;text-align:right"}),ye=(0,s.Z)(R.CC,{target:"e1t40s8f1"})("margin:0 ",(0,N.D)(.5),";"),ve=(0,s.Z)("div",{target:"e1t40s8f0"})("color:",(e=>e.theme[e.color]),";");var Ze=r("./app/components/charts/miniBarChart.tsx"),xe=r("./app/types/index.tsx"),Se=r("./app/utils/sessions.tsx"),be=r("./app/views/releases/utils/index.tsx");function Ae(e){let{organization:t,projects:r,period:s,start:a,end:i,utc:o}=e;const l={start:a,end:i,period:s,utc:o},c={environment:[],project:r.filter((e=>e.hasSessions)).map((e=>e.id)),field:"sum(session)",groupBy:["session.status","project"],interval:"1d"},{data:u,isLoading:h,isError:p,refetch:m}=(0,j.WE)([`/organizations/${t.slug}/sessions/`,{query:{...c,...(0,E.fK)(l)}}],{staleTime:5e3}),{data:g,isLoading:f,isError:y,refetch:v}=(0,j.WE)([`/organizations/${t.slug}/sessions/`,{query:{...c,statsPeriod:"7d"}}],{staleTime:5e3}),S=h||f;if(p||y)return(0,z.tZ)(A.Z,{onRetry:()=>{m(),v()}});function b(e,t){const r="week"===t?g:u,s=r?.groups.filter((t=>t.by.project===e));return(0,Se.Pn)(s,xe.kI.SESSIONS)}function w(e){const t=b(e,"period"),r=b(e,"week");return null===t||null===r?null:r-t}function R(e,t){const r=(0,Se.wt)(t.groups.filter((t=>t.by.project===Number(e.id))),xe.kI.SESSIONS,t.intervals),s=(0,Se.iy)(xe.kI.SESSIONS,t.groups.find((t=>t.by.project===Number(e.id)&&t.by["session.status"]===xe.$y.HEALTHY)),t.intervals),n=Array(r.length/7).fill(0);s.forEach(((e,t)=>n[Math.floor(t/7)]+=e.value));const a=Array(r.length/7).fill(0);r.forEach(((e,t)=>a[Math.floor(t/7)]+=e));const i=n.map(((e,t)=>({name:s[7*t].name,value:a[t]?(0,D.$1)(e/a[t]*100,2):0})));return[{seriesName:(0,d.t)("Crash Free Sessions"),data:i}]}function N(e,t){if(S)return(0,z.tZ)("div",{children:(0,z.tZ)(de.Z,{width:"80px",height:"25px"})});const r=b(Number(e),t);return null===r?"—":(0,be.zB)(r)}function C(e){if(S)return(0,z.tZ)("div",{children:(0,z.tZ)(de.Z,{width:"80px",height:"25px"})});const t=w(Number(e));return null===t?"—":(0,z.BX)(je,{color:t>=0?"successText":"errorText",children:[`${Z()(Math.abs(t),3)}%`,(0,z.tZ)(De,{direction:t>=0?"up":"down",size:"xs"})]})}const L=r.map((e=>({project:e,trend:w(Number(e.id))??0}))).sort(((e,t)=>Math.abs(t.trend)-Math.abs(e.trend))),H=(0,_.NW)(L);return(0,z.tZ)(we,{isEmpty:0===r.length,emptyMessage:(0,d.t)("No projects with release health enabled"),emptyAction:(0,z.tZ)(x.zx,{size:"sm",external:!0,href:"https://docs.sentry.io/platforms/dotnet/guides/nlog/configuration/releases/#release-health",children:(0,d.t)("Learn More")}),headers:[(0,d.t)("Project"),(0,z.tZ)(Re,{children:(0,d._N)("Last [period]",{period:s})},"last"),(0,z.tZ)(Re,{children:(0,d._N)("[period] Avg",{period:s})},"avg"),(0,z.tZ)(Re,{children:(0,d.t)("Last 7 Days")},"curr"),(0,z.tZ)(Re,{children:(0,d.t)("Difference")},"diff")],children:H.map((e=>{let{project:t}=e;return(0,z.BX)(n.Fragment,{children:[(0,z.tZ)(T.R,{children:(0,z.tZ)(T.W,{avatarSize:18,project:t})}),(0,z.tZ)("div",{children:u&&g&&!S&&(0,z.tZ)(Ze.Z,{isGroupedByDate:!0,showTimeInTooltip:!0,series:R(t,u),height:25,tooltipFormatter:e=>`${e.toLocaleString()}%`})}),(0,z.tZ)(Ne,{children:N(t.id,"period")}),(0,z.tZ)(Ne,{children:N(t.id,"week")}),(0,z.tZ)(Ne,{children:C(t.id)})]},t.id)}))})}Ae.displayName="TeamStability";const Ee=Ae,we=(0,s.Z)(w.Z,{target:"e5ryftz4"})("grid-template-columns:1fr 0.2fr 0.2fr 0.2fr 0.2fr;font-size:",(e=>e.theme.fontSizeMedium),";white-space:nowrap;margin-bottom:0;border:0;box-shadow:unset;overflow:visible;&>div{padding:",(0,N.D)(1)," ",(0,N.D)(2),";}",(e=>e.isEmpty&&(0,y.iv)("&>div:last-child{padding:48px ",(0,N.D)(2),";}","")),";"),Re=(0,s.Z)("span",{target:"e5ryftz3"})({name:"2qga7i",styles:"text-align:right"}),Ne=(0,s.Z)("div",{target:"e5ryftz2"})({name:"4os8x4",styles:"display:flex;align-items:center;justify-content:flex-end;text-align:right"}),De=(0,s.Z)(R.CC,{target:"e5ryftz1"})("margin:0 ",(0,N.D)(.5),";"),je=(0,s.Z)("div",{target:"e5ryftz0"})("color:",(e=>e.theme[e.color]),";");function Te(e){let{location:t,router:r}=e;const s=(0,h.Z)(),{teams:y,initiallyLoaded:v}=(0,p.y)({provideUserTeams:!0});(0,u.Z)("team_insights.viewed","Team Insights: Viewed");const Z=t?.query??{},x=`teamInsightsSelectedTeamId:${s.slug}`;let S=Z.team??c.Z.getItem(x);S&&!y.find((e=>e.id===S))&&(S=null);const b=S??y[0]?.id,A=y.find((e=>e.id===b)),E=A?.projects??[],{period:w,start:R,end:N,utc:D}=(0,_.lI)(Z);return 0===y.length?(0,z.tZ)(o.Z,{organization:s,superuserNeedsToBeProjectMember:!0}):(0,z.BX)(n.Fragment,{children:[(0,z.tZ)(l.Z,{title:(0,d.t)("Project Health"),orgSlug:s.slug}),(0,z.tZ)(m.Z,{organization:s,activeTab:"health"}),(0,z.BX)(ze,{children:[(0,z.tZ)(g.Z,{location:t,router:r,currentTeam:A}),!v&&(0,z.tZ)(i.Z,{}),v&&(0,z.BX)(a.or,{fullWidth:!0,children:[(0,z.tZ)(f.Z,{title:(0,d.t)("Crash Free Sessions"),description:(0,d.t)("The percentage of healthy, errored, and abnormal sessions that didn’t cause a crash."),children:(0,z.tZ)(Ee,{projects:E,organization:s,period:w,start:R,end:N,utc:D})}),(0,z.tZ)(f.Z,{title:(0,d.t)("User Misery"),description:(0,d.t)("The number of unique users that experienced load times 4x the project’s configured threshold."),children:(0,z.tZ)(Y,{organization:s,projects:E,teamId:A.id,period:w,start:R?.toString(),end:N?.toString(),location:t})}),(0,z.tZ)(f.Z,{title:(0,d.t)("Metric Alerts Triggered"),description:(0,d.t)("Alerts triggered from the Alert Rules your team created."),children:(0,z.tZ)(L,{organization:s,projects:E,teamSlug:A.slug,period:w,start:R?.toString(),end:N?.toString()})}),(0,z.tZ)(f.Z,{title:(0,d.t)("Number of Releases"),description:(0,d.t)("The releases that were created in your team’s projects."),children:(0,z.tZ)(he,{projects:E,organization:s,teamSlug:A.slug,period:w,start:R,end:N,utc:D})})]})]})]})}Te.displayName="TeamStatsHealth";const _e=Te,ze=(0,s.Z)(a.uT,{target:"e1ylx2vy0"})("@media (min-width: ",(e=>e.theme.breakpoints.medium),"){display:block;}")},"./app/views/releases/utils/sessionTerm.tsx":(e,t,r)=>{"use strict";r.d(t,{RE:()=>d,U1:()=>a,_k:()=>n,w0:()=>i});var s=r("./app/locale.tsx");let n;!function(e){e.CRASHES="crashes",e.CRASHED="crashed",e.ABNORMAL="abnormal",e.CRASH_FREE="crashFree",e.CRASH_FREE_USERS="crash-free-users",e.CRASH_FREE_SESSIONS="crash-free-sessions",e.HEALTHY="healthy",e.ERRORED="errored",e.UNHANDLED="unhandled",e.STABILITY="stability",e.ADOPTION="adoption",e.ANR_RATE="anr-rate",e.FOREGROUND_ANR_RATE="foreground-anr-rate"}(n||(n={}));const a={[n.CRASHES]:(0,s.t)("Crashes"),[n.CRASHED]:(0,s.t)("Crashed"),[n.ABNORMAL]:(0,s.t)("Abnormal"),[n.CRASH_FREE_USERS]:(0,s.t)("Crash Free Users"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Crash Free Sessions"),[n.HEALTHY]:(0,s.t)("Healthy"),[n.ERRORED]:(0,s.t)("Errored"),[n.UNHANDLED]:(0,s.t)("Unhandled"),[n.ADOPTION]:(0,s.t)("Adoption"),[n.ANR_RATE]:(0,s.t)("ANR Rate"),[n.FOREGROUND_ANR_RATE]:(0,s.t)("Foreground ANR Rate"),otherCrashed:(0,s.t)("Other Crashed"),otherAbnormal:(0,s.t)("Other Abnormal"),otherErrored:(0,s.t)("Other Errored"),otherHealthy:(0,s.t)("Other Healthy"),otherCrashFreeUsers:(0,s.t)("Other Crash Free Users"),otherCrashFreeSessions:(0,s.t)("Other Crash Free Sessions"),otherReleases:(0,s.t)("Other Releases")},i={[n.CRASHES]:(0,s.t)("Number of sessions with a crashed state"),[n.CRASH_FREE]:(0,s.t)("Percentage of sessions/users who did not experience a crash."),[n.CRASH_FREE_USERS]:(0,s.t)("Percentage of unique users with non-crashed sessions"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Percentage of non-crashed sessions"),[n.STABILITY]:(0,s.t)("The percentage of crash free sessions."),[n.ADOPTION]:(0,s.t)("Adoption compares the sessions or users of a release with the total sessions or users for this project in the last 24 hours.")},o={[n.CRASHED]:(0,s.t)("The process was terminated due to an unhandled exception or a request to the server that ended with an error"),[n.CRASH_FREE_SESSIONS]:(0,s.t)("Percentage of non-crashed sessions"),[n.ABNORMAL]:(0,s.t)("An unknown session exit. Like due to loss of power or killed by the operating system"),[n.HEALTHY]:(0,s.t)("A session without errors"),[n.ERRORED]:(0,s.t)("A session with errors"),[n.UNHANDLED]:(0,s.t)("Not handled by user code")},l={crashed:(0,s.t)("The application crashed with a hard crash (eg. segfault)"),[n.ABNORMAL]:(0,s.t)("The application did not properly end the session, for example, due to force-quit"),[n.HEALTHY]:(0,s.t)("The application exited normally and did not observe any errors"),[n.ERRORED]:(0,s.t)("The application exited normally but observed error events while running"),[n.UNHANDLED]:(0,s.t)("The application crashed with a hard crash")};function d(e,t){return function(e){switch("react-native"===e||"java-spring"===e||"apple-ios"===e||"dotnet-aspnetcore"===e?e:e?.split("-")[0]){case"dotnet":case"java":return{...i,...o};case"java-spring":case"dotnet-aspnetcore":return{...i,...o,[n.CRASHES]:(0,s.t)("A request that resulted in an unhandled exception and hence a Server Error response")};case"android":case"cordova":case"react-native":case"flutter":return{...i,...o,[n.CRASHED]:(0,s.t)("An unhandled exception that resulted in the application crashing")};case"apple":return{...i,...o,[n.CRASHED]:(0,s.t)("An error that resulted in the application crashing")};case"node":case"javascript":return{...i,[n.CRASHED]:(0,s.t)("During the session an unhandled global error/promise rejection occurred."),[n.ABNORMAL]:(0,s.t)("Non applicable for Javascript."),[n.HEALTHY]:(0,s.t)("No errors were captured during session life-time."),[n.ERRORED]:(0,s.t)("During the session at least one handled error occurred."),[n.UNHANDLED]:"An error was captured by the global 'onerror' or 'onunhandledrejection' handler."};case"apple-ios":case"minidump":case"native":return{...i,...l};case"rust":return{...i,...l,[n.CRASHED]:(0,s.t)("The application had an unrecoverable error (a panic)")};default:return{...i,[n.CRASHED]:(0,s.t)("Number of users who experienced an unhandled error"),[n.ABNORMAL]:(0,s.t)("An unknown session exit"),[n.HEALTHY]:o.healthy,[n.ERRORED]:o.errored,[n.UNHANDLED]:o.unhandled,[n.ANR_RATE]:(0,s.t)("Percentage of unique users that experienced an App Not Responding (ANR) error"),[n.FOREGROUND_ANR_RATE]:(0,s.t)("Percentage of unique users that experienced an App Not Responding (ANR) error when the app was running in the foreground")}}}(t)[e]}},"../node_modules/lodash/_baseMean.js":(e,t,r)=>{var s=r("../node_modules/lodash/_baseSum.js");e.exports=function(e,t){var r=null==e?0:e.length;return r?s(e,t)/r:NaN}},"../node_modules/lodash/_baseSum.js":e=>{e.exports=function(e,t){for(var r,s=-1,n=e.length;++s<n;){var a=t(e[s]);void 0!==a&&(r=void 0===r?a:r+a)}return r}},"../node_modules/lodash/mean.js":(e,t,r)=>{var s=r("../node_modules/lodash/_baseMean.js"),n=r("../node_modules/lodash/identity.js");e.exports=function(e){return s(e,n)}}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationStats_teamInsights_health_tsx.ed7e1888baf95ec028ace65749d6de9f.js.map