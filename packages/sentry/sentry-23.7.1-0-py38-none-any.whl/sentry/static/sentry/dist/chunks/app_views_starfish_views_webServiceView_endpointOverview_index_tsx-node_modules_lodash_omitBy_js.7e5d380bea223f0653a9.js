(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_starfish_views_webServiceView_endpointOverview_index_tsx-node_modules_lodash_omitBy_js"],{"./app/components/issues/groupList.tsx":(t,e,s)=>{"use strict";s.d(e,{Z:()=>T});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),n=s("../node_modules/react-router/es/index.js"),r=s("../node_modules/lodash/isEqual.js"),o=s.n(r),d=s("../node_modules/lodash/omit.js"),p=s.n(d),l=s("../node_modules/query-string/index.js"),u=s("./app/actionCreators/members.tsx"),c=s("./app/components/emptyStateWarning.tsx"),m=s("./app/components/loadingError.tsx"),h=s("./app/components/loadingIndicator.tsx"),g=s("./app/components/pagination.tsx"),y=s("./app/components/panels/panel.tsx"),f=s("./app/components/panels/panelBody.tsx"),v=s("./app/components/replays/issuesReplayCountProvider.tsx"),w=s("./app/components/searchSyntax/parser.tsx"),x=s("./app/components/searchSyntax/utils.tsx"),Z=s("./app/components/stream/group.tsx"),b=s("./app/locale.tsx"),_=s("./app/stores/groupStore.tsx"),S=s("./app/utils/withApi.tsx"),k=s("./app/utils/withSentryRouter.tsx"),C=s("./app/views/alerts/rules/metric/details/relatedIssuesNotAvailable.tsx"),L=s("./app/components/issues/groupListHeader.tsx"),A=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class P extends a.Component{constructor(){super(...arguments),(0,i.Z)(this,"state",{loading:!0,error:!1,errorData:null,groups:[],pageLinks:null}),(0,i.Z)(this,"listener",_.Z.listen((()=>this.onGroupChange()),void 0)),(0,i.Z)(this,"fetchData",(async()=>{_.Z.loadInitialData([]);const{api:t,orgId:e,queryParams:s}=this.props;t.clear(),this.setState({loading:!0,error:!1,errorData:null}),(0,u.MA)(t,e).then((t=>{this.setState({memberList:(0,u.M4)(t)})}));const i=this.getGroupListEndpoint(),a=(0,w.UG)((s??this.getQueryParams()).query);if(a&&(0,x.ly)({tree:a,noResultValue:!1,visitorTest:t=>{let{token:e,returnResult:s}=t;return e.type===w.WU.LOGIC_BOOLEAN?s(!0):null}}))this.setState({error:!0,errorData:{detail:C.H},loading:!1});else try{const[e,,s]=await t.requestPromise(i,{includeAllArgs:!0});_.Z.add(e),this.setState({error:!1,errorData:null,loading:!1,pageLinks:s?.getResponseHeader("Link")??null},(()=>{this.props.onFetchSuccess?.(this.state,this.handleCursorChange)}))}catch(t){this.setState({error:!0,errorData:t.responseJSON,loading:!1})}}))}componentDidMount(){this.fetchData()}shouldComponentUpdate(t,e){return!o()(this.state,e)||t.endpointPath!==this.props.endpointPath||t.query!==this.props.query||!o()(t.queryParams,this.props.queryParams)}componentDidUpdate(t){const e=["end"];t.orgId===this.props.orgId&&t.endpointPath===this.props.endpointPath&&t.query===this.props.query&&o()(p()(t.queryParams,e),p()(this.props.queryParams,e))||this.fetchData()}componentWillUnmount(){_.Z.reset(),this.listener?.()}getGroupListEndpoint(){const{orgId:t,endpointPath:e,queryParams:s}=this.props,i=e??`/organizations/${t}/issues/`,a=s??this.getQueryParams();return`${i}?${l.stringify(a)}`}getQueryParams(){const{location:t,query:e}=this.props,s=t.query;return s.limit=50,s.sort="new",s.query=e,s}handleCursorChange(t,e,s,i){const a=parseInt(s.page,10);let r=isNaN(a)?i:a+i;r<=0&&(t=void 0,r=void 0),n.browserHistory.push({pathname:e,query:{...s,cursor:t,page:r}})}onGroupChange(){const t=_.Z.getAllItems();o()(t,this.state.groups)||this.setState({groups:t})}render(){const{canSelectGroups:t,withChart:e,withColumns:s,renderEmptyMessage:i,renderErrorMessage:a,withPagination:n,useFilteredStats:r,useTintRow:o,customStatsPeriod:d,queryParams:p,queryFilterDescription:l,narrowGroups:u,source:w,query:x}=this.props,{loading:_,error:S,errorData:k,groups:C,memberList:P,pageLinks:T}=this.state;if(_)return(0,A.tZ)(h.Z,{});if(S)return"function"==typeof a&&k?a(k,this.fetchData):(0,A.tZ)(m.Z,{onRetry:this.fetchData});if(0===C.length)return"function"==typeof i?i():(0,A.tZ)(y.Z,{children:(0,A.tZ)(f.Z,{children:(0,A.tZ)(c.Z,{children:(0,A.tZ)("p",{children:(0,b.t)("There don't seem to be any events fitting the query.")})})})});const D="auto"===p?.groupStatsPeriod?p?.groupStatsPeriod:Z.g;return(0,A.BX)(v.Z,{groupIds:C.map((t=>{let{id:e}=t;return e})),children:[(0,A.BX)(y.Z,{children:[(0,A.tZ)(L.Z,{withChart:!!e,narrowGroups:u,withColumns:s}),(0,A.tZ)(f.Z,{children:C.map((i=>{let{id:a,project:n}=i;const p=P?.hasOwnProperty(n.slug)?P[n.slug]:void 0;return(0,A.tZ)(Z.Z,{id:a,canSelect:t,withChart:e,withColumns:s,memberList:p,useFilteredStats:r,useTintRow:o,customStatsPeriod:d,statsPeriod:D,queryFilterDescription:l,narrowGroups:u,source:w,query:x},a)}))})]}),n&&(0,A.tZ)(g.Z,{pageLinks:T,onCursor:this.handleCursorChange})]})}}P.displayName="GroupList",(0,i.Z)(P,"defaultProps",{canSelectGroups:!0,withChart:!0,withPagination:!0,useFilteredStats:!0,useTintRow:!0,narrowGroups:!1,withColumns:["graph","event","users","assignee"]});const T=(0,S.Z)((0,k.Z)(P))},"./app/components/performance/layouts.tsx":(t,e,s)=>{"use strict";s.d(e,{c:()=>n});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("./app/styles/space.tsx");const n=(0,i.Z)("div",{target:"eufzkx60"})("display:grid;grid-template-columns:1fr;grid-column-gap:",(0,a.D)(2),";grid-row-gap:",(0,a.D)(2),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(t=>t.theme.breakpoints.medium),"){",(t=>t.columns?`\n    grid-template-columns: repeat(${t.columns}, 1fr);\n    `:`\n    grid-template-columns: repeat(auto-fit, minmax(${t.minSize}px, 1fr));\n    `),";}")},"./app/views/alerts/rules/metric/details/relatedIssuesNotAvailable.tsx":(t,e,s)=>{"use strict";s.d(e,{H:()=>p,z:()=>l});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("./app/components/acl/feature.tsx"),n=s("./app/components/alert.tsx"),r=s("./app/components/button.tsx"),o=s("./app/components/panels/panel.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p='Error parsing search query: Boolean statements containing "OR" or "AND" are not supported in this search';function l(t){let{buttonTo:e,buttonText:s}=t;return(0,d.tZ)(u,{type:"info",showIcon:!0,trailingItems:(0,d.tZ)(a.Z,{features:["discover-basic"],children:(0,d.tZ)(r.zx,{priority:"default",size:"xs",to:e,children:s})}),children:(0,d.tZ)("div",{"data-test-id":"loading-error-message",children:"Related Issues unavailable for this alert."})})}l.displayName="RelatedIssuesNotAvailable";const u=(0,i.Z)(n.bZ,{target:"e1qw7yyr0"})(o.Z," &{border-radius:0;border-width:1px 0;}")},"./app/views/starfish/components/samplesTable/common.tsx":(t,e,s)=>{"use strict";s.d(e,{f:()=>d,k:()=>p});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("./app/locale.tsx"),n=s("./app/utils/formatters.tsx"),r=s("./app/views/starfish/components/textAlign.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(t){let{duration:e,compareToDuration:s,containerProps:i}=t;const d=e-s;if(p(e,s))return(0,o.tZ)(r.Dq,{...i,children:(0,a.t)("Near baseline")});const u=(0,n.g9)(d/1e3,2,!0,!0),c=d>0?`+${u} above`:`${u} below`;return(0,o.tZ)(l,{...i,value:d,children:c})}d.displayName="DurationComparisonCell";const p=(t,e)=>{const s=.03*e;return Math.abs(t-e)<s},l=(0,i.Z)("span",{target:"e1tr2orr0"})("color:",(t=>0===t.value?t.theme.subText:t.value<0?t.theme.green400:t.theme.red400),";text-align:right;")},"./app/views/starfish/utils/buildEventViewQuery.tsx":(t,e,s)=>{"use strict";s.d(e,{$:()=>m}),s("../node_modules/core-js/modules/es.array.push.js");var i=s("./app/utils.tsx"),a=s("./app/views/starfish/types.tsx"),n=s("./app/views/starfish/views/spans/selectors/emptyOption.tsx"),r=s("./app/views/starfish/views/webServiceView/spanGroupBreakdownContainer.tsx");const{SPAN_DESCRIPTION:o,SPAN_OP:d,SPAN_DOMAIN:p,SPAN_ACTION:l,SPAN_MODULE:u}=a.SpanMetricsFields,c=[d,p,l,`!${u}`,"!span.category"];function m(t){let{moduleName:e,location:s,transaction:p,method:l,spanCategory:m}=t;const{query:h}=s,g=Object.keys(h).filter((t=>c.includes(t))).filter((t=>Boolean(h[t]))).map((t=>{const e=h[t],s=Array.isArray(e);if("!span.category"===t&&s&&e.includes("db")){const t=e.filter((t=>"db"!==t));return`(!span.category:db OR ${d}:db.redis) !span.category:[${t.join(",")}]`}return e===n.q?`!has:${t}`:`${t}:${s?`[${e}]`:e}`}));return g.push(`has:${o}`),e!==a.rA.ALL&&g.push(`${u}:${e}`),e===a.rA.DB&&g.push(`!${d}:db.redis`),(0,i.ri)(m)&&(m===r.sZ?g.push("!has:span.category"):"Other"!==m&&g.push(`span.category:${m}`)),p&&g.push(`transaction:${p}`),l&&g.push(`transaction.method:${l}`),g}},"./app/views/starfish/utils/extractRoute.tsx":(t,e,s)=>{"use strict";function i(t){return t.pathname.match(/^\/starfish\/api\//)?"api":t.pathname.match(/^\/starfish\/database\//)?"database":t.pathname.match(/^\/starfish\/endpoint-overview\//)?"endpoint-overview":null}s.d(e,{G:()=>i})},"./app/views/starfish/utils/getDateConditions.tsx":(t,e,s)=>{"use strict";s.d(e,{x:()=>o});var i=s("./app/components/organizations/pageFilters/parse.tsx"),a=s("../node_modules/moment/moment.js"),n=s.n(a);const r=/^(\d+)([h,d])$/,o=t=>{const{startTime:e,endTime:s,statsPeriod:a}=function(t){const[e,s,i]=t.datetime.period?.match(r)??[];return{startTime:s&&i?n()().subtract(s,i):n()(t.datetime.start),endTime:n()(t.datetime.end??void 0),statsPeriod:t.datetime.period}}(t),{start:o,end:d}=(0,i.fK)({start:e.toDate(),end:s.toDate()});return a?{statsPeriod:a}:{start:o,end:d}}},"./app/views/starfish/views/spans/selectors/emptyOption.tsx":(t,e,s)=>{"use strict";s.d(e,{N:()=>d,q:()=>r});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("./app/locale.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r="(empty)",o=(0,i.Z)("span",{target:"e14fiawm0"})("color:",(t=>t.theme.gray300),";");function d(){return(0,n.tZ)(o,{children:(0,a.t)("(empty string)")})}d.displayName="EmptyOption"},"./app/views/starfish/views/spans/spansTable.tsx":(t,e,s)=>{"use strict";s.d(e,{Z:()=>E,k:()=>B}),s("../node_modules/core-js/modules/es.array.push.js");var i=s("../node_modules/react/index.js"),a=s("../node_modules/react-router/es/index.js"),n=s("../node_modules/query-string/index.js"),r=s("./app/components/gridEditable/index.tsx"),o=s("./app/components/links/link.tsx"),d=s("./app/components/pagination.tsx"),p=s("./app/utils.tsx"),l=s("./app/utils/discover/fieldRenderers.tsx"),u=s("./app/utils/performanceForSentry/index.tsx"),c=s("./app/utils/queryString.tsx"),m=s("./app/utils/useLocation.tsx"),h=s("./app/utils/useOrganization.tsx"),g=s("./app/views/starfish/components/tableCells/renderHeadCell.tsx"),y=s("./app/views/starfish/components/textAlign.tsx"),f=s("../node_modules/lodash/omit.js"),v=s.n(f),w=s("./app/utils/discover/eventView.tsx"),x=s("./app/utils/discover/types.tsx"),Z=s("./app/views/starfish/types.tsx"),b=s("./app/views/starfish/utils/buildEventViewQuery.tsx"),_=s("./app/views/starfish/utils/useSpansQuery.tsx");const{SPAN_SELF_TIME:S,SPAN_DESCRIPTION:k,SPAN_GROUP:C,SPAN_OP:L,SPAN_DOMAIN:A}=Z.SpanMetricsFields,P=function(t,e,s,i,a,n){let r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"api.starfish.use-span-list",o=arguments.length>7?arguments[7]:void 0;const d=function(t,e,s,i,a,n){const r=[...(0,b.$)({moduleName:t,location:e,transaction:s,method:i,spanCategory:a}),"transaction.op:http.server"].join(" "),o=[L,C,k,A,"sps()",`sum(${S})`,`avg(${S})`,"http_error_count()"];(0,p.ri)(s)?o.push("time_spent_percentage(local)"):o.push("time_spent_percentage()");const d=w.ZP.fromNewQueryWithLocation({name:"",query:r,fields:o,dataset:x.as.SPANS_METRICS,version:2},v()(e,"span.category","http.method"));return n&&(d.sorts=n),d}(t,(0,m.T)(),e,s,i,a),{isLoading:l,data:u,meta:c,pageLinks:h}=(0,_.RX)({eventView:d,initialData:[],limit:n,referrer:r,cursor:o});return{isLoading:l,data:u,meta:c,pageLinks:h}};var T=s("./app/views/starfish/utils/extractRoute.tsx"),D=s("./app/views/starfish/views/queryParameters.tsx"),j=s("./app/views/starfish/views/spans/types.tsx"),q=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const{SPAN_SELF_TIME:N,SPAN_DESCRIPTION:F,SPAN_DOMAIN:$,SPAN_GROUP:O,SPAN_OP:I}=Z.SpanMetricsFields,R=new Set([`avg(${N})`,"sps()","time_spent_percentage()","time_spent_percentage(local)","http_error_count()"]);function E(t){let{moduleName:e,sort:s,columnOrder:p,spanCategory:f,endpoint:v,method:w,limit:x=25}=t;const b=(0,m.T)(),_=(0,h.Z)(),S=(0,c.ro)(b.query?.[D.o.CURSOR]),{isLoading:k,data:C,meta:L,pageLinks:A}=P(e??Z.rA.ALL,v,w,f,[s],x,"api.starfish.use-span-list",S),j=Boolean(v);return(0,q.tZ)(i.Fragment,{children:(0,q.BX)(u.oF,{id:"SpansTable",hasData:(C?.length??0)>0,isLoading:k,disabled:j,children:[(0,q.tZ)(r.ZP,{isLoading:k,data:C,columnOrder:p??z(e,f,v),columnSortBy:[{key:s.field,order:s.kind}],grid:{renderHeadCell:t=>(0,g.WJ)({column:t,sort:s,location:b}),renderBodyCell:(t,e)=>function(t,e,s,i,a,r,d){if(t.key===F){const t={...i.query,endpoint:r,endpointMethod:d};return(0,q.tZ)(y._F,{children:e[O]?(0,q.tZ)(o.Z,{to:`/starfish/${(0,T.G)(i)??"spans"}/span/${e[O]}${t?`?${n.stringify(t)}`:""}`,children:e[F]||"<null>"}):e[F]||"<null>"})}if(!s||!s?.fields)return e[t.key];return(0,l.Js)(t.key,s.fields,!1)(e,{location:i,organization:a,unit:s.units?.[t.key]})}(t,e,L,b,_,v,w)},location:b}),(0,q.tZ)(d.Z,{pageLinks:A,onCursor:(t,e,s)=>{a.browserHistory.push({pathname:e,query:{...s,[D.o.CURSOR]:t}})}})]})})}function z(t,e,s){const i=function(t,e){return t===Z.rA.HTTP?"URL Request":t===Z.rA.DB?"Database Query":"cache"===e?"Cache Query":"serialize"===e?"Serializer":"middleware"===e?"Middleware":"app"===e?"Application Task":"other"===t?"Requests":"Description"}(t,e),a=function(t){return t===Z.rA.HTTP?"Host":t===Z.rA.DB?"Table":"Domain"}(t),n=[[Z.rA.ALL,Z.rA.OTHER].includes(t)?{key:I,name:"Operation",width:120}:void 0,{key:F,name:i,width:r.z7},...t!==Z.rA.ALL&&t!==Z.rA.DB?[{key:$,name:a,width:r.z7}]:[],{key:"sps()",name:(0,j.RY)(t),width:r.z7},{key:`avg(${N})`,name:j.FS.avg,width:r.z7},...t===Z.rA.HTTP?[{key:"http_error_count()",name:j.FS.errorCount,width:r.z7}]:[]];return(0,p.ri)(s)?n.push({key:"time_spent_percentage(local)",name:j.FS.timeSpent,width:r.z7}):n.push({key:"time_spent_percentage()",name:j.FS.timeSpent,width:r.z7}),n.filter((t=>Boolean(t)))}function B(t){return R.has(t.field)}E.displayName="SpansTable"},"./app/views/starfish/views/webServiceView/endpointOverview/index.tsx":(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>rt});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),n=s("../node_modules/react-router/es/index.js"),r=s("../node_modules/query-string/index.js"),o=s("./app/components/breadcrumbs.tsx"),d=s("./app/components/button.tsx"),p=s("./app/components/charts/eventsRequest.tsx"),l=s("./app/components/charts/utils.tsx"),u=s("./app/components/layouts/thirds.tsx"),c=s("./app/components/organizations/pageFilterBar.tsx"),m=s("./app/components/performance/layouts.tsx"),h=s("./app/components/placeholder.tsx"),g=s("./app/components/questionTooltip.tsx"),y=s("./app/components/segmentedControl.tsx"),f=s("./app/locale.tsx"),v=s("./app/styles/space.tsx"),w=s("./app/types/index.tsx"),x=s("./app/utils.tsx"),Z=s("./app/utils/discover/charts.tsx"),b=s("./app/utils/discover/discoverQuery.tsx"),_=s("./app/utils/discover/eventView.tsx"),S=s("./app/utils/discover/types.tsx"),k=s("./app/utils/tokenizeSearch.tsx"),C=s("./app/utils/useLocation.tsx"),L=s("./app/utils/useOrganization.tsx"),A=s("./app/utils/usePageFilters.tsx"),P=s("./app/utils/withApi.tsx"),T=s("./app/utils/withDomainRequired.tsx"),D=s("./app/views/performance/transactionSummary/utils.tsx"),j=s("./app/views/starfish/colours.tsx"),q=s("./app/views/starfish/components/chart.tsx"),N=s("./app/views/starfish/components/datePicker.tsx"),F=s("./app/components/dateTime.tsx"),$=s("./app/components/gridEditable/index.tsx"),O=s("./app/components/links/link.tsx"),I=s("./app/utils/discover/fieldRenderers.tsx"),R=s("./app/utils/discover/fields.tsx"),E=s("./app/views/starfish/components/samplesTable/common.tsx");const z=2;var B=s("./app/views/starfish/components/tableCells/durationCell.tsx"),M=s("./app/views/starfish/components/textAlign.tsx"),X=s("./app/views/starfish/views/spans/types.tsx"),V=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function G(t){let{queryConditions:e,sampleFilter:s}=t;const i=(0,C.T)(),n=(0,L.Z)(),r={id:void 0,name:"Endpoint Overview Samples",query:new k.MY(e).formatString(),fields:[],dataset:S.as.DISCOVER,version:2},o=[{key:"id",name:"Event ID",width:100},..."ALL"===s?[{key:"profile_id",name:"Profile ID",width:140},{key:R.zD,name:"Operation Duration",width:180},{key:"timestamp",name:"Timestamp",width:230},{key:"transaction.duration",name:X.FS.duration,width:100},{key:"p95_comparison",name:"Compared to P95",width:100}]:[{key:"http.status_code",name:"Response Code",width:$.z7},{key:"transaction.status",name:"Status",width:$.z7},{key:"timestamp",name:"Timestamp",width:230}]],d=_.ZP.fromNewQueryWithLocation(r,i),{isLoading:p,data:l,aggregatesData:u}=function(t){const e=(0,C.T)(),s=(0,L.Z)(),i=[{field:"transaction.duration",kind:"field"},{field:"profile_id",kind:"field"},{field:"timestamp",kind:"field"},{field:"spans.browser",kind:"field"},{field:"spans.db",kind:"field"},{field:"spans.http",kind:"field"},{field:"spans.resource",kind:"field"},{field:"spans.ui",kind:"field"}],a=t.clone().withColumns([{kind:"function",function:["p50","transaction.duration",void 0,void 0]},{kind:"function",function:["p95","transaction.duration",void 0,void 0]}]),{isLoading:n,data:r}=(0,b._)({eventView:a,referrer:"starfish-transaction-summary-sample-events",location:e,orgSlug:s.slug}),o=t.clone().withColumns(i).withSorts([{field:"transaction.duration",kind:"desc"}]);o.additionalConditions=new k.MY(`transaction.duration:>${r?.data?.[0]?.["p95(transaction.duration)"]??0}`);const{isLoading:d,data:p}=(0,b._)({eventView:o,referrer:"starfish-transaction-summary-sample-events",location:e,orgSlug:s.slug,limit:z}),l=t.clone().withColumns(i).withSorts([{field:"transaction.duration",kind:"desc"}]);l.additionalConditions=new k.MY(`transaction.duration:<=${r?.data?.[0]?.["p50(transaction.duration)"]??0}`);const{isLoading:u,data:c}=(0,b._)({eventView:l,referrer:"starfish-transaction-summary-sample-events",location:e,orgSlug:s.slug,limit:z}),m=t.clone().withColumns(i).withSorts([{field:"transaction.duration",kind:"asc"}]);m.additionalConditions=new k.MY(`transaction.duration:<=${r?.data?.[0]?.["p50(transaction.duration)"]??0}`);const{isLoading:h,data:g}=(0,b._)({eventView:m,referrer:"starfish-transaction-summary-sample-events",location:e,orgSlug:s.slug,limit:z});return n||d||u||h?{isLoading:!0,data:[]}:{isLoading:!1,data:[...p?.data??[],...c?.data??[],...g?.data??[]],aggregatesData:r?.data[0]??[]}}(d),{isLoading:c,data:m}=function(t){const e=(0,C.T)(),s=(0,L.Z)();let i=t.clone();i.additionalConditions=new k.MY("http.status_code:[500,501,502,503,504,505,506,507,508,510,511]"),i=i.withColumns([{field:"timestamp",kind:"field"},{field:"http.status_code",kind:"field"},{field:"transaction.status",kind:"field"}]).withSorts([{field:"timestamp",kind:"desc"}]);const{isLoading:a,data:n}=(0,b._)({eventView:i,referrer:"starfish-transaction-summary-sample-events",location:e,orgSlug:s.slug,limit:6});return{isLoading:a,data:n?n.data:[]}}(d);return(0,V.tZ)($.ZP,{isLoading:"ALL"===s?p:c,data:"ALL"===s?l:m,columnOrder:o,columnSortBy:[],location:i,grid:{renderHeadCell:function(t){return"p95_comparison"===t.key||"transaction.duration"===t.key?(0,V.tZ)(M.Dq,{children:(0,V.tZ)(M._F,{children:t.name})}):t.key===R.zD?(0,V.BX)(a.Fragment,{children:[t.name,(0,V.tZ)(H,{size:"xs",position:"top",title:(0,f.t)("Span durations are summed over the course of an entire transaction. Any overlapping spans are only counted once.")})]}):(0,V.tZ)(M._F,{children:t.name})},renderBodyCell:function(t,e){return"id"===t.key?(0,V.tZ)(O.Z,{to:`/performance/${e["project.name"]}:${e.id}`,children:e.id.slice(0,8)}):"profile_id"===t.key?e.profile_id?(0,V.tZ)(O.Z,{to:`/profiling/profile/${e["project.name"]}/${e.profile_id}/flamechart/`,children:e.profile_id.slice(0,8)}):"(no value)":"transaction.duration"===t.key?(0,V.tZ)(B.Z,{milliseconds:e["transaction.duration"]}):"timestamp"===t.key?(0,V.tZ)(F.Z,{date:e[t.key],year:!0,timeZone:!0,seconds:!0}):"p95_comparison"===t.key?(0,V.tZ)(E.f,{duration:e["transaction.duration"],compareToDuration:u?.["p95(transaction.duration)"]??0}):t.key===R.zD?(0,I.Js)(t.key,{})(e,{location:i,organization:n,eventView:d}):(0,V.tZ)(M.xe,{children:e[t.key]})}}})}G.displayName="TransactionSamplesTable";const H=(0,i.Z)(g.Z,{target:"e1g0mid30"})({name:"1u8yswg",styles:"position:relative;left:4px"});var Q=s("./app/views/starfish/components/starfishPageFiltersContainer.tsx"),U=s("./app/views/starfish/types.tsx"),W=s("./app/views/starfish/utils/chartValueFormatters/formatThroughput.ts"),Y=s("./app/views/starfish/utils/constants.tsx"),J=s("./app/views/starfish/utils/getDateConditions.tsx"),K=s("./app/views/starfish/views/spans/spansTable.tsx"),tt=s("./app/components/issues/groupList.tsx");function et(t){const{transactionName:e,issueCategory:s,httpMethod:i}=t,n=(0,L.Z)(),r=(0,A.Z)(),{statsPeriod:o,start:d,end:p}=(0,J.x)(r.selection),l=r.selection.projects,u=["is:unresolved",...s?[`issue.category:${s}`]:[""],...e?[`transaction:${e}`]:[""],...i?[`http.method:${i}`]:[""]].join(" "),c=(0,a.useMemo)((()=>{const t=o?{statsPeriod:o}:{start:d,end:p};return{project:l[0],query:u,limit:5,sort:"new",...t}}),[u,o,d,p,l]);return(0,V.tZ)(tt.Z,{orgId:n.slug,withChart:!1,withColumns:[],narrowGroups:!0,endpointPath:`/organizations/${n.slug}/issues/`,query:u,queryParams:c,withPagination:!1,useTintRow:!0,source:"starfish-endpoint-summary"})}et.displayName="IssuesTable";const st=et;var it=s("./app/views/starfish/views/webServiceView/spanGroupBreakdownContainer.tsx");const at=5,nt=(0,P.Z)(p.Z);function rt(){const t=(0,C.T)(),e=(0,L.Z)(),{endpoint:s,"http.method":i}=t.query,p=s?Array.isArray(s)?s[0]:s:void 0,m=i?Array.isArray(i)?i[0]:i:void 0,h=(0,A.Z)(),[v,P]=(0,a.useState)({spansFilter:U.rA.ALL,samplesFilter:"ALL"}),[F,$]=(0,a.useState)("ALL"),O=["has:http.method","transaction.op:http.server",`transaction:${p}`,`http.method:${m}`],I=new k.MY(O),R={id:void 0,name:(0,f.t)("Endpoint Overview"),query:I.formatString(),fields:["tps()","p95(transaction.duration)","http_error_count()"],dataset:S.as.METRICS,start:h.selection.datetime.start??void 0,end:h.selection.datetime.end??void 0,range:h.selection.datetime.period??void 0,version:2},E=_.ZP.fromNewQueryWithLocation(R,t),{data:z,isLoading:B}=(0,b._)({eventView:E,orgSlug:e.slug,location:t});return(0,q.K4)(),(0,V.tZ)(Q.M,{children:(0,V.BX)(u.T3,{children:[(0,V.tZ)(u.h4,{children:(0,V.BX)(u.oB,{children:[(0,V.tZ)(o.Z,{crumbs:[{label:(0,f.t)("Web Service"),to:(0,T.D)(`/organizations/${e.slug}/starfish/`)},{label:(0,f.t)("Endpoint Overview")}]}),(0,V.tZ)(u.Dx,{children:`${m} ${p}`})]})}),(0,V.BX)(u.uT,{children:[(0,V.tZ)(lt,{children:(0,V.tZ)(c.Z,{condensed:!0,children:(0,V.tZ)(N.Z,{})})}),(0,V.BX)(u.or,{children:[(0,V.tZ)(ct,{minSize:200,children:(0,V.tZ)(it._2,{transaction:p})}),(0,V.tZ)(mt,{children:(0,V.BX)(y.s,{size:"xs","aria-label":(0,f.t)("Filter Spans"),value:v.spansFilter,onChange:t=>P({...v,spansFilter:t}),children:[(0,V.tZ)(y.s.Item,{children:(0,f.t)("All Spans")},""),(0,V.tZ)(y.s.Item,{children:(0,f.t)("http")},"http"),(0,V.tZ)(y.s.Item,{children:(0,f.t)("db")},"db")]})}),(0,V.tZ)(ot,{filter:v.spansFilter,transaction:p,method:m}),(0,V.BX)(ut,{children:[(0,V.tZ)(mt,{children:(0,V.BX)(y.s,{size:"xs","aria-label":(0,f.t)("Filter events"),value:v.samplesFilter,onChange:t=>P({...v,samplesFilter:t}),children:[(0,V.tZ)(y.s.Item,{children:(0,f.t)("Sample Events")},"ALL"),(0,V.tZ)(y.s.Item,{children:(0,f.t)("5XXs")},"500s")]})}),(0,V.tZ)(G,{queryConditions:O,sampleFilter:v.samplesFilter})]}),(0,V.BX)(mt,{children:[(0,V.BX)(y.s,{size:"xs","aria-label":(0,f.t)("Filter issue types"),value:F,onChange:t=>$(t),children:[(0,V.tZ)(y.s.Item,{children:(0,f.t)("All Issues")},"ALL"),(0,V.tZ)(y.s.Item,{children:(0,f.t)("Errors Only")},w.qE.ERROR),(0,V.tZ)(y.s.Item,{children:(0,f.t)("Performance Only")},w.qE.PERFORMANCE)]}),(0,V.tZ)(d.zx,{size:"sm",onClick:()=>{const t=new k.MY([..."ALL"===F?[]:[`issue.category:${F}`],`transaction:${p}`,`http.method:${m}`]);n.browserHistory.push({pathname:`/issues/?${r.stringify({...(0,J.x)(h.selection),query:t.formatString()})}`})},children:(0,f.t)("View All")})]}),(0,V.tZ)(st,{issueCategory:"ALL"===F?void 0:F,httpMethod:m,transactionName:p})]}),(0,V.BX)(u.MF,{children:[(0,V.tZ)(nt,{query:I.formatString(),includePrevious:!1,partial:!0,limit:5,interval:(0,l.ZS)(h.selection.datetime,Y.R),includeTransformedData:!0,environment:E.environment,project:E.project,period:E.statsPeriod,referrer:"api.starfish-web-service.starfish-endpoint-overview",start:E.start,end:E.end,organization:e,yAxis:["tps()","http_error_count()","p95(transaction.duration)"],dataset:S.as.METRICS,children:t=>{let{loading:e,results:s}=t;if(!s)return null;const i={seriesName:"Requests",data:s[0].data},n={seriesName:(0,f.t)("Requests"),data:s[2].data};return(0,V.BX)(a.Fragment,{children:[(0,V.BX)(gt,{children:[(0,V.tZ)(ht,{children:X.FS.p95}),(0,V.tZ)(g.Z,{size:"sm",position:"right",title:(0,f.t)("95% of requests in the selected period have a lower duration than this value")})]}),(0,V.tZ)(dt,{isLoading:B,value:(0,x.ri)(z)?(0,f.t)("%sms",z.data[0]["p95(transaction.duration)"].toFixed(2)):void 0}),(0,V.tZ)(q.ZP,{height:80,data:[n],loading:e,utc:!1,grid:{left:"8px",right:"0",top:"8px",bottom:"0"},disableXAxis:!0,definedAxisTicks:2,isLineChart:!0,chartColors:[j.Tn],tooltipFormatterOptions:{valueFormatter:t=>(0,Z.Ew)(t,"duration")}}),(0,V.BX)(gt,{children:[(0,V.tZ)(ht,{children:X.FS.throughput}),(0,V.tZ)(g.Z,{size:"sm",position:"right",title:(0,f.t)("the number of requests made to this endpoint per second in the selected period")})]}),(0,V.tZ)(dt,{isLoading:B,value:(0,x.ri)(z)?(0,f.t)("%s/s",z.data[0]["tps()"].toFixed(2)):void 0}),(0,V.tZ)(q.ZP,{height:80,data:[i],loading:e,utc:!1,isLineChart:!0,definedAxisTicks:2,disableXAxis:!0,chartColors:[j.SQ],aggregateOutputFormat:"rate",grid:{left:"8px",right:"0",top:"8px",bottom:"0"},tooltipFormatterOptions:{valueFormatter:t=>(0,W.Z)(t)}}),(0,V.tZ)(D.uI,{}),(0,V.BX)(gt,{children:[(0,V.tZ)(ht,{children:X.FS.errorCount}),(0,V.tZ)(g.Z,{size:"sm",position:"right",title:(0,f.t)("the total number of requests that resulted in 5XX response codes over a given time range")})]}),(0,V.tZ)(dt,{isLoading:B,value:(0,x.ri)(z)?(0,Z.Ew)(z.data[0]["http_error_count()"],"integer"):void 0}),(0,V.tZ)(q.ZP,{height:80,data:[s[1]],loading:e,utc:!1,grid:{left:"8px",right:"0",top:"8px",bottom:"0"},definedAxisTicks:2,isLineChart:!0,chartColors:[j.eO]}),(0,V.tZ)(D.uI,{})]})}}),(0,V.tZ)(D.uI,{})]})]})]})})}function ot(t){let{filter:e,transaction:s,method:i}=t;return(0,V.tZ)(K.Z,{moduleName:e??U.rA.ALL,sort:{field:"time_spent_percentage(local)",kind:"desc"},endpoint:s,method:i,limit:at})}function dt(t){let{isLoading:e,value:s}=t;return e?(0,V.tZ)(h.Z,{height:"24px"}):(0,V.tZ)(pt,{children:s})}rt.displayName="EndpointOverview",ot.displayName="SpanMetricsTable",dt.displayName="ChartSummaryValue";const pt=(0,i.Z)("div",{target:"e1mmy0la6"})("font-size:",(t=>t.theme.fontSizeExtraLarge),";"),lt=(0,i.Z)("div",{target:"e1mmy0la5"})("display:grid;grid-template-rows:auto auto auto;gap:",(0,v.D)(2),";margin-bottom:",(0,v.D)(2),";@media (min-width: ",(t=>t.theme.breakpoints.small),"){grid-template-rows:auto;grid-template-columns:auto 1fr auto;}"),ut=(0,i.Z)("div",{target:"e1mmy0la4"})("padding-bottom:",(0,v.D)(4),";"),ct=(0,i.Z)(m.c,{target:"e1mmy0la3"})("margin-bottom:",(0,v.D)(4),";"),mt=(0,i.Z)("div",{target:"e1mmy0la2"})("margin-bottom:",(0,v.D)(2),";display:flex;justify-content:space-between;height:32px;align-items:center;"),ht=(0,i.Z)("div",{target:"e1mmy0la1"})((t=>t.theme.text.cardTitle),";"),gt=(0,i.Z)("div",{target:"e1mmy0la0"})("padding:0 ",(0,v.D)(1)," 0 0;min-height:24px;width:100%;display:flex;align-items:center;gap:",(0,v.D)(1),";")},"../node_modules/lodash/negate.js":t=>{t.exports=function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}},"../node_modules/lodash/omitBy.js":(t,e,s)=>{var i=s("../node_modules/lodash/_baseIteratee.js"),a=s("../node_modules/lodash/negate.js"),n=s("../node_modules/lodash/pickBy.js");t.exports=function(t,e){return n(t,a(i(e)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_starfish_views_webServiceView_endpointOverview_index_tsx-node_modules_lodash_omitBy_js.b3bf1532299f88b0fb3a0e7cd47c015d.js.map