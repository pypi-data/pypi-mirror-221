"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_projectServiceHookDetails_tsx"],{"./app/components/forms/fields/booleanField.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react/index.js"),i=s("./app/components/confirm.tsx"),r=s("./app/components/forms/formField/index.tsx"),a=s("./app/components/switchButton.tsx"),p=s("./app/components/tooltip.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class l extends n.Component{constructor(){super(...arguments),(0,o.Z)(this,"handleChange",((e,t,s,o)=>{const n=this.coerceValue(!e);t(n,o),s(n,o)}))}coerceValue(e){return!!e}render(){const{confirm:e,disabledReason:t,...s}=this.props;return(0,d.tZ)(r.Z,{...s,resetOnError:!0,children:s=>{let{children:o,onChange:n,onBlur:r,value:l,disabled:c,...m}=s;const h=this.handleChange.bind(this,l,n,r),{type:u,...x}=m,g={...x,size:"lg",isActive:!!l,isDisabled:c,toggle:h};return e?(0,d.tZ)(i.Z,{renderMessage:()=>e[(!l).toString()],onConfirm:()=>h({}),children:s=>{let{open:o}=s;return(0,d.tZ)(p.u,{title:t,skipWrapper:!0,disabled:!c,children:(0,d.tZ)(a.Z,{...g,toggle:t=>{e[(!l).toString()]?o():h(t)}})})}}):(0,d.tZ)(p.u,{title:t,skipWrapper:!0,disabled:!c,children:(0,d.tZ)(a.Z,{...g})})}})}}l.displayName="BooleanField"},"./app/components/switchButton.tsx":(e,t,s)=>{s.d(t,{Z:()=>h});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/react/index.js"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{forwardedRef:t,size:s="sm",isActive:o,forceActiveColor:n,isLoading:r,isDisabled:a,toggle:p,id:d,name:l,className:h,...u}=e;return(0,i.tZ)(c,{ref:t,id:d,name:l,type:"button",className:h,onClick:a?void 0:p,role:"checkbox","aria-checked":o,isLoading:r,disabled:a,isActive:o,size:s,"data-test-id":"switch",...u,children:(0,i.tZ)(m,{isDisabled:a,isActive:o,forceActiveColor:n,size:s})})}r.displayName="Switch";const a=e=>"sm"===e.size?16:24,p=e=>a(e)-("sm"===e.size?4:8),d=e=>"sm"===e.size?1:3,l=e=>e.isActive?d(e)+.875*a(e):d(e),c=(0,o.Z)("button",{target:"e1slsb9u1"})("display:inline-block;background:none;padding:0;border:1px solid ",(e=>e.theme.border),";position:relative;box-shadow:inset ",(e=>e.theme.dropShadowMedium),";height:",a,"px;width:",(e=>1.875*a(e)),"px;border-radius:",a,"px;transition:border 0.1s,box-shadow 0.1s;&[disabled]{cursor:not-allowed;}&:focus,&.focus-visible{outline:none;border-color:",(e=>e.theme.focusBorder),";box-shadow:",(e=>e.theme.focusBorder)," 0 0 0 1px;}"),m=(0,o.Z)("span",{target:"e1slsb9u0"})("display:block;position:absolute;border-radius:50%;transition:0.25s all ease;top:",d,"px;transform:translateX(",l,"px);width:",p,"px;height:",p,"px;background:",(e=>e.isActive||e.forceActiveColor?e.theme.active:e.theme.border),";opacity:",(e=>e.isDisabled?.4:null),";"),h=(0,n.forwardRef)(((e,t)=>(0,i.tZ)(r,{...e,forwardedRef:t})))},"./app/views/deprecatedAsyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var o=s("./app/components/deprecatedAsyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends o.Z{getTitle(){return""}render(){return(0,i.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="DeprecatedAsyncView"},"./app/views/settings/project/projectServiceHookDetails.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-router/es/index.js"),r=s("./app/actionCreators/indicator.tsx"),a=s("./app/components/button.tsx"),p=s("./app/components/charts/miniBarChart.tsx"),d=s("./app/components/deprecatedAsyncComponent.tsx"),l=s("./app/components/emptyMessage.tsx"),c=s("./app/components/errorBoundary.tsx"),m=s("./app/components/forms/fieldGroup/index.tsx"),h=s("./app/components/panels/panel.tsx"),u=s("./app/components/panels/panelAlert.tsx"),x=s("./app/components/panels/panelBody.tsx"),g=s("./app/components/panels/panelHeader.tsx"),Z=s("./app/components/textCopyInput.tsx"),b=s("./app/locale.tsx"),v=s("./app/utils/getDynamicText.tsx"),f=s("./app/utils/withDomainRequired.tsx"),j=s("./app/views/deprecatedAsyncView.tsx"),y=s("./app/views/settings/components/settingsPageHeader.tsx"),w=s("./app/views/settings/project/serviceHookSettingsForm.tsx"),k=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class C extends d.Z{getEndpoints(){const e=Math.floor((new Date).getTime()/1e3),t=e-2592e3,{organization:s}=this.props,{hookId:o,projectId:n}=this.props.params;return[["stats",`/projects/${s.slug}/${n}/hooks/${o}/stats/`,{query:{since:t,until:e,resolution:"1d"}}]]}renderBody(){const{stats:e}=this.state;if(null===e)return null;let t=!0;const s={seriesName:(0,b.t)("Events"),data:e.map((e=>(e.total&&(t=!1),{name:1e3*e.ts,value:e.total})))};return(0,k.BX)(h.Z,{children:[(0,k.tZ)(g.Z,{children:(0,b.t)("Events in the last 30 days (by day)")}),(0,k.tZ)(x.Z,{withPadding:!0,children:t?(0,k.tZ)(l.Z,{title:(0,b.t)("Nothing recorded in the last 30 days."),description:(0,b.t)("Total webhooks fired for this configuration.")}):(0,k.tZ)(p.Z,{isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0,series:[s],height:150})})]})}}class S extends j.Z{constructor(){super(...arguments),(0,o.Z)(this,"onDelete",(()=>{const{organization:e}=this.props,{projectId:t,hookId:s}=this.props.params;(0,r.E3)((0,b.t)("Saving changesâ€¦")),this.api.request(`/projects/${e.slug}/${t}/hooks/${s}/`,{method:"DELETE",success:()=>{(0,r.B8)(),i.browserHistory.push((0,f.D)(`/settings/${e.slug}/projects/${t}/hooks/`))},error:()=>{(0,r.Iw)((0,b.t)("Unable to remove application. Please try again."))}})}))}getEndpoints(){const{organization:e}=this.props,{projectId:t,hookId:s}=this.props.params;return[["hook",`/projects/${e.slug}/${t}/hooks/${s}/`]]}renderBody(){const{organization:e,params:t}=this.props,{projectId:s,hookId:o}=t,{hook:i}=this.state;return i?(0,k.BX)(n.Fragment,{children:[(0,k.tZ)(y.Z,{title:(0,b.t)("Service Hook Details")}),(0,k.tZ)(c.Z,{children:(0,k.tZ)(C,{params:t,organization:e})}),(0,k.tZ)(w.Z,{organization:e,projectId:s,hookId:o,initialData:{...i,isActive:"disabled"!==i.status}}),(0,k.BX)(h.Z,{children:[(0,k.tZ)(g.Z,{children:(0,b.t)("Event Validation")}),(0,k.BX)(x.Z,{children:[(0,k.BX)(u.Z,{type:"info",showIcon:!0,children:["Sentry will send the ",(0,k.tZ)("code",{children:"X-ServiceHook-Signature"})," header built using"," ",(0,k.tZ)("code",{children:"HMAC(SHA256, [secret], [payload])"}),". You should always verify this signature before trusting the information provided in the webhook."]}),(0,k.tZ)(m.Z,{label:(0,b.t)("Secret"),flexibleControlStateSize:!0,inline:!1,help:(0,b.t)("The shared secret used for generating event HMAC signatures."),children:(0,k.tZ)(Z.Z,{children:(0,v.Z)({value:i.secret,fixed:"a dynamic secret value"})})})]})]}),(0,k.BX)(h.Z,{children:[(0,k.tZ)(g.Z,{children:(0,b.t)("Delete Hook")}),(0,k.tZ)(x.Z,{children:(0,k.tZ)(m.Z,{label:(0,b.t)("Delete Hook"),help:(0,b.t)("Removing this hook is immediate and permanent."),children:(0,k.tZ)("div",{children:(0,k.tZ)(a.zx,{priority:"danger",onClick:this.onDelete,children:(0,b.t)("Delete Hook")})})})})]})]}):null}}},"./app/views/settings/project/serviceHookSettingsForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>b});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-router/es/index.js"),r=s("./app/components/forms/apiForm.tsx"),a=s("./app/components/forms/controls/multipleCheckbox.tsx"),p=s("./app/components/forms/fields/booleanField.tsx"),d=s("./app/components/forms/fields/textField.tsx"),l=s("./app/components/forms/formField/index.tsx"),c=s("./app/components/panels/panel.tsx"),m=s("./app/components/panels/panelBody.tsx"),h=s("./app/components/panels/panelHeader.tsx"),u=s("./app/locale.tsx"),x=s("./app/utils/withDomainRequired.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Z=["event.alert","event.created"];class b extends n.Component{constructor(){super(...arguments),(0,o.Z)(this,"onSubmitSuccess",(()=>{const{organization:e,projectId:t}=this.props;i.browserHistory.push((0,x.D)(`/settings/${e.slug}/projects/${t}/hooks/`))}))}render(){const{initialData:e,organization:t,projectId:s,hookId:o}=this.props,n=o?`/projects/${t.slug}/${s}/hooks/${o}/`:`/projects/${t.slug}/${s}/hooks/`;return(0,g.tZ)(c.Z,{children:(0,g.BX)(r.Z,{apiMethod:o?"PUT":"POST",apiEndpoint:n,initialData:e,onSubmitSuccess:this.onSubmitSuccess,footerStyle:{marginTop:0,paddingRight:20},submitLabel:o?(0,u.t)("Save Changes"):(0,u.t)("Create Hook"),children:[(0,g.tZ)(h.Z,{children:(0,u.t)("Hook Configuration")}),(0,g.BX)(m.Z,{children:[(0,g.tZ)(p.Z,{name:"isActive",label:(0,u.t)("Active")}),(0,g.tZ)(d.Z,{name:"url",label:(0,u.t)("URL"),required:!0,help:(0,u.t)("The URL which will receive events.")}),(0,g.tZ)(l.Z,{name:"events",label:(0,u.t)("Events"),inline:!1,help:(0,u.t)("The event types you wish to subscribe to."),children:e=>{let{name:t,value:s,onChange:o}=e;return(0,g.tZ)(a.Z,{onChange:o,value:s,name:t,children:Z.map((e=>(0,g.tZ)(a.Z.Item,{value:e,children:e},e)))})}})]})]})})}}b.displayName="ServiceHookSettingsForm"}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectServiceHookDetails_tsx.76d1d3306666f9dfdd6c8583a385ab25.js.map