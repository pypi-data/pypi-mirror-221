"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_charts_lineChart_tsx-app_components_charts_worldMapChart_tsx-app_utils_customM-d73324"],{"./app/components/charts/components/visualMap.tsx":(e,t,n)=>{function s(e){return e}n.d(t,{Z:()=>s}),n("../node_modules/echarts/lib/component/visualMap.js")},"./app/components/charts/lineChart.tsx":(e,t,n)=>{n.d(t,{w:()=>r});var s=n("./app/components/charts/series/lineSeries.tsx"),o=n("./app/components/charts/baseChart.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{series:t,seriesOptions:n,...r}=e;return(0,i.tZ)(o.Z,{...r,series:t.map((e=>{let{seriesName:t,data:o,dataArray:i,...r}=e;return(0,s.Z)({...n,...r,name:t,data:i||o?.map((e=>{let{value:t,name:n}=e;return[n,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}r.displayName="LineChart"},"./app/components/charts/worldMapChart.tsx":(e,t,n)=>{n.d(t,{y:()=>x});var s=n("../node_modules/react/index.js"),o=n("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),i=n("../node_modules/echarts/lib/core/echarts.js"),r=n("../node_modules/lodash/max.js"),a=n.n(r),l=n("./app/components/charts/components/visualMap.tsx");n("../node_modules/echarts/lib/chart/map.js");var d=n("./app/components/charts/baseChart.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u=1.3,p=1.1,m=.9,g=10.97,h=-12,y=9.71;function x(e){let{series:t,seriesOptions:r,fromDiscover:x,fromDiscoverQueryList:v,...f}=e;const b=(0,o.u)(),[w,S]=(0,s.useState)((()=>({countryToCodeMap:null,map:null,codeToCountryMap:null})));if((0,s.useEffect)((()=>{let e=!1;return e||async function(){try{const[e,t]=await Promise.all([n.e("app_data_countryCodesMap_tsx").then(n.bind(n,"./app/data/countryCodesMap.tsx")),n.e("app_data_world_json").then(n.t.bind(n,"./app/data/world.json",19))]),s=e.default,o=t.default;i.je?.("sentryWorld",o);const r={};for(const e in o)r[s[e]]=e;S({countryToCodeMap:s,map:o,codeToCountryMap:r})}catch{}}(),()=>{e=!0}}),[]),null===w.countryToCodeMap||null===w.map)return null;const Z=t.map((e=>{let{seriesName:t,data:n,...s}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{map:""};return{roam:!0,...e,emphasis:{label:{show:!1},...e.emphasis},type:"map"}}({...r,...s,map:"sentryWorld",name:t,nameMap:w.countryToCodeMap??void 0,aspectScale:.85,zoom:x?p:v?m:u,center:[g,v?h:y],itemStyle:{areaColor:b.gray200,borderColor:b.backgroundSecondary},emphasis:{itemStyle:{areaColor:b.pink300},label:{show:!1}},data:n,silent:v,roam:!v})})),C=a()(t.map((e=>{let{data:t}=e;return a()(t.map((e=>{let{value:t}=e;return t})))})))||1;return(0,c.tZ)(d.Z,{options:{backgroundColor:v?void 0:b.background,visualMap:[(0,l.Z)({show:!v,left:x?void 0:"right",right:x?5:void 0,min:0,max:C,inRange:{color:[b.purple200,b.purple300]},text:["High","Low"],textStyle:{color:b.textColor},calculable:!1})]},...f,yAxis:null,xAxis:null,series:Z,tooltip:{formatter:e=>{const{marker:t,name:n,value:s}=Array.isArray(e)?e[0]:e;if(isNaN(s))return"";const o="number"==typeof s?s.toLocaleString():"";return[`<div class="tooltip-series tooltip-series-solo">\n               <div><span class="tooltip-label">${t} <strong>${w.codeToCountryMap?.[n]||n}</strong></span> ${o}</div>\n            </div>`,'<div class="tooltip-arrow"></div>'].join("")}},height:x?400:void 0})}x.displayName="WorldMapChart"},"./app/components/dataExport.tsx":(e,t,n)=>{n.d(t,{ZP:()=>h,tD:()=>m});var s=n("../node_modules/react/index.js"),o=n("../node_modules/lodash/debounce.js"),i=n.n(o),r=n("./app/actionCreators/indicator.tsx"),a=n("./app/components/acl/feature.tsx"),l=n("./app/components/button.tsx"),d=n("./app/locale.tsx"),c=n("./app/utils/withApi.tsx"),u=n("./app/utils/withOrganization.tsx"),p=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let m;function g(e){let{api:t,children:n,disabled:o,organization:c,payload:u,icon:m}=e;const g=(0,s.useRef)(!1),[h,y]=(0,s.useState)(!1);(0,s.useEffect)((()=>{h&&y(!1)}),[u.queryType,u.queryInfo]),(0,s.useEffect)((()=>()=>{g.current=!0}),[]);const x=(0,s.useCallback)((()=>{y(!0),t.requestPromise(`/organizations/${c.slug}/data-export/`,{includeAllArgs:!0,method:"POST",data:{query_type:u.queryType,query_info:u.queryInfo}}).then((e=>{let[t,n,s]=e;g.current||(0,r.S9)(201===s?.status?(0,d.t)("Sit tight. We'll shoot you an email when your data is ready for download."):(0,d.t)("It looks like we're already working on it. Sit tight, we'll email you."))})).catch((e=>{if(g.current)return;const t=e?.responseJSON?.detail??(0,d.t)("We tried our hardest, but we couldn't export your data. Give it another go.");(0,r.Iw)(t),y(!1)}))}),[u.queryInfo,u.queryType,c.slug,t]);return(0,p.tZ)(a.Z,{features:["organizations:discover-query"],children:h?(0,p.tZ)(l.zx,{size:"sm",priority:"default",title:(0,d.t)("You can get on with your life. We'll email you when your data's ready."),disabled:!0,icon:m,children:(0,d.t)("We're working on it...")}):(0,p.tZ)(l.zx,{onClick:i()(x,500),disabled:o||!1,size:"sm",priority:"default",title:(0,d.t)("Put your data to work. Start your export and we'll email you when it's finished."),icon:m,children:n||(0,d.t)("Export All to CSV")})})}!function(e){e.ISSUES_BY_TAG="Issues-by-Tag",e.DISCOVER="Discover"}(m||(m={})),g.displayName="DataExport";const h=(0,c.Z)((0,u.Z)(g))},"./app/components/gridEditable/sortLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>p});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react-router/es/index.js"),i=n("./app/components/links/link.tsx"),r=n("./app/icons/index.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{align:t,title:n,canSort:s,generateSortLink:i,onClick:r,direction:l,replace:p}=e;const m=i();if(!m||!s)return(0,a.tZ)(c,{align:t,children:n});const g=l?(0,a.tZ)(u,{size:"xs",direction:"desc"===l?"down":"up"}):null;return(0,a.BX)(d,{align:t,to:m,onClick:e=>{p&&(e.preventDefault(),o.browserHistory.replace(m)),r?.(e)},children:[n," ",g]})}l.displayName="SortLink";const d=(0,s.Z)((e=>{const{align:t,css:n,...s}=e;return(0,a.tZ)(i.Z,{...s})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),c=(0,s.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),u=(0,s.Z)(r.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),p=l},"./app/components/replays/replayIdCountProvider.tsx":(e,t,n)=>{n.d(t,{Z:()=>l});var s=n("../node_modules/react/index.js"),o=n("./app/components/replays/replayCountContext.tsx"),i=n("./app/components/replays/useReplaysCount.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){let{children:t,organization:n,replayIds:a}=e;const l=(0,s.useMemo)((()=>a?.map(String)?.filter(Boolean)||[]),[a]),d=(0,i.Z)({replayIds:(c=l,Array.from(new Set(c))),organization:n});var c;return(0,r.tZ)(o.Z.Provider,{value:d,children:t})}a.displayName="ReplayIdCountProvider";const l=a},"./app/utils/customMeasurements/customMeasurementsContext.tsx":(e,t,n)=>{n.d(t,{z:()=>s});const s=(0,n("../node_modules/react/index.js").createContext)(void 0)},"./app/utils/discover/viewReplayLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>m});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react/index.js"),i=n("./app/components/links/link.tsx"),r=n("./app/components/replays/replayCountContext.tsx"),a=n("./app/components/tooltip.tsx"),l=n("./app/locale.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{children:t,replayId:n,to:s}=e;return((0,o.useContext)(r.Z)[n]||0)<1?(0,d.tZ)(a.u,{title:(0,l.t)("This replay may have been rate limited or deleted."),children:(0,d.tZ)(p,{children:(0,l.t)("(missing)")})}):(0,d.tZ)(a.u,{title:(0,l.t)("View Replay"),children:(0,d.tZ)(u,{to:s,children:t})})}c.displayName="ViewReplayLink";const u=(0,s.Z)(i.Z,{target:"ed9jpq61"})({name:"50z4ny",styles:"& div{display:inline;}"}),p=(0,s.Z)("span",{target:"ed9jpq60"})("color:",(e=>e.theme.gray300),";"),m=c},"./app/utils/useTags.tsx":(e,t,n)=>{n.d(t,{Z:()=>i});var s=n("./app/stores/tagStore.tsx"),o=n("./app/stores/useLegacyStore.tsx");const i=function(){return(0,o.X)(s.Z)}},"./app/utils/userselect.tsx":(e,t,n)=>{n.d(t,{l:()=>s});const s=e=>{const t={userSelect:document.body.style.userSelect,MozUserSelect:document.body.style.MozUserSelect,msUserSelect:document.body.style.msUserSelect,webkitUserSelect:document.body.style.webkitUserSelect};return document.body.style.userSelect=e.userSelect||"",document.body.style.MozUserSelect=e.MozUserSelect||"",document.body.style.msUserSelect=e.msUserSelect||"",document.body.style.webkitUserSelect=e.webkitUserSelect||"",t}},"./app/views/dashboards/widgetBuilder/issueWidget/fields.tsx":(e,t,n)=>{let s;n.d(t,{$L:()=>o,Sh:()=>s,kh:()=>i}),function(e){e.ASSIGNEE="assignee",e.TITLE="title",e.ISSUE="issue",e.LEVEL="level",e.STATUS="status",e.PLATFORM="platform",e.IS_BOOKMARKED="isBookmarked",e.IS_SUBSCRIBED="isSubscribed",e.IS_HANDLED="isHandled",e.LAST_SEEN="lastSeen",e.FIRST_SEEN="firstSeen",e.EVENTS="events",e.USERS="users",e.LIFETIME_EVENTS="lifetimeEvents",e.LIFETIME_USERS="lifetimeUsers",e.PROJECT="project",e.LINKS="links"}(s||(s={}));const o={[s.ASSIGNEE]:"string",[s.TITLE]:"string",[s.ISSUE]:"string",[s.LEVEL]:"string",[s.STATUS]:"string",[s.PLATFORM]:"string",[s.IS_BOOKMARKED]:"boolean",[s.IS_SUBSCRIBED]:"boolean",[s.IS_HANDLED]:"boolean",[s.LAST_SEEN]:"date",[s.FIRST_SEEN]:"date",[s.EVENTS]:"string",[s.USERS]:"string",[s.LIFETIME_EVENTS]:"string",[s.LIFETIME_USERS]:"string",[s.PROJECT]:"string",[s.LINKS]:"string"},i={[s.LIFETIME_EVENTS]:"Lifetime Events",[s.LIFETIME_USERS]:"Lifetime Users"}},"./app/views/discover/table/columnEditCollection.tsx":(e,t,n)=>{n.d(t,{Z:()=>F});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=n("../node_modules/react/index.js"),r=n("../node_modules/react-dom/profiling.js"),a=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),l=n("./app/components/arithmeticInput/parser.tsx"),d=n("./app/components/button.tsx"),c=n("./app/components/buttonBar.tsx"),u=n("./app/components/charts/styles.tsx"),p=n("./app/components/input.tsx"),m=n("./app/components/performance/waterfall/utils.tsx"),g=n("./app/icons/index.tsx"),h=n("./app/locale.tsx"),y=n("./app/styles/space.tsx"),x=n("./app/utils/analytics.tsx"),v=n("./app/utils/discover/fields.tsx"),f=n("./app/utils/theme.tsx");function b(e,t){const n="nativeEvent"in e?e.nativeEvent:e;return window.TouchEvent&&n instanceof TouchEvent?n.targetTouches[0][t]:n instanceof MouseEvent?n[t]:0}var w=n("./app/utils/userselect.tsx"),S=n("./app/views/dashboards/types.tsx"),Z=n("./app/views/dashboards/widgetBuilder/issueWidget/fields.tsx"),C=n("./app/views/dashboards/widgetBuilder/releaseWidget/fields.tsx"),E=n("./app/views/discover/table/queryField.tsx"),k=n("./app/views/discover/table/types.tsx"),T=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const D="draggable-item";var I;!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"}(I||(I={}));class _ extends i.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{isDragging:!1,draggingIndex:void 0,draggingTargetIndex:void 0,draggingGrabbedOffset:void 0,error:new Map,left:void 0,top:void 0}),(0,s.Z)(this,"previousUserSelect",null),(0,s.Z)(this,"portal",null),(0,s.Z)(this,"dragGhostRef",(0,i.createRef)()),(0,s.Z)(this,"handleAddColumn",(()=>{this.props.onChange([...this.props.columns,{kind:"field",field:""}])})),(0,s.Z)(this,"handleAddEquation",(()=>{const{organization:e}=this.props,t={kind:k.L.EQUATION,field:""};(0,x.Gi)("discover_v2.add_equation",{organization:e}),this.props.onChange([...this.props.columns,t])})),(0,s.Z)(this,"handleUpdateColumn",((e,t)=>{const n=[...this.props.columns];"equation"===t.kind?this.setState((n=>{const s=new Map(n.error);return s.set(e,(0,l.W9)(t.field).error),{...n,error:s}})):this.updateEquationFields(n,e,t),n.splice(e,1,t),this.props.onChange(n)})),(0,s.Z)(this,"updateEquationFields",((e,t,n)=>{const s=e[t],o=(0,v.sN)(e[t]),i=(0,v.sN)(n);if((0,v.el)(n)&&!(0,v.bv)(e,s))for(let t=0;t<e.length;t++){const n=e[t];if("equation"===n.kind){const r=(0,l.W9)(n.field);let a="",d=0;const c="function"===s.kind?r.tc.functions:r.tc.fields;for(const e of c)e.term===o&&d!==e.location.end.offset&&(a+=n.field.substring(d,e.location.start.offset)+i,d=e.location.end.offset);a+=n.field.substring(d),e[t]={kind:"equation",field:a,alias:e[t].alias}}}})),(0,s.Z)(this,"onDragMove",(e=>{const{isDragging:t,draggingTargetIndex:n,draggingGrabbedOffset:s}=this.state;if(!t||!["mousemove","touchmove"].includes(e.type))return;e.preventDefault(),e.stopPropagation();const o=b(e,"pageX"),i=b(e,"pageY"),r=s?.x??0,a=s?.y??0;if(this.dragGhostRef.current){const e=this.dragGhostRef.current;e.style.left=o-r+"px",e.style.top=i-a+"px"}const l=document.querySelectorAll(`.${D}`),d=Array.from(l).findIndex((e=>{const t=e.getBoundingClientRect(),n=i,s=window.scrollY+t.top,o=window.scrollY+t.top+t.height;return n>=s&&n<=o}));d>=0&&d!==n&&this.setState({draggingTargetIndex:d})})),(0,s.Z)(this,"isFixedIssueColumn",(e=>{const{source:t,columns:n}=this.props,s=n[e];return n.filter((e=>"field"===e.kind&&e.field===Z.Sh.ISSUE)).length<=1&&t===S.l9.ISSUE&&"field"===s.kind&&s.field===Z.Sh.ISSUE})),(0,s.Z)(this,"isRemainingReleaseHealthAggregate",(e=>{const{source:t,columns:n}=this.props,s=n[e];return n.filter((e=>e.kind===k.L.FUNCTION)).length<=1&&t===S.l9.RELEASE&&s.kind===k.L.FUNCTION})),(0,s.Z)(this,"onDragEnd",(e=>{if(!this.state.isDragging||!["mouseup","touchend"].includes(e.type))return;const t=this.state.draggingIndex,n=this.state.draggingTargetIndex;if("number"!=typeof t||"number"!=typeof n)return;this.cleanUpListeners(),this.previousUserSelect&&((0,w.l)(this.previousUserSelect),this.previousUserSelect=null);const s=[...this.props.columns],o=s.splice(t,1);s.splice(n,0,o[0]),this.checkColumnErrors(s),this.props.onChange(s),this.setState({isDragging:!1,left:void 0,top:void 0,draggingIndex:void 0,draggingTargetIndex:void 0,draggingGrabbedOffset:void 0})}))}componentDidMount(){if(!this.portal){const e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.zIndex=String(f.ZP.zIndex.modal),this.portal=e,document.body.appendChild(this.portal)}this.checkColumnErrors(this.props.columns)}componentWillUnmount(){this.portal&&document.body.removeChild(this.portal),this.cleanUpListeners()}checkColumnErrors(e){const t=new Map;for(let n=0;n<e.length;n+=1){const s=e[n];if("equation"===s.kind){const e=(0,l.W9)(s.field);e.error&&t.set(n,e.error)}}this.setState({error:t})}keyForColumn(e,t){return"function"===e.kind?[...e.function,t].join(":"):[...e.field,t].join(":")}cleanUpListeners(){this.state.isDragging&&(window.removeEventListener("mousemove",this.onDragMove),window.removeEventListener("touchmove",this.onDragMove),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd))}removeColumn(e){const t=[...this.props.columns];t.splice(e,1),this.checkColumnErrors(t),this.props.onChange(t)}startDrag(e,t){if(this.state.isDragging||!["mousedown","touchstart"].includes(e.type))return;e.preventDefault(),e.stopPropagation();const n=b(e,"pageY"),s=b(e,"pageX"),o=Array.from(document.querySelectorAll(`.${D}`)).find((t=>t.contains(e.currentTarget))),{x:i,y:r}=(0,m.R3)(o),a={x:s-i+4,y:n-r+4};this.previousUserSelect=(0,w.l)({userSelect:"none",MozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none"}),window.addEventListener("mousemove",this.onDragMove),window.addEventListener("touchmove",this.onDragMove),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),this.setState({isDragging:!0,draggingIndex:t,draggingTargetIndex:t,draggingGrabbedOffset:a,top:n,left:s})}renderGhost(e){let{gridColumns:t,singleColumn:n}=e;const{isDragging:s,draggingIndex:o,draggingGrabbedOffset:i}=this.state,a=o;if("number"!=typeof a||!s||!this.portal)return null;const l=i?.x??0,d=i?.y??0,c=Number(this.state.top)-d,u=Number(this.state.left)-l,p=this.props.columns[a],m={top:`${c}px`,left:`${u}px`},g=(0,T.tZ)(A,{ref:this.dragGhostRef,style:m,children:this.renderItem(p,a,{singleColumn:n,isGhost:!0,gridColumns:t})});return(0,r.createPortal)(g,this.portal)}renderItem(e,t,n){let{singleColumn:s=!1,canDelete:o=!0,canDrag:r=!0,isGhost:a=!1,gridColumns:l=2,disabled:d=!1}=n;const{columns:c,fieldOptions:u,filterAggregateParameters:p,filterPrimaryOptions:m,noFieldsMessage:y,showAliasField:x}=this.props,{isDragging:v,draggingTargetIndex:f,draggingIndex:b}=this.state;let w=null;if(v&&!1===a&&f===t&&(w=(0,T.tZ)(L,{className:D},`placeholder:${this.keyForColumn(e,a)}`)),v&&!1===a&&b===t)return w;const S=Number(f)<=Number(b)?I.TOP:I.BOTTOM;return(0,T.BX)(i.Fragment,{children:[S===I.TOP&&w,(0,T.BX)(j,{showAliasField:x,singleColumn:s,className:a?"":D,children:[r?(0,T.tZ)(U,{"aria-label":(0,h.t)("Drag to reorder"),onMouseDown:e=>this.startDrag(e,t),onTouchStart:e=>this.startDrag(e,t),icon:(0,T.tZ)(g.LS,{size:"xs"}),size:"zero",borderless:!0}):s&&x?null:(0,T.tZ)("span",{}),(0,T.tZ)(E.q,{fieldOptions:u,gridColumns:l,fieldValue:e,onChange:e=>this.handleUpdateColumn(t,e),error:this.state.error.get(t),takeFocus:t===this.props.columns.length-1,otherColumns:c,shouldRenderTag:!0,disabled:d,filterPrimaryOptions:m,filterAggregateParameters:p,noFieldsMessage:y,skipParameterPlaceholder:x}),x&&(0,T.tZ)(O,{singleColumn:s,children:(0,T.tZ)(N,{name:"alias",placeholder:(0,h.t)("Alias"),value:e.alias??"",onChange:n=>{this.handleUpdateColumn(t,{...e,alias:n.target.value})}})}),o||"equation"===e.kind?x?(0,T.tZ)(q,{"data-test-id":`remove-column-${t}`,"aria-label":(0,h.t)("Remove column"),title:(0,h.t)("Remove column"),onClick:()=>this.removeColumn(t),icon:(0,T.tZ)(g.Fz,{}),borderless:!0}):(0,T.tZ)(q,{"data-test-id":`remove-column-${t}`,"aria-label":(0,h.t)("Remove column"),onClick:()=>this.removeColumn(t),icon:(0,T.tZ)(g.Fz,{}),borderless:!0}):s&&x?null:(0,T.tZ)("span",{})]}),S===I.BOTTOM&&w]},`${t}:${this.keyForColumn(e,a)}`)}render(){const{className:e,columns:t,showAliasField:n,source:s}=this.props,o=t.filter((e=>"equation"!==e.kind)).length>1,i=t.length>1,r=t.length<20,a=r?void 0:(0,h.t)("Sorry, you've reached the maximum number of columns (%d). Delete columns to add more.",20),l=1===t.length,c=s===S.l9.ISSUE?1:Math.max(...t.map((e=>{if("function"!==e.kind)return 2;const t=v.lx[e.function[0]]??C.Am[e.function[0]];return t&&t.parameters?2===t.parameters.length?3:2:3})));return(0,T.BX)("div",{className:e,children:[this.renderGhost({gridColumns:c,singleColumn:l}),!n&&s!==S.l9.ISSUE&&(0,T.tZ)(j,{showAliasField:n,singleColumn:l,children:(0,T.BX)(M,{gridColumns:c,children:[(0,T.tZ)(R,{children:(0,h.t)("Tag / Field / Function")}),(0,T.tZ)(R,{children:(0,h.t)("Field Parameter")})]})}),t.map(((e,t)=>this.isFixedIssueColumn(t)?this.renderItem(e,t,{singleColumn:l,canDelete:!1,canDrag:i,gridColumns:c,disabled:!0}):this.isRemainingReleaseHealthAggregate(t)?this.renderItem(e,t,{singleColumn:l,canDelete:!1,canDrag:i,gridColumns:c}):this.renderItem(e,t,{singleColumn:l,canDelete:o,canDrag:i,gridColumns:c}))),(0,T.tZ)(j,{showAliasField:n,singleColumn:l,children:(0,T.BX)(z,{gap:1,showAliasField:n,children:[(0,T.tZ)(d.zx,{size:"sm","aria-label":(0,h.t)("Add a Column"),onClick:this.handleAddColumn,title:a,disabled:!r,icon:(0,T.tZ)(g.N_,{isCircled:!0,size:"xs"}),children:(0,h.t)("Add a Column")}),s!==S.l9.ISSUE&&s!==S.l9.RELEASE&&(0,T.tZ)(d.zx,{size:"sm","aria-label":(0,h.t)("Add an Equation"),onClick:this.handleAddEquation,title:a,disabled:!r,icon:(0,T.tZ)(g.N_,{isCircled:!0,size:"xs"}),children:(0,h.t)("Add an Equation")})]})})]})}}_.displayName="ColumnEditCollection";const z=(0,o.Z)(c.ZP,{target:"e8eyv779"})("grid-column:",(e=>e.showAliasField?"1/-1":" 2/3"),";justify-content:flex-start;"),j=(0,o.Z)("div",{target:"e8eyv778"})("display:grid;grid-template-columns:",(0,y.D)(3)," 1fr 40px;justify-content:center;align-items:center;width:100%;touch-action:none;padding-bottom:",(0,y.D)(1),";",(e=>e.showAliasField&&(0,a.iv)("align-items:flex-start;grid-template-columns:",e.singleColumn?"1fr":`${(0,y.D)(3)} 1fr 40px`,";@media (min-width: ",e.theme.breakpoints.small,"){grid-template-columns:",e.singleColumn?`1fr calc(200px + ${(0,y.D)(1)})`:`${(0,y.D)(3)} 1fr calc(200px + ${(0,y.D)(1)}) 40px`,";}","")),";"),A=(0,o.Z)("div",{target:"e8eyv777"})("background:",(e=>e.theme.background),";display:block;position:absolute;padding:",4,"px;border-radius:",(e=>e.theme.borderRadius),";box-shadow:0 0 15px rgba(0, 0, 0, 0.15);width:710px;opacity:0.8;cursor:grabbing;padding-right:",(0,y.D)(2),";&>",j,"{padding-bottom:0;}& svg{cursor:grabbing;}"),L=(0,o.Z)("div",{target:"e8eyv776"})("margin:0 ",(0,y.D)(3)," ",(0,y.D)(1)," ",(0,y.D)(3),";border:2px dashed ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";height:",(e=>e.theme.form.md.height),"px;"),M=(0,o.Z)("div",{target:"e8eyv775"})("grid-column:2/3;display:grid;grid-template-columns:repeat(",(e=>e.gridColumns),", 1fr);grid-column-gap:",(0,y.D)(1),";"),R=(0,o.Z)(u.OT,{target:"e8eyv774"})({name:"ti75j2",styles:"margin:0"}),N=(0,o.Z)(p.Z,{target:"e8eyv773"})({name:"jixqcp",styles:"min-width:50px"}),O=(0,o.Z)("div",{target:"e8eyv772"})("margin-top:",(0,y.D)(1),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){margin-top:0;margin-left:",(0,y.D)(1),";}@media (max-width: ",(e=>e.theme.breakpoints.small),"){grid-row:2/2;grid-column:",(e=>e.singleColumn?"1/-1":"2/2"),";}"),q=(0,o.Z)(d.zx,{target:"e8eyv771"})("margin-left:",(0,y.D)(1),";height:",(e=>e.theme.form.md.height),"px;"),U=(0,o.Z)(d.zx,{target:"e8eyv770"})("height:",(e=>e.theme.form.md.height),"px;"),F=_},"./app/views/discover/table/tableView.tsx":(e,t,n)=>{n.d(t,{Oj:()=>he,ZP:()=>xe});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),i=n("../node_modules/react-router/es/index.js"),r=n("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),a=n("./app/actionCreators/modal.tsx"),l=n("./app/components/gridEditable/index.tsx"),d=n("./app/components/gridEditable/sortLink.tsx"),c=n("./app/components/links/link.tsx"),u=n("./app/components/replays/replayIdCountProvider.tsx"),p=n("./app/components/tooltip.tsx"),m=n("./app/components/truncate.tsx"),g=n("./app/icons/index.tsx"),h=n("./app/locale.tsx"),y=n("./app/utils/analytics.tsx"),x=n("./app/utils/discover/eventView.tsx"),v=n("./app/utils/discover/fieldRenderers.tsx"),f=n("./app/utils/discover/fields.tsx"),b=n("./app/utils/discover/types.tsx"),w=n("./app/utils/discover/urls.tsx"),S=n("./app/utils/discover/viewReplayLink.tsx"),Z=n("./app/utils/events.tsx"),C=n("./app/utils/profiling/routes.tsx"),E=n("./app/utils/queryString.tsx"),k=n("./app/utils/tokenizeSearch.tsx"),T=n("./app/utils/useProjects.tsx"),D=n("./app/utils/useRoutes.tsx"),I=n("./app/utils/withDomainRequired.tsx"),_=n("./app/views/performance/traceDetails/utils.tsx"),z=n("./app/views/performance/transactionSummary/utils.tsx"),j=n("./app/views/discover/utils.tsx"),A=n("./app/views/discover/table/quickContext/quickContextWrapper.tsx"),L=n("./app/views/discover/table/quickContext/utils.tsx"),M=n("./app/views/discover/table/cellAction.tsx"),R=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),N=n("./app/components/button.tsx"),O=n("./app/components/buttonBar.tsx"),q=n("./app/components/links/externalLink.tsx"),U=n("./app/constants/index.tsx"),F=n("./app/styles/space.tsx"),B=n("./app/utils/fields/index.ts"),P=n("./app/utils/theme.tsx"),V=n("./app/utils/useTags.tsx"),G=n("./app/views/discover/table/columnEditCollection.tsx"),$=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function H(e){const{Header:t,Body:n,Footer:s,measurementKeys:i,spanOperationBreakdownKeys:r,organization:a,onApply:l,closeModal:d,customMeasurements:c}=e;(0,o.useEffect)((()=>{(0,y.Gi)("discover_v2.column_editor.open",{organization:a})}),[a]);const u=(0,V.Z)(),p=Object.keys(u),[m,g]=(0,o.useState)(e.columns),x=(0,j.R0)({organization:a,tagKeys:p,measurementKeys:i,spanOperationBreakdownKeys:r,customMeasurements:a.features.includes("dashboards-mep")||a.features.includes("mep-rollout-flag")?Object.values(c??{}).map((e=>{let{key:t,functions:n}=e;return{key:t,functions:n}})):void 0});return(0,$.BX)(o.Fragment,{children:[(0,$.tZ)(t,{closeButton:!0,children:(0,$.tZ)("h4",{children:(0,h.t)("Edit Columns")})}),(0,$.BX)(n,{children:[(0,$.tZ)(X,{children:(0,h._N)("To group events, add [functionLink: functions] f(x) that may take in additional parameters. [fieldTagLink: Tag and field] columns will help you view more details about the events (i.e. title).",{functionLink:(0,$.tZ)(q.Z,{href:"https://docs.sentry.io/product/discover-queries/query-builder/#filter-by-table-columns"}),fieldTagLink:(0,$.tZ)(q.Z,{href:"https://docs.sentry.io/product/sentry-basics/search/searchable-properties/#event-properties"})})}),(0,$.tZ)(G.Z,{columns:m,fieldOptions:x,filterAggregateParameters:e=>e.value.meta.name!==B.Sh.TOTAL_COUNT,onChange:g,organization:a})]}),(0,$.tZ)(s,{children:(0,$.BX)(O.ZP,{gap:1,children:[(0,$.tZ)(N.zx,{priority:"default",href:U.l5,external:!0,children:(0,h.t)("Read the Docs")}),(0,$.tZ)(N.zx,{"aria-label":(0,h.t)("Apply"),priority:"primary",onClick:function(){l(m),d()},children:(0,h.t)("Apply")})]})})]})}H.displayName="ColumnEditModal";const X=(0,s.Z)("div",{target:"e15ouvrx0"})("margin-bottom:",(0,F.D)(4),";"),W=(0,R.iv)("@media (min-width: ",P.ZP.breakpoints.medium,"){width:auto;max-width:900px;}",""),K=H;var Y=n("./app/components/acl/feature.tsx"),Q=n("./app/components/acl/featureDisabled.tsx"),J=n("./app/components/assistant/guideAnchor.tsx"),ee=n("./app/components/dataExport.tsx"),te=n("./app/components/hovercard.tsx");function ne(e,t){const{tableData:n}=t;return(0,$.tZ)(Y.Z,{features:["organizations:discover-query"],renderDisabled:()=>se(e,t),children:n?.data&&n.data.length<50?se(e,t):oe(e,t)})}function se(e,t){const{isLoading:n,error:s}=t,o=n||null!==s||!1===e,i=o?void 0:()=>function(e,t){let{organization:n,eventView:s,tableData:o}=t;(0,y.Gi)("discover_v2.results.download_csv",{organization:n.id}),(0,j.Di)(o,s.getColumns(),e)}(t.title,t);return(0,$.tZ)(N.zx,{size:"sm",disabled:o,onClick:i,"data-test-id":"grid-download-csv",icon:(0,$.tZ)(g.Dj,{size:"xs"}),title:(0,h.t)("There aren't that many results, start your export and it'll download immediately."),children:(0,h.t)("Export All")})}function oe(e,t){const{isLoading:n,error:s,location:o,eventView:i}=t,r=n||null!==s||!1===e;return(0,$.tZ)(ee.ZP,{payload:{queryType:ee.tD.DISCOVER,queryInfo:i.getEventsAPIPayload(o)},disabled:r,icon:(0,$.tZ)(g.Dj,{size:"xs"}),children:(0,h.t)("Export All")})}function ie(e,t){const n=e?t.onEdit:void 0;return(0,$.tZ)(J.Z,{target:"columns_header_button",children:(0,$.tZ)(N.zx,{size:"sm",disabled:!e,onClick:n,"data-test-id":"grid-edit-enable",icon:(0,$.tZ)(g.bv,{size:"xs"}),children:(0,h.t)("Columns")})})}function re(e){let{onChangeShowTags:t,showTags:n}=e;return(0,$.tZ)(N.zx,{size:"sm",onClick:t,icon:(0,$.tZ)(g.Ah,{size:"xs"}),children:n?(0,h.t)("Hide Tags"):(0,h.t)("Show Tags")})}function ae(e){const t=(0,h.t)("Requires discover query feature.");return(0,$.tZ)(Y.Z,{hookName:"feature-disabled:grid-editable-actions",renderDisabled:e=>(0,$.tZ)(te.uI,{body:(0,$.tZ)(Q.Z,{features:e.features,hideHelpToggle:!0,message:t,featureName:t}),children:e.children(e)}),features:["organizations:discover-query"],children:t=>{let{hasFeature:n}=t;return e.children(n,e)}})}function le(e){return(0,$.BX)(o.Fragment,{children:[(0,R.az)(ae,{...e,key:"edit"},ie),(0,R.az)(ae,{...e,key:"download"},ne),re(e)]})}ne.displayName="renderDownloadButton",se.displayName="renderBrowserExportButton",oe.displayName="renderAsyncExportButton",ie.displayName="renderEditButton",re.displayName="renderSummaryButton",ae.displayName="FeatureWrapper",le.displayName="HeaderActions";const de=le;var ce=n("./app/views/discover/table/topResultsIndicator.tsx");function ue(e){const{projects:t}=(0,T.Z)(),n=(0,D.V)(),s=(0,z.MF)(n);function R(){const{organization:t,eventView:n,measurementKeys:s,spanOperationBreakdownKeys:o,customMeasurements:i}=e;(0,a.openModal)((e=>(0,$.tZ)(K,{...e,organization:t,measurementKeys:s,spanOperationBreakdownKeys:o,columns:n.getColumns().map((e=>e.column)),onApply:O,customMeasurements:i})),{modalCss:W,closeEvents:"escape-key"})}function N(n,s){return(o,r)=>{const{eventView:a,organization:l,location:d,tableData:c,isHomepage:u}=e,p=new k.MY(a.query);let m=a.clone();switch((0,y.Gi)("discover_v2.results.cellaction",{organization:l,action:o}),o){case M.eX.RELEASE:{const e=t.find((e=>e.slug===n.project));return void i.browserHistory.push((0,I.D)({pathname:`/organizations/${l.slug}/releases/${encodeURIComponent(r)}/`,query:{...m.getPageFiltersQuery(),project:e?e.id:void 0}}))}case M.eX.DRILLDOWN:return(0,y.Gi)("discover_v2.results.drilldown",{organization:l}),m=(0,j.Bn)(m,{},n).withNewColumn({kind:"function",function:["count","",void 0,void 0]}),void i.browserHistory.push((0,I.D)(m.getResultsViewUrlTarget(l.slug,u)));default:{let e=r;const t=c?.meta?.units?.[s.name];"number"==typeof e&&t&&(Object.keys(v.en).includes(t)?e*=v.en[t]:Object.keys(v.a_).includes(t)&&(e*=v.a_[t])),(0,M.rh)(p,o,s,e)}}m.query=p.formatString();const g=m.getResultsViewUrlTarget(l.slug,u);g.query.yAxis=(0,E.qP)(d.query.yAxis),i.browserHistory.push((0,I.D)(g))}}function O(t){const{organization:n,eventView:s,location:o,isHomepage:r}=e;(0,y.Gi)("discover_v2.update_columns",{organization:n});const a=s.withColumns(t),l=a.getResultsViewUrlTarget(n.slug,r),d=(0,E.qP)(o.query.yAxis);l.query.yAxis=d.filter((e=>a.getYAxisOptions().find((t=>{let{value:n}=t;return n===e})))),i.browserHistory.push((0,I.D)(l))}const{error:q,eventView:U,isLoading:F,location:B,organization:P,tableData:V}=e,G=U.getColumns(),H=U.getSorts(),X=U.hasAggregateField()?["40px"]:U.hasIdField()?[]:[`minmax(${l.zO}px, max-content)`],Y=V?.data?.map((e=>String(e.replayId))).filter(Boolean);return(0,$.tZ)(u.Z,{organization:P,replayIds:Y,children:(0,$.tZ)(l.ZP,{isLoading:F,error:q,data:V?V.data:[],columnOrder:G,columnSortBy:H,title:(0,h.t)("Results"),grid:{renderHeadCell:function(t){const{eventView:n,location:s,tableData:o}=e,i=o?.meta,r=(0,f.qG)(t.name,t.type,i),a={field:t.key,width:t.width},l=n.sortForField(a,i),c=(0,x.M3)(a,i);let u=(0,f.uI)(t.name)?n.getEquations()[(0,f.G5)(t.name)]:t.name;"replayid"===t.name.toLowerCase()&&(u="Replay");const p=(0,$.tZ)(me,{title:u,children:(0,$.tZ)(m.Z,{value:u,maxLength:60,expandable:!1})});return(0,$.tZ)(d.Z,{align:r,title:p,direction:l?l.kind:void 0,canSort:c,generateSortLink:function(){if(!i)return;const e=n.sortOnField(a,i).generateQueryStringObject();return e.yAxis=(0,E.qP)(s.query.yAxis),{...s,query:e}}})},renderBodyCell:function(n,i,r,a){const{isFirstPage:l,eventView:d,location:c,organization:u,tableData:m,isHomepage:g}=e;if(!m||!m.meta)return i[n.key];const x=String(n.key),f=(0,v.Js)(x,m.meta,!1),E=d.getDisplayMode(),k=E===b.DC.TOP5||E===b.DC.DAILYTOP5,T=d.topEvents?parseInt(d.topEvents,10):b.hY,D=Math.min(m?.data?.length??T,T),I=m.meta.units?.[x];let z=f(i,{organization:u,location:c,unit:I});if("id"===x){const e=(0,w.JE)(i),n=(0,w.eQ)({orgSlug:u.slug,eventSlug:e,eventView:d,isHomepage:g}),s=(0,$.tZ)(ge,{"data-test-id":"view-event",to:n,children:z});z=(0,$.tZ)(A.VB,{organization:u,dataRow:i,contextType:L.z.EVENT,projects:t,eventView:d,children:s})}else if("transaction"===x&&i.transaction)z=(0,$.tZ)(he,{"data-test-id":"tableView-transaction-link",to:(0,j.vT)(i,u,t,d,c),children:z});else if("trace"===x){const e=d.normalizeDateSelection(c);if(i.trace){const t=(0,_.YA)(u,String(i.trace),e,{});z=(0,$.tZ)(p.u,{title:(0,h.t)("View Trace"),children:(0,$.tZ)(ge,{"data-test-id":"view-trace",to:t,children:z})})}}else if("replayId"===x){if(i.replayId){if(!i["project.name"])return(0,Z.XQ)(String(i.replayId));const e=s(u,i,void 0);z=(0,$.tZ)(S.Z,{replayId:i.replayId,to:e,children:z})}}else if("profile.id"===x){const e=i.project||i["project.name"],t=i["profile.id"];if(e&&t){const n=(0,C.O$)({orgSlug:u.slug,projectSlug:String(e),profileId:String(t)});z=(0,$.tZ)(me,{title:(0,h.t)("View Profile"),children:(0,$.tZ)(ge,{"data-test-id":"view-profile",to:n,onClick:()=>(0,y.Gi)("profiling_views.go_to_flamegraph",{organization:u,source:"discover.table"}),children:z})})}}const R=l&&k&&r<T&&0===a?(0,$.tZ)(ce.C,{count:D,index:r}):null,O=x,q=i[O];return"integer"===m.meta[O]&&"number"==typeof q&&q>999?(0,$.BX)(p.u,{title:q.toLocaleString(),containerDisplayMode:"block",position:"right",children:[R,(0,$.tZ)(M.ZP,{column:n,dataRow:i,handleCellAction:N(i,n),children:z})]}):(0,$.BX)(o.Fragment,{children:[R,(0,$.tZ)(M.ZP,{column:n,dataRow:i,handleCellAction:N(i,n),children:z})]})},onResizeColumn:function(t,n){const{location:s,eventView:o}=e,i=n.width?Number(n.width):l.z7,r=o.withResizedColumn(t,i);(0,j.TX)({location:s,nextEventView:r,extraQuery:(0,x.QN)(s)})},renderPrependColumns:function(n,s,o){const{organization:i,eventView:a,tableData:l,location:u,isHomepage:m}=e,y=a.hasAggregateField(),x=a.hasIdField();if(n)return y?[(0,$.tZ)(pe,{children:(0,$.tZ)(g.bv,{size:"sm"})},"header-icon")]:x?[]:[(0,$.tZ)(pe,{children:(0,$.tZ)(d.Z,{align:"left",title:(0,h.t)("event id"),direction:void 0,canSort:!1,generateSortLink:()=>{}})},"header-event-id")];if(y){const e=(0,j.Bn)(a,{},s),t={pathname:u.pathname,query:e.generateQueryStringObject()};return[(0,$.tZ)(p.u,{title:(0,h.t)("Open Group"),children:(0,$.tZ)(c.Z,{to:t,"data-test-id":"open-group",onClick:()=>{e.isEqualTo(a)&&r.Tb(new Error("Failed to drilldown"))},children:(0,$.tZ)(ye,{size:"sm"})})},`eventlink${o}`)]}if(!x){let e=s.id;l&&l.meta&&(e=(0,v.Js)("id",l.meta)(s,{organization:i,location:u}));const n=(0,w.JE)(s),r=(0,w.eQ)({orgSlug:i.slug,eventSlug:n,eventView:a,isHomepage:m}),d=(0,$.tZ)(ge,{"data-test-id":"view-event",to:r,children:e});return[(0,$.tZ)(A.VB,{dataRow:s,contextType:L.z.EVENT,organization:i,projects:t,eventView:a,children:d},`quickContextEventHover${o}`)]}return[]},prependColumnWidths:X},headerButtons:function(){const{organization:t,title:n,eventView:s,isLoading:o,error:i,tableData:r,location:a,onChangeShowTags:l,showTags:d}=e;return(0,$.tZ)(de,{title:n,isLoading:o,error:i,organization:t,eventView:s,onEdit:R,tableData:r,location:a,onChangeShowTags:l,showTags:d})},location:B})})}ue.displayName="TableView";const pe=(0,s.Z)("span",{target:"e4h6la64"})("color:",(e=>e.theme.subText),";"),me=(0,s.Z)(p.u,{target:"e4h6la63"})({name:"1tff48x",styles:"display:initial;max-width:max-content"}),ge=(0,s.Z)(c.Z,{target:"e4h6la62"})({name:"50z4ny",styles:"& div{display:inline;}"}),he=(0,s.Z)(c.Z,{target:"e4h6la61"})((e=>e.theme.overflowEllipsis),";"),ye=(0,s.Z)(g.bv,{target:"e4h6la60"})({name:"1989ovb",styles:"vertical-align:middle"}),xe="app"==n.j?ue:null},"./app/views/discover/table/topResultsIndicator.tsx":(e,t,n)=>{n.d(t,{C:()=>s});const s=(0,n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"ex85xd30"})("position:absolute;left:-1px;margin-top:4.5px;width:9px;height:15px;border-radius:0 3px 3px 0;background-color:",(e=>e.theme.charts.getColorPalette(e.count-2)[e.index]),";")}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_lineChart_tsx-app_components_charts_worldMapChart_tsx-app_utils_customM-d73324.d760ac2d37971489ae09b2390c9e974a.js.map