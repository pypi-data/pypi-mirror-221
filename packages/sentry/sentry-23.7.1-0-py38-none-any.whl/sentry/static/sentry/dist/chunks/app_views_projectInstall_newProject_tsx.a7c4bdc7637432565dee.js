"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_projectInstall_newProject_tsx"],{"./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx":(e,t,o)=>{o.d(t,{Z:()=>s});var a=o("../node_modules/react/index.js"),r=o("./app/views/routeAnalyticsContextProvider.tsx");function s(e,t){const{setEventNames:o,previousUrl:s}=(0,a.useContext)(r.o);(0,a.useEffect)((()=>{o(e,t)}),[o,e,t,s])}},"./app/utils/slugify.tsx":(e,t,o)=>{function a(e){return e.normalize("NFKD").toLowerCase().replace(" ","-").replace(/[^a-z0-9-_]/g,"")}o.d(t,{Z:()=>a})},"./app/views/projectInstall/newProject.tsx":(e,t,o)=>{o.r(t),o.d(t,{default:()=>H});var a=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=o("./app/components/sentryDocumentTitle.tsx"),s=o("./app/styles/space.tsx"),n=(o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/react/index.js")),i=o("../node_modules/react-router/es/index.js"),c=o("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),l=o("../node_modules/lodash/omit.js"),d=o.n(l),p=o("../node_modules/lodash/startCase.js"),u=o.n(p),m=o("../node_modules/platformicons/build/index.js"),g=o("./app/actionCreators/indicator.tsx"),h=o("./app/actionCreators/modal.tsx"),j=o("./app/components/acl/access.tsx"),x=o("./app/components/alert.tsx"),f=o("./app/components/button.tsx"),y=o("./app/components/input.tsx"),v=o("./app/components/layouts/thirds.tsx"),C=o("./app/components/links/externalLink.tsx"),Z=o("./app/components/onboarding/frameworkSuggestionModal.tsx"),w=o("./app/components/platformPicker.tsx"),S=o("./app/components/projects/useProjectCreationAccess.tsx"),_=o("./app/components/teamSelector.tsx"),b=o("./app/icons/index.tsx"),P=o("./app/locale.tsx"),k=o("./app/stores/projectsStore.tsx"),E=o("./app/utils/analytics.tsx"),A=o("./app/utils/routeAnalytics/useRouteAnalyticsEventNames.tsx"),R=o("./app/utils/slugify.tsx"),T=o("./app/utils/useApi.tsx"),N=o("./app/utils/useLocation.tsx"),z=o("./app/utils/useOrganization.tsx"),D=o("./app/utils/useTeams.tsx"),q=o("./app/utils/withDomainRequired.tsx"),M=o("./app/views/projectInstall/issueAlertOptions.tsx"),$=o("./app/views/projects/gettingStartedWithProjectContext.tsx"),O=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function L(){const e=(0,T.Z)(),t=(0,z.Z)(),a=(0,N.T)(),r=(0,n.useContext)($.p),{teams:s}=(0,D.y)(),l="getting-started"===a.query.referrer&&a.query.project===r.project?.id,p=s.filter((e=>e.access.includes("team:admin")));(0,A.Z)("project_creation_page.viewed","Project Create: Creation page viewed");const[m,y]=(0,n.useState)(l?r.project?.name:""),[L,J]=(0,n.useState)(l?r.project?.platform:void 0),[Q,Y]=(0,n.useState)(l?r.project?.teamSlug??p?.[0]?.slug:p?.[0]?.slug),[H,K]=(0,n.useState)(!1),[V,ee]=(0,n.useState)(!1),[te,oe]=(0,n.useState)(void 0),ae=!!t?.features.includes("onboarding-sdk-selection"),re=(0,n.useCallback)((async o=>{const{slug:a}=t,{shouldCreateCustomRule:r,name:s,conditions:n,actions:l,actionMatch:d,frequency:p,defaultRules:u}=te||{},h=o??L;if(h){ee(!0);try{const o=Q?`/teams/${a}/${Q}/projects/`:`/organizations/${a}/experimental/projects/`,c=await e.requestPromise(o,{method:"POST",data:{name:m,platform:h.key,default_rules:u??!0}});let j;r&&(j=(await e.requestPromise(`/projects/${t.slug}/${c.slug}/rules/`,{method:"POST",data:{name:s,conditions:n,actions:l,actionMatch:d,frequency:p}})).id),(0,E.Gi)("project_creation_page.created",{organization:t,issue_alert:u?"Default":r?"Custom":"No Rule",project_id:c.id,rule_id:j||""}),k.Z.onCreateSuccess(c,t.slug),Q?(0,g.S9)((0,P._N)("Created project [project]",{project:`${c.slug}`})):(0,g.S9)((0,P._N)("Created [project] under new team [team]",{project:`${c.slug}`,team:`#${c.team_slug}`})),i.browserHistory.push((0,q.D)(`/organizations/${t.slug}/projects/${c.slug}/getting-started/`))}catch(e){ee(!1),K(e.responseJSON),(0,g.Iw)((0,P._N)("Failed to create project [project]",{project:`${m}`})),403!==e.status&&409!==e.status&&c.$e((t=>{t.setExtra("err",e),c.uT("Project creation failed")}))}}else(0,g.Iw)((0,P.t)("Please select a platform in Step 1"))}),[e,te,t,L,m,Q]),se=(0,n.useCallback)((async()=>{const e=L;if(!e)return void(0,g.Iw)((0,P.t)("Please select a platform in Step 1"));if("language"!==e.type||!Object.values(Z.iu).includes(e.language))return void re();const{FrameworkSuggestionModal:a,modalCss:r}=await Promise.resolve().then(o.bind(o,"./app/components/onboarding/frameworkSuggestionModal.tsx"));(0,h.openModal)((o=>(0,O.tZ)(a,{...o,organization:t,selectedPlatform:e,onConfigure:e=>{re(e)},onSkip:re})),{modalCss:r,onClose:()=>{(0,E.Gi)("project_creation.select_framework_modal_close_button_clicked",{platform:e.key,organization:t})}})}),[L,re,t]),{shouldCreateCustomRule:ne,conditions:ie}=te||{},{canCreateProject:ce}=(0,S.A)({organization:t,teams:p}),le=t.access.includes("project:admin"),de=0===p.length&&!le,pe=!V&&(Q||de)&&ce&&""!==m&&(!ne||ie?.every?.((e=>e.value))),ue=(0,n.useMemo)((()=>{if(!l)return{};const e=r.project?.alertRules;return 0===e?.length?{alertSetting:String(M.AQ.CREATE_ALERT_LATER)}:e?.[0].conditions?.[0].id?.endsWith("EventFrequencyCondition")||e?.[0].conditions?.[0].id?.endsWith("EventUniqueUserFrequencyCondition")?{alertSetting:String(M.AQ.CUSTOMIZED_ALERTS),interval:String(e?.[0].conditions?.[0].interval),threshold:String(e?.[0].conditions?.[0].value),metric:e?.[0].conditions?.[0].id?.endsWith("EventFrequencyCondition")?M.Jw.ERRORS:M.Jw.USERS}:{alertSetting:String(M.AQ.ALERT_ON_EVERY_ISSUE)}}),[r,l]),me=(0,O.BX)(n.Fragment,{children:[(0,O.tZ)(v.Dx,{withMargins:!0,children:(0,P.t)("3. Name your project and assign it a team")}),(0,O.BX)(F,{onSubmit:e=>{e.preventDefault(),ae?se():re()},children:[(0,O.BX)("div",{children:[(0,O.tZ)(I,{children:(0,P.t)("Project name")}),(0,O.BX)(X,{children:[(0,O.tZ)(U,{platform:L?.key??"other",size:20}),(0,O.tZ)(B,{type:"text",name:"name",placeholder:(0,P.t)("project-name"),autoComplete:"off",value:m,onChange:e=>y((0,R.Z)(e.target.value))})]})]}),!de&&(0,O.BX)("div",{children:[(0,O.tZ)(I,{children:(0,P.t)("Team")}),(0,O.BX)(W,{children:[(0,O.tZ)(_.Z,{name:"select-team","aria-label":(0,P.t)("Select a Team"),menuPlacement:"auto",clearable:!1,value:Q,placeholder:(0,P.t)("Select a Team"),onChange:e=>Y(e.value),teamFilter:e=>e.access.includes("team:admin")}),le&&(0,O.tZ)(f.zx,{borderless:!0,"data-test-id":"create-team",icon:(0,O.tZ)(b.N_,{isCircled:!0}),onClick:()=>(0,h.openCreateTeamModal)({organization:t,onClose:e=>{let{slug:t}=e;return Y(t)}}),title:(0,P.t)("Create a team"),"aria-label":(0,P.t)("Create a team")})]})]}),(0,O.tZ)("div",{children:(0,O.tZ)(f.zx,{type:"submit","data-test-id":"create-project",priority:"primary",disabled:!pe,children:(0,P.t)("Create Project")})})]})]});return(0,O.tZ)(j.Z,{access:ce?["project:read"]:["project:admin"],children:(0,O.BX)("div",{"data-test-id":"onboarding-info",children:[(0,O.tZ)(v.Dx,{withMargins:!0,children:(0,P.t)("Create a new project in 3 steps")}),(0,O.tZ)(G,{children:(0,P._N)("Set up a separate project for each part of your application (for example, your API server and frontend client), to quickly pinpoint which part of your application errors are coming from. [link: Read the docs].",{link:(0,O.tZ)(C.Z,{href:"https://docs.sentry.io/product/sentry-basics/integrate-frontend/create-new-project/"})})}),(0,O.tZ)(v.Dx,{withMargins:!0,children:(0,P.t)("1. Choose your platform")}),(0,O.tZ)(w.Z,{platform:L?.key,defaultCategory:L?.category,setPlatform:function(e){if(!e?.id)return J(void 0),void y("");const t=m&&m!==L?.key?m:e.id;J({...d()(e,"id"),key:e.id}),y(t)},organization:t,showOther:!0,noAutoFilter:!0}),(0,O.tZ)(M.ZP,{...ue,onChange:e=>oe(e)}),me,H&&(0,O.tZ)(x.bZ,{type:"error",children:Object.keys(H).map((e=>(0,O.BX)("div",{children:[(0,O.tZ)("strong",{children:u()(e)}),": ",H[e]]},e)))})]})})}L.displayName="CreateProject";const F=(0,a.Z)("form",{target:"e84eeos6"})("display:grid;grid-template-columns:300px minmax(250px, max-content) max-content;gap:",(0,s.D)(2),";align-items:end;padding:",(0,s.D)(3)," 0;box-shadow:0 -1px 0 rgba(0, 0, 0, 0.1);background:",(e=>e.theme.background),";"),I=(0,a.Z)("div",{target:"e84eeos5"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";margin-bottom:",(0,s.D)(1),";"),X=(0,a.Z)("div",{target:"e84eeos4"})({name:"bjn8wh",styles:"position:relative"}),B=(0,a.Z)(y.Z,{target:"e84eeos3"})("padding-left:calc(",(e=>e.theme.formPadding.md.paddingLeft),"px * 1.5 + 20px);"),U=(0,a.Z)(m.v,{target:"e84eeos2"})("position:absolute;top:50%;left:",(e=>e.theme.formPadding.md.paddingLeft),"px;transform:translateY(-50%);"),W=(0,a.Z)("div",{target:"e84eeos1"})("display:grid;gap:",(0,s.D)(1),";grid-template-columns:1fr min-content;align-items:center;"),G=(0,a.Z)("p",{target:"e84eeos0"})("color:",(e=>e.theme.subText),";max-width:760px;");function J(){return(0,O.tZ)(r.Z,{children:(0,O.tZ)(Q,{children:(0,O.tZ)("div",{className:"container",children:(0,O.tZ)(Y,{children:(0,O.tZ)(L,{})})})})})}J.displayName="NewProject";const Q=(0,a.Z)("div",{target:"e1ltwwy41"})("flex:1;background:",(e=>e.theme.background),";"),Y=(0,a.Z)("div",{target:"e1ltwwy40"})("margin-top:",(0,s.D)(3),";"),H=J},"./app/views/projects/gettingStartedWithProjectContext.tsx":(e,t,o)=>{o.d(t,{p:()=>n,x:()=>i});var a=o("../node_modules/react/index.js"),r=o("./app/utils/useSessionStorage.tsx"),s=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,a.createContext)({project:void 0,setProject:()=>{}});function i(e){let{children:t,project:o}=e;const[i,c]=(0,r.X)("getting-started-with-project",{project:o}),l=(0,a.useCallback)((e=>{c({project:e})}),[c]);return(0,s.tZ)(n.Provider,{value:{project:i.project,setProject:l},children:t})}i.displayName="GettingStartedWithProjectContextProvider"}}]);
//# sourceMappingURL=../sourcemaps/app_views_projectInstall_newProject_tsx.780cedf000a7825b5febace4dbdf350a.js.map