"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationTeams_teamProjects_tsx"],{"./app/components/panels/panelHeader.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),a=s("./app/styles/space.tsx");const i=e=>{let{disablePadding:t,hasButtons:s}=e;return(0,n.iv)("padding:",s?(0,a.D)(1):(0,a.D)(2)," ",t?0:(0,a.D)(2),";","")},r=(0,o.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",i,";")},"./app/views/settings/components/settingsProjectItem.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("./app/components/idBadge/projectBadge.tsx"),a=s("./app/components/projects/bookmarkStar.tsx"),i=s("./app/styles/space.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{project:t,organization:s}=e;return(0,r.BX)(c,{children:[(0,r.tZ)(a.Z,{organization:s,project:t}),(0,r.tZ)(n.Z,{to:`/settings/${s.slug}/projects/${t.slug}/`,avatarSize:18,project:t})]})}p.displayName="ProjectItem";const c=(0,o.Z)("div",{target:"e129o40m0"})("display:grid;grid-template-columns:max-content 1fr;align-items:center;gap:",(0,i.D)(1.5),";"),l=p},"./app/views/settings/organizationTeams/teamProjects.tsx":(e,t,s)=>{s.r(t),s.d(t,{TeamProjects:()=>_,default:()=>C});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("../node_modules/react/index.js"),i=s("./app/actionCreators/indicator.tsx"),r=s("./app/components/acl/access.tsx"),p=s("./app/components/button.tsx"),c=s("./app/components/dropdownAutoComplete/index.tsx"),l=s("./app/components/dropdownButton.tsx"),d=s("./app/components/emptyMessage.tsx"),m=s("./app/components/loadingError.tsx"),h=s("./app/components/loadingIndicator.tsx"),u=s("./app/components/pagination.tsx"),g=s("./app/components/panels/panel.tsx"),j=s("./app/components/panels/panelBody.tsx"),x=s("./app/components/panels/panelHeader.tsx"),Z=s("./app/components/panels/panelItem.tsx"),y=s("./app/components/tooltip.tsx"),b=s("./app/icons/index.tsx"),f=s("./app/locale.tsx"),P=s("./app/stores/projectsStore.tsx"),v=s("./app/styles/space.tsx"),w=s("./app/utils.tsx"),k=s("./app/utils/withApi.tsx"),z=s("./app/utils/withOrganization.tsx"),S=s("./app/views/settings/components/settingsProjectItem.tsx"),A=s("./app/views/settings/components/text/textBlock.tsx"),T=s("./app/views/settings/project/permissionAlert.tsx"),B=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class _ extends a.Component{constructor(){super(...arguments),(0,o.Z)(this,"state",{error:!1,loading:!0,pageLinks:null,unlinkedProjects:[],linkedProjects:[]}),(0,o.Z)(this,"fetchAll",(()=>{this.fetchTeamProjects(),this.fetchUnlinkedProjects()})),(0,o.Z)(this,"handleLinkProject",((e,t)=>{const{organization:s}=this.props,{teamId:o}=this.props.params;this.props.api.request(`/projects/${s.slug}/${e.slug}/teams/${o}/`,{method:"add"===t?"POST":"DELETE",success:e=>{this.fetchAll(),P.Z.onUpdateSuccess(e),(0,i.S9)("add"===t?(0,f.t)("Successfully added project to team."):(0,f.t)("Successfully removed project from team"))},error:()=>{(0,i.Iw)((0,f.t)("Wasn't able to change project association."))}})})),(0,o.Z)(this,"handleProjectSelected",(e=>{const t=this.state.unlinkedProjects.find((t=>t.id===e.value));t&&this.handleLinkProject(t,"add")})),(0,o.Z)(this,"handleQueryUpdate",(e=>{this.fetchUnlinkedProjects(e.target.value)}))}componentDidMount(){this.fetchAll()}componentDidUpdate(e){e.organization.slug===this.props.organization.slug&&e.params.teamId===this.props.params.teamId||this.fetchAll(),e.location!==this.props.location&&this.fetchTeamProjects()}fetchTeamProjects(){const{location:e,organization:t,params:{teamId:s}}=this.props;this.setState({loading:!0}),this.props.api.requestPromise(`/organizations/${t.slug}/projects/`,{query:{query:`team:${s}`,cursor:e.query.cursor||""},includeAllArgs:!0}).then((e=>{let[t,s,o]=e;this.setState({loading:!1,error:!1,linkedProjects:t,pageLinks:o?.getResponseHeader("Link")??null})})).catch((()=>{this.setState({loading:!1,error:!0})}))}fetchUnlinkedProjects(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const{organization:t,params:{teamId:s}}=this.props;this.props.api.requestPromise(`/organizations/${t.slug}/projects/`,{query:{query:e?`!team:${s} ${e}`:`!team:${s}`}}).then((e=>{this.setState({unlinkedProjects:e})}))}projectPanelContents(e){const{organization:t,team:s}=this.props,o=(0,r.d)(["team:write"],{organization:t,team:s});return e.length?(0,w.Mx)(e).map((e=>(0,B.BX)(I,{children:[(0,B.tZ)(S.Z,{project:e,organization:t}),(0,B.tZ)(y.u,{disabled:o,title:(0,f.t)("You do not have enough permission to change project association."),children:(0,B.tZ)(p.zx,{size:"sm",disabled:!o,icon:(0,B.tZ)(b.JZ,{isCircled:!0,size:"xs"}),"aria-label":(0,f.t)("Remove"),onClick:()=>{this.handleLinkProject(e,"remove")},children:(0,f.t)("Remove")})})]},e.id))):(0,B.tZ)(d.Z,{size:"large",icon:(0,B.tZ)(b.Gy,{size:"xl"}),children:(0,f.t)("This team doesn't have access to any projects.")})}render(){const{organization:e,team:t}=this.props,{linkedProjects:s,unlinkedProjects:o,error:n,loading:i}=this.state;if(n)return(0,B.tZ)(m.Z,{onRetry:()=>this.fetchAll()});if(i)return(0,B.tZ)(h.Z,{});const p=(0,r.d)(["team:write"],{organization:e,team:t}),d=o.filter((e=>e.access.includes("project:write"))).map((e=>({value:e.id,searchKey:e.slug,label:(0,B.tZ)($,{children:e.slug})})));return(0,B.BX)(a.Fragment,{children:[(0,B.tZ)(A.Z,{children:(0,f.t)("If you have Team Admin permissions for other projects, you can associate them with this team.")}),(0,B.tZ)(T.Z,{access:["team:write"],team:t}),(0,B.BX)(g.Z,{children:[(0,B.BX)(x.Z,{hasButtons:!0,children:[(0,B.tZ)("div",{children:(0,f.t)("Projects")}),(0,B.tZ)("div",{style:{textTransform:"none"},children:p?(0,B.tZ)(c.Z,{items:d,onChange:this.handleQueryUpdate,onSelect:this.handleProjectSelected,emptyMessage:(0,f.t)("You are not an admin for any other projects"),alignMenu:"right",children:e=>{let{isOpen:t}=e;return(0,B.tZ)(l.Z,{isOpen:t,size:"xs",children:(0,f.t)("Add Project")})}}):(0,B.tZ)(l.Z,{disabled:!0,title:(0,f.t)("You do not have enough permission to associate a project."),size:"xs",children:(0,f.t)("Add Project")})})]}),(0,B.tZ)(j.Z,{children:this.projectPanelContents(s)})]}),(0,B.tZ)(u.Z,{pageLinks:this.state.pageLinks,...this.props})]})}}_.displayName="TeamProjects";const I=(0,n.Z)(Z.Z,{target:"ecat2ls1"})("display:flex;align-items:center;justify-content:space-between;padding:",(0,v.D)(2),";"),$=(0,n.Z)("div",{target:"ecat2ls0"})("padding:",(0,v.D)(.25)," 0;"),C=(0,k.Z)((0,z.Z)(_))},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var o=s("./app/components/acl/access.tsx"),n=s("./app/components/alert.tsx"),a=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=(0,a.t)("These settings can only be edited by users with the organization-level owner, manager, or team-level admin roles.");function p(e){let{access:t=["project:write"],project:s,team:a,...p}=e;return(0,i.tZ)(o.Z,{access:t,project:s,team:a,children:e=>{let{hasAccess:t}=e;return!t&&(0,i.tZ)(n.bZ,{"data-test-id":"project-permission-alert",type:"warning",...p,children:r})}})}p.displayName="PermissionAlert";const c=p}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationTeams_teamProjects_tsx.6a170baef973d83c4a937fe06a1cfec9.js.map