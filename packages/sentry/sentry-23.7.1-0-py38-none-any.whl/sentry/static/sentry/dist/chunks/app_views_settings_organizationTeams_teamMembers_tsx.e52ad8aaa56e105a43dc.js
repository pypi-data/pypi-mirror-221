"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationTeams_teamMembers_tsx"],{"./app/components/panels/panelHeader.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),a=s("./app/styles/space.tsx");const n=e=>{let{disablePadding:t,hasButtons:s}=e;return(0,r.iv)("padding:",s?(0,a.D)(1):(0,a.D)(2)," ",t?0:(0,a.D)(2),";","")},i=(0,o.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",n,";")},"./app/components/roleSelectControl.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/components/forms/controls/selectControl.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(e){let{roles:t,disableUnallowed:s,...o}=e;return(0,a.tZ)(r.Z,{options:t?.map((e=>({value:e.id,label:e.name,disabled:s&&!e.allowed||e.isRetired,details:(0,a.tZ)(m,{children:e.desc})}))),showDividers:!0,...o})}n.displayName="RoleSelectControl";const i=n,m=(0,o.Z)("span",{target:"eu9y8de0"})({name:"vad6xm",styles:"display:inline-block;width:20rem"})},"./app/components/teamRoleSelect.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/es.array.push.js"),s("./app/components/roleSelectControl.tsx")),a=s("./app/styles/space.tsx"),n=s("./app/utils/orgRole.tsx"),i=s("./app/views/settings/organizationTeams/roleOverwriteWarning.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{organization:t,team:s,member:o,onChangeTeamRole:a,disabled:l,size:d}=e;const{orgRoleList:u,teamRoleList:g,features:h}=t,b=h.includes("team-roles"),x=[o.orgRole];o.groupOrgRoles&&o.groupOrgRoles.length>0&&x.push(o.groupOrgRoles[0].role.id),s.orgRole&&x.push(s.orgRole);const Z=(0,n.M)(x,u);if((0,i.d8)({orgRole:Z?.id,orgRoleList:u,teamRoleList:g})){const e=g.find((e=>e.id===Z?.minimumTeamRole));return(0,m.BX)(p,{children:[e?.name||Z?.minimumTeamRole,(0,m.tZ)(c,{children:(0,m.tZ)(i.Sk,{orgRole:Z?.id,orgRoleList:u,teamRoleList:g})})]})}const f=o.teamRole||o.teamRoles?.find((e=>e.teamSlug===s.slug))?.role||null,v=g.find((e=>e.id===f))||g[0];return(0,m.tZ)(r.Z,{disabled:l||!b,disableUnallowed:!1,roles:g,value:v.id,onChange:e=>a(e.value),size:d})}l.displayName="TeamRoleSelect";const d=l,p=(0,o.Z)("div",{target:"ermz4er1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),c=(0,o.Z)("div",{target:"ermz4er0"})("height:",(0,a.D)(2),";margin-left:",(0,a.D)(1),";")},"./app/components/teamRoleUtils.tsx":(e,t,s)=>{s.d(t,{W:()=>m});var o=s("../node_modules/react/index.js"),r=s("./app/components/hookOrDefault.tsx"),a=s("./app/locale.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,r.Z)({hookName:"sidebar:item-label",defaultComponent:e=>{let{children:t}=e;return(0,n.tZ)(o.Fragment,{children:t})}});function m(){return(0,n.tZ)(i,{id:"team-roles-upsell",children:(0,a.t)("Team Roles")})}m.displayName="TeamRoleColumnLabel"},"./app/utils/orgRole.tsx":(e,t,s)=>{function o(e,t){const s=t.reduce(((e,t,s)=>(e[t.id]={index:s,role:t},e)),{});return e.sort(((e,t)=>s[t].index-s[e].index)),s[e[0]]?.role}s.d(t,{M:()=>o})},"./app/views/deprecatedAsyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var o=s("./app/components/deprecatedAsyncComponent.tsx"),r=s("./app/components/sentryDocumentTitle.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class n extends o.Z{getTitle(){return""}render(){return(0,a.tZ)(r.Z,{title:this.getTitle(),children:this.renderComponent()})}}n.displayName="DeprecatedAsyncView"},"./app/views/settings/organizationTeams/roleOverwriteWarning.tsx":(e,t,s)=>{s.d(t,{Sk:()=>m,d8:()=>d,pu:()=>l});var o=s("./app/components/panels/panelAlert.tsx"),r=s("./app/components/tooltip.tsx"),a=s("./app/icons/index.tsx"),n=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){return d(e)?(0,i.tZ)(r.u,{title:p(e),children:(0,i.tZ)(a.aU,{size:"sm",color:"gray300"})}):null}function l(e){return d(e)?(0,i.tZ)(o.Z,{"data-test-id":"alert-role-overwrite",children:p(e)}):null}function d(e){const{orgRole:t,orgRoleList:s,teamRoleList:o}=e,r=s.find((e=>e.id===t));return o.findIndex((e=>e.id===r?.minimumTeamRole))>0}function p(e){const{orgRole:t,orgRoleList:s,teamRoleList:o,isSelf:r}=e,a=s.find((e=>e.id===t)),m=o.find((e=>e.id===a?.minimumTeamRole));return a&&m?(0,n._N)("[selfNoun] organization role as [article] [orgRole] has granted [selfPronoun] a minimum team-level role of [teamRole]",{selfNoun:r?"Your":"This user's",selfPronoun:r?"you":"them",article:"AEIOU".includes(a.name[0])?"an":"a",orgRole:(0,i.tZ)("strong",{children:a.name}),teamRole:(0,i.tZ)("strong",{children:m.name})}):""}m.displayName="RoleOverwriteIcon",l.displayName="RoleOverwritePanelAlert"},"./app/views/settings/organizationTeams/teamMembers.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>Y});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/es.regexp.flags.js"),s("../node_modules/react/index.js")),n=s("../node_modules/lodash/debounce.js"),i=s.n(n),m=s("./app/actionCreators/indicator.tsx"),l=s("./app/actionCreators/modal.tsx"),d=s("./app/actionCreators/teams.tsx"),p=s("./app/components/acl/access.tsx"),c=s("./app/components/avatar/userAvatar.tsx"),u=s("./app/components/dropdownAutoComplete/index.tsx"),g=s("./app/components/dropdownButton.tsx"),h=s("./app/components/emptyMessage.tsx"),b=s("./app/components/links/link.tsx"),x=s("./app/components/loadingError.tsx"),Z=s("./app/components/pagination.tsx"),f=s("./app/components/panels/panel.tsx"),v=s("./app/components/panels/panelHeader.tsx"),w=s("./app/components/teamRoleUtils.tsx"),y=s("./app/icons/index.tsx"),R=s("./app/locale.tsx"),M=s("./app/styles/space.tsx"),z=s("./app/utils/withApi.tsx"),T=s("./app/utils/withConfig.tsx"),j=s("./app/utils/withOrganization.tsx"),S=s("./app/views/deprecatedAsyncView.tsx"),C=s("./app/views/settings/components/text/textBlock.tsx"),O=s("./app/components/button.tsx"),I=s("./app/components/idBadge/index.tsx"),k=s("./app/components/panels/panelItem.tsx"),_=s("./app/components/teamRoleSelect.tsx"),A=s("./app/views/settings/organizationTeams/utils.tsx"),B=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function D(e){let{organization:t,team:s,member:o,user:r,hasWriteAccess:a,isOrgOwner:n,removeMember:i,updateMemberRole:m}=e;const l=r.email===o.email;return(0,B.BX)(P,{children:[(0,B.tZ)("div",{children:(0,B.tZ)(I.Z,{avatarSize:36,member:o,useLink:!0,orgId:t.slug})}),(0,B.tZ)(q,{children:(0,B.tZ)(_.Z,{disabled:l||!a,organization:t,team:s,member:o,onChangeTeamRole:e=>m(o,e)})}),(0,B.tZ)("div",{children:(0,B.tZ)(N,{hasWriteAccess:a,hasOrgRoleFromTeam:null!==s.orgRole,isOrgOwner:n,isSelf:l,onClick:()=>i(o),member:o})})]},o.id)}function N(e){const{member:t,hasWriteAccess:s,isOrgOwner:o,isSelf:r,hasOrgRoleFromTeam:a,onClick:n}=e,i=s||r;if(!i)return(0,B.tZ)(O.zx,{size:"xs",disabled:!0,icon:(0,B.tZ)(y.JZ,{size:"xs",isCircled:!0}),"aria-label":(0,R.t)("Remove"),title:(0,R.t)("You do not have permission to remove a member from this team."),children:(0,R.t)("Remove")});const m=t.flags["idp:provisioned"],l=a&&!o,d=(0,A.m)(m,l);if(m||l)return(0,B.tZ)(O.zx,{size:"xs",disabled:!0,icon:(0,B.tZ)(y.JZ,{size:"xs",isCircled:!0}),"aria-label":(0,R.t)("Remove"),title:d,children:(0,R.t)("Remove")});const p=r?(0,R.t)("Leave"):(0,R.t)("Remove");return(0,B.tZ)(O.zx,{"data-test-id":`button-remove-${t.id}`,size:"xs",disabled:!i,icon:(0,B.tZ)(y.JZ,{size:"xs",isCircled:!0}),onClick:n,"aria-label":p,children:p})}D.displayName="TeamMembersRow",N.displayName="RemoveButton";const q=(0,r.Z)("div",{target:"eqg848x1"})({name:"5b6t4c",styles:"display:flex;flex-direction:row;align-items:center;>div:first-child{flex-grow:1;}"}),L=`\n  display: grid;\n  grid-template-columns: minmax(100px, 1fr) 200px 95px;\n  gap: ${(0,M.D)(1)};\n`,P=(0,r.Z)(k.Z,{target:"eqg848x0"})(L,";align-items:center;>div:last-child{margin-left:auto;}"),F=D;var $=s("./app/views/settings/project/permissionAlert.tsx");class U extends S.Z{constructor(){super(...arguments),(0,o.Z)(this,"debouncedFetchMembersRequest",i()((e=>this.setState({dropdownBusy:!0},(()=>this.fetchMembersRequest(e)))),200)),(0,o.Z)(this,"fetchMembersRequest",(async e=>{const{organization:t,api:s}=this.props;try{const o=await s.requestPromise(`/organizations/${t.slug}/members/`,{query:{query:e}});this.setState({orgMembers:o,dropdownBusy:!1})}catch(e){(0,m.Iw)((0,R.t)("Unable to load organization members."),{duration:2e3}),this.setState({dropdownBusy:!1})}})),(0,o.Z)(this,"addTeamMember",(e=>{const{organization:t,params:s}=this.props,{orgMembers:o,teamMembers:r}=this.state;this.debouncedFetchMembersRequest(""),(0,d.um)(this.props.api,{orgId:t.slug,teamId:s.teamId,memberId:e.value},{success:()=>{const t=o.find((t=>t.id===e.value));void 0!==t&&(this.setState({error:!1,teamMembers:r.concat([t])}),(0,m.S9)((0,R.t)("Successfully added member to team.")))},error:()=>{(0,m.Iw)((0,R.t)("Unable to add team member."))}})})),(0,o.Z)(this,"removeTeamMember",(e=>{const{organization:t,params:s}=this.props,{teamMembers:o}=this.state;(0,d.s)(this.props.api,{orgId:t.slug,teamId:s.teamId,memberId:e.id},{success:()=>{this.setState({teamMembers:o.filter((t=>t.id!==e.id))}),(0,m.S9)((0,R.t)("Successfully removed member from team."))},error:()=>(0,m.Iw)((0,R.t)("There was an error while trying to remove a member from the team."))})})),(0,o.Z)(this,"updateTeamMemberRole",((e,t)=>{const{organization:s}=this.props,{teamId:o}=this.props.params,r=`/organizations/${s.slug}/members/${e.id}/teams/${o}/`;this.props.api.request(r,{method:"PUT",data:{teamRole:t},success:t=>{const s=[...this.state.teamMembers],o=s.findIndex((t=>t.id===e.id));s[o]={...e,teamRole:t.teamRole},this.setState({teamMembers:s}),(0,m.S9)((0,R.t)("Successfully changed role for team member."))},error:()=>{(0,m.Iw)((0,R.t)("There was an error while trying to change the roles for a team member."))}})})),(0,o.Z)(this,"handleMemberFilterChange",(e=>{this.setState({dropdownBusy:!0}),this.debouncedFetchMembersRequest(e.target.value)}))}getDefaultState(){return{...super.getDefaultState(),error:!1,dropdownBusy:!1,teamMembers:[],orgMembers:[]}}componentDidMount(){super.componentDidMount(),this.fetchMembersRequest("")}getEndpoints(){const{organization:e,params:t}=this.props;return[["teamMembers",`/teams/${e.slug}/${t.teamId}/members/`,{},{paginate:!0}]]}renderDropdown(e){const{organization:t,params:s,team:o}=this.props,{orgMembers:r}=this.state,a=new Set(this.state.teamMembers.map((e=>e.id))),n=!!t?.openMembership||e,i=o.flags["idp:provisioned"],m=(r||[]).filter((e=>!a.has(e.id))).map((e=>({searchKey:`${e.name} ${e.email}`,value:e.id,label:(0,B.BX)(W,{children:[(0,B.tZ)(E,{user:e,size:24,className:"avatar"}),(0,B.tZ)(X,{children:e.name||e.email})]})}))),d=(0,B.BX)(H,{children:[(0,R.t)("Members"),(0,B.tZ)(J,{to:"",onClick:()=>(0,l.openInviteMembersModal)({source:"teams"}),"data-test-id":"invite-member",children:(0,R.t)("Invite Member")})]});return(0,B.tZ)(u.Z,{closeOnSelect:!1,items:m,alignMenu:"right",onSelect:n?this.addTeamMember:e=>(0,l.openTeamAccessRequestModal)({teamId:s.teamId,orgId:t.slug,memberId:e.value}),menuHeader:d,emptyMessage:(0,R.t)("No members"),onChange:this.handleMemberFilterChange,busy:this.state.dropdownBusy,onClose:()=>this.debouncedFetchMembersRequest(""),disabled:i,"data-test-id":"add-member-menu",children:e=>{let{isOpen:t}=e;return(0,B.tZ)(g.Z,{isOpen:t,size:"xs","data-test-id":"add-member",disabled:i,children:(0,R.t)("Add Member")})}})}renderPageTextBlock(){const{organization:e,team:t}=this.props,{openMembership:s}=e,o=t.flags["idp:provisioned"];return o?(0,A.m)(o):s?(0,R.t)('"Open Membership" is enabled for the organization. Anyone can add members for this team.'):(0,R.t)('"Open Membership" is disabled for the organization. Org Owner/Manager/Admin, or Team Admins can add members for this team.')}render(){if(this.state.error)return(0,B.tZ)(x.Z,{onRetry:this.fetchData});const{organization:e,config:t,team:s}=this.props,{teamMembersPageLinks:o}=this.state,{access:r,openMembership:n}=e,i=(0,p.d)(["org:write"],{organization:e,team:s}),m=(0,p.d)(["team:admin"],{organization:e,team:s}),l=i||m,d=r.includes("org:admin");return(0,B.BX)(a.Fragment,{children:[(0,B.tZ)(C.Z,{children:this.renderPageTextBlock()}),(0,B.tZ)($.Z,{access:n?["org:read"]:["team:write"],team:s}),(0,B.BX)(f.Z,{children:[(0,B.BX)(V,{hasButtons:!0,children:[(0,B.tZ)("div",{children:(0,R.t)("Members")}),(0,B.tZ)("div",{children:(0,B.tZ)(w.W,{})}),(0,B.tZ)("div",{style:{textTransform:"none"},children:this.renderDropdown(l)})]}),this.state.teamMembers.length?this.state.teamMembers.map((o=>(0,B.tZ)(F,{hasWriteAccess:l,isOrgOwner:d,organization:e,team:s,member:o,user:t.user,removeMember:this.removeTeamMember,updateMemberRole:this.updateTeamMemberRole},o.id))):(0,B.tZ)(h.Z,{icon:(0,B.tZ)(y.qO,{size:"xl"}),size:"large",children:(0,R.t)("This team has no members")})]}),(0,B.tZ)(Z.Z,{pageLinks:o})]})}}U.displayName="TeamMembers";const W=(0,r.Z)("div",{target:"e1anr5pt5"})("display:grid;grid-template-columns:max-content 1fr;gap:",(0,M.D)(.5),";align-items:center;"),X=(0,r.Z)("div",{target:"e1anr5pt4"})("font-size:",(e=>e.theme.fontSizeSmall),";",(e=>e.theme.overflowEllipsis),";"),E=(0,r.Z)((e=>(0,B.tZ)(c.Z,{...e})),{target:"e1anr5pt3"})({name:"1dy9mco",styles:"min-width:1.75em;min-height:1.75em;width:1.5em;height:1.5em"}),H=(0,r.Z)("div",{target:"e1anr5pt2"})("display:grid;grid-template-columns:1fr max-content;padding:",(0,M.D)(1)," 0;font-size:",(e=>e.theme.fontSizeExtraSmall),";text-transform:uppercase;"),J=(0,r.Z)(b.Z,{target:"e1anr5pt1"})({name:"kxbue8",styles:"text-transform:none"}),V=(0,r.Z)(v.Z,{target:"e1anr5pt0"})(L,";"),Y=(0,T.Z)((0,z.Z)((0,j.Z)(U)))},"./app/views/settings/organizationTeams/utils.tsx":(e,t,s)=>{s.d(t,{m:()=>r});var o=s("./app/locale.tsx");function r(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(0,o.t)("Membership to this team is managed through your organization's identity provider."):e?(0,o.t)("Membership to a team with an organization role is managed by org owners."):void 0}},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var o=s("./app/components/acl/access.tsx"),r=s("./app/components/alert.tsx"),a=s("./app/locale.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,a.t)("These settings can only be edited by users with the organization-level owner, manager, or team-level admin roles.");function m(e){let{access:t=["project:write"],project:s,team:a,...m}=e;return(0,n.tZ)(o.Z,{access:t,project:s,team:a,children:e=>{let{hasAccess:t}=e;return!t&&(0,n.tZ)(r.bZ,{"data-test-id":"project-permission-alert",type:"warning",...m,children:i})}})}m.displayName="PermissionAlert";const l=m}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationTeams_teamMembers_tsx.b11a471cd6e350d001b1a75af1c222a3.js.map