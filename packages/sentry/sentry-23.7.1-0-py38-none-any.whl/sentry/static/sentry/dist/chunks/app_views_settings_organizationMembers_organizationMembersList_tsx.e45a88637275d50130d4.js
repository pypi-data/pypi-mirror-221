"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationMembers_organizationMembersList_tsx"],{"./app/components/compactSelect/composite.tsx":(e,t,i)=>{i.d(t,{a:()=>h});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=i("../node_modules/react/index.js"),o=i("../node_modules/@react-aria/focus/dist/import.mjs"),r=i("../node_modules/@react-stately/collections/dist/import.mjs"),a=i("./app/locale.tsx"),l=i("./app/styles/space.tsx"),d=i("./app/components/compactSelect/control.tsx"),m=i("./app/components/compactSelect/list.tsx"),p=i("./app/components/compactSelect/styles.tsx"),c=i("./app/components/compactSelect/utils.tsx"),u=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){let{children:t,grid:i,disabled:s,emptyMessage:r,size:l="md",...m}=e;return(0,u.tZ)(d.o,{...m,grid:i,size:l,disabled:s,children:(0,u.tZ)(o.MT,{children:(0,u.BX)(v,{children:[n.Children.map(t,((e,t)=>e?(0,u.tZ)(g,{...e.props,grid:i,size:l,compositeIndex:t}):null)),(0,u.tZ)(p.Mg,{children:r??(0,a.t)("No options found")})]})})})}function g(e){let{options:t,value:i,defaultValue:s,onChange:o,multiple:a,disallowEmptySelection:l,isOptionDisabled:d,closeOnSelect:p,size:h,compositeIndex:g,label:v,...b}=e;const x=(0,n.useMemo)((()=>({multiple:a,value:i,defaultValue:s,closeOnSelect:p,onChange:o})),[a,i,s,o,p]),y=(0,n.useMemo)((()=>(0,c.MG)(t)),[t]);return(0,u.tZ)(m.a,{...b,...x,items:y,disallowEmptySelection:l,isOptionDisabled:d,shouldFocusWrap:!1,compositeIndex:g,size:h,label:v,children:e=>(0,u.tZ)(r.ck,{...e,children:e.label},e.value)})}h.displayName="CompositeSelect",h.Region=function(e){return null},g.displayName="Region";const v=(0,s.Z)("div",{target:"eaws7mh0"})("min-height:0;overflow:auto;padding:",(0,l.D)(.5)," 0;[data-menu-has-header='true']>div>&{padding-top:calc(",(0,l.D)(.5)," + 1px);}[data-menu-has-footer='true']>div>&{padding-bottom:calc(",(0,l.D)(.5)," + 1px);}>ul{padding:0;}")},"./app/components/panels/panelHeader.tsx":(e,t,i)=>{i.d(t,{Z:()=>a});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=i("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=i("./app/styles/space.tsx");const r=e=>{let{disablePadding:t,hasButtons:i}=e;return(0,n.iv)("padding:",i?(0,o.D)(1):(0,o.D)(2)," ",t?0:(0,o.D)(2),";","")},a=(0,s.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",r,";")},"./app/components/roleSelectControl.tsx":(e,t,i)=>{i.d(t,{Z:()=>a});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=i("./app/components/forms/controls/selectControl.tsx"),o=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){let{roles:t,disableUnallowed:i,...s}=e;return(0,o.tZ)(n.Z,{options:t?.map((e=>({value:e.id,label:e.name,disabled:i&&!e.allowed||e.isRetired,details:(0,o.tZ)(l,{children:e.desc})}))),showDividers:!0,...s})}r.displayName="RoleSelectControl";const a=r,l=(0,s.Z)("span",{target:"eu9y8de0"})({name:"vad6xm",styles:"display:inline-block;width:20rem"})},"./app/utils/isMemberDisabledFromLimit.tsx":(e,t,i)=>{function s(e){return e?.flags["member-limit:restricted"]??!1}i.d(t,{Z:()=>s})},"./app/utils/orgRole.tsx":(e,t,i)=>{function s(e,t){const i=t.reduce(((e,t,i)=>(e[t.id]={index:i,role:t},e)),{});return e.sort(((e,t)=>i[t].index-i[e].index)),i[e[0]]?.role}i.d(t,{M:()=>s})},"./app/utils/routeTitle.tsx":(e,t,i)=>{i.d(t,{Z:()=>s});const s=function(e,t){let i=arguments.length>3?arguments[3]:void 0;const s=`${e} - ${t}`,n=i?`${s} - ${i}`:s;return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?n:`${n} - Sentry`}},"./app/views/deprecatedAsyncView.tsx":(e,t,i)=>{i.d(t,{Z:()=>r});var s=i("./app/components/deprecatedAsyncComponent.tsx"),n=i("./app/components/sentryDocumentTitle.tsx"),o=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends s.Z{getTitle(){return""}render(){return(0,o.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="DeprecatedAsyncView"},"./app/views/settings/components/defaultSearchBar.tsx":(e,t,i)=>{i.d(t,{_:()=>o});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=i("./app/styles/space.tsx");const o=(0,s.Z)("div",{target:"e1wlcrsk0"})("display:flex;grid-template-columns:1fr max-content;gap:",(0,n.D)(1.5),";margin-top:",(0,n.D)(4),";margin-bottom:",(0,n.D)(1.5),";position:relative;")},"./app/views/settings/organizationMembers/organizationMembersList.tsx":(e,t,i)=>{i.r(t),i.d(t,{default:()=>qe});var s=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(i("../node_modules/core-js/modules/es.regexp.flags.js"),i("../node_modules/react/index.js")),r=i("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),a=i("./app/actionCreators/indicator.tsx"),l=i("./app/actionCreators/members.tsx"),d=i("./app/actionCreators/organizations.tsx"),m=i("./app/components/emptyMessage.tsx"),p=i("./app/components/hookOrDefault.tsx"),c=i("./app/components/pagination.tsx"),u=i("./app/components/panels/panel.tsx"),h=i("./app/components/panels/panelBody.tsx"),g=i("./app/components/panels/panelHeader.tsx"),v=i("./app/constants/index.tsx"),b=i("./app/locale.tsx"),x=i("./app/stores/configStore.tsx"),y=i("./app/styles/space.tsx"),Z=i("./app/utils/analytics.tsx"),f=i("./app/utils/routeTitle.tsx"),w=i("./app/utils/theme.tsx"),z=i("./app/utils/withOrganization.tsx"),R=i("./app/views/deprecatedAsyncView.tsx"),S=i("./app/views/settings/components/defaultSearchBar.tsx"),q=i("./app/components/compactSelect/composite.tsx"),_=i("./app/icons/index.tsx"),I=i("./app/utils/tokenizeSearch.tsx"),k=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const N=e=>Array.isArray(e)&&e.length?e&&e.map((e=>e.toLowerCase())).includes("true")?"true":"false":"all",M=[{value:"all",label:(0,b.t)("All")},{value:"true",label:(0,b.t)("True")},{value:"false",label:(0,b.t)("False")}];function B(e){let{roles:t,query:i,onChange:s}=e;const n=new I.MY(i),o={roles:n.getFilterValues("role")||[],isInvited:N(n.getFilterValues("isInvited")),ssoLinked:N(n.getFilterValues("ssoLinked")),has2fa:N(n.getFilterValues("has2fa"))},r=e=>t=>{const i=n.copy();i.removeFilter(e),"all"!==t.value&&i.setFilterValues(e,[t.value]),s(i.formatString())};return(0,k.BX)(q.a,{triggerProps:{icon:(0,k.tZ)(_.OP,{}),size:"md"},triggerLabel:(0,b.t)("Filter"),maxMenuHeight:"22rem",size:"sm",children:[(0,k.tZ)(q.a.Region,{multiple:!0,label:(0,b.t)("Role"),value:o.roles,options:t.map((e=>{let{id:t,name:i}=e;return{value:t,label:i}})),onChange:e=>{const t=n.copy();t.setFilterValues("role",e.map((e=>e.value))),s(t.formatString())}}),(0,k.tZ)(q.a.Region,{label:(0,b.t)("Invited"),options:M,value:o.isInvited,onChange:r("isInvited"),closeOnSelect:!1}),(0,k.tZ)(q.a.Region,{label:(0,b.t)("2FA"),options:M,value:o.has2fa,onChange:r("has2fa"),closeOnSelect:!1}),(0,k.tZ)(q.a.Region,{label:(0,b.t)("SSO Linked"),options:M,value:o.ssoLinked,onChange:r("ssoLinked"),closeOnSelect:!1})]})}B.displayName="MembersFilter";const C=B;var D=i("./app/components/button.tsx"),L=i("./app/components/confirm.tsx"),j=i("./app/components/panels/panelItem.tsx"),A=i("./app/components/roleSelectControl.tsx"),X=i("./app/components/tag.tsx"),E=i("./app/components/teamSelector.tsx"),T=i("./app/components/tooltip.tsx");const F=(0,p.Z)({hookName:"member-invite-modal:customization",defaultComponent:e=>{let{onSendInvites:t,children:i}=e;return i({sendInvites:t,canSend:!0})}});function $(e){let{inviteRequest:t,inviteRequestBusy:i,organization:s,onApprove:n,onDeny:r,onUpdate:a,allRoles:l}=e;const d=l.find((e=>e.id===t.role)),m=!(d&&d.allowed),{access:p}=s,c=p.includes("member:admin");return(0,k.tZ)(F,{willInvite:!0,organization:s,onSendInvites:()=>n(t),children:e=>{let{sendInvites:s,canSend:n,headerInfo:d}=e;return(0,k.BX)(P,{children:[(0,k.BX)("div",{children:[(0,k.tZ)("h5",{style:{marginBottom:(0,y.D)(.5)},children:(0,k.tZ)(V,{children:t.email})}),"requested_to_be_invited"===t.inviteStatus?t.inviterName&&(0,k.tZ)(U,{children:(0,k.tZ)(T.u,{title:(0,b.t)("An existing member has asked to invite this user to your organization"),children:(0,b._N)("Requested by [inviterName]",{inviterName:t.inviterName})})}):(0,k.tZ)(O,{tooltipText:(0,b.t)("This user has asked to join your organization."),children:(0,b.t)("Join request")})]}),c?(0,k.tZ)(G,{name:"role",disableUnallowed:!0,onChange:e=>a({role:e.value}),value:t.role,roles:l}):(0,k.tZ)("div",{children:t.roleName}),c?(0,k.tZ)(Y,{name:"teams",placeholder:(0,b.t)("Add to teamsâ€¦"),onChange:e=>a({teams:(e||[]).map((e=>e.value))}),value:t.teams,clearable:!0,multiple:!0}):(0,k.tZ)("div",{children:t.teams.join(", ")}),(0,k.BX)(H,{children:[(0,k.tZ)(D.zx,{size:"sm",busy:i[t.id],onClick:()=>r(t),icon:(0,k.tZ)(_.bM,{}),disabled:!c,title:c?void 0:(0,b.t)("This request needs to be reviewed by a privileged user"),children:(0,b.t)("Deny")}),(0,k.tZ)(L.Z,{onConfirm:s,disableConfirmButton:!n,disabled:!c||m,message:(0,k.BX)(o.Fragment,{children:[(0,b._N)("Are you sure you want to invite [email] to your organization?",{email:t.email}),d]}),children:(0,k.tZ)(D.zx,{priority:"primary",size:"sm",busy:i[t.id],title:c?m?(0,b.t)("You do not have permission to approve a user of this role.\n                      Select a different role to approve this user."):void 0:(0,b.t)("This request needs to be reviewed by a privileged user"),icon:(0,k.tZ)(_.DL,{}),children:(0,b.t)("Approve")})})]})]})}})}$.displayName="InviteRequestRow";const O=(0,n.Z)(X.Z,{target:"e1hk34ld6"})({name:"50zrmy",styles:"text-transform:uppercase"}),P=(0,n.Z)(j.Z,{target:"e1hk34ld5"})("display:grid;grid-template-columns:minmax(150px, auto) minmax(100px, 140px) 220px max-content;gap:",(0,y.D)(2),";align-items:center;"),V=(0,n.Z)("div",{target:"e1hk34ld4"})("font-size:",(e=>e.theme.fontSizeLarge),";overflow:hidden;text-overflow:ellipsis;"),U=(0,n.Z)("div",{target:"e1hk34ld3"})("display:block;color:",(e=>e.theme.subText),";font-size:14px;overflow:hidden;text-overflow:ellipsis;"),G=(0,n.Z)(A.Z,{target:"e1hk34ld2"})({name:"pqgixs",styles:"max-width:140px"}),Y=(0,n.Z)(E.Z,{target:"e1hk34ld1"})({name:"1qnipy5",styles:"max-width:220px;.Select-value-label{max-width:150px;word-break:break-all;}"}),H=(0,n.Z)("div",{target:"e1hk34ld0"})("display:inline-grid;grid-template-columns:repeat(2, max-content);gap:",(0,y.D)(1),";"),J=$;var K=i("./app/components/avatar/userAvatar.tsx"),W=i("./app/components/links/link.tsx"),Q=i("./app/components/loadingIndicator.tsx"),ee=(i("../node_modules/core-js/modules/es.error.cause.js"),i("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js")),te=i("./app/components/links/externalLink.tsx"),ie=i("./app/components/questionTooltip.tsx"),se=i("./app/utils/orgRole.tsx");function ne(e){let{organization:t,member:i}=e;const{orgRoleList:s}=t,{orgRole:n,groupOrgRoles:r}=i,a=(0,o.useMemo)((()=>s.find((e=>e.id===n))),[n,s]),l=(0,o.useMemo)((()=>{const e=r.map((e=>e.role.id)).concat([n]);return(0,se.M)(e,s)}),[n,r,s]);if((0,o.useEffect)((()=>{a||ee.$e((e=>{e.setExtra("context",{memberId:i.id,orgRole:i.orgRole}),ee.Tb(new Error("OrgMember has an invalid orgRole."))}))}),[a,i]),(0,o.useEffect)((()=>{l||ee.$e((e=>{e.setExtra("context",{memberId:i.id,orgRoleFromMember:a,groupOrgRoles:r,orgRoleList:s,effectiveOrgRole:l}),ee.Tb(new Error("OrgMember has no effectiveOrgRole."))}))}),[l,i,a,r,s]),!a)return(0,k.tZ)(o.Fragment,{children:(0,b.t)("Error Role")});if(0===r.length)return(0,k.tZ)(o.Fragment,{children:a.name});if(!l)return(0,k.tZ)(o.Fragment,{children:a.name});const d=`/settings/${t.slug}/`,m=(0,k.BX)(re,{children:[(0,k.tZ)("div",{children:(0,b.t)("This user recieved org-level roles from several sources.")}),(0,k.tZ)("div",{children:(0,k.BX)(ae,{children:[(0,k.tZ)(le,{to:`${d}member/${i.id}/`,children:(0,b.t)("User-specific")}),(0,k.BX)("div",{children:[": ",a.name]})]})}),(0,k.BX)("div",{children:[(0,k.BX)("div",{children:[(0,b.t)("Teams"),":"]}),r.sort(((e,t)=>e.teamSlug.localeCompare(t.teamSlug))).map((e=>(0,k.BX)(ae,{children:[(0,k.BX)(le,{to:`${d}teams/${e.teamSlug}/`,children:["#",e.teamSlug]}),(0,k.BX)("div",{children:[": ",e.role.name]})]},e.teamSlug)))]}),(0,k.tZ)("div",{children:(0,b._N)("Sentry will grant them permissions equivalent to the union-set of all their role. [docsLink:See docs here].",{docsLink:(0,k.tZ)(te.Z,{href:"https://docs.sentry.io/product/accounts/membership/#roles"})})})]});return(0,k.BX)(oe,{children:[l.name,(0,k.tZ)(ie.Z,{isHoverable:!0,size:"sm",title:m})]})}ne.displayName="OrgRoleInfo";const oe=(0,n.Z)("span",{target:"eyi1ihy3"})("display:inline-flex;gap:",(0,y.D)(.5),";"),re=(0,n.Z)("div",{target:"eyi1ihy2"})("width:200px;display:grid;row-gap:",(0,y.D)(1.5),";text-align:left;overflow:hidden;"),ae=(0,n.Z)("div",{target:"eyi1ihy1"})({name:"2lyf56",styles:"display:grid;grid-template-columns:auto 1fr;>*{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"}),le=(0,n.Z)(W.Z,{target:"eyi1ihy0"})({name:"1vwvnxt",styles:"max-width:130px;font-weight:700"});var de=i("./app/utils/isMemberDisabledFromLimit.tsx");const me=(0,p.Z)({hookName:"component:disabled-member-tooltip",defaultComponent:e=>{let{children:t}=e;return(0,k.tZ)(o.Fragment,{children:t})}});class pe extends o.PureComponent{constructor(){super(...arguments),(0,s.Z)(this,"state",{busy:!1}),(0,s.Z)(this,"handleRemove",(()=>{const{onRemove:e}=this.props;"function"==typeof e&&(this.setState({busy:!0}),e(this.props.member))})),(0,s.Z)(this,"handleLeave",(()=>{const{onLeave:e}=this.props;"function"==typeof e&&(this.setState({busy:!0}),e(this.props.member))})),(0,s.Z)(this,"handleSendInvite",(()=>{const{onSendInvite:e,member:t}=this.props;"function"==typeof e&&e(t)}))}renderMemberRole(){const{member:e,organization:t}=this.props,{roleName:i,pending:s,expired:n}=e;return(0,de.Z)(e)?(0,k.tZ)(me,{children:(0,b.t)("Deactivated")}):s?(0,k.BX)(ye,{children:[(0,k.tZ)(_.h,{size:"md"}),n?(0,b.t)("Expired Invite"):(0,b._N)("Invited [roleName]",{roleName:i})]}):(0,k.tZ)(ne,{member:e,organization:t})}render(){const{member:e,organization:t,status:i,requireLink:s,memberCanLeave:n,currentUser:r,canRemoveMembers:a,canAddMembers:l}=this.props,{id:d,flags:m,email:p,name:c,pending:u,user:h}=e,g=m["idp:provisioned"],v=!m["sso:linked"]&&s,x=r.email===p,y=!x,Z=x,f=a&&!x&&!g,w=h&&h.has2fa,z=`/settings/${t.slug}/members/${d}/`,R="success"===i,S="loading"===i,q=u||v;return(0,k.BX)(ce,{"data-test-id":p,children:[(0,k.BX)(ge,{children:[(0,k.tZ)(K.Z,{size:32,user:h??{email:p,id:p,name:p,type:"user"}}),(0,k.BX)(ve,{to:z,children:[(0,k.tZ)("h5",{style:{margin:"0 0 3px"},children:(0,k.tZ)(be,{children:c})}),(0,k.tZ)(xe,{children:p})]})]}),(0,k.tZ)("div",{"data-test-id":"member-role",children:this.renderMemberRole()}),(0,k.tZ)("div",{"data-test-id":"member-status",children:q?(0,k.BX)(o.Fragment,{children:[S&&(0,k.tZ)(Ze,{children:(0,k.tZ)(Q.Z,{mini:!0})}),R&&(0,k.tZ)("span",{children:(0,b.t)("Sent!")}),!S&&!R&&(0,k.tZ)(D.zx,{disabled:!l,priority:"primary",size:"sm",onClick:this.handleSendInvite,children:u?(0,b.t)("Resend invite"):(0,b.t)("Resend SSO link")})]}):(0,k.BX)(fe,{children:[w?(0,k.tZ)(_.DL,{isCircled:!0,color:"success"}):(0,k.tZ)(_.Gy,{color:"error"}),w?(0,b.t)("2FA Enabled"):(0,b.t)("2FA Not Enabled")]})}),y||Z?(0,k.BX)(ue,{children:[y&&f&&(0,k.tZ)(L.Z,{message:(0,b._N)("Are you sure you want to remove [name] from [orgName]?",{name:c,orgName:t.slug}),onConfirm:this.handleRemove,children:(0,k.tZ)(D.zx,{"data-test-id":"remove",icon:(0,k.tZ)(_.JZ,{isCircled:!0,size:"xs"}),size:"sm",busy:this.state.busy,children:(0,b.t)("Remove")})}),y&&!f&&(0,k.tZ)(D.zx,{disabled:!0,size:"sm",title:g?(0,b.t)("This user is managed through your organization's identity provider."):(0,b.t)("You do not have access to remove members"),icon:(0,k.tZ)(_.JZ,{isCircled:!0,size:"xs"}),children:(0,b.t)("Remove")}),Z&&n&&(0,k.tZ)(L.Z,{message:(0,b._N)("Are you sure you want to leave [orgName]?",{orgName:t.slug}),onConfirm:this.handleLeave,children:(0,k.tZ)(D.zx,{priority:"danger",size:"sm",icon:(0,k.tZ)(_.bM,{size:"xs"}),children:(0,b.t)("Leave")})}),Z&&!n&&(0,k.tZ)(D.zx,{size:"sm",icon:(0,k.tZ)(_.bM,{size:"xs"}),disabled:!0,title:g?(0,b.t)("Your account is managed through your organization's identity provider."):(0,b.t)("You cannot leave this organization as you are the only organization owner."),children:(0,b.t)("Leave")})]}):null]})}}pe.displayName="OrganizationMemberRow";const ce=(0,n.Z)(j.Z,{target:"eoyh6am9"})("display:grid;grid-template-columns:minmax(150px, 4fr) minmax(90px, 2fr) minmax(120px, 2fr) minmax(\n      100px,\n      1fr\n    );gap:",(0,y.D)(2),";align-items:center;"),ue=(0,n.Z)("div",{target:"eoyh6am8"})({name:"skgbeu",styles:"display:flex;justify-content:flex-end"}),he=(0,n.Z)("div",{target:"eoyh6am7"})("display:inline-grid;grid-template-columns:max-content auto;gap:",(0,y.D)(1),";align-items:center;"),ge=(0,n.Z)(he,{target:"eoyh6am6"})(""),ve=(0,n.Z)(W.Z,{target:"eoyh6am5"})({name:"d3v9zr",styles:"overflow:hidden"}),be=(0,n.Z)("div",{target:"eoyh6am4"})("display:block;overflow:hidden;font-size:",(e=>e.theme.fontSizeMedium),";text-overflow:ellipsis;"),xe=(0,n.Z)("div",{target:"eoyh6am3"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeSmall),";overflow:hidden;text-overflow:ellipsis;"),ye=(0,n.Z)(he,{target:"eoyh6am2"})(""),Ze=(0,n.Z)("div",{target:"eoyh6am1"})("margin-top:0;margin-bottom:",(0,y.D)(1.5),";"),fe=(0,n.Z)(he,{target:"eoyh6am0"})(""),we=(0,p.Z)({hookName:"component:member-list-header",defaultComponent:()=>(0,k.tZ)(g.Z,{children:(0,b.t)("Active Members")})});class ze extends R.Z{constructor(){super(...arguments),(0,s.Z)(this,"removeMember",(async e=>{const{organization:t}=this.props;await this.api.requestPromise(`/organizations/${t.slug}/members/${e}/`,{method:"DELETE",data:{}}),this.setState((t=>({members:t.members.filter((t=>{let{id:i}=t;return i!==e}))})))})),(0,s.Z)(this,"handleRemove",(async e=>{let{id:t,name:i}=e;const{organization:s}=this.props,{slug:n}=s;try{await this.removeMember(t)}catch{return void(0,a.Iw)((0,b._N)("Error removing [name] from [orgName]",{name:i,orgName:n}))}(0,a.S9)((0,b._N)("Removed [name] from [orgName]",{name:i,orgName:n}))})),(0,s.Z)(this,"handleLeave",(async e=>{let{id:t}=e;const{organization:i}=this.props,{slug:s}=i;try{await this.removeMember(t)}catch{return void(0,a.Iw)((0,b._N)("Error leaving [orgName]",{orgName:s}))}(0,d.mx)({orgId:s,removeOrg:!0}),(0,a.S9)((0,b._N)("You left [orgName]",{orgName:s}))})),(0,s.Z)(this,"handleSendInvite",(async e=>{let{id:t,expired:i}=e;this.setState((e=>({invited:{...e.invited,[t]:"loading"}})));const{organization:s}=this.props;try{await(0,l.R_)(this.api,{orgId:s.slug,memberId:t,regenerate:i})}catch{return this.setState((e=>({invited:{...e.invited,[t]:null}}))),void(0,a.Iw)((0,b.t)("Error sending invite"))}this.setState((e=>({invited:{...e.invited,[t]:"success"}})))})),(0,s.Z)(this,"updateInviteRequest",((e,t)=>this.setState((i=>{const s=[...i.inviteRequests],n=s.findIndex((t=>t.id===e));return s[n]={...s[n],...t},{inviteRequests:s}})))),(0,s.Z)(this,"removeInviteRequest",(e=>this.setState((t=>({inviteRequests:t.inviteRequests.filter((t=>t.id!==e))}))))),(0,s.Z)(this,"handleInviteRequestAction",(async e=>{let{inviteRequest:t,method:i,data:s,successMessage:n,errorMessage:o,eventKey:r}=e;const{organization:l}=this.props;this.setState((e=>({inviteRequestBusy:{...e.inviteRequestBusy,[t.id]:!0}})));try{await this.api.requestPromise(`/organizations/${l.slug}/invite-requests/${t.id}/`,{method:i,data:s}),this.removeInviteRequest(t.id),(0,a.S9)(n),(0,Z.Gi)(r,{member_id:parseInt(t.id,10),invite_status:t.inviteStatus,organization:l})}catch{(0,a.Iw)(o)}this.setState((e=>({inviteRequestBusy:{...e.inviteRequestBusy,[t.id]:!1}})))})),(0,s.Z)(this,"handleInviteRequestApprove",(e=>{this.handleInviteRequestAction({inviteRequest:e,method:"PUT",data:{role:e.role,teams:e.teams,approve:1},successMessage:(0,b._N)("[email] has been invited",{email:e.email}),errorMessage:(0,b._N)("Error inviting [email]",{email:e.email}),eventKey:"invite_request.approved"})})),(0,s.Z)(this,"handleInviteRequestDeny",(e=>{this.handleInviteRequestAction({inviteRequest:e,method:"DELETE",data:{},successMessage:(0,b._N)("Invite request for [email] denied",{email:e.email}),errorMessage:(0,b._N)("Error denying invite request for [email]",{email:e.email}),eventKey:"invite_request.denied"})}))}getDefaultState(){return{...super.getDefaultState(),members:[],invited:{}}}onLoadAllEndpointsSuccess(){const{organization:e}=this.props,{inviteRequests:t,members:i}=this.state;(0,Z.Gi)("member_settings_page.loaded",{organization:e,num_members:i?.length,num_invite_requests:t?.length})}getEndpoints(){const{organization:e}=this.props;return[["members",`/organizations/${e.slug}/members/`,{},{paginate:!0}],["member",`/organizations/${e.slug}/members/me/`,{},{allowError:e=>404===e.status}],["authProvider",`/organizations/${e.slug}/auth-provider/`,{},{allowError:e=>403===e.status}],["inviteRequests",`/organizations/${e.slug}/invite-requests/`]]}getTitle(){const e=this.props.organization.slug;return(0,f.Z)((0,b.t)("Members"),e,!1)}renderBody(){const{organization:e}=this.props,{membersPageLinks:t,members:i,member:s,inviteRequests:n}=this.state,{access:a}=e,l=a.includes("member:write"),d=a.includes("member:admin"),p=x.Z.get("user"),y=!i.find((e=>{let{role:t,email:i,pending:s}=e;return"owner"===t&&i!==p.email&&!s})),Z=!!this.state.authProvider&&this.state.authProvider.require_link,f=e=>{let{defaultSearchBar:t,value:i,handleChange:n}=e;return(0,k.BX)(Re,{children:[(0,k.tZ)(C,{roles:s?.roles??v.Gh,query:i,onChange:e=>n(e)}),t]})};return(0,k.BX)(o.Fragment,{children:[(0,k.tZ)(r.ms,{children:e=>{let{css:t}=e;return this.renderSearchInput({updateRoute:!0,placeholder:(0,b.t)("Search Members"),children:f,className:t`
                font-size: ${w.ZP.fontSizeMedium};
              `})}}),n&&n.length>0&&(0,k.BX)(u.Z,{children:[(0,k.tZ)(g.Z,{children:(0,k.BX)(Se,{children:[(0,k.tZ)("div",{children:(0,b.t)("Pending Members")}),(0,k.tZ)("div",{children:(0,b.t)("Role")}),(0,k.tZ)("div",{children:(0,b.t)("Teams")})]})}),(0,k.tZ)(h.Z,{children:n.map((t=>(0,k.tZ)(J,{organization:e,inviteRequest:t,inviteRequestBusy:{},allRoles:s?.roles??v.Gh,onApprove:this.handleInviteRequestApprove,onDeny:this.handleInviteRequestDeny,onUpdate:e=>this.updateInviteRequest(t.id,e)},t.id)))})]}),(0,k.BX)(u.Z,{"data-test-id":"org-member-list",children:[(0,k.tZ)(we,{members:i,organization:e}),(0,k.BX)(h.Z,{children:[i.map((t=>(0,k.tZ)(pe,{organization:e,member:t,status:this.state.invited[t.id],memberCanLeave:!y&&!t.flags["idp:provisioned"],currentUser:p,canRemoveMembers:d,canAddMembers:l,requireLink:Z,onSendInvite:this.handleSendInvite,onRemove:this.handleRemove,onLeave:this.handleLeave},t.id))),0===i.length&&(0,k.tZ)(m.Z,{children:(0,b.t)("No members found.")})]})]}),(0,k.tZ)(c.Z,{pageLinks:t})]})}}const Re=(0,n.Z)(S._,{target:"e1i6q5051"})({name:"15dvb6g",styles:"display:grid;grid-template-columns:max-content 1fr;margin-top:0"}),Se=(0,n.Z)("div",{target:"e1i6q5050"})("display:grid;grid-template-columns:minmax(150px, auto) minmax(100px, 140px) 420px;gap:",(0,y.D)(2),";align-items:center;width:100%;"),qe=(0,z.Z)(ze)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationMembers_organizationMembersList_tsx.32c1ec56b773414b8d3711496005c8ce.js.map