"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_account_accountClose_tsx"],{"./app/components/panels/panelHeader.tsx":(e,t,n)=>{n.d(t,{Z:()=>i});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),r=n("./app/styles/space.tsx");const a=e=>{let{disablePadding:t,hasButtons:n}=e;return(0,s.iv)("padding:",n?(0,r.D)(1):(0,r.D)(2)," ",t?0:(0,r.D)(2),";","")},i=(0,o.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",a,";")},"./app/views/deprecatedAsyncView.tsx":(e,t,n)=>{n.d(t,{Z:()=>a});var o=n("./app/components/deprecatedAsyncComponent.tsx"),s=n("./app/components/sentryDocumentTitle.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends o.Z{getTitle(){return""}render(){return(0,r.tZ)(s.Z,{title:this.getTitle(),children:this.renderComponent()})}}a.displayName="DeprecatedAsyncView"},"./app/views/settings/account/accountClose.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("./app/actionCreators/indicator.tsx"),a=n("./app/actionCreators/modal.tsx"),i=n("./app/components/alert.tsx"),l=n("./app/components/button.tsx"),c=n("./app/components/hookOrDefault.tsx"),d=n("./app/components/panels/panel.tsx"),p=n("./app/components/panels/panelAlert.tsx"),m=n("./app/components/panels/panelBody.tsx"),u=n("./app/components/panels/panelHeader.tsx"),h=n("./app/components/panels/panelItem.tsx"),g=n("./app/locale.tsx"),w=n("./app/views/deprecatedAsyncView.tsx"),y=n("./app/components/confirm.tsx"),v=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e){let{handleRemoveAccount:t}=e;return(0,v.tZ)(y.Z,{priority:"danger",message:(0,g.t)("This is permanent and cannot be undone, are you really sure you want to do this?"),onConfirm:t,children:(0,v.tZ)(l.zx,{priority:"danger",children:(0,g.t)("Close Account")})})}x.displayName="ConfirmAccountClose";var Z=n("./app/views/settings/components/settingsPageHeader.tsx"),b=n("./app/views/settings/components/text/textBlock.tsx");const f=()=>window.location.href="/",T=(0,s.Z)("div",{target:"evrw3re0"})({name:"14rp7vr",styles:"font-weight:bold;font-size:1.2em"});function C(e){let{Header:t,Body:n,Footer:o}=e;return(0,v.BX)("div",{children:[(0,v.tZ)(t,{children:(0,g.t)("Closing Account")}),(0,v.BX)(n,{children:[(0,v.tZ)(b.Z,{children:(0,g.t)("Your account has been deactivated and scheduled for removal.")}),(0,v.tZ)(b.Z,{children:(0,g.t)("Thanks for using Sentry! We hope to see you again soon!")})]}),(0,v.tZ)(o,{children:(0,v.tZ)(l.zx,{href:"/",children:(0,g.t)("Goodbye")})})]})}C.displayName="GoodbyeModalContent";class z extends w.Z{constructor(){super(...arguments),(0,o.Z)(this,"leaveRedirectTimeout",void 0),(0,o.Z)(this,"handleChange",((e,t,n)=>{let{slug:o}=e;const s=n.target.checked;t||this.setState((e=>{const t=e.orgsToRemove||new Set(this.singleOwnerOrgs);return s?t.add(o):t.delete(o),{orgsToRemove:t}}))})),(0,o.Z)(this,"handleRemoveAccount",(async()=>{const e=this.orgSlugsToRemove;(0,r.E3)("Closing accountâ€¦");try{await this.api.requestPromise("/users/me/",{method:"DELETE",data:{organizations:e}}),(0,a.openModal)(C,{onClose:f}),window.clearTimeout(this.leaveRedirectTimeout),this.leaveRedirectTimeout=window.setTimeout(f,1e4)}catch{(0,r.Iw)("Error closing account")}}))}componentWillUnmount(){window.clearTimeout(this.leaveRedirectTimeout)}getEndpoints(){return[["organizations","/organizations/?owner=1"]]}getDefaultState(){return{...super.getDefaultState(),orgsToRemove:null}}get singleOwnerOrgs(){return this.state.organizations?.filter((e=>{let{singleOwner:t}=e;return t}))?.map((e=>{let{organization:t}=e;return t.slug}))}getTitle(){return(0,g.t)("Close Account")}get orgSlugsToRemove(){const{orgsToRemove:e}=this.state;return(null===e?this.singleOwnerOrgs:Array.from(e))||[]}renderBody(){const{organizations:e,orgsToRemove:t}=this.state,n=(0,c.Z)({hookName:"component:confirm-account-close",defaultComponent:e=>(0,v.tZ)(x,{...e})});return(0,v.BX)("div",{children:[(0,v.tZ)(Z.Z,{title:this.getTitle()}),(0,v.BX)(b.Z,{children:[(0,g.t)("This will permanently remove all associated data for your user"),"."]}),(0,v.tZ)(i.bZ,{type:"error",showIcon:!0,children:(0,v.BX)(T,{children:[(0,g.t)("Closing your account is permanent and cannot be undone"),"!"]})}),(0,v.BX)(d.Z,{children:[(0,v.tZ)(u.Z,{children:(0,g.t)("Remove the following organizations")}),(0,v.BX)(m.Z,{children:[(0,v.BX)(p.Z,{type:"info",children:[(0,g.t)("Ownership will remain with other organization owners if an organization is not deleted."),(0,v.tZ)("br",{}),(0,g._N)("Boxes which can't be unchecked mean that you are the only organization owner and the organization [strong:will be deleted].",{strong:(0,v.tZ)("strong",{})})]}),e?.map((e=>{let{organization:n,singleOwner:o}=e;return(0,v.tZ)(h.Z,{children:(0,v.BX)("label",{children:[(0,v.tZ)("input",{style:{marginRight:6},type:"checkbox",value:n.slug,onChange:this.handleChange.bind(this,n,o),name:"organizations",checked:null===t?o:t.has(n.slug),disabled:o}),n.slug]})},n.slug)}))]})]}),(0,v.tZ)(n,{handleRemoveAccount:this.handleRemoveAccount,organizationSlugs:this.orgSlugsToRemove})]})}}const R=z}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_account_accountClose_tsx.8daa8e94591d6067a237b79d985b86d0.js.map