"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_account_notifications_notificationSettings_tsx"],{"./app/views/settings/account/notifications/notificationSettings.tsx":(t,e,i)=>{i.r(e),i.d(e,{default:()=>w});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(i("../node_modules/core-js/modules/es.array.push.js"),i("../node_modules/react/index.js")),o=i("./app/components/alertLink.tsx"),a=i("./app/components/deprecatedAsyncComponent.tsx"),c=i("./app/components/forms/form.tsx"),r=i("./app/components/forms/jsonForm.tsx"),p=i("./app/components/forms/model.tsx"),l=i("./app/components/links/link.tsx"),u=i("./app/components/sentryDocumentTitle.tsx"),d=i("./app/icons/index.tsx"),g=i("./app/locale.tsx"),m=i("./app/utils/analytics.tsx"),f=i("./app/utils/withOrganizations.tsx"),h=i("./app/views/settings/account/notifications/constants.tsx"),x=i("./app/views/settings/account/notifications/fields2.tsx"),Z=i("./app/views/settings/account/notifications/utils.tsx"),y=i("./app/views/settings/components/settingsPageHeader.tsx"),S=i("./app/views/settings/components/text/textBlock.tsx"),D=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class _ extends a.Z{constructor(){super(...arguments),(0,n.Z)(this,"model",new p.Z),(0,n.Z)(this,"getStateToPutForDefault",((t,e)=>{const{notificationSettings:i}=this.state,n=(0,Z.zD)(e,i,t,(0,Z.Vy)(e,i));return this.setState({notificationSettings:(0,Z.r_)(i,n)}),n})),(0,n.Z)(this,"onFieldChange",(t=>{h.uJ.includes(t)?this.model.setFormOptions({apiEndpoint:"/users/me/notifications/"}):this.model.setFormOptions({apiEndpoint:"/users/me/notification-settings/"})}))}getDefaultState(){return{...super.getDefaultState(),notificationSettings:{},legacyData:{}}}getEndpoints(){return[["notificationSettings","/users/me/notification-settings/",{v2:"serializer"}],["legacyData","/users/me/notifications/"]]}componentDidMount(){super.componentDidMount(),(0,m.Gi)("notification_settings.index_page_viewed",{organization:null})}get notificationSettingsType(){return h.cH.filter((t=>{const e=h.fQ[t];return!e||this.props.organizations.some((t=>t.features?.includes(e)))}))}getInitialData(){const{notificationSettings:t,legacyData:e}=this.state;return{...Object.fromEntries(this.notificationSettingsType.map((e=>[e,(0,Z._M)(e,t)]))),...e}}getFields(){const{notificationSettings:t}=this.state,e=[],i=[];for(const n of this.notificationSettingsType){const o=Object.assign({},x.u[n],{getData:t=>this.getStateToPutForDefault(t,n),help:(0,D.tZ)(s.Fragment,{children:(0,D.BX)("p",{children:[x.u[n].help,"Â ",(0,D.tZ)(l.Z,{"data-test-id":"fine-tuning",to:`/settings/account/notifications/${h.wR[n]}`,children:"Fine tune"})]})})});(0,Z.Vi)(n,t)&&"function"!=typeof o&&(o.confirm={never:h.Y5}),"blank"===o.type?i.push(o):e.push(o)}const n=h.uJ.map((t=>x.u[t]));return e.push(...n),[...e,...i]}renderBody(){return(0,D.BX)(s.Fragment,{children:[(0,D.tZ)(u.Z,{title:(0,g.t)("Notifications")}),(0,D.tZ)(y.Z,{title:(0,g.t)("Notifications")}),(0,D.tZ)(S.Z,{children:(0,g.t)("Personal notifications sent by email or an integration.")}),(0,D.tZ)(c.Z,{model:this.model,saveOnBlur:!0,apiMethod:"PUT",onFieldChange:this.onFieldChange,initialData:this.getInitialData(),children:(0,D.tZ)(r.Z,{title:(0,g.t)("Notifications"),fields:this.getFields()})}),(0,D.tZ)(o.Z,{to:"/settings/account/emails",icon:(0,D.tZ)(d.h,{}),children:(0,g.t)("Looking to add or remove an email address? Use the emails panel.")})]})}}const w=(0,f.Z)(_)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_account_notifications_notificationSettings_tsx.4204b0e99ec93162af0839de49b497b8.js.map