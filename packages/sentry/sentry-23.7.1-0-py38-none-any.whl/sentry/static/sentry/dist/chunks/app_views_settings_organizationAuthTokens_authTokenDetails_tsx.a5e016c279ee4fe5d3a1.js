"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationAuthTokens_authTokenDetails_tsx"],{"./app/components/panels/panelHeader.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),a=n("./app/styles/space.tsx");const i=e=>{let{disablePadding:t,hasButtons:n}=e;return(0,s.iv)("padding:",n?(0,a.D)(1):(0,a.D)(2)," ",t?0:(0,a.D)(2),";","")},r=(0,o.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",i,";")},"./app/views/settings/organizationAuthTokens/authTokenDetails.tsx":(e,t,n)=>{n.r(t),n.d(t,{OrganizationAuthTokensDetails:()=>S,default:()=>_,makeFetchOrgAuthTokenKey:()=>z}),n("../node_modules/core-js/modules/es.array.push.js");var o=n("../node_modules/react/index.js"),s=n("../node_modules/react-router/es/index.js"),a=n("./app/actionCreators/indicator.tsx"),i=n("./app/components/forms/fieldGroup/index.tsx"),r=n("./app/components/forms/fields/textField.tsx"),l=n("./app/components/forms/form.tsx"),p=n("./app/components/links/externalLink.tsx"),d=n("./app/components/loadingError.tsx"),u=n("./app/components/loadingIndicator.tsx"),c=n("./app/components/panels/panel.tsx"),m=n("./app/components/panels/panelBody.tsx"),h=n("./app/components/panels/panelHeader.tsx"),g=n("./app/components/sentryDocumentTitle.tsx"),k=n("./app/locale.tsx"),x=n("./app/utils/handleXhrErrorResponse.tsx"),y=n("./app/utils/queryClient.tsx"),Z=n("./app/utils/useApi.tsx"),b=n("./app/utils/withDomainRequired.tsx"),f=n("./app/utils/withOrganization.tsx"),w=n("./app/views/settings/components/settingsPageHeader.tsx"),T=n("./app/views/settings/components/text/textBlock.tsx"),A=n("./app/views/settings/organizationAuthTokens/index.tsx"),v=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const z=e=>{let{orgSlug:t,tokenId:n}=e;return[`/organizations/${t}/org-auth-tokens/${n}/`]};function D(e){let{token:t,organization:n}=e;const p={name:t.name,tokenPreview:(0,A.tokenPreview)(t.tokenLastCharacters||"****")},d=(0,Z.Z)(),u=(0,y.NL)(),c=(0,o.useCallback)((()=>{s.browserHistory.push((0,b.D)(`/settings/${n.slug}/auth-tokens/`))}),[n.slug]),{mutate:m}=(0,y.Db)({mutationFn:e=>{let{name:o}=e;return d.requestPromise(`/organizations/${n.slug}/org-auth-tokens/${t.id}/`,{method:"PUT",data:{name:o}})},onSuccess:(e,o)=>{let{name:s}=o;(0,a.S9)((0,k.t)("Updated auth token.")),(0,y.XN)(u,z({orgSlug:n.slug,tokenId:t.id}),(e=>e?(e.name=s,e):e)),(0,y.nE)(u,(0,A.makeFetchOrgAuthTokensForOrgQueryKey)({orgSlug:n.slug}))&&(0,y.XN)(u,(0,A.makeFetchOrgAuthTokensForOrgQueryKey)({orgSlug:n.slug}),(e=>{if(!Array.isArray(e))return e;const n=e.find((e=>e.id===t.id));return n&&(n.name=s),e})),c()},onError:e=>{const t=(0,k.t)("Failed to update the auth token.");(0,x.X)(t,e),(0,a.Iw)(t)}});return(0,v.BX)(l.Z,{apiMethod:"PUT",initialData:p,apiEndpoint:`/organizations/${n.slug}/org-auth-tokens/${t.id}/`,onSubmit:e=>{let{name:t}=e;return(0,a.E3)(),m({name:t})},onCancel:c,children:[(0,v.tZ)(r.Z,{name:"name",label:(0,k.t)("Name"),required:!0,help:(0,k.t)("A name to help you identify this token.")}),(0,v.tZ)(r.Z,{name:"tokenPreview",label:(0,k.t)("Token"),disabled:!0,help:(0,k.t)("You can only view the token once after creation.")}),(0,v.tZ)(i.Z,{label:(0,k.t)("Scopes"),help:(0,k.t)("You cannot change the scopes of an existing token."),children:(0,v.tZ)("div",{children:t.scopes.slice().sort().join(", ")})})]})}function S(e){let{params:t,organization:n}=e;const{tokenId:o}=t,{isLoading:s,isError:a,data:i,refetch:r}=(0,y.WE)(z({orgSlug:n.slug,tokenId:o}),{staleTime:1/0});return(0,v.BX)("div",{children:[(0,v.tZ)(g.Z,{title:(0,k.t)("Edit Auth Token")}),(0,v.tZ)(w.Z,{title:(0,k.t)("Edit Auth Token")}),(0,v.tZ)(T.Z,{children:(0,k.t)("Authentication tokens allow you to perform actions against the Sentry API on behalf of your organization. They're the easiest way to get started using the API.")}),(0,v.tZ)(T.Z,{children:(0,k._N)("For more information on how to use the web API, see our [link:documentation].",{link:(0,v.tZ)(p.Z,{href:"https://docs.sentry.io/api/"})})}),(0,v.BX)(c.Z,{children:[(0,v.tZ)(h.Z,{children:(0,k.t)("Auth Token Details")}),(0,v.BX)(m.Z,{children:[a&&(0,v.tZ)(d.Z,{message:(0,k.t)("Failed to load auth token."),onRetry:r}),s&&(0,v.tZ)(u.Z,{}),!s&&!a&&i&&(0,v.tZ)(D,{token:i,organization:n})]})]})]})}D.displayName="AuthTokenDetailsForm",S.displayName="OrganizationAuthTokensDetails";const _=(0,f.Z)(S)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationAuthTokens_authTokenDetails_tsx.626734f3a935d4ddb290d374758dc76f.js.map