"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_landing_widgets_components_performanceWidget_tsx-app_views_performance_-1d625a"],{"./app/views/performance/landing/widgets/components/performanceWidget.tsx":(e,t,n)=>{n.d(t,{I:()=>_});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("../node_modules/react/index.js"),a=n("./app/components/charts/errorPanel.tsx"),o=n("./app/components/placeholder.tsx"),s=n("./app/icons/iconWarning.tsx"),d=n("./app/styles/space.tsx"),l=n("./app/utils/analytics.tsx"),c=n("./app/utils/getDynamicText.tsx"),p=n("./app/utils/performance/contexts/metricsEnhancedPerformanceDataContext.tsx"),g=n("./app/utils/useApi.tsx"),m=n("./app/components/panels/panel.tsx");const u=(0,i.Z)(m.Z,{target:"ekfeesi1"})("padding-top:",(0,d.D)(2),";margin-bottom:0;"),h=(0,i.Z)("div",{target:"ekfeesi0"})(""),y=e=>{let{containerType:t}=e;return"panel"===t?u:h};var f=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z(e){return e.isErrored?e.errorComponent:e.isLoading&&e.loadingComponent?e.loadingComponent:e.hasData?(0,f.tZ)(r.Fragment,{children:e.dataComponents}):e.emptyComponent}Z.displayName="DataStateSwitch";var x=n("./app/utils/dates.tsx");function w(e){const t=e.children??(0,f.tZ)(r.Fragment,{});return e.queries.length?(0,f.tZ)(r.Fragment,{children:e.queries.filter((t=>!t.enabled||t.enabled(e.widgetData))).map((t=>(0,f.tZ)(b,{...e,query:t},t.queryKey)))}):(0,f.tZ)(r.Fragment,{children:t})}function b(e){const t=e.query,n=e.queryProps.eventView.getPageFilters(),i=n.datetime.start?(0,x.hC)(n.datetime.start):null,a=n.datetime.end?(0,x.hC)(n.datetime.end):null;return(0,r.useEffect)((()=>()=>{e.removeWidgetDataForKey(t.queryKey)}),[]),(0,f.tZ)(t.component,{fields:t.fields,yAxis:t.fields,start:i,end:a,period:n.datetime.period,project:n.projects,environment:n.environments,organization:e.queryProps.organization,orgSlug:e.queryProps.organization.slug,eventView:e.queryProps.eventView,query:e.queryProps.eventView.getQueryWithAdditionalConditions(),widgetData:e.widgetData,referrer:(o=e.queryProps.chartSetting,`api.performance.generic-widget-chart.${o.replace(/_/g,"-")}`),children:n=>(0,f.tZ)(r.Fragment,{children:(0,f.tZ)(q,{results:n,...e,query:t})})},t.queryKey);var o}function q(e){const t=(0,p.EA)(),{results:n,query:i}=e,a=i.transform(e.queryProps,n,e.query);return(0,r.useEffect)((()=>{const r=(0,p.AQ)(n,e.queryProps.fields[0]);t.setIsMetricsData(r),e.setWidgetDataForKey(i.queryKey,a)}),[a?.hasData,a?.isLoading,a?.isErrored]),(0,f.tZ)(r.Fragment,{})}w.displayName="QueryHandler",b.displayName="SingleQueryHandler",q.displayName="QueryResultSaver";var D=n("./app/components/charts/styles.tsx"),v=n("./app/components/questionTooltip.tsx"),j=n("./app/components/textOverflow.tsx");function S(e){const{title:t,titleTooltip:n,Subtitle:i,HeaderActions:r,InteractiveTitle:a}=e;return(0,f.BX)(k,{children:[(0,f.BX)(P,{children:[(0,f.BX)(C,{"data-test-id":"performance-widget-title",children:[a?(0,f.tZ)(a,{...e}):(0,f.tZ)(j.Z,{children:t}),(0,f.tZ)(p.hX,{}),n&&(0,f.tZ)(v.Z,{position:"top",size:"sm",title:n})]}),i?(0,f.tZ)(i,{...e}):null]}),(0,f.tZ)(z,{children:r&&(0,f.tZ)(r,{...e})})]})}S.displayName="WidgetHeader";const C=(0,i.Z)(D.ws,{target:"e1sjff3s3"})("position:relative;z-index:initial;top:-",(0,d.D)(.5),";"),P=(0,i.Z)("div",{target:"e1sjff3s2"})({name:"6kz1wu",styles:"display:flex;flex-direction:column;align-items:flex-start"}),k=(0,i.Z)("div",{target:"e1sjff3s1"})("display:flex;justify-content:space-between;align-items:flex-start;gap:",(0,d.D)(1),";"),z=(0,i.Z)("div",{target:"e1sjff3s0"})("display:flex;align-items:center;gap:",(0,d.D)(1),";");function _(e){const[t,n]=(0,r.useState)({}),i=t[e.chartSetting]??{},a=(0,r.useRef)(i),o=(0,r.useCallback)(((t,i)=>{const r={...a.current,[t]:i};a.current=r,n({[e.chartSetting]:r})}),[t,n]),s=(0,r.useCallback)((t=>{const i={...a.current};delete i[t],a.current=i,n({[e.chartSetting]:i})}),[t,n]),d={widgetData:i,setWidgetDataForKey:o,removeWidgetDataForKey:s},l=Object.entries(e.Queries).map((e=>{let[t,n]=e;return{...n,queryKey:t}})),c=(0,g.Z)(),m=e.Visualizations.reduce(((e,t)=>e+t.height),0);return(0,f.tZ)(r.Fragment,{children:(0,f.BX)(p.UT,{chartSetting:e.chartSetting,children:[(0,f.tZ)(w,{eventView:e.eventView,widgetData:i,setWidgetDataForKey:o,removeWidgetDataForKey:s,queryProps:e,queries:l,api:c}),(0,f.tZ)(N,{...e,...d,totalHeight:m})]})})}function N(e){const{Visualizations:t,chartHeight:n,totalHeight:i,containerType:r,EmptyComponent:a}=e,s=y({containerType:r}),d=Object.keys(e.Queries).length,p=Object.values(e.widgetData).length!==d,g=!p&&Object.values(e.widgetData).every((e=>!e||e.hasData)),m=Object.values(e.widgetData).some((e=>!e||e.isLoading)),u=!p&&Object.values(e.widgetData).some((e=>e&&e.isErrored));return(0,f.BX)(s,{"data-test-id":"performance-widget-container",children:[(0,f.tZ)(E,{children:(0,f.tZ)(S,{...e})}),(0,f.tZ)(Z,{isLoading:m,isErrored:u,hasData:g,errorComponent:(0,f.tZ)(F,{height:i}),dataComponents:t.map(((t,i)=>(0,f.tZ)(E,{noPadding:t.noPadding,bottomPadding:t.bottomPadding,"data-test-id":"widget-state-has-data",onClick:()=>{return t=e.chartSetting,n=e.organization,void(0,l.Gi)("performance_views.landingv3.widget.interaction",{organization:n,widget_type:t});var t,n},children:(0,c.Z)({value:(0,f.tZ)(t.component,{grid:W,queryFields:t.fields,widgetData:e.widgetData,height:n}),fixed:(0,f.tZ)(o.Z,{height:`${n}px`})})},i))),loadingComponent:(0,f.tZ)(T,{height:`${i}px`}),emptyComponent:a?(0,f.tZ)(a,{}):(0,f.tZ)(T,{height:`${i}px`})})]})}function F(e){return(0,f.tZ)(a.Z,{"data-test-id":"widget-state-is-errored",height:`${e.height}px`,children:(0,f.tZ)(s.F,{color:"gray300",size:"lg"})})}_.displayName="GenericPerformanceWidget",N.displayName="DataDisplay",F.displayName="DefaultErrorComponent";const W={left:(0,d.D)(0),right:(0,d.D)(0),top:(0,d.D)(2),bottom:(0,d.D)(1)},E=(0,i.Z)("div",{target:"e1fmuurf1"})("padding-left:",(e=>e.noPadding?(0,d.D)(0):(0,d.D)(2)),";padding-right:",(e=>e.noPadding?(0,d.D)(0):(0,d.D)(2)),";padding-bottom:",(e=>e.bottomPadding?(0,d.D)(1):(0,d.D)(0)),";"),T=(0,i.Z)(o.Z,{target:"e1fmuurf0"})({name:"cs3onb",styles:"border-color:transparent;border-bottom-right-radius:inherit;border-bottom-left-radius:inherit"});_.defaultProps={containerType:"panel",chartHeight:200}},"./app/views/performance/landing/widgets/components/selectableList.tsx":(e,t,n)=>{n.d(t,{Nm:()=>S,QE:()=>q,S$:()=>b,ZP:()=>x,ir:()=>j,qL:()=>D,xq:()=>v});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("./app/components/emptyStateWarning.tsx"),a=n("./app/components/forms/controls/radioGroup.tsx"),o=n("./app/components/links/externalLink.tsx"),s=n("./app/components/links/link.tsx"),d=n("./app/components/radio.tsx"),l=n("./app/components/tooltip.tsx"),c=n("./app/icons/index.tsx"),p=n("./app/locale.tsx"),g=n("./app/styles/space.tsx"),m=n("./app/utils/docs.tsx"),u=n("./app/utils/usePageFilters.tsx"),h=n("./app/utils/useProjects.tsx"),y=n("./app/views/performance/utils.tsx"),f=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),Z=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e){return(0,Z.tZ)("div",{children:e.items.map(((t,n)=>(0,f.az)(w,{...e,isSelected:n===e.selectedIndex,currentIndex:n,key:n},t())))})}function w(e){let{isSelected:t,currentIndex:n,children:i,setSelectedIndex:r,radioColor:o}=e;return(0,Z.BX)(N,{children:[(0,Z.tZ)(F,{color:o??"",children:(0,Z.tZ)(a.V,{index:n,role:"radio",children:(0,Z.tZ)(d.Z,{checked:t,onChange:()=>r(n)})})}),i]})}x.displayName="SelectableList",w.displayName="SelectableItem";const b=(0,i.Z)("div",{target:"e1qhgdqj9"})("text-align:right;display:flex;align-items:center;justify-content:center;padding:0 ",(0,g.D)(1),";"),q=(0,i.Z)("span",{target:"e1qhgdqj8"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeMedium),";display:inline-block;"),D=(0,i.Z)(s.Z,{target:"e1qhgdqj7"})({name:"pu304d",styles:"flex-grow:1;display:inherit"});function v(){return(0,Z.BX)(k,{children:[(0,Z.tZ)(z,{children:(0,p.t)("No results found")}),(0,Z.tZ)(_,{children:(0,p.t)("Transactions may not be listed due to the filters above or a low sampling rate")})]})}function j(){const e=(0,u.Z)(),t=(0,h.Z)(),n=e.selection.projects;if((0,y.Y9)(n))return(0,Z.tZ)(v,{});const i=t.projects.find((e=>e.id===""+n[0])),r=(0,m.yb)(i);return r?(0,Z.BX)(k,{children:[(0,Z.tZ)(z,{children:(0,p.t)("No results found")}),(0,Z.tZ)(_,{children:(0,p._N)("No transactions with Database or HTTP spans found, you may need to [added].",{added:(0,Z.tZ)(o.Z,{href:r,children:(0,p.t)("add integrations")})})})]}):(0,Z.tZ)(v,{})}function S(e){return(0,Z.tZ)(C,{title:(0,p.t)("Exclude this transaction from the search filter."),children:(0,Z.tZ)(P,{onClick:()=>{e.onClick(),e.setSelectListIndex(0)}})})}v.displayName="WidgetEmptyStateWarning",j.displayName="WidgetAddInstrumentationWarning",S.displayName="ListClose";const C=(0,i.Z)(l.u,{target:"e1qhgdqj6"})({name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"}),P=(0,i.Z)(c.bM,{target:"e1qhgdqj5"})("cursor:pointer;color:",(e=>e.theme.gray200),";"),k=(0,i.Z)(r.Z,{target:"e1qhgdqj4"})({name:"1d607mx",styles:"min-height:300px;justify-content:center;display:flex;align-items:center;flex-direction:column"}),z=(0,i.Z)("span",{target:"e1qhgdqj3"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";color:",(e=>e.theme.gray300),";font-weight:600;margin:0 auto ",(0,g.D)(1),";"),_=(0,i.Z)("p",{target:"e1qhgdqj2"})("font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.gray300),";max-width:300px;"),N=(0,i.Z)("div",{target:"e1qhgdqj1"})("display:flex;border-top:1px solid ",(e=>e.theme.border),";padding:",(0,g.D)(1)," ",(0,g.D)(2),";font-size:",(e=>e.theme.fontSizeMedium),";"),F=(0,i.Z)("div",{target:"e1qhgdqj0"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}")}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_landing_widgets_components_performanceWidget_tsx-app_views_performance_-1d625a.6b2e111ee9aaacbd37a2aed7380a1d57.js.map