"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_auth_login_tsx"],{"./app/components/forms/fields/radioField.tsx":(e,t,o)=>{o.d(t,{Z:()=>a});var n=o("./app/components/forms/controls/radioGroup.tsx"),i=o("./app/components/forms/formField/index.tsx"),s=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){return(0,s.tZ)(i.Z,{...e,children:e=>{let{id:t,onChange:o,onBlur:i,value:r,disabled:a,orientInline:l,...d}=e;return(0,s.tZ)(n.Z,{id:t,choices:d.choices,disabled:a,orientInline:l,label:d.label,value:""===r?null:r,onChange:(e,t)=>function(e,t,o,n){t(e,n),o(e,n)}(e,o,i,t)})}})}r.displayName="RadioField";const a=r},"./app/components/forms/fields/secretField.tsx":(e,t,o)=>{o.d(t,{Z:()=>r});var n=o("./app/components/forms/fields/inputField.tsx"),i=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e){return(0,i.tZ)(n.Z,{...e,type:"password",role:"textbox"})}s.displayName="SecretField";const r=s},"./app/views/auth/login.tsx":(e,t,o)=>{o.r(t),o.d(t,{default:()=>H});var n=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=o("../node_modules/react/index.js"),r=o("./app/components/alert.tsx"),a=o("./app/components/button.tsx"),l=o("./app/components/loadingError.tsx"),d=o("./app/components/loadingIndicator.tsx"),p=o("./app/components/navTabs.tsx"),c=o("./app/locale.tsx"),u=o("./app/styles/space.tsx"),m=o("./app/utils/withApi.tsx"),h=(o("../node_modules/core-js/modules/es.array.push.js"),o("../node_modules/react-router/es/index.js")),g=o("./app/components/forms/fields/secretField.tsx"),Z=o("./app/components/forms/fields/textField.tsx"),b=o("./app/components/forms/form.tsx"),x=o("./app/components/links/link.tsx"),f=o("./app/icons/index.tsx"),v=o("./app/stores/configStore.tsx"),y=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function S(e){let{vstsLoginLink:t,githubLoginLink:o,googleLoginLink:n}=e;return(0,y.BX)(_,{children:[(0,y.tZ)(w,{children:(0,c.t)("External Account Login")}),n&&(0,y.tZ)(a.zx,{size:"sm",icon:(0,y.tZ)(f.vY,{size:"xs"}),href:n,children:(0,c.t)("Sign in with Google")}),o&&(0,y.tZ)(a.zx,{size:"sm",icon:(0,y.tZ)(f.Uv,{size:"xs"}),href:o,children:(0,c.t)("Sign in with GitHub")}),t&&(0,y.tZ)(a.zx,{size:"sm",icon:(0,y.tZ)(f.mT,{size:"xs"}),href:t,children:(0,c.t)("Sign in with Azure DevOps")})]})}function k(e){let{authConfig:t}=e;const[o,n]=(0,s.useState)(""),{githubLoginLink:i,vstsLoginLink:a}=t,l=!(!i&&!a);return(0,y.BX)(L,{hasLoginProvider:l,children:[(0,y.BX)(b.Z,{submitLabel:(0,c.t)("Continue"),apiEndpoint:"/auth/login/",apiMethod:"POST",onSubmitSuccess:e=>{v.Z.set("user",e.user),h.browserHistory.push({pathname:e.nextUri})},onSubmitError:e=>{n(e.responseJSON.errors.__all__)},footerStyle:{borderTop:"none",alignItems:"center",marginBottom:0,padding:0},extraButton:(0,y.tZ)(C,{to:"/account/recover/",children:(0,c.t)("Lost your password?")}),children:[o&&(0,y.tZ)(r.bZ,{type:"error",children:o}),(0,y.tZ)(Z.Z,{name:"username",placeholder:(0,c.t)("username or email"),label:(0,c.t)("Account"),stacked:!0,inline:!1,hideControlState:!0,required:!0}),(0,y.tZ)(g.Z,{name:"password",placeholder:(0,c.t)("password"),label:(0,c.t)("Password"),stacked:!0,inline:!1,hideControlState:!0,required:!0})]}),l&&(0,y.tZ)(S,{vstsLoginLink:a,githubLoginLink:i})]})}S.displayName="LoginProviders",k.displayName="LoginForm";const L=(0,i.Z)("div",{target:"e11otuu63"})("display:grid;gap:60px;grid-template-columns:",(e=>e.hasLoginProvider?"1fr 0.8fr":"1fr"),";"),w=(0,i.Z)("div",{target:"e11otuu62"})({name:"1u5acre",styles:"margin:0;font-size:15px;font-weight:bold;line-height:24px"}),_=(0,i.Z)("div",{target:"e11otuu61"})("position:relative;display:grid;grid-auto-rows:max-content;gap:",(0,u.D)(1.5),";&:before{position:absolute;display:block;content:'';top:0;bottom:0;left:-30px;border-left:1px solid ",(e=>e.theme.border),";}"),C=(0,i.Z)(x.Z,{target:"e11otuu60"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeMedium),";&:hover{color:",(e=>e.theme.textColor),";}"),j=k;var q=o("./app/components/forms/fields/radioField.tsx"),P=o("./app/components/links/externalLink.tsx");function z(e){let{authConfig:t}=e;const{hasNewsletter:o}=t,[n,i]=(0,s.useState)("");return(0,y.BX)(b.Z,{apiMethod:"POST",apiEndpoint:"/auth/register/",initialData:{subscribe:!0},submitLabel:(0,c.t)("Continue"),onSubmitSuccess:e=>{v.Z.set("user",e.user),h.browserHistory.push({pathname:e.nextUri})},onSubmitError:e=>{i(e.responseJSON.detail)},extraButton:(0,y.tZ)(N,{href:"https://sentry.io/privacy/",children:(0,c.t)("Privacy Policy")}),children:[n&&(0,y.tZ)(r.bZ,{type:"error",children:n}),(0,y.tZ)(Z.Z,{name:"name",placeholder:(0,c.t)("Jane Bloggs"),label:(0,c.t)("Name"),stacked:!0,inline:!1,required:!0}),(0,y.tZ)(Z.Z,{name:"username",placeholder:(0,c.t)("you@example.com"),label:(0,c.t)("Email"),stacked:!0,inline:!1,required:!0}),(0,y.tZ)(g.Z,{name:"password",placeholder:(0,c.t)("something super secret"),label:(0,c.t)("Password"),stacked:!0,inline:!1,required:!0}),o&&(0,y.tZ)(q.Z,{name:"subscribe",choices:[["true",(0,c.t)("Yes, I would like to receive updates via email")],["flase",(0,c.t)("No, I'd prefer not to receive these updates")]],help:(0,c._N)("We'd love to keep you updated via email with product and feature\n           announcements, promotions, educational materials, and events. Our\n           updates focus on relevant information, and we'll never sell your data\n           to third parties. See our [link] for more details.",{link:(0,y.tZ)("a",{href:"https://sentry.io/privacy/",children:"Privacy Policy"})}),stacked:!0,inline:!1})]})}z.displayName="RegisterForm";const N=(0,i.Z)(P.Z,{target:"e1kibdsq0"})("color:",(e=>e.theme.gray300),";&:hover{color:",(e=>e.theme.textColor),";}"),B=z;function T(e){let{authConfig:t}=e;const[o,n]=(0,s.useState)(""),{serverHostname:i}=t;return(0,y.BX)(b.Z,{apiMethod:"POST",apiEndpoint:"/auth/sso-locate/",onSubmitSuccess:e=>{h.browserHistory.push({pathname:e.nextUri})},onSubmitError:e=>{n(e.responseJSON.detail)},submitLabel:(0,c.t)("Continue"),footerStyle:{borderTop:"none",alignItems:"center",marginBottom:0,padding:0},children:[o&&(0,y.tZ)(r.bZ,{type:"error",children:o}),(0,y.tZ)(Z.Z,{name:"organization",placeholder:"acme",label:(0,c.t)("Organization ID"),required:!0,stacked:!0,inline:!1,hideControlState:!0,help:(0,c._N)("Your ID is the slug after the hostname. e.g. [example] is [slug].",{slug:(0,y.tZ)("strong",{children:"acme"}),example:(0,y.tZ)(F,{slug:"acme",hostname:i})})})]})}function F(e){let{hostname:t,slug:o}=e;return(0,y.BX)("code",{children:[t,"/",(0,y.tZ)("strong",{children:o})]})}T.displayName="SsoForm",F.displayName="SlugExample";const I={login:j,register:B,sso:T};class D extends s.Component{constructor(){super(...arguments),(0,n.Z)(this,"state",{loading:!0,error:null,activeTab:"login",authConfig:null}),(0,n.Z)(this,"handleSetTab",((e,t)=>{this.setState({activeTab:e}),t.preventDefault()})),(0,n.Z)(this,"fetchData",(async()=>{const{api:e}=this.props;try{const t=await e.requestPromise("/auth/config/"),{vsts_login_link:o,github_login_link:n,google_login_link:i,...s}=t,r={...s,vstsLoginLink:o,githubLoginLink:n,googleLoginLink:i};this.setState({authConfig:r})}catch(e){this.setState({error:!0})}this.setState({loading:!1})}))}componentDidMount(){this.fetchData()}get hasAuthProviders(){if(null===this.state.authConfig)return!1;const{githubLoginLink:e,googleLoginLink:t,vstsLoginLink:o}=this.state.authConfig;return!!(e||o||t)}render(){const{loading:e,error:t,activeTab:o,authConfig:n}=this.state,i=I[o],l=[["login",(0,c.t)("Login")],["sso",(0,c.t)("Single Sign-On")],["register",(0,c.t)("Register"),!n?.canRegister]],{orgId:p}=this.props.params;return(0,y.BX)(s.Fragment,{children:[(0,y.BX)(O,{children:[(0,y.tZ)(A,{children:(0,c.t)("Sign in to continue")}),(0,y.tZ)(X,{children:l.map((e=>{let[t,n,i]=e;return!i&&(0,y.tZ)("li",{className:o===t?"active":"",children:(0,y.tZ)("a",{href:"#",onClick:e=>this.handleSetTab(t,e),children:n})},t)}))})]}),e&&(0,y.tZ)(d.Z,{}),t&&(0,y.tZ)(E,{message:(0,c.t)("Unable to load authentication configuration"),onRetry:this.fetchData}),!e&&null!==n&&!t&&(0,y.BX)(R,{hasAuthProviders:this.hasAuthProviders,children:[void 0!==p&&(0,y.tZ)(r.bZ,{type:"warning",trailingItems:(0,y.tZ)(a.zx,{to:"/",size:"xs",children:"Reload"}),children:(0,c._N)("Experimental SPA mode does not currently support SSO style login. To develop against the [org] you'll need to copy your production session cookie.",{org:this.props.params.orgId})}),(0,y.tZ)(i,{authConfig:n})]})]})}}D.displayName="Login";const E=(0,i.Z)(l.Z,{target:"e17jqeq34"})("margin:",(0,u.D)(2),";"),O=(0,i.Z)("div",{target:"e17jqeq33"})("border-bottom:1px solid ",(e=>e.theme.border),";padding:20px 40px 0;"),A=(0,i.Z)("h3",{target:"e17jqeq32"})({name:"cqisp1",styles:"font-size:24px;margin:0 0 20px 0"}),X=(0,i.Z)(p.Z,{target:"e17jqeq31"})({name:"ti75j2",styles:"margin:0"}),R=(0,i.Z)("div",{target:"e17jqeq30"})("padding:35px;width:",(e=>e.hasAuthProviders?"600px":"490px"),";"),H=(0,m.Z)(D)}}]);
//# sourceMappingURL=../sourcemaps/app_views_auth_login_tsx.9f1feba19da4113a5d7eea37d0c73cc3.js.map