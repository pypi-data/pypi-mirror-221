"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_performance_contexts_pageError_tsx-app_views_starfish_utils_routeNames_tsx-app_view-aba09a"],{"./app/utils/performance/contexts/pageError.tsx":(e,t,s)=>{s.d(t,{De:()=>l,V_:()=>o,YY:()=>p});var a=s("../node_modules/react/index.js"),r=s("./app/components/alert.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,a.createContext)({pageError:void 0,setPageError:e=>{}});function o(e){let{children:t}=e;const[s,r]=(0,a.useState)();return(0,n.tZ)(i.Provider,{value:{pageError:s,setPageError:r},children:t})}function p(){const{pageError:e}=(0,a.useContext)(i);return e?(0,n.tZ)(r.bZ,{type:"error","data-test-id":"page-error-alert",showIcon:!0,children:e}):null}o.displayName="PageErrorProvider",p.displayName="PageErrorAlert";const l=()=>(0,a.useContext)(i)},"./app/views/starfish/allowedProjects.ts":(e,t,s)=>{s.d(t,{a:()=>n,g:()=>r});var a=s("./app/views/starfish/types.tsx");const r={sentry:["1","300688","4505160011087872","4505148785885184"],codecov:["5215654"],peated:["4505138082349056"],"sentry-sdks":["5428557"]},n={5428557:a.Nx.MOBILE}},"./app/views/starfish/components/chartPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>p});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/react/index.js"),s("./app/components/panels/panel.tsx")),n=s("./app/components/panels/panelBody.tsx"),i=s("./app/styles/space.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function p(e){let{title:t,children:s,button:a}=e;return(0,o.tZ)(r.Z,{children:(0,o.BX)(n.Z,{withPadding:!0,children:[t&&(0,o.BX)(u,{children:[t&&(0,o.tZ)(l,{children:t}),a]}),s]})})}p.displayName="ChartPanel";const l=(0,a.Z)("p",{target:"e1tvnfsq1"})((e=>e.theme.text.cardTitle),";"),u=(0,a.Z)("div",{target:"e1tvnfsq0"})("padding:0 ",(0,i.D)(1)," 0 0;min-height:36px;width:100%;display:flex;align-items:center;justify-content:space-between;")},"./app/views/starfish/components/starfishProjectSelector.tsx":(e,t,s)=>{s.d(t,{Z:()=>m}),s("../node_modules/core-js/modules/es.error.cause.js");var a=s("./app/actionCreators/pageFilters.tsx"),r=s("./app/components/compactSelect/index.tsx"),n=s("./app/components/idBadge/projectBadge.tsx"),i=s("./app/locale.tsx"),o=s("./app/utils/useOrganization.tsx"),p=s("./app/utils/usePageFilters.tsx"),l=s("./app/utils/useProjects.tsx"),u=s("./app/utils/useRouter.tsx"),d=s("./app/views/starfish/allowedProjects.ts"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(){const{projects:e,initiallyLoaded:t,fetchError:s}=(0,l.Z)(),n=(0,o.Z)(),{selection:m,isReady:v}=(0,p.Z)(),g=(0,u.Z)();if(!t||!v)return(0,c.tZ)(r.Z,{disabled:!0,options:[{label:(0,i.t)("Loadingâ€¦"),value:"loading"}],defaultValue:"loading"});if(s)throw new Error("Failed to fetch projects");const y=d.g[n.slug]??[],f=e.filter((e=>y.includes(e.id))).map((e=>({label:(0,c.tZ)(h,{project:e}),value:e.id}))),w=f.find((e=>m.projects.includes(parseInt(e.value,10))))??f[0],x=e=>(0,a.id)([parseInt(e.value,10)],g,{save:!0});return(m.projects.length>1||!y.includes(`${m.projects[0]}`))&&x(f[0]),(0,c.tZ)(r.Z,{menuWidth:250,options:f,defaultValue:w?.value,onChange:x})}function h(e){let{project:t}=e;return(0,c.tZ)(n.Z,{project:t,avatarSize:20,disableLink:!0})}m.displayName="StarfishProjectSelector",h.displayName="ProjectOptionLabel"},"./app/views/starfish/utils/buildEventViewQuery.tsx":(e,t,s)=>{s.d(t,{$:()=>m}),s("../node_modules/core-js/modules/es.array.push.js");var a=s("./app/utils.tsx"),r=s("./app/views/starfish/types.tsx"),n=s("./app/views/starfish/views/spans/selectors/emptyOption.tsx"),i=s("./app/views/starfish/views/webServiceView/spanGroupBreakdownContainer.tsx");const{SPAN_DESCRIPTION:o,SPAN_OP:p,SPAN_DOMAIN:l,SPAN_ACTION:u,SPAN_MODULE:d}=r.SpanMetricsFields,c=[p,l,u,`!${d}`,"!span.category"];function m(e){let{moduleName:t,location:s,transaction:l,method:u,spanCategory:m}=e;const{query:h}=s,v=Object.keys(h).filter((e=>c.includes(e))).filter((e=>Boolean(h[e]))).map((e=>{const t=h[e],s=Array.isArray(t);if("!span.category"===e&&s&&t.includes("db")){const e=t.filter((e=>"db"!==e));return`(!span.category:db OR ${p}:db.redis) !span.category:[${e.join(",")}]`}return t===n.q?`!has:${e}`:`${e}:${s?`[${t}]`:t}`}));return v.push(`has:${o}`),t!==r.rA.ALL&&v.push(`${d}:${t}`),t===r.rA.DB&&v.push(`!${p}:db.redis`),(0,a.ri)(m)&&(m===i.sZ?v.push("!has:span.category"):"Other"!==m&&v.push(`span.category:${m}`)),l&&v.push(`transaction:${l}`),u&&v.push(`transaction.method:${u}`),v}},"./app/views/starfish/utils/extractRoute.tsx":(e,t,s)=>{function a(e){return e.pathname.match(/^\/starfish\/api\//)?"api":e.pathname.match(/^\/starfish\/database\//)?"database":e.pathname.match(/^\/starfish\/endpoint-overview\//)?"endpoint-overview":null}s.d(t,{G:()=>a})},"./app/views/starfish/utils/routeNames.tsx":(e,t,s)=>{s.d(t,{m:()=>r});var a=s("./app/locale.tsx");const r={api:(0,a.t)("API Calls"),database:(0,a.t)("Database"),"endpoint-overview":(0,a.t)("Endpoint Overview"),"span-summary":(0,a.t)("Span Summary"),"web-service":(0,a.t)("Web Service")}},"./app/views/starfish/views/spans/selectors/emptyOption.tsx":(e,t,s)=>{s.d(t,{N:()=>p,q:()=>i});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("./app/locale.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i="(empty)",o=(0,a.Z)("span",{target:"e14fiawm0"})("color:",(e=>e.theme.gray300),";");function p(){return(0,n.tZ)(o,{children:(0,r.t)("(empty string)")})}p.displayName="EmptyOption"},"./app/views/starfish/views/spans/spansTable.tsx":(e,t,s)=>{s.d(t,{Z:()=>B,k:()=>M}),s("../node_modules/core-js/modules/es.array.push.js");var a=s("../node_modules/react/index.js"),r=s("../node_modules/react-router/es/index.js"),n=s("../node_modules/query-string/index.js"),i=s("./app/components/gridEditable/index.tsx"),o=s("./app/components/links/link.tsx"),p=s("./app/components/pagination.tsx"),l=s("./app/utils.tsx"),u=s("./app/utils/discover/fieldRenderers.tsx"),d=s("./app/utils/performanceForSentry/index.tsx"),c=s("./app/utils/queryString.tsx"),m=s("./app/utils/useLocation.tsx"),h=s("./app/utils/useOrganization.tsx"),v=s("./app/views/starfish/components/tableCells/renderHeadCell.tsx"),g=s("./app/views/starfish/components/textAlign.tsx"),y=s("../node_modules/lodash/omit.js"),f=s.n(y),w=s("./app/utils/discover/eventView.tsx"),x=s("./app/utils/discover/types.tsx"),S=s("./app/views/starfish/types.tsx"),_=s("./app/views/starfish/utils/buildEventViewQuery.tsx"),A=s("./app/views/starfish/utils/useSpansQuery.tsx");const{SPAN_SELF_TIME:b,SPAN_DESCRIPTION:N,SPAN_GROUP:P,SPAN_OP:Z,SPAN_DOMAIN:C}=S.SpanMetricsFields,j=function(e,t,s,a,r,n){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"api.starfish.use-span-list",o=arguments.length>7?arguments[7]:void 0;const p=function(e,t,s,a,r,n){const i=[...(0,_.$)({moduleName:e,location:t,transaction:s,method:a,spanCategory:r}),"transaction.op:http.server"].join(" "),o=[Z,P,N,C,"sps()",`sum(${b})`,`avg(${b})`,"http_error_count()"];(0,l.ri)(s)?o.push("time_spent_percentage(local)"):o.push("time_spent_percentage()");const p=w.ZP.fromNewQueryWithLocation({name:"",query:i,fields:o,dataset:x.as.SPANS_METRICS,version:2},f()(t,"span.category","http.method"));return n&&(p.sorts=n),p}(e,(0,m.T)(),t,s,a,r),{isLoading:u,data:d,meta:c,pageLinks:h}=(0,A.RX)({eventView:p,initialData:[],limit:n,referrer:i,cursor:o});return{isLoading:u,data:d,meta:c,pageLinks:h}};var L=s("./app/views/starfish/utils/extractRoute.tsx"),T=s("./app/views/starfish/views/queryParameters.tsx"),O=s("./app/views/starfish/views/spans/types.tsx"),q=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const{SPAN_SELF_TIME:D,SPAN_DESCRIPTION:k,SPAN_DOMAIN:E,SPAN_GROUP:$,SPAN_OP:F}=S.SpanMetricsFields,R=new Set([`avg(${D})`,"sps()","time_spent_percentage()","time_spent_percentage(local)","http_error_count()"]);function B(e){let{moduleName:t,sort:s,columnOrder:l,spanCategory:y,endpoint:f,method:w,limit:x=25}=e;const _=(0,m.T)(),A=(0,h.Z)(),b=(0,c.ro)(_.query?.[T.o.CURSOR]),{isLoading:N,data:P,meta:Z,pageLinks:C}=j(t??S.rA.ALL,f,w,y,[s],x,"api.starfish.use-span-list",b),O=Boolean(f);return(0,q.tZ)(a.Fragment,{children:(0,q.BX)(d.oF,{id:"SpansTable",hasData:(P?.length??0)>0,isLoading:N,disabled:O,children:[(0,q.tZ)(i.ZP,{isLoading:N,data:P,columnOrder:l??I(t,y,f),columnSortBy:[{key:s.field,order:s.kind}],grid:{renderHeadCell:e=>(0,v.WJ)({column:e,sort:s,location:_}),renderBodyCell:(e,t)=>function(e,t,s,a,r,i,p){if(e.key===k){const e={...a.query,endpoint:i,endpointMethod:p};return(0,q.tZ)(g._F,{children:t[$]?(0,q.tZ)(o.Z,{to:`/starfish/${(0,L.G)(a)??"spans"}/span/${t[$]}${e?`?${n.stringify(e)}`:""}`,children:t[k]||"<null>"}):t[k]||"<null>"})}if(!s||!s?.fields)return t[e.key];return(0,u.Js)(e.key,s.fields,!1)(t,{location:a,organization:r,unit:s.units?.[e.key]})}(e,t,Z,_,A,f,w)},location:_}),(0,q.tZ)(p.Z,{pageLinks:C,onCursor:(e,t,s)=>{r.browserHistory.push({pathname:t,query:{...s,[T.o.CURSOR]:e}})}})]})})}function I(e,t,s){const a=function(e,t){return e===S.rA.HTTP?"URL Request":e===S.rA.DB?"Database Query":"cache"===t?"Cache Query":"serialize"===t?"Serializer":"middleware"===t?"Middleware":"app"===t?"Application Task":"other"===e?"Requests":"Description"}(e,t),r=function(e){return e===S.rA.HTTP?"Host":e===S.rA.DB?"Table":"Domain"}(e),n=[[S.rA.ALL,S.rA.OTHER].includes(e)?{key:F,name:"Operation",width:120}:void 0,{key:k,name:a,width:i.z7},...e!==S.rA.ALL&&e!==S.rA.DB?[{key:E,name:r,width:i.z7}]:[],{key:"sps()",name:(0,O.RY)(e),width:i.z7},{key:`avg(${D})`,name:O.FS.avg,width:i.z7},...e===S.rA.HTTP?[{key:"http_error_count()",name:O.FS.errorCount,width:i.z7}]:[]];return(0,l.ri)(s)?n.push({key:"time_spent_percentage(local)",name:O.FS.timeSpent,width:i.z7}):n.push({key:"time_spent_percentage()",name:O.FS.timeSpent,width:i.z7}),n.filter((e=>Boolean(e)))}function M(e){return R.has(e.field)}B.displayName="SpansTable"},"./app/views/starfish/views/spans/spansView.tsx":(e,t,s)=>{s.d(t,{Z:()=>he});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=s("../node_modules/react/index.js"),n=s("../node_modules/lodash/pick.js"),i=s.n(n),o=s("./app/components/organizations/pageFilterBar.tsx"),p=s("./app/styles/space.tsx"),l=s("./app/utils/discover/eventView.tsx"),u=s("./app/utils/useLocation.tsx"),d=s("./app/views/starfish/components/datePicker.tsx"),c=s("./app/views/starfish/components/starfishProjectSelector.tsx"),m=s("./app/views/starfish/types.tsx"),h=s("./app/views/starfish/views/queryParameters.tsx"),v=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react-router/es/index.js")),g=s("../node_modules/lodash/omit.js"),y=s.n(g),f=s("./app/components/forms/controls/selectControl.tsx"),w=s("./app/locale.tsx"),x=s("./app/utils/discover/types.tsx"),S=s("./app/views/starfish/utils/buildEventViewQuery.tsx"),_=s("./app/views/starfish/utils/useSpansQuery.tsx"),A=s("./app/views/starfish/views/spans/selectors/emptyOption.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const{SPAN_ACTION:N}=m.SpanMetricsFields;function P(e){let{value:t="",moduleName:s=m.rA.ALL,spanCategory:a}=e;const r=(0,u.T)(),n=function(e,t,s){const a=(0,S.$)({moduleName:t,location:{...e,query:y()(e.query,N)},spanCategory:s}).join(" ");return l.ZP.fromNewQueryWithLocation({name:"",fields:[N,"count()"],orderby:"-count",query:a,dataset:x.as.SPANS_METRICS,version:2},e)}(r,s,a),i=s===m.rA.HTTP,{data:o}=(0,_.bB)({eventView:n,initialData:[],enabled:!i,referrer:"api.starfish.get-span-actions"}),p=i?Z:[{value:"",label:"All"},{value:A.q,label:(0,b.tZ)(A.N,{})},...(o??[]).filter((e=>Boolean(e[N]))).map((e=>({value:e[N],label:e[N]})))];return(0,b.tZ)(f.Z,{inFieldLabel:`${C[s]}:`,value:t,options:p??[],onChange:e=>{v.browserHistory.push({...r,query:{...r.query,[N]:e.value}})}})}P.displayName="ActionSelector";const Z=[{value:"",label:"All"},...["GET","POST","PUT","DELETE"].map((e=>({value:e,label:e})))],C={http:(0,w.t)("HTTP Method"),db:(0,w.t)("SQL Command"),other:(0,w.t)("Action"),"":(0,w.t)("Action")};var j=s("../node_modules/lodash/debounce.js"),L=s.n(j);const{SPAN_DOMAIN:T}=m.SpanMetricsFields,O=100;function q(e){let{value:t="",moduleName:s=m.rA.ALL,spanCategory:a}=e;const[n,i]=(0,r.useState)({search:"",inputChanged:!1,shouldRequeryOnInputChange:!1}),o=(0,u.T)(),p=function(e,t,s,a){const r=[...(0,S.$)({moduleName:t,location:{...e,query:y()(e.query,T)},spanCategory:s}),...a&&a.length>0?[`span.domain:*${a}*`]:[]].join(" ");return l.ZP.fromNewQueryWithLocation({name:"",fields:["span.domain","count()"],orderby:"-count",query:r,dataset:x.as.SPANS_METRICS,version:2},e)}(o,s,a,n.search),{data:d,isLoading:c}=(0,_.bB)({eventView:p,initialData:[],limit:O,referrer:"api.starfish.get-span-domains"});!n.shouldRequeryOnInputChange&&d&&d.length>=O&&i({...n,shouldRequeryOnInputChange:!0}),(0,r.useEffect)((()=>{!c&&n.inputChanged&&i({...n,inputChanged:!1})}),[c]);const h=!c&&!n.inputChanged,g=h?[{value:"",label:"All"},{value:A.q,label:(0,b.tZ)(A.N,{})},...(d??[]).filter((e=>Boolean(e[T]))).map((e=>({value:e[T],label:e[T]}))).sort(((e,t)=>e.value.localeCompare(t.value)))]:[],N=(0,r.useCallback)(L()(((e,t)=>{i({...t,search:e})}),500),[]);return(0,b.tZ)(f.Z,{inFieldLabel:`${D[s]}:`,value:t,options:g,onInputChange:e=>{n.shouldRequeryOnInputChange&&(i({...n,inputChanged:!0}),N(e,n))},onChange:e=>{v.browserHistory.push({...o,query:{...o.query,[T]:e.value}})},noOptionsMessage:()=>h?void 0:(0,w.t)("Loading...")})}q.displayName="DomainSelector";const D={http:(0,w.t)("Host"),db:(0,w.t)("Table"),other:(0,w.t)("Domain"),"":(0,w.t)("Domain")},{SPAN_OP:k}=m.SpanMetricsFields;function E(e){let{value:t="",moduleName:s=m.rA.ALL,spanCategory:a}=e;const r=(0,u.T)(),n=function(e,t,s){const a=(0,S.$)({moduleName:t,location:{...e,query:y()(e.query,k)},spanCategory:s}).join(" ");return l.ZP.fromNewQueryWithLocation({name:"",fields:[k,"count()"],orderby:"-count",query:a,dataset:x.as.SPANS_METRICS,version:2},e)}(r,s,a),{data:i}=(0,_.bB)({eventView:n,initialData:[],referrer:"api.starfish.get-span-operations"}),o=[{value:"",label:"All"},...(i??[]).filter((e=>Boolean(e))).map((e=>""===e[k]?{value:A.q,label:(0,b.tZ)(A.N,{})}:{value:e[k],label:e[k]}))];return(0,b.tZ)(f.Z,{inFieldLabel:`${(0,w.t)("Operation")}:`,value:t,options:o??[],onChange:e=>{v.browserHistory.push({...r,query:{...r.query,[k]:e.value}})}})}E.displayName="SpanOperationSelector";var $=s("./app/components/charts/utils.tsx"),F=s("./app/utils/usePageFilters.tsx"),R=s("./app/views/starfish/colours.tsx"),B=s("./app/views/starfish/components/chart.tsx"),I=s("./app/views/starfish/components/chartPanel.tsx"),M=s("./app/views/starfish/utils/chartValueFormatters/formatThroughput.ts"),V=s("./app/views/starfish/utils/constants.tsx"),H=s("../node_modules/moment/moment.js");const Q=e=>{const t=(0,F.Z)(),s={id:void 0,name:"HTTP Module - HTTP error rate",fields:["http_error_count()"],query:e,version:1,topEvents:"5",dataset:x.as.SPANS_METRICS,interval:(0,$.ZS)(t.selection.datetime,V.R),yAxis:["http_error_count()"]},a=l.ZP.fromNewQueryWithPageFilters(s,t.selection),r=(0,_.bB)({eventView:a,initialData:[],referrer:"api.starfish.get-http-error-count"}),n=r?.data?.map((e=>({interval:(0,H.unix)(e.interval).format("YYYY-MM-DDTHH:mm:ss"),"http_error_count()":e["http_error_count()"]})));return{...r,formattedData:n}};var z=s("./app/views/starfish/views/spans/types.tsx"),G=s("./app/views/starfish/views/webServiceView/spanGroupBreakdownContainer.tsx");const{SPAN_SELF_TIME:U,SPAN_OP:W,SPAN_MODULE:X,SPAN_DESCRIPTION:Y}=m.SpanMetricsFields;function J(e){let{moduleName:t,appliedFilters:s,spanCategory:a}=e;const{selection:r}=(0,F.Z)(),n=ae(t,r,s,a),{isLoading:i}=(0,_.bB)({eventView:n,initialData:[],referrer:"api.starfish.span-time-charts"});(0,B.K4)([!i]);const o={[m.rA.ALL]:[{title:(0,z.C3)(t),Comp:K},{title:z.FS.avg,Comp:ee}],[m.rA.DB]:[],[m.rA.HTTP]:[{title:z.FS.errorCount,Comp:te}],[m.rA.OTHER]:[]},p=[...o[m.rA.ALL]];return t!==m.rA.ALL&&p.push(...o[t]),(0,b.tZ)(ne,{children:p.map((e=>{let{title:a,Comp:r}=e;return(0,b.tZ)(ie,{children:(0,b.tZ)(I.Z,{title:a,children:(0,b.tZ)(r,{moduleName:t,filters:s})})},a)}))})}function K(e){let{moduleName:t,filters:s}=e;const a=(0,F.Z)(),r=ae(t,a.selection,s),n=function(e){return e===m.rA.DB?"Queries":"Requests"}(t),{isLoading:i,data:o}=(0,_.bB)({eventView:r,initialData:[],referrer:"api.starfish.span-time-charts"}),p={[n]:o},l=Object.keys(p).map((e=>({seriesName:n??"Throughput",data:(p[e]??[]).map((e=>({value:e["sps()"],name:e.interval})))})));return(0,b.tZ)(B.ZP,{height:100,data:l,loading:i,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},definedAxisTicks:4,aggregateOutputFormat:"rate",stacked:!0,isLineChart:!0,chartColors:[R.SQ],tooltipFormatterOptions:{valueFormatter:e=>(0,M.Z)(e)}})}function ee(e){let{moduleName:t,filters:s}=e;const a=(0,F.Z)(),r=ae(t,a.selection,s),n=`avg(${U})`,{isLoading:i,data:o}=(0,_.bB)({eventView:r,initialData:[],referrer:"api.starfish.span-time-charts"}),p={[n]:o},l=Object.keys(p).map((e=>({seriesName:n,data:(p[e]??[]).map((e=>({value:e[`avg(${U})`],name:e.interval})))})));return(0,b.tZ)(B.ZP,{height:100,data:[...l],loading:i,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},definedAxisTicks:4,stacked:!0,isLineChart:!0,chartColors:[R.VG]})}function te(e){let{moduleName:t,filters:s}=e;const a=re(t,s),{isLoading:r,data:n}=Q(a),i={seriesName:z.FS.errorCount,data:n?.length?n?.map((e=>({name:e.interval,value:e["http_error_count()"]}))):[]};return(0,b.tZ)(B.ZP,{height:100,data:[i],loading:r,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},definedAxisTicks:4,stacked:!0,isLineChart:!0,chartColors:[R.eO]})}J.displayName="SpanTimeCharts",K.displayName="ThroughputChart",ee.displayName="DurationChart",te.displayName="ErrorChart";const se=["span_operation","domain","action"],ae=(e,t,s,a)=>{const r=re(e,s,a);return l.ZP.fromNewQueryWithPageFilters({name:"",fields:[""],yAxis:["sps()",`avg(${U})`],query:r,dataset:x.as.SPANS_METRICS,interval:(0,$.ZS)(t.datetime,V.R),version:2},t)},re=(e,t,s)=>{const a=Object.keys(t).filter((e=>se.includes(e))).filter((e=>Boolean(t[e]))).map((e=>`${e}:${t[e]}`));return a.push(`has:${Y}`),e!==m.rA.ALL&&a.push(`${X}:${e}`),e===m.rA.DB&&a.push(`!${W}:db.redis`),s&&(s===G.sZ?a.push("!has:span.category"):"Other"!==s&&a.push(`span.category:${s}`)),a.join(" ")},ne=(0,a.Z)("div",{target:"e1evs38o1"})("display:flex;flex-direction:row;flex-wrap:wrap;gap:",(0,p.D)(2),";"),ie=(0,a.Z)("div",{target:"e1evs38o0"})({name:"82a6rk",styles:"flex:1"});var oe=s("./app/views/starfish/views/spans/spansTable.tsx");const{SPAN_ACTION:pe,SPAN_DOMAIN:le,SPAN_OP:ue,SPAN_GROUP:de}=m.SpanMetricsFields,ce={kind:"desc",field:"time_spent_percentage()"},me=25;function he(e){const t=e.moduleName??m.rA.ALL,s=(0,u.T)(),a=i()(s.query,[pe,le,ue,de]),n=(0,l.vp)(s.query[h.o.SORT]).filter(oe.k)[0]??ce;return(0,b.BX)(r.Fragment,{children:[(0,b.BX)(ye,{condensed:!0,children:[(0,b.tZ)(c.Z,{}),(0,b.tZ)(d.Z,{})]}),(0,b.tZ)(ve,{children:(0,b.tZ)(J,{moduleName:t,appliedFilters:a,spanCategory:e.spanCategory})}),(0,b.BX)(ge,{children:[[m.rA.ALL,m.rA.OTHER].includes(t)&&(0,b.tZ)(E,{moduleName:t,value:a[ue]||"",spanCategory:e.spanCategory}),(0,b.tZ)(P,{moduleName:t,value:a[pe]||"",spanCategory:e.spanCategory}),(0,b.tZ)(q,{moduleName:t,value:a[le]||"",spanCategory:e.spanCategory})]}),(0,b.tZ)(ve,{children:(0,b.tZ)(oe.Z,{moduleName:t,spanCategory:e.spanCategory,sort:n,limit:me})})]})}he.displayName="SpansView";const ve=(0,a.Z)("div",{target:"e1ojq8vq2"})("margin:0 ",(0,p.D)(2),";"),ge=(0,a.Z)(ve,{target:"e1ojq8vq1"})("display:grid;grid-template-columns:repeat(3, 1fr);gap:",(0,p.D)(1),";margin-bottom:",(0,p.D)(2),";max-width:800px;"),ye=(0,a.Z)(o.Z,{target:"e1ojq8vq0"})("margin:0 ",(0,p.D)(2),";margin-bottom:",(0,p.D)(2),";")}}]);
//# sourceMappingURL=../sourcemaps/app_utils_performance_contexts_pageError_tsx-app_views_starfish_utils_routeNames_tsx-app_view-aba09a.ba14b1fdbb151c72b0a13788751c9a8f.js.map