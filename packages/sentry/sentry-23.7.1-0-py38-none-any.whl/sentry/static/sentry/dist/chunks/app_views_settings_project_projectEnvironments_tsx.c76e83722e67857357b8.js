"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_projectEnvironments_tsx"],{"./app/components/links/listLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>m});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=n("../node_modules/react-router/es/index.js"),o=n("../node_modules/classnames/index.js"),r=n.n(o),a=n("../node_modules/query-string/index.js"),d=n("./app/utils/useRouter.tsx"),p=n("./app/utils/withDomainRequired.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{children:t,className:n,isActive:s,query:o,to:l,activeClassName:m="active",index:u=!1,disabled:v=!1,...x}=e;const g=(0,d.Z)(),y=o?a.parse(o):void 0,Z="string"==typeof l?{pathname:l,query:y}:l,j=(0,p.D)(Z),b=s?.(j,u)??g.isActive(j,u);return(0,c.tZ)(h,{className:r()({[m]:b},n),disabled:v,children:(0,c.tZ)(i.Link,{...x,onlyActiveOnIndex:u,to:v?"":j,children:t})})}l.displayName="ListLink";const m=l,h=(0,s.Z)("li",{shouldForwardProp:e=>"disabled"!==e,target:"e1n345k60"})((e=>e.disabled&&`\n   a {\n    color:${e.theme.disabled} !important;\n    pointer-events: none;\n    :hover {\n      color: ${e.theme.disabled}  !important;\n    }\n   }\n`),";")},"./app/components/panels/panelHeader.tsx":(e,t,n)=>{n.d(t,{Z:()=>a});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=n("./app/styles/space.tsx");const r=e=>{let{disablePadding:t,hasButtons:n}=e;return(0,i.iv)("padding:",n?(0,o.D)(1):(0,o.D)(2)," ",t?0:(0,o.D)(2),";","")},a=(0,s.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",r,";")},"./app/utils/environment.tsx":(e,t,n)=>{n.d(t,{G:()=>r,z:()=>o});const s="none",i="(No Environment)";function o(e){return e.name?encodeURIComponent(e.name):e.displayName?encodeURIComponent(e.displayName):s}function r(e){return e.name||e.displayName||i}},"./app/views/settings/project/permissionAlert.tsx":(e,t,n)=>{n.d(t,{Z:()=>p});var s=n("./app/components/acl/access.tsx"),i=n("./app/components/alert.tsx"),o=n("./app/locale.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,o.t)("These settings can only be edited by users with the organization-level owner, manager, or team-level admin roles.");function d(e){let{access:t=["project:write"],project:n,team:o,...d}=e;return(0,r.tZ)(s.Z,{access:t,project:n,team:o,children:e=>{let{hasAccess:t}=e;return!t&&(0,r.tZ)(i.bZ,{"data-test-id":"project-permission-alert",type:"warning",...d,children:a})}})}d.displayName="PermissionAlert";const p=d},"./app/views/settings/project/projectEnvironments.tsx":(e,t,n)=>{n.r(t),n.d(t,{ProjectEnvironments:()=>k,default:()=>L});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("../node_modules/react/index.js"),r=n("./app/actionCreators/indicator.tsx"),a=n("./app/components/acl/access.tsx"),d=n("./app/components/button.tsx"),p=n("./app/components/emptyMessage.tsx"),c=n("./app/components/links/listLink.tsx"),l=n("./app/components/loadingIndicator.tsx"),m=n("./app/components/navTabs.tsx"),h=n("./app/components/panels/panel.tsx"),u=n("./app/components/panels/panelBody.tsx"),v=n("./app/components/panels/panelHeader.tsx"),x=n("./app/components/panels/panelItem.tsx"),g=n("./app/components/sentryDocumentTitle.tsx"),y=n("./app/constants/index.tsx"),Z=n("./app/locale.tsx"),j=n("./app/styles/space.tsx"),b=n("./app/utils/environment.tsx"),w=n("./app/utils/recreateRoute.tsx"),f=n("./app/utils/withApi.tsx"),E=n("./app/views/settings/components/settingsPageHeader.tsx"),_=n("./app/views/settings/project/permissionAlert.tsx"),A=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class k extends o.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{environments:null,isLoading:!0}),(0,s.Z)(this,"toggleEnv",((e,t)=>{const{organization:n}=this.props,{projectId:s}=this.props.params;this.props.api.request(`/projects/${n.slug}/${s}/environments/${(0,b.z)(e)}/`,{method:"PUT",data:{name:e.name,isHidden:t},success:()=>{(0,r.S9)((0,Z._N)("Updated [environment]",{environment:(0,b.G)(e)}))},error:()=>{(0,r.Iw)((0,Z._N)("Unable to update [environment]",{environment:(0,b.G)(e)}))},complete:this.fetchData.bind(this)})}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){this.props.location.pathname.endsWith("hidden/")!==e.location.pathname.endsWith("hidden/")&&this.fetchData()}fetchData(){const e=this.props.location.pathname.endsWith("hidden/");this.state.isLoading||this.setState({isLoading:!0});const{organization:t}=this.props,{projectId:n}=this.props.params;this.props.api.request(`/projects/${t.slug}/${n}/environments/`,{query:{visibility:e?"hidden":"visible"},success:e=>{this.setState({environments:e,isLoading:!1})}})}renderEmpty(){const e=this.props.location.pathname.endsWith("hidden/")?(0,Z.t)("You don't have any hidden environments."):(0,Z.t)("You don't have any environments yet.");return(0,A.tZ)(p.Z,{children:e})}renderAllEnvironmentsSystemRow(){if(this.props.location.pathname.endsWith("hidden/"))return null;const{project:e}=this.props;return(0,A.tZ)(N,{project:e,name:y.UZ,environment:{id:y.UZ,name:y.UZ,displayName:y.UZ},isSystemRow:!0})}renderEnvironmentList(e){const{project:t}=this.props,n=this.props.location.pathname.endsWith("hidden/"),s=n?(0,Z.t)("Show"):(0,Z.t)("Hide");return(0,A.BX)(o.Fragment,{children:[this.renderAllEnvironmentsSystemRow(),e.map((e=>(0,A.tZ)(N,{project:t,name:e.name,environment:e,isHidden:n,onHide:this.toggleEnv,actionText:s,shouldShowAction:!0},e.id)))]})}renderBody(){const{environments:e,isLoading:t}=this.state;return t?(0,A.tZ)(l.Z,{}):(0,A.tZ)(u.Z,{children:e?.length?this.renderEnvironmentList(e):this.renderEmpty()})}render(){const{routes:e,params:t,location:n,project:s}=this.props,i=n.pathname.endsWith("hidden/"),o=(0,w.Z)("",{routes:e,params:t,stepBack:-1});return(0,A.BX)("div",{children:[(0,A.tZ)(g.Z,{title:(0,Z.t)("Environments"),projectSlug:t.projectId}),(0,A.tZ)(E.Z,{title:(0,Z.t)("Manage Environments"),tabs:(0,A.BX)(m.Z,{underlined:!0,children:[(0,A.tZ)(c.Z,{to:o,index:!0,isActive:()=>!i,children:(0,Z.t)("Environments")}),(0,A.tZ)(c.Z,{to:`${o}hidden/`,index:!0,isActive:()=>i,children:(0,Z.t)("Hidden")})]})}),(0,A.tZ)(_.Z,{project:s}),(0,A.BX)(h.Z,{children:[(0,A.tZ)(v.Z,{children:i?(0,Z.t)("Hidden"):(0,Z.t)("Active Environments")}),this.renderBody()]})]})}}function N(e){let{project:t,environment:n,name:s,onHide:i,shouldShowAction:r=!1,isSystemRow:d=!1,isHidden:p=!1,actionText:c=""}=e;return(0,A.BX)(S,{children:[(0,A.tZ)(D,{children:d?(0,Z.t)("All Environments"):s}),(0,A.tZ)(a.Z,{access:["project:write"],project:t,children:e=>{let{hasAccess:t}=e;return(0,A.tZ)(o.Fragment,{children:r&&i&&(0,A.tZ)(B,{size:"xs",disabled:!t,onClick:()=>i(n,!p),children:c})})}})]})}k.displayName="ProjectEnvironments",N.displayName="EnvironmentRow";const S=(0,i.Z)(x.Z,{target:"eyiwnwt2"})({name:"1tz8p38",styles:"align-items:center;justify-content:space-between"}),D=(0,i.Z)("div",{target:"eyiwnwt1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),B=(0,i.Z)(d.zx,{target:"eyiwnwt0"})("margin-left:",(0,j.D)(.5),";"),L=(0,f.Z)(k)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectEnvironments_tsx.e9f053bc712842e38f35f374d3bf3914.js.map