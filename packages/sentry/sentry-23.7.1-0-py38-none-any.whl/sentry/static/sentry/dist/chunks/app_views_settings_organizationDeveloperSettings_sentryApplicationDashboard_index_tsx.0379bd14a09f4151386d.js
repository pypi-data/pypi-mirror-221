"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationDeveloperSettings_sentryApplicationDashboard_index_tsx"],{"./app/components/charts/lineChart.tsx":(e,t,n)=>{n.d(t,{w:()=>i});var s=n("./app/components/charts/series/lineSeries.tsx"),a=n("./app/components/charts/baseChart.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){let{series:t,seriesOptions:n,...i}=e;return(0,r.tZ)(a.Z,{...i,series:t.map((e=>{let{seriesName:t,data:a,dataArray:r,...i}=e;return(0,s.Z)({...n,...i,name:t,data:r||a?.map((e=>{let{value:t,name:n}=e;return[n,t]})),animation:!1,animationThreshold:1,animationDuration:0})}))})}i.displayName="LineChart"},"./app/components/panels/panelFooter.tsx":(e,t,n)=>{n.d(t,{Z:()=>s});const s=(0,n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"eqhqnhn0"})("border-top:1px solid ",(e=>e.theme.border),";color:",(e=>e.theme.subText),";font-size:14px;")},"./app/components/panels/panelHeader.tsx":(e,t,n)=>{n.d(t,{Z:()=>o});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),r=n("./app/styles/space.tsx");const i=e=>{let{disablePadding:t,hasButtons:n}=e;return(0,a.iv)("padding:",n?(0,r.D)(1):(0,r.D)(2)," ",t?0:(0,r.D)(2),";","")},o=(0,s.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",i,";")},"./app/views/deprecatedAsyncView.tsx":(e,t,n)=>{n.d(t,{Z:()=>i});var s=n("./app/components/deprecatedAsyncComponent.tsx"),a=n("./app/components/sentryDocumentTitle.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends s.Z{getTitle(){return""}render(){return(0,r.tZ)(a.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="DeprecatedAsyncView"},"./app/views/settings/organizationDeveloperSettings/sentryApplicationDashboard/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/react/index.js"),r=n("./app/components/charts/barChart.tsx"),i=n("./app/components/charts/lineChart.tsx"),o=n("./app/components/dateTime.tsx"),l=n("./app/components/links/link.tsx"),d=n("./app/components/panels/panel.tsx"),p=n("./app/components/panels/panelBody.tsx"),c=n("./app/components/panels/panelFooter.tsx"),h=n("./app/components/panels/panelHeader.tsx"),m=n("./app/locale.tsx"),u=n("./app/styles/space.tsx"),g=n("./app/utils/withOrganization.tsx"),Z=n("./app/views/deprecatedAsyncView.tsx"),y=n("./app/views/settings/components/settingsPageHeader.tsx"),x=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),b=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/lodash/memoize.js")),v=n.n(b),f=n("./app/components/button.tsx"),w=n("./app/components/checkbox.tsx"),k=n("./app/components/compactSelect/index.tsx"),D=n("./app/components/deprecatedAsyncComponent.tsx"),j=n("./app/components/emptyMessage.tsx"),C=n("./app/components/links/externalLink.tsx"),z=n("./app/components/loadingIndicator.tsx"),B=n("./app/components/panels/panelItem.tsx"),_=n("./app/components/tag.tsx"),P=n("./app/icons/index.tsx"),T=n("./app/utils/dates.tsx"),I=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const S=(0,m.t)("All Events"),X=(0,T.gn)(),O=v()((e=>{let t=[];const n=(e.schema.elements||[]).find((e=>"issue-link"===e.type));return n&&(t=["external_issue.created","external_issue.linked"],(e=>{const t=e=>e.some((e=>"select"===e.type&&"uri"in e)),n=t(e.create.required_fields)||t(e.create.optional_fields||[]),s=t(e.link.required_fields)||t(e.link.optional_fields||[]);return n||s})(n)&&t.push("select_options.requested")),[S,..."internal"!==e.status?["installation.created","installation.deleted"]:[],...e.events.includes("error")?["error.created"]:[],...e.events.includes("issue")?["issue.created","issue.resolved","issue.ignored","issue.assigned"]:[],...e.isAlertable?["event_alert.triggered","metric_alert.open","metric_alert.resolved","metric_alert.critical","metric_alert.warning"]:[],...t]}));function q(e){let{code:t}=e,n="error";return t<=399&&t>=300?n="warning":t<=299&&t>=100&&(n="success"),(0,I.tZ)(H,{children:(0,I.tZ)(U,{type:n,children:0===t?"timeout":t})})}function N(e){let{date:t,link:n}=e;return n?(0,I.BX)(C.Z,{href:n,children:[(0,I.tZ)(o.Z,{date:t}),(0,I.tZ)(F,{size:"xs"})]}):(0,I.tZ)(o.Z,{date:t,format:X?"MMM D, YYYY HH:mm:ss z":"ll LTS z"})}q.displayName="ResponseCode";class A extends D.Z{constructor(){super(...arguments),(0,x.Z)(this,"shouldReload",!0),(0,x.Z)(this,"handleChangeEventType",(e=>{this.setState({eventType:e,currentPage:0},this.remountComponent)})),(0,x.Z)(this,"handleChangeErrorsOnly",(()=>{this.setState({errorsOnly:!this.state.errorsOnly,currentPage:0},this.remountComponent)})),(0,x.Z)(this,"handleNextPage",(()=>{this.setState({currentPage:this.state.currentPage+1})})),(0,x.Z)(this,"handlePrevPage",(()=>{this.setState({currentPage:this.state.currentPage-1})}))}get hasNextPage(){return 10*(this.state.currentPage+1)<this.state.requests.length}get hasPrevPage(){return this.state.currentPage>0}getEndpoints(){const{slug:e}=this.props.app,t={};return this.state&&(this.state.eventType!==S&&(t.eventType=this.state.eventType),this.state.errorsOnly&&(t.errorsOnly=!0)),[["requests",`/sentry-apps/${e}/requests/`,{query:t}]]}getDefaultState(){return{...super.getDefaultState(),requests:[],eventType:S,errorsOnly:!1,currentPage:0}}renderLoading(){return this.renderBody()}renderBody(){const{requests:e,eventType:t,errorsOnly:n,currentPage:s}=this.state,{app:r}=this.props,i=e.slice(10*s,10*(s+1));return(0,I.BX)(a.Fragment,{children:[(0,I.tZ)("h5",{children:(0,m.t)("Request Log")}),(0,I.BX)("div",{children:[(0,I.tZ)("p",{children:(0,m.t)("This log shows the status of any outgoing webhook requests from Sentry to your integration.")}),(0,I.BX)(V,{children:[(0,I.tZ)(k.Z,{triggerLabel:t,value:t,options:O(r).map((e=>({value:e,label:e}))),onChange:e=>this.handleChangeEventType(e?.value)}),(0,I.tZ)(R,{onClick:this.handleChangeErrorsOnly,children:(0,I.BX)(M,{children:[(0,I.tZ)(w.Z,{checked:n,onChange:()=>{}}),(0,m.t)("Errors Only")]})})]})]}),(0,I.BX)(d.Z,{children:[(0,I.tZ)(h.Z,{children:(0,I.BX)(E,{hasOrganization:"internal"!==r.status,children:[(0,I.tZ)("div",{children:(0,m.t)("Time")}),(0,I.tZ)("div",{children:(0,m.t)("Status Code")}),"internal"!==r.status&&(0,I.tZ)("div",{children:(0,m.t)("Organization")}),(0,I.tZ)("div",{children:(0,m.t)("Event Type")}),(0,I.tZ)("div",{children:(0,m.t)("Webhook URL")})]})}),this.state.loading?(0,I.tZ)(z.Z,{}):(0,I.tZ)(p.Z,{children:i.length>0?i.map(((e,t)=>(0,I.tZ)(B.Z,{"data-test-id":"request-item",children:(0,I.BX)(E,{hasOrganization:"internal"!==r.status,children:[(0,I.tZ)(N,{date:e.date,link:e.errorUrl}),(0,I.tZ)(q,{code:e.responseCode}),"internal"!==r.status&&(0,I.tZ)("div",{children:e.organization?e.organization.name:null}),(0,I.tZ)("div",{children:e.eventType}),(0,I.tZ)(L,{children:e.webhookUrl})]})},t))):(0,I.tZ)(j.Z,{icon:(0,I.tZ)(P.Gy,{size:"xl"}),children:(0,m.t)("No requests found in the last 30 days.")})})]}),(0,I.BX)($,{children:[(0,I.tZ)(f.zx,{icon:(0,I.tZ)(P.g6,{direction:"left",size:"sm"}),onClick:this.handlePrevPage,disabled:!this.hasPrevPage,"aria-label":(0,m.t)("Previous page")}),(0,I.tZ)(f.zx,{icon:(0,I.tZ)(P.g6,{direction:"right",size:"sm"}),onClick:this.handleNextPage,disabled:!this.hasNextPage,"aria-label":(0,m.t)("Next page")})]})]})}}const E=(0,s.Z)("div",{target:"e11ya9eg8"})("display:grid;grid-template-columns:1fr 0.5fr ",(e=>e.hasOrganization?"1fr":"")," 1fr 1fr;grid-column-gap:",(0,u.D)(1.5),";width:100%;align-items:center;"),L=(0,s.Z)("div",{target:"e11ya9eg7"})({name:"1sdjnkx",styles:"word-break:break-word"}),$=(0,s.Z)("div",{target:"e11ya9eg6"})({name:"6izmta",styles:"display:flex;justify-content:flex-end;align-items:center;>:first-child{border-top-right-radius:0;border-bottom-right-radius:0;}>:nth-child(2){margin-left:-1px;border-top-left-radius:0;border-bottom-left-radius:0;}"}),V=(0,s.Z)("div",{target:"e11ya9eg5"})("display:flex;align-items:center;padding-bottom:",(0,u.D)(1),";>:first-child ",f.Sn,"{border-radius:",(e=>e.theme.borderRadiusLeft),";}"),M=(0,s.Z)("div",{target:"e11ya9eg4"})("display:flex;gap:",(0,u.D)(1),";align-items:center;"),R=(0,s.Z)(f.zx,{target:"e11ya9eg3"})({name:"9aiwao",styles:"margin-left:-1px;border-top-left-radius:0;border-bottom-left-radius:0"}),F=(0,s.Z)(P.V$,{target:"e11ya9eg2"})("margin-left:6px;color:",(e=>e.theme.subText),";"),H=(0,s.Z)("div",{target:"e11ya9eg1"})("margin:-",(0,u.D)(.5),";"),U=(0,s.Z)(_.Z,{target:"e11ya9eg0"})("padding:",(0,u.D)(.5),";display:inline-flex;");class Y extends Z.Z{getEndpoints(){const{appSlug:e}=this.props.params,t=Math.floor((new Date).getTime()/1e3),n=7776e3;return[["stats",`/sentry-apps/${e}/stats/`,{query:{since:t-n,until:t}}],["interactions",`/sentry-apps/${e}/interaction/`,{query:{since:t-n,until:t}}],["app",`/sentry-apps/${e}/`]]}getTitle(){return(0,m.t)("Integration Dashboard")}renderInstallData(){const{app:e,stats:t}=this.state,{totalUninstalls:n,totalInstalls:s}=t;return(0,I.BX)(a.Fragment,{children:[(0,I.tZ)("h5",{children:(0,m.t)("Installation & Interaction Data")}),(0,I.BX)(J,{children:[e.datePublished?(0,I.BX)(K,{children:[(0,I.tZ)(Q,{children:(0,m.t)("Date published")}),(0,I.tZ)(o.Z,{dateOnly:!0,date:e.datePublished})]}):null,(0,I.BX)(K,{"data-test-id":"installs",children:[(0,I.tZ)(Q,{children:(0,m.t)("Total installs")}),(0,I.tZ)("p",{children:s})]}),(0,I.BX)(K,{"data-test-id":"uninstalls",children:[(0,I.tZ)(Q,{children:(0,m.t)("Total uninstalls")}),(0,I.tZ)("p",{children:n})]})]}),this.renderInstallCharts()]})}renderInstallCharts(){const{installStats:e,uninstallStats:t}=this.state.stats,n={data:e.map((e=>({name:1e3*e[0],value:e[1]}))),seriesName:(0,m.t)("installed")},s={data:t.map((e=>({name:1e3*e[0],value:e[1]}))),seriesName:(0,m.t)("uninstalled")};return(0,I.BX)(d.Z,{children:[(0,I.tZ)(h.Z,{children:(0,m.t)("Installations/Uninstallations over Last 90 Days")}),(0,I.tZ)(te,{children:(0,I.tZ)(r.v,{series:[n,s],height:150,stacked:!0,isGroupedByDate:!0,legend:{show:!0,orient:"horizontal",data:["installed","uninstalled"],itemWidth:15},yAxis:{type:"value",minInterval:1,max:"dataMax"},xAxis:{type:"time"},grid:{left:(0,u.D)(4),right:(0,u.D)(4)}})})]})}renderIntegrationViews(){const{views:e}=this.state.interactions,{organization:t}=this.props,{appSlug:n}=this.props.params;return(0,I.BX)(d.Z,{children:[(0,I.tZ)(h.Z,{children:(0,m.t)("Integration Views")}),(0,I.tZ)(p.Z,{children:(0,I.tZ)(W,{data:{Views:e}})}),(0,I.tZ)(c.Z,{children:(0,I.BX)(ee,{children:[(0,m.t)("Integration views are measured through views on the "),(0,I.tZ)(l.Z,{to:`/sentry-apps/${n}/external-install/`,children:(0,m.t)("external installation page")}),(0,m.t)(" and views on the Learn More/Install modal on the "),(0,I.tZ)(l.Z,{to:`/settings/${t.slug}/integrations/`,children:(0,m.t)("integrations page")})]})})]})}renderComponentInteractions(){const{componentInteractions:e}=this.state.interactions,t={"stacktrace-link":(0,m.t)("Each link click or context menu open counts as one interaction"),"issue-link":(0,m.t)("Each open of the issue link modal counts as one interaction")};return(0,I.BX)(d.Z,{children:[(0,I.tZ)(h.Z,{children:(0,m.t)("Component Interactions")}),(0,I.tZ)(p.Z,{children:(0,I.tZ)(W,{data:e})}),(0,I.tZ)(c.Z,{children:(0,I.tZ)(ee,{children:Object.keys(e).map(((e,n)=>t[e]&&(0,I.BX)(a.Fragment,{children:[(0,I.tZ)("strong",{children:`${e}: `}),t[e],(0,I.tZ)("br",{})]},n)))})})]})}renderBody(){const{app:e}=this.state;return(0,I.BX)("div",{children:[(0,I.tZ)(y.Z,{title:`${(0,m.t)("Integration Dashboard")} - ${e.name}`}),"published"===e.status&&this.renderInstallData(),"published"===e.status&&this.renderIntegrationViews(),e.schema.elements&&this.renderComponentInteractions(),(0,I.tZ)(A,{app:e})]})}}const G=(0,g.Z)(Y);function W(e){let{data:t}=e;const n=Object.keys(t).map((e=>({seriesName:e,data:t[e].map((e=>({value:e[1],name:1e3*e[0]})))})));return(0,I.tZ)(te,{children:(0,I.tZ)(i.w,{isGroupedByDate:!0,series:n,grid:{left:(0,u.D)(4),right:(0,u.D)(4)},legend:{show:!0,orient:"horizontal",data:Object.keys(t)}})})}W.displayName="InteractionsChart";const J=(0,s.Z)("div",{target:"e1fjij9n4"})({name:"zjik7",styles:"display:flex"}),K=(0,s.Z)("div",{target:"e1fjij9n3"})("margin-right:",(0,u.D)(4),";"),Q=(0,s.Z)("h6",{target:"e1fjij9n2"})("margin-bottom:",(0,u.D)(1),";font-size:12px;text-transform:uppercase;color:",(e=>e.theme.subText),";"),ee=(0,s.Z)("div",{target:"e1fjij9n1"})("padding:",(0,u.D)(1.5),";"),te=(0,s.Z)("div",{target:"e1fjij9n0"})("padding-top:",(0,u.D)(3),";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationDeveloperSettings_sentryApplicationDashboard_index_tsx.2c4204f6616d5e2573900deaf7b561be.js.map