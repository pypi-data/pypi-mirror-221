"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_forms_formPanel_tsx-app_views_settings_account_accountEmails_tsx"],{"./app/components/forms/formPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),i=s("./app/components/forms/fieldFromConfig.tsx"),a=s("./app/components/panels/panel.tsx"),r=s("./app/components/panels/panelBody.tsx"),l=s("./app/components/panels/panelHeader.tsx"),d=s("./app/icons/index.tsx"),p=s("./app/utils/sanitizeQuerySelector.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c(e){let{additionalFieldProps:t={},title:s,fields:n,access:c,disabled:u,renderFooter:f,renderHeader:y,collapsible:Z,initiallyCollapsed:x=!1,...g}=e;const[b,v]=(0,o.useState)(x),w=(0,o.useCallback)((()=>v((e=>!e))),[]);return(0,m.BX)(a.Z,{id:"string"==typeof s?(0,p.m)(s):void 0,children:[s&&(0,m.BX)(l.Z,{children:[s,Z&&(0,m.tZ)(h,{onClick:w,children:(0,m.tZ)(d.g6,{"data-test-id":"form-panel-collapse-chevron",direction:b?"down":"up",size:"xs"})})]}),(0,m.BX)(r.Z,{hidden:b,children:["function"==typeof y&&y({title:s,fields:n}),n.map((e=>{if("function"==typeof e)return e();const{defaultValue:s,...n}=e;return!0===u&&(n.disabled=!0,n.disabledReason=void 0),(0,m.tZ)(i.Z,{access:c,disabled:u,...g,...t,field:n,highlighted:g.highlighted===`#${e.name}`},e.name)})),"function"==typeof f&&f({title:s,fields:n})]})]})}c.displayName="FormPanel";const u=c,h=(0,n.Z)("span",{target:"eovlw60"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/components/panels/panelHeader.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),i=s("./app/styles/space.tsx");const a=e=>{let{disablePadding:t,hasButtons:s}=e;return(0,o.iv)("padding:",s?(0,i.D)(1):(0,i.D)(2)," ",t?0:(0,i.D)(2),";","")},r=(0,n.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",a,";")},"./app/views/settings/account/accountEmails.tsx":(e,t,s)=>{s.r(t),s.d(t,{EmailAddresses:()=>E,default:()=>_});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),a=s("./app/actionCreators/indicator.tsx"),r=s("./app/components/alertLink.tsx"),l=s("./app/components/button.tsx"),d=s("./app/components/buttonBar.tsx"),p=s("./app/components/deprecatedAsyncComponent.tsx"),m=s("./app/components/forms/form.tsx"),c=s("./app/components/forms/jsonForm.tsx"),u=s("./app/components/loadingIndicator.tsx"),h=s("./app/components/panels/panel.tsx"),f=s("./app/components/panels/panelBody.tsx"),y=s("./app/components/panels/panelHeader.tsx"),Z=s("./app/components/panels/panelItem.tsx"),x=s("./app/components/tag.tsx"),g=s("./app/data/forms/accountEmails.tsx"),b=s("./app/icons/index.tsx"),v=s("./app/locale.tsx"),w=s("./app/styles/space.tsx"),j=s("./app/views/deprecatedAsyncView.tsx"),S=s("./app/views/settings/components/settingsPageHeader.tsx"),P=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const B="/users/me/emails/";class C extends("app"==s.j?j.Z:null){constructor(){super(...arguments),(0,n.Z)(this,"handleSubmitSuccess",((e,t,s)=>{void 0!==s&&(t.setValue(s,""),this.remountComponent())}))}getTitle(){return(0,v.t)("Emails")}getEndpoints(){return[]}renderBody(){return(0,P.BX)(i.Fragment,{children:[(0,P.tZ)(S.Z,{title:(0,v.t)("Email Addresses")}),(0,P.tZ)(E,{}),(0,P.tZ)(m.Z,{apiMethod:"POST",apiEndpoint:B,saveOnBlur:!0,allowUndo:!1,onSubmitSuccess:this.handleSubmitSuccess,children:(0,P.tZ)(c.Z,{forms:g.default})}),(0,P.tZ)(r.Z,{to:"/settings/account/notifications",icon:(0,P.tZ)(b.bv,{}),children:(0,v.t)("Want to change how many emails you get? Use the notifications panel.")})]})}}const _="app"==s.j?C:null;class E extends p.Z{constructor(){super(...arguments),(0,n.Z)(this,"handleSetPrimary",(e=>this.doApiCall(B,{method:"PUT",data:{email:e}}))),(0,n.Z)(this,"handleRemove",(e=>this.doApiCall(B,{method:"DELETE",data:{email:e}}))),(0,n.Z)(this,"handleVerify",(e=>this.doApiCall(`${B}confirm/`,{method:"POST",data:{email:e}})))}getEndpoints(){return[["emails",B]]}doApiCall(e,t){this.setState({loading:!0,emails:[]},(()=>this.api.requestPromise(e,t).then((()=>this.remountComponent())).catch((e=>{this.remountComponent(),e?.responseJSON?.email&&(0,a.Iw)(e.responseJSON.email)}))))}render(){const{emails:e,loading:t}=this.state,s=e?.find((e=>{let{isPrimary:t}=e;return t})),n=e?.filter((e=>{let{isPrimary:t}=e;return!t}));return t?(0,P.BX)(h.Z,{children:[(0,P.tZ)(y.Z,{children:(0,v.t)("Email Addresses")}),(0,P.tZ)(f.Z,{children:(0,P.tZ)(u.Z,{})})]}):(0,P.BX)(h.Z,{children:[(0,P.tZ)(y.Z,{children:(0,v.t)("Email Addresses")}),(0,P.BX)(f.Z,{children:[s&&(0,P.tZ)(k,{onRemove:this.handleRemove,onVerify:this.handleVerify,...s}),n?.map((e=>(0,P.tZ)(k,{onSetPrimary:this.handleSetPrimary,onRemove:this.handleRemove,onVerify:this.handleVerify,...e},e.email)))]})]})}}function k(e){let{email:t,onRemove:s,onVerify:n,onSetPrimary:o,isVerified:i,isPrimary:a,hideRemove:r}=e;return(0,P.BX)(z,{children:[(0,P.BX)(R,{children:[t,!i&&(0,P.tZ)(x.Z,{type:"warning",children:(0,v.t)("Unverified")}),a&&(0,P.tZ)(x.Z,{type:"success",children:(0,v.t)("Primary")})]}),(0,P.BX)(d.ZP,{gap:1,children:[!a&&i&&(0,P.tZ)(l.zx,{size:"sm",onClick:e=>o?.(t,e),children:(0,v.t)("Set as primary")}),!i&&(0,P.tZ)(l.zx,{size:"sm",onClick:e=>n(t,e),children:(0,v.t)("Resend verification")}),!r&&!a&&(0,P.tZ)(l.zx,{"aria-label":(0,v.t)("Remove email"),"data-test-id":"remove",priority:"danger",size:"sm",icon:(0,P.tZ)(b.Fz,{}),onClick:e=>s(t,e)})]})]})}E.displayName="EmailAddresses",k.displayName="EmailRow";const R=(0,o.Z)("div",{target:"e16vjjyw1"})("display:grid;grid-auto-flow:column;gap:",(0,w.D)(1),";align-items:center;"),z=(0,o.Z)(Z.Z,{target:"e16vjjyw0"})({name:"2o6p8u",styles:"justify-content:space-between"})}}]);
//# sourceMappingURL=../sourcemaps/app_components_forms_formPanel_tsx-app_views_settings_account_accountEmails_tsx.f6ecb2dda85fcf998e0c9269402b0c39.js.map