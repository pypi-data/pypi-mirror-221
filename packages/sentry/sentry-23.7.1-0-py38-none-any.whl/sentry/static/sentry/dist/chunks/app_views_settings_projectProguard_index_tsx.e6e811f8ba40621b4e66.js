"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectProguard_index_tsx"],{"./app/components/acl/role.tsx":(e,t,s)=>{s.d(t,{u:()=>a});var n=s("../node_modules/react/index.js"),o=s("./app/stores/configStore.tsx"),i=s("./app/utils/isActiveSuperuser.tsx"),r=s("./app/utils/isRenderFunc.tsx");const a=(0,s("./app/utils/withOrganization.tsx").Z)((function(e){let{role:t,organization:s,children:a}=e;const l=o.Z.get("user"),p=(0,n.useMemo)((()=>function(e,t,s){if(!e)return!1;if((0,i.M)())return!0;if(!Array.isArray(t.orgRoleList))return!1;const n=t.orgRoleList.map((e=>e.id));if(!n.includes(s)||!n.includes(t.orgRole??""))return!1;const o=n.indexOf(s);return n.indexOf(t.orgRole??"")>=o}(l,s,t)),[s,t,l]);return(0,r.l)(a)?a({hasRole:p}):p?a:null}))},"./app/views/settings/projectProguard/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),i=s("./app/actionCreators/indicator.tsx"),r=s("./app/components/links/externalLink.tsx"),a=s("./app/components/pagination.tsx"),l=s("./app/components/panels/panelTable.tsx"),p=s("./app/components/searchBar.tsx"),d=s("./app/locale.tsx"),c=s("./app/utils/queryClient.tsx"),u=s("./app/utils/useApi.tsx"),m=s("./app/views/settings/components/settingsPageHeader.tsx"),g=s("./app/views/settings/components/text/textBlock.tsx"),h=s("./app/components/acl/access.tsx"),x=s("./app/components/acl/role.tsx"),y=s("./app/components/button.tsx"),f=s("./app/components/buttonBar.tsx"),Z=s("./app/components/confirm.tsx"),b=s("./app/components/fileSize.tsx"),w=s("./app/components/links/link.tsx"),v=s("./app/components/timeSince.tsx"),j=s("./app/components/tooltip.tsx"),z=s("./app/icons/index.tsx"),k=s("./app/styles/space.tsx"),R=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function q(e){let{mapping:t,onDelete:s,downloadUrl:n,downloadRole:i,orgSlug:r}=e;const{id:a,debugId:l,uuid:p,size:c,dateCreated:u}=t,m=()=>{s(a)};return(0,R.BX)(o.Fragment,{children:[(0,R.BX)(_,{children:[(0,R.tZ)(M,{children:l||p||`(${(0,d.t)("empty")})`}),(0,R.BX)(P,{children:[(0,R.tZ)(z.jo,{size:"sm"}),(0,R.tZ)(v.Z,{date:u})]})]}),(0,R.tZ)(S,{children:(0,R.tZ)(b.Z,{bytes:c})}),(0,R.tZ)($,{children:(0,R.BX)(f.ZP,{gap:.5,children:[(0,R.tZ)(x.u,{role:i,children:e=>{let{hasRole:t}=e;return(0,R.tZ)(j.u,{title:(0,d._N)("Mappings can only be downloaded by users with organization [downloadRole] role[orHigher]. This can be changed in [settingsLink:Debug Files Access] settings.",{downloadRole:i,orHigher:"owner"!==i?` ${(0,d.t)("or higher")}`:"",settingsLink:(0,R.tZ)(w.Z,{to:`/settings/${r}/#debugFilesRole`})}),disabled:t,isHoverable:!0,children:(0,R.tZ)(y.zx,{size:"sm",icon:(0,R.tZ)(z.Dj,{size:"sm"}),disabled:!t,href:n,title:t?(0,d.t)("Download Mapping"):void 0,"aria-label":(0,d.t)("Download Mapping")})})}}),(0,R.tZ)(h.Z,{access:["project:releases"],children:e=>{let{hasAccess:t}=e;return(0,R.tZ)(j.u,{disabled:t,title:(0,d.t)("You do not have permission to delete mappings."),children:(0,R.tZ)(Z.Z,{message:(0,d.t)("Are you sure you want to remove this mapping?"),onConfirm:m,disabled:!t,children:(0,R.tZ)(y.zx,{size:"sm",icon:(0,R.tZ)(z.Fz,{size:"sm"}),title:t?(0,d.t)("Remove Mapping"):void 0,"aria-label":(0,d.t)("Remove Mapping"),disabled:!t})})})}})]})})]})}q.displayName="ProjectProguardRow";const _=(0,n.Z)("div",{target:"e9duv9m4"})({name:"1ij1o5n",styles:"display:flex;flex-direction:column;align-items:flex-start;justify-content:center"}),S=(0,n.Z)("div",{target:"e9duv9m3"})({name:"ivtwc8",styles:"display:flex;justify-content:flex-end;text-align:right;align-items:center"}),$=(0,n.Z)(S,{target:"e9duv9m2"})(""),M=(0,n.Z)("div",{target:"e9duv9m1"})("padding-right:",(0,k.D)(4),";overflow-wrap:break-word;word-break:break-all;"),P=(0,n.Z)("div",{target:"e9duv9m0"})("display:grid;gap:",(0,k.D)(.5),";grid-template-columns:min-content 1fr;font-size:",(e=>e.theme.fontSizeMedium),";align-items:center;color:",(e=>e.theme.subText),";margin-top:",(0,k.D)(1),";"),C=q;function D(e){let{organization:t,location:s,router:n,params:l}=e;const h=(0,u.Z)(),{projectId:x}=l,[y,f]=(0,o.useState)(!1),{data:Z,isLoading:b,getResponseHeader:w,refetch:v}=(0,c.WE)([`/projects/${t.slug}/${x}/files/dsyms/`,{query:{query:s.query.query,file_formats:"proguard"}}],{staleTime:0}),j=w?.("Link"),z=(0,o.useCallback)((e=>{n.push({...s,query:{...s.query,cursor:void 0,query:e}})}),[s,n]),k=(0,o.useCallback)((async e=>{f(!0);try{await h.requestPromise(`/projects/${t.slug}/${x}/files/dsyms/?id=${encodeURIComponent(e)}`,{method:"DELETE"}),f(!1),(0,i.S9)("Successfully deleted the mapping file"),v()}catch{f(!1),(0,i.Iw)("An error occurred while deleting the mapping file")}}),[h,v,t.slug,x]),q="string"==typeof s.query.query?s.query.query:void 0,_=y||b;return(0,R.BX)(o.Fragment,{children:[(0,R.tZ)(m.Z,{title:(0,d.t)("ProGuard Mappings"),action:(0,R.tZ)(p.Z,{placeholder:(0,d.t)("Filter mappings"),onSearch:z,query:q,width:"280px"})}),(0,R.tZ)(g.Z,{children:(0,d._N)("ProGuard mapping files are used to convert minified classes, methods and field names into a human readable format. To learn more about proguard mapping files, [link: read the docs].",{link:(0,R.tZ)(r.Z,{href:"https://docs.sentry.io/platforms/android/proguard/"})})}),(0,R.tZ)(T,{headers:[(0,d.t)("Mapping"),(0,R.tZ)(F,{children:(0,d.t)("File Size")},"size"),""],emptyMessage:q?(0,d.t)("There are no mappings that match your search."):(0,d.t)("There are no mappings for this project."),isEmpty:0===Z?.length,isLoading:_,children:Z?.length?Z.map((e=>{const s=`${h.baseUrl}/projects/${t.slug}/${x}/files/dsyms/?id=${encodeURIComponent(e.id)}`;return(0,R.tZ)(C,{mapping:e,downloadUrl:s,onDelete:k,downloadRole:t.debugFilesRole,orgSlug:t.slug},e.id)})):null}),(0,R.tZ)(a.Z,{pageLinks:j})]})}D.displayName="ProjectProguard";const L=D,T=(0,n.Z)(l.Z,{target:"e108bzy91"})({name:"qc2mzu",styles:"grid-template-columns:minmax(220px, 1fr) max-content 120px"}),F=(0,n.Z)("div",{target:"e108bzy90"})({name:"2qga7i",styles:"text-align:right"})}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectProguard_index_tsx.b3e2062f52dee3d0841dd21e17a2458e.js.map