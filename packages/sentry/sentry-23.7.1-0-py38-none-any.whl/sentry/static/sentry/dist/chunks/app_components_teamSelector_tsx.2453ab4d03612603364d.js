"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_teamSelector_tsx"],{"./app/components/teamSelector.tsx":(e,t,s)=>{s.d(t,{Z:()=>z});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),a=s("../node_modules/lodash/debounce.js"),i=s.n(a),l=s("./app/actionCreators/projects.tsx"),r=s("./app/components/button.tsx"),c=s("./app/components/forms/controls/selectControl.tsx"),d=s("./app/components/idBadge/index.tsx"),p=s("./app/components/tooltip.tsx"),u=s("./app/constants/index.tsx"),m=s("./app/icons/index.tsx"),g=s("./app/locale.tsx"),h=s("./app/styles/space.tsx"),x=s("./app/utils/useApi.tsx"),b=s("./app/utils/useTeams.tsx"),f=s("./app/utils/withOrganization.tsx"),y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const w=(0,n.Z)("div",{target:"e87eiww2"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Z=(0,n.Z)(m.qO,{target:"e87eiww1"})("margin-left:",(0,h.D)(.25),";margin-right:",(0,h.D)(1),";color:",(e=>e.theme.gray400),";"),j={value:null,label:(0,y.BX)(w,{children:[(0,y.tZ)(Z,{size:"md"}),(0,g.t)("Unassigned")]}),searchKey:"unassigned",actor:null,disabled:!1},k={option:(e,t)=>{const s=t.theme;return{...e,svg:{color:t.isSelected?s.white:void 0}}}},v={input:(e,t)=>{const s=t.theme;return{...e,display:"grid",gridTemplateColumns:"max-content 1fr",alignItems:"center",gridGap:(0,h.D)(1),":before":{backgroundColor:s.backgroundSecondary,height:24,width:24,borderRadius:3,content:'""',display:"block"}}},placeholder:e=>({...e,paddingLeft:32})};function C(e){const{includeUnassigned:t,styles:s,...n}=e,{teamFilter:a,organization:r,project:h,multiple:f,value:w,useId:Z,onChange:C}=e,z=(0,x.Z)(),{teams:S,fetching:I,onSearch:D}=(0,b.y)(),T=(0,o.useRef)(null),$=e=>({value:Z?e.id:e.slug,label:`#${e.slug}`,leadingItems:(0,y.tZ)(d.Z,{team:e,hideName:!0}),searchKey:e.slug,actor:{type:"team",id:e.id,name:e.slug}});function N(){if(!T.current)return;const e=T.current.select.inputRef;e&&e.blur()}function O(e){if(w===(Z?e.id:e.slug))return $(e);const t=r.access.includes("project:write");return{...$(e),disabled:!0,label:`#${e.slug}`,leadingItems:(0,y.tZ)(d.Z,{team:e,hideName:!0}),trailingItems:(0,y.tZ)(p.u,{title:t?(0,g.t)("Add %s to project",`#${e.slug}`):(0,g.t)("You do not have permission to add team to project."),containerDisplayMode:"flex",children:(0,y.tZ)(_,{size:"zero",borderless:!0,disabled:!t,onClick:()=>async function(e){if(!h)return void N();const t=f?[...w??[]]:{value:w};C?.($(e));try{await(0,l.Oe)(z,r.slug,h.slug,e)}catch(e){C?.(t)}N()}(e),icon:(0,y.tZ)(m.N_,{isCircled:!0}),"aria-label":(0,g.t)("Add %s to project",`#${e.slug}`)})}),tooltip:(0,g.t)("%s is not a member of project",`#${e.slug}`)}}return(0,y.tZ)(c.Z,{ref:T,options:function(){const e=a?S.filter(a):S;if(h){const s=new Set(h.teams.map((e=>e.id))),n=e.filter((e=>s.has(e.id))),o=e.filter((e=>!s.has(e.id)));return[...n.map($),...o.map(O),...t?[j]:[]]}return[...e.map($),...t?[j]:[]]}(),onInputChange:i()((e=>{D(e)}),u.Dk),getOptionValue:e=>e.searchKey,styles:{...t?k:{},...f?{}:v,...s??{}},isLoading:I,...n})}C.displayName="TeamSelector";const _=(0,n.Z)(r.zx,{target:"e87eiww0"})({name:"ozd7xs",styles:"flex-shrink:0"}),z=(0,f.Z)(C)}}]);
//# sourceMappingURL=../sourcemaps/app_components_teamSelector_tsx.dd63d74f3e9d4c83de978cc613741342.js.map