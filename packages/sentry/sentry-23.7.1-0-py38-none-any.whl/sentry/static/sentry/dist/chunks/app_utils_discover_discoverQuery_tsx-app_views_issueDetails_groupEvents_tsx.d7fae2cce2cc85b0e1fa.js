"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_utils_discover_discoverQuery_tsx-app_views_issueDetails_groupEvents_tsx"],{"./app/utils/discover/discoverQuery.tsx":(e,s,t)=>{t.d(s,{Z:()=>u,_:()=>a});var i=t("./app/utils/discover/genericDiscoverQuery.tsx"),n=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e,s){return e.transactionName!==s.transactionName||e.transactionThreshold!==s.transactionThreshold||e.transactionThresholdMetric!==s.transactionThresholdMetric}function r(e){return(0,n.tZ)(i.ZP,{route:"events",shouldRefetchData:o,afterFetch:(e,s)=>{const{fields:t,...i}=e.meta??{};return{...e,meta:{...t,...i}}},...e})}function a(e){const s=(0,i.JC)({route:"events",shouldRefetchData:o,afterFetch:(e,s)=>{const{fields:t,...i}=e.meta??{};return{...e,meta:{...t,...i}}},...e}),t=s.response?.getResponseHeader("Link")??void 0;return{...s,pageLinks:t}}r.displayName="DiscoverQuery";const u=r},"./app/utils/useCleanQueryParamsOnRouteLeave.tsx":(e,s,t)=>{t.d(s,{Z:()=>r});var i=t("../node_modules/react/index.js"),n=t("../node_modules/react-router/es/index.js"),o=t("./app/utils/useLocation.tsx");const r=function(e){let{fieldsToClean:s}=e;const t=(0,o.T)(),r=(0,i.useCallback)((e=>{!function(e){let{fieldsToClean:s,newLocation:t,oldPathname:i}=e;const o=s.some((e=>void 0!==t.query[e]));if(t.pathname===i||!o)return;const r=s.reduce(((e,s)=>(e[s]=void 0,e)),{...t.query});n.browserHistory.replace({pathname:t.pathname,query:r})}({fieldsToClean:s,newLocation:e,oldPathname:t.pathname})}),[t.pathname,s]);(0,i.useEffect)((()=>n.browserHistory.listen(r)),[r])}},"./app/views/issueDetails/groupEvents.tsx":(e,s,t)=>{t.r(s),t.d(s,{default:()=>L});var i=t("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(t("../node_modules/core-js/modules/es.array.push.js"),t("../node_modules/react/index.js")),o=t("../node_modules/react-router/es/index.js"),r=t("./app/components/events/searchBar.tsx"),a=t("./app/components/layouts/thirds.tsx"),u=t("./app/styles/space.tsx"),l=t("./app/utils/useCleanQueryParamsOnRouteLeave.tsx"),d=t("./app/utils/useOrganization.tsx"),c=t("./app/utils/withDomainRequired.tsx"),p=t("./app/components/loadingError.tsx"),m=t("./app/data/platformCategories.tsx"),f=t("./app/locale.tsx"),y=t("./app/types/index.tsx"),g=t("./app/utils/discover/eventView.tsx"),h=t("./app/utils/discover/types.tsx"),v=t("./app/utils/issueTypeConfig/index.tsx"),x=t("./app/utils/platform.tsx"),E=t("./app/utils/queryClient.tsx"),T=t("./app/utils/useRoutes.tsx"),R=t("./app/views/performance/transactionSummary/transactionEvents/eventsTable.tsx"),b=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function C(e){const{location:s,organization:t,issueId:i,excludedTags:o,group:r}=e,a=(0,v.Y)(e.group),[u,l]=(0,n.useState)(""),d=(0,T.V)(),{fields:c,columnTitles:m}=_(r,t),f=(e=>{let{groupId:s}=e;return`/issues/${s}/events/latest/`})({groupId:r.id}),x=r.issueCategory===y.qE.PERFORMANCE,{data:C,isLoading:q,isLoadingError:w}=(0,E.WE)([f],{staleTime:6e4,enabled:x}),j=!!C?.occurrence,Z=g.ZP.fromLocation(e.location);(a.usesIssuePlatform||r.issueCategory===y.qE.PERFORMANCE&&j)&&(Z.dataset=h.as.ISSUE_PLATFORM),Z.fields=c.map((e=>({field:e}))),Z.sorts=(0,g.GT)(s).filter((e=>c.includes(e.field))),(0,n.useEffect)((()=>{l("")}),[Z.query]),Z.sorts.length||(Z.sorts=[{field:"timestamp",kind:"desc"}]);const P=r.issueCategory!==y.qE.PERFORMANCE||j?`issue.id:${i}`:`performance.issue_ids:${i} event.type:transaction`;return Z.project=[parseInt(r.project.id,10)],Z.query=`${P} ${e.location.query.query||""}`,Z.statsPeriod="90d",u||w?(0,b.tZ)(p.Z,{message:u||w,onRetry:()=>l("")}):(0,b.tZ)(R.Z,{eventView:Z,location:s,issueId:i,organization:t,routes:d,excludedTags:o,projectSlug:r.project.slug,customColumns:["minidump"],setError:e=>l(e??""),transactionName:"",columnTitles:m.slice(),referrer:"api.issues.issue_events",isEventLoading:!!x&&q})}C.displayName="AllEventsTable";const _=(e,s)=>{const t=e.issueCategory===y.qE.PERFORMANCE,i=s.features.includes("session-replay"),n=t&&s.features.includes("profiling"),{fields:o,columnTitles:r}=q(e.project.platform??e.platform,{isProfilingEnabled:n,isReplayEnabled:i});return{fields:["id","transaction","title","release","environment","user.display","device","os",...o,...t?["transaction.duration"]:[],"timestamp"],columnTitles:[(0,f.t)("event id"),(0,f.t)("transaction"),(0,f.t)("title"),(0,f.t)("release"),(0,f.t)("environment"),(0,f.t)("user"),(0,f.t)("device"),(0,f.t)("os"),...r,...t?[(0,f.t)("total duration")]:[],(0,f.t)("timestamp"),(0,f.t)("minidump")]}},q=(e,s)=>{const t={fields:["url","runtime"],columnTitles:[(0,f.t)("url"),(0,f.t)("runtime")]},i={[m.Wn.BACKEND]:t,[m.Wn.SERVERLESS]:t,[m.Wn.FRONTEND]:{fields:["url","browser"],columnTitles:[(0,f.t)("url"),(0,f.t)("browser")]},[m.Wn.MOBILE]:{fields:["url"],columnTitles:[(0,f.t)("url")]},[m.Wn.DESKTOP]:{fields:[],columnTitles:[]},[m.Wn.OTHER]:{fields:[],columnTitles:[]}}[(0,x.fR)(e)];return s.isReplayEnabled&&(i.fields.push("replayId"),i.columnTitles.push((0,f.t)("replay"))),s.isProfilingEnabled&&e&&m.zw.includes(e)&&(i.columnTitles.push((0,f.t)("profile")),i.fields.push("profile.id")),i},w=C,j=["environment","issue","issue.id","performance.issue_ids","transaction.op","transaction.status"];function Z(e){let{params:s,location:t,group:i}=e;const u=(0,d.Z)(),{groupId:p}=s;(0,l.Z)({fieldsToClean:["cursor","query"]});const m=(0,n.useCallback)((e=>o.browserHistory.push((0,c.D)({pathname:`/organizations/${u.slug}/issues/${p}/events/`,query:{...t.query,query:e}}))),[t,u,p]);return(0,b.tZ)(a.uT,{children:(0,b.BX)(a.or,{fullWidth:!0,children:[(0,b.tZ)(P,{children:(0,b.tZ)(r.Z,{organization:u,defaultQuery:"",onSearch:m,excludedTags:j,query:t.query?.query??"",hasRecentSearches:!1})}),(0,b.tZ)(w,{issueId:i.id,location:t,organization:u,group:i,excludedTags:j})]})})}Z.displayName="GroupEvents";const P=(0,i.Z)("div",{target:"e3tm9v40"})("margin-bottom:",(0,u.D)(2),";"),L=Z}}]);
//# sourceMappingURL=../sourcemaps/app_utils_discover_discoverQuery_tsx-app_views_issueDetails_groupEvents_tsx.e1d3d248189b52da9ea84f6b3c4cb0f6.js.map