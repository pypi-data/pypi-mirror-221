"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectGeneralSettings_index_tsx"],{"./app/components/forms/formPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/react/index.js"),o=s("./app/components/forms/fieldFromConfig.tsx"),i=s("./app/components/panels/panel.tsx"),a=s("./app/components/panels/panelBody.tsx"),l=s("./app/components/panels/panelHeader.tsx"),d=s("./app/icons/index.tsx"),p=s("./app/utils/sanitizeQuerySelector.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){let{additionalFieldProps:t={},title:s,fields:r,access:h,disabled:m,renderFooter:g,renderHeader:f,collapsible:j,initiallyCollapsed:Z=!1,...x}=e;const[b,v]=(0,n.useState)(Z),y=(0,n.useCallback)((()=>v((e=>!e))),[]);return(0,c.BX)(i.Z,{id:"string"==typeof s?(0,p.m)(s):void 0,children:[s&&(0,c.BX)(l.Z,{children:[s,j&&(0,c.tZ)(u,{onClick:y,children:(0,c.tZ)(d.g6,{"data-test-id":"form-panel-collapse-chevron",direction:b?"down":"up",size:"xs"})})]}),(0,c.BX)(a.Z,{hidden:b,children:["function"==typeof f&&f({title:s,fields:r}),r.map((e=>{if("function"==typeof e)return e();const{defaultValue:s,...r}=e;return!0===m&&(r.disabled=!0,r.disabledReason=void 0),(0,c.tZ)(o.Z,{access:h,disabled:m,...x,...t,field:r,highlighted:x.highlighted===`#${e.name}`},e.name)})),"function"==typeof g&&g({title:s,fields:r})]})]})}h.displayName="FormPanel";const m=h,u=(0,r.Z)("span",{target:"eovlw60"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/components/forms/jsonForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react/index.js"),o=s("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),i=s("../node_modules/scroll-to-element/index.js"),a=s.n(i),l=s("./app/utils.tsx"),d=s("./app/utils/sanitizeQuerySelector.tsx"),p=s("./app/utils/withSentryRouter.tsx"),c=s("./app/components/forms/formPanel.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{highlighted:this.props.location?.hash})}componentDidMount(){this.scrollToHash()}componentDidUpdate(e){if(this.props.location&&this.props.location.hash!==e.location.hash){const e=this.props.location.hash;this.scrollToHash(e),this.setState({highlighted:e})}}scrollToHash(e){const t=e||this.props.location?.hash;if(t)try{a()((0,d.m)(decodeURIComponent(t)),{align:"middle",offset:-100})}catch(e){o.Tb(e)}}shouldDisplayForm(e){const t=e.filter((e=>"function"!=typeof e&&(0,l.ri)(e?.visible)));if(e.length===t.length){const{additionalFieldProps:e,...s}=this.props;return!t.every((t=>"function"==typeof t.visible?!t.visible({...s,...e}):!t.visible))}return!0}renderForm(e){let{fields:t,formPanelProps:s,title:r}=e;return this.shouldDisplayForm(t)||s?.renderFooter||s?.renderHeader?(0,h.tZ)(c.Z,{title:r,fields:t,...s}):null}render(){const{access:e,collapsible:t,initiallyCollapsed:s,fields:r,title:o,forms:i,disabled:a,features:l,additionalFieldProps:d,renderFooter:p,renderHeader:c,location:m,params:u,router:g,routes:f,...j}=this.props,Z={access:e,disabled:a,features:l,additionalFieldProps:d,renderFooter:p,renderHeader:c,highlighted:this.state.highlighted,collapsible:t,initiallyCollapsed:s};return(0,h.BX)("div",{...j,children:[void 0!==i&&i.map(((e,t)=>(0,h.tZ)(n.Fragment,{children:this.renderForm({formPanelProps:Z,...e})},t))),void 0===i&&void 0!==r&&this.renderForm({fields:r,formPanelProps:Z,title:o})]})}}m.displayName="JsonForm";const u=(0,p.Z)(m)},"./app/components/panels/panelHeader.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),o=s("./app/styles/space.tsx");const i=e=>{let{disablePadding:t,hasButtons:s}=e;return(0,n.iv)("padding:",s?(0,o.D)(1):(0,o.D)(2)," ",t?0:(0,o.D)(2),";","")},a=(0,r.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",i,";")},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});const r=function(e,t){let s=arguments.length>3?arguments[3]:void 0;const r=`${e} - ${t}`,n=s?`${r} - ${s}`:r;return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?n:`${n} - Sentry`}},"./app/views/deprecatedAsyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("./app/components/deprecatedAsyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Z{getTitle(){return""}render(){return(0,o.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="DeprecatedAsyncView"},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var r=s("./app/components/acl/access.tsx"),n=s("./app/components/alert.tsx"),o=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,o.t)("These settings can only be edited by users with the organization-level owner, manager, or team-level admin roles.");function l(e){let{access:t=["project:write"],project:s,team:o,...l}=e;return(0,i.tZ)(r.Z,{access:t,project:s,team:o,children:e=>{let{hasAccess:t}=e;return!t&&(0,i.tZ)(n.bZ,{"data-test-id":"project-permission-alert",type:"warning",...l,children:a})}})}l.displayName="PermissionAlert";const d=l},"./app/views/settings/projectGeneralSettings/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react/index.js"),o=s("../node_modules/react-router/es/index.js"),i=s("./app/actionCreators/indicator.tsx"),a=s("./app/actionCreators/projects.tsx"),l=s("./app/components/acl/access.tsx"),d=s("./app/components/button.tsx"),p=s("./app/components/confirm.tsx"),c=s("./app/components/forms/fieldGroup/index.tsx"),h=s("./app/components/forms/fields/textField.tsx"),m=s("./app/components/forms/form.tsx"),u=s("./app/components/forms/jsonForm.tsx"),g=s("./app/components/hook.tsx"),f=s("./app/components/links/externalLink.tsx"),j=s("./app/components/organizations/pageFilters/persistence.tsx"),Z=s("./app/components/panels/panel.tsx"),x=s("./app/components/panels/panelAlert.tsx"),b=s("./app/components/panels/panelHeader.tsx"),v=s("./app/data/forms/projectGeneralSettings.tsx"),y=s("./app/locale.tsx"),w=s("./app/stores/projectsStore.tsx"),P=s("./app/utils/handleXhrErrorResponse.tsx"),S=s("./app/utils/recreateRoute.tsx"),T=s("./app/utils/routeTitle.tsx"),_=s("./app/utils/withOrganization.tsx"),k=s("./app/views/deprecatedAsyncView.tsx"),C=s("./app/views/settings/components/settingsPageHeader.tsx"),F=s("./app/views/settings/components/text/textBlock.tsx"),z=s("./app/views/settings/project/permissionAlert.tsx"),B=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class R extends k.Z{constructor(){super(...arguments),(0,r.Z)(this,"_form",{}),(0,r.Z)(this,"handleTransferFieldChange",((e,t)=>{this._form[e]=t})),(0,r.Z)(this,"handleRemoveProject",(()=>{const{organization:e}=this.props,t=this.state.data;(0,j.tB)(e.slug),t&&(0,a.rR)({api:this.api,orgSlug:e.slug,projectSlug:t.slug,origin:"settings"}).then((()=>{(0,i.S9)((0,y._N)("[project] was successfully removed",{project:t.slug}))}),(e=>{throw(0,i.Iw)((0,y._N)("Error removing [project]",{project:t.slug})),e})).then((()=>{window.location.assign("/")}),(e=>(0,P.X)("Unable to remove project",e)))})),(0,r.Z)(this,"handleTransferProject",(async()=>{const{organization:e}=this.props,t=this.state.data;if(t&&!("string"!=typeof this._form.email||this._form.email.length<1))try{await(0,a.bL)(this.api,e.slug,t,this._form.email),window.location.assign("/")}catch(e){e.status>=500&&(0,P.X)("Unable to transfer project",e)}})),(0,r.Z)(this,"isProjectAdmin",(()=>(0,l.d)(["project:admin"],{organization:this.props.organization,project:this.state.data})))}getTitle(){const{projectId:e}=this.props.params;return(0,T.Z)((0,y.t)("Project Settings"),e,!1)}getEndpoints(){const{organization:e}=this.props,{projectId:t}=this.props.params;return[["data",`/projects/${e.slug}/${t}/`]]}renderRemoveProject(){const e=this.state.data,t=this.isProjectAdmin(),{isInternal:s}=e;return(0,B.BX)(c.Z,{label:(0,y.t)("Remove Project"),help:(0,y._N)("Remove the [project] project and all related data. [linebreak] Careful, this action cannot be undone.",{project:(0,B.tZ)("strong",{children:e.slug}),linebreak:(0,B.tZ)("br",{})}),children:[!t&&(0,y.t)("You do not have the required permission to remove this project."),s&&(0,y.t)("This project cannot be removed. It is used internally by the Sentry server."),t&&!s&&(0,B.tZ)(p.Z,{onConfirm:this.handleRemoveProject,priority:"danger",confirmText:(0,y.t)("Remove Project"),message:(0,B.BX)("div",{children:[(0,B.tZ)(F.Z,{children:(0,B.tZ)("strong",{children:(0,y.t)("Removing this project is permanent and cannot be undone!")})}),(0,B.tZ)(F.Z,{children:(0,y.t)("This will also remove all associated event data.")})]}),children:(0,B.tZ)("div",{children:(0,B.tZ)(d.zx,{priority:"danger",children:(0,y.t)("Remove Project")})})})]})}renderTransferProject(){const e=this.state.data,{isInternal:t}=e,s=(0,l.d)(["org:admin"],{organization:this.props.organization});return(0,B.BX)(c.Z,{label:(0,y.t)("Transfer Project"),help:(0,y._N)("Transfer the [project] project and all related data. [linebreak] Careful, this action cannot be undone.",{project:(0,B.tZ)("strong",{children:e.slug}),linebreak:(0,B.tZ)("br",{})}),children:[!s&&(0,y.t)("You do not have the required permission to transfer this project."),t&&(0,y.t)("This project cannot be transferred. It is used internally by the Sentry server."),s&&!t&&(0,B.tZ)(p.Z,{onConfirm:this.handleTransferProject,priority:"danger",confirmText:(0,y.t)("Transfer project"),renderMessage:e=>{let{confirm:t}=e;return(0,B.BX)("div",{children:[(0,B.tZ)(F.Z,{children:(0,B.tZ)("strong",{children:(0,y.t)("Transferring this project is permanent and cannot be undone!")})}),(0,B.tZ)(F.Z,{children:(0,y.t)("Please enter the email of an organization owner to whom you would like to transfer this project.")}),(0,B.tZ)(Z.Z,{children:(0,B.tZ)(m.Z,{hideFooter:!0,onFieldChange:this.handleTransferFieldChange,onSubmit:(e,s,r,n)=>{n.stopPropagation(),t()},children:(0,B.tZ)(h.Z,{name:"email",label:(0,y.t)("Organization Owner"),placeholder:"admin@example.com",required:!0,help:(0,y.t)("A request will be emailed to this address, asking the organization owner to accept the project transfer.")})})})]})},children:(0,B.tZ)("div",{children:(0,B.tZ)(d.zx,{priority:"danger",children:(0,y.t)("Transfer Project")})})})]})}renderBody(){const{organization:e}=this.props,t=this.state.data,{projectId:s}=this.props.params,r=`/projects/${e.slug}/${s}/`,n=new Set(e.access.concat(t.access)),o={additionalFieldProps:{organization:e},features:new Set(e.features),access:n,disabled:!(0,l.d)(["project:write"],{organization:e,project:t})},i=t.teams.length?t.teams?.[0]:void 0,d={saveOnBlur:!0,allowUndo:!0,initialData:{...t,team:i},apiMethod:"PUT",apiEndpoint:r,onSubmitSuccess:e=>{this.setState({data:e}),s!==e.slug&&((0,a.TA)(s,e.slug),this.props.onChangeSlug(e.slug)),w.Z.onUpdateSuccess(e)}},p=t.features.includes("recap-server");return(0,B.BX)("div",{children:[(0,B.tZ)(C.Z,{title:(0,y.t)("Project Settings")}),(0,B.tZ)(z.Z,{project:t}),(0,B.BX)(m.Z,{...d,children:[(0,B.tZ)(u.Z,{...o,title:(0,y.t)("Project Details"),fields:[v.fields.name,v.fields.platform,{...v.fields.recapServerUrl,visible:p},{...v.fields.recapServerToken,visible:p}]}),(0,B.tZ)(u.Z,{...o,title:(0,y.t)("Email"),fields:[v.fields.subjectPrefix]})]}),(0,B.tZ)(g.Z,{name:"spend-visibility:spike-protection-project-settings",project:t}),(0,B.BX)(m.Z,{...d,children:[(0,B.tZ)(u.Z,{...o,title:(0,y.t)("Event Settings"),fields:[v.fields.resolveAge]}),(0,B.tZ)(u.Z,{...o,title:(0,y.t)("Client Security"),fields:[v.fields.allowedDomains,v.fields.scrapeJavaScript,v.fields.securityToken,v.fields.securityTokenHeader,v.fields.verifySSL],renderHeader:()=>(0,B.tZ)(x.Z,{type:"info",children:(0,B.BX)(F.Z,{noMargin:!0,children:[(0,y._N)("Configure origin URLs which Sentry should accept events from. This is used for communication with clients like [link].",{link:(0,B.tZ)(f.Z,{href:"https://github.com/getsentry/sentry-javascript",children:"sentry-javascript"})})," ",(0,y._N)("This will restrict requests based on the [Origin] and [Referer] headers.",{Origin:(0,B.tZ)("code",{children:"Origin"}),Referer:(0,B.tZ)("code",{children:"Referer"})})]})})})]}),(0,B.BX)(Z.Z,{children:[(0,B.tZ)(b.Z,{children:(0,y.t)("Project Administration")}),this.renderRemoveProject(),this.renderTransferProject()]})]})}}class X extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"changedSlug",void 0),(0,r.Z)(this,"unsubscribe",w.Z.listen((()=>this.onProjectsUpdate()),void 0))}componentWillUnmount(){this.unsubscribe()}onProjectsUpdate(){this.changedSlug&&w.Z.getBySlug(this.changedSlug)&&o.browserHistory.replace((0,S.Z)("",{...this.props,params:{...this.props.params,projectId:this.changedSlug}}))}render(){return(0,B.tZ)(R,{onChangeSlug:e=>this.changedSlug=e,...this.props})}}X.displayName="ProjectGeneralSettingsContainer";const A=(0,_.Z)(X)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectGeneralSettings_index_tsx.7ad35cfc85c175caae7d5ccaa8c29659.js.map