(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_starfish_views_webServiceView_index_tsx-node_modules_lodash_omitBy_js"],{"./app/components/loading/loadingContainer.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=a("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),i=a("./app/components/loadingIndicator.tsx"),n=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{isLoading:t=!1,isReloading:a=!1,maskBackgroundColor:r,className:i,children:o}=e;const c=(0,s.u)(),u=t||a;return(0,n.BX)(l,{className:i,children:[u&&(0,n.BX)("div",{children:[(0,n.tZ)(d,{isReloading:a,maskBackgroundColor:r??c.white}),(0,n.tZ)(p,{})]}),o]})}o.displayName="LoadingContainer";const l=(0,r.Z)("div",{target:"eh2paf42"})({name:"bjn8wh",styles:"position:relative"}),d=(0,r.Z)("div",{target:"eh2paf41"})("position:absolute;z-index:1;background-color:",(e=>e.maskBackgroundColor),";width:100%;height:100%;opacity:",(e=>e.isReloading?"0.6":"1"),";"),p=(0,r.Z)(i.Z,{target:"eh2paf40"})({name:"1aa909c",styles:"position:absolute;z-index:3;width:100%"})},"./app/components/performance/layouts.tsx":(e,t,a)=>{"use strict";a.d(t,{c:()=>i});var r=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=a("./app/styles/space.tsx");const i=(0,r.Z)("div",{target:"eufzkx60"})("display:grid;grid-template-columns:1fr;grid-column-gap:",(0,s.D)(2),";grid-row-gap:",(0,s.D)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(e=>e.theme.breakpoints.medium),"){",(e=>e.columns?`\n    grid-template-columns: repeat(${e.columns}, 1fr);\n    `:`\n    grid-template-columns: repeat(auto-fit, minmax(${e.minSize}px, 1fr));\n    `),";}")},"./app/utils/performance/contexts/pageError.tsx":(e,t,a)=>{"use strict";a.d(t,{De:()=>d,V_:()=>o,YY:()=>l});var r=a("../node_modules/react/index.js"),s=a("./app/components/alert.tsx"),i=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(0,r.createContext)({pageError:void 0,setPageError:e=>{}});function o(e){let{children:t}=e;const[a,s]=(0,r.useState)();return(0,i.tZ)(n.Provider,{value:{pageError:a,setPageError:s},children:t})}function l(){const{pageError:e}=(0,r.useContext)(n);return e?(0,i.tZ)(s.bZ,{type:"error","data-test-id":"page-error-alert",showIcon:!0,children:e}):null}o.displayName="PageErrorProvider",l.displayName="PageErrorAlert";const d=()=>(0,r.useContext)(n)},"./app/views/starfish/allowedProjects.ts":(e,t,a)=>{"use strict";a.d(t,{a:()=>i,g:()=>s});var r=a("./app/views/starfish/types.tsx");const s={sentry:["1","300688","4505160011087872","4505148785885184"],codecov:["5215654"],peated:["4505138082349056"],"sentry-sdks":["5428557"]},i={5428557:r.Nx.MOBILE}},"./app/views/starfish/components/starfishProjectSelector.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>m}),a("../node_modules/core-js/modules/es.error.cause.js");var r=a("./app/actionCreators/pageFilters.tsx"),s=a("./app/components/compactSelect/index.tsx"),i=a("./app/components/idBadge/projectBadge.tsx"),n=a("./app/locale.tsx"),o=a("./app/utils/useOrganization.tsx"),l=a("./app/utils/usePageFilters.tsx"),d=a("./app/utils/useProjects.tsx"),p=a("./app/utils/useRouter.tsx"),c=a("./app/views/starfish/allowedProjects.ts"),u=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(){const{projects:e,initiallyLoaded:t,fetchError:a}=(0,d.Z)(),i=(0,o.Z)(),{selection:m,isReady:h}=(0,l.Z)(),f=(0,p.Z)();if(!t||!h)return(0,u.tZ)(s.Z,{disabled:!0,options:[{label:(0,n.t)("Loadingâ€¦"),value:"loading"}],defaultValue:"loading"});if(a)throw new Error("Failed to fetch projects");const v=c.g[i.slug]??[],x=e.filter((e=>v.includes(e.id))).map((e=>({label:(0,u.tZ)(g,{project:e}),value:e.id}))),_=x.find((e=>m.projects.includes(parseInt(e.value,10))))??x[0],w=e=>(0,r.id)([parseInt(e.value,10)],f,{save:!0});return(m.projects.length>1||!v.includes(`${m.projects[0]}`))&&w(x[0]),(0,u.tZ)(s.Z,{menuWidth:250,options:x,defaultValue:_?.value,onChange:w})}function g(e){let{project:t}=e;return(0,u.tZ)(i.Z,{project:t,avatarSize:20,disableLink:!0})}m.displayName="StarfishProjectSelector",g.displayName="ProjectOptionLabel"},"./app/views/starfish/components/tableCells/throughputCell.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var r=a("./app/locale.tsx"),s=a("./app/utils/discover/styles.tsx"),i=a("./app/utils/formatters.tsx"),n=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){let{throughputPerSecond:t,containerProps:a}=e;const o=t?(0,i.Du)(t):"--";return(0,n.BX)(s.Hw,{...a,children:[o,"/",(0,r.t)("s")]})}o.displayName="ThroughputCell"},"./app/views/starfish/views/webServiceView/index.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Ue});var r=a("../node_modules/react/index.js"),s=a("../node_modules/lodash/isEqual.js"),i=a.n(s),n=a("./app/actionCreators/tags.tsx"),o=a("./app/components/sentryDocumentTitle.tsx"),l=a("./app/locale.tsx"),d=a("./app/utils/performance/contexts/metricsEnhancedSetting.tsx"),p=a("./app/utils/useApi.tsx"),c=a("./app/utils/useOrganization.tsx"),u=a("./app/utils/usePrevious.tsx"),m=a("./app/utils/withPageFilters.tsx"),g=a("./app/views/starfish/components/starfishPageFiltersContainer.tsx"),h=a("./app/components/gridEditable/index.tsx"),f=a("./app/components/performance/searchBar.tsx"),v=a("./app/utils/discover/eventView.tsx"),x=a("./app/utils/discover/types.tsx"),_=a("./app/utils/queryString.tsx"),w=a("./app/utils/tokenizeSearch.tsx"),y=a("./app/views/starfish/allowedProjects.ts"),Z=a("./app/views/starfish/types.tsx");const b=["transaction"],S="time_spent_percentage()",k=e=>e?.features?.includes("performance-landing-page-stats-period")?"14d":"7d";function j(e){const{query:t}=e,a=(0,_.ro)(t.sort,"-eps"),r={id:void 0,name:(0,l.t)("Performance"),query:"event.type:transaction transaction.op:ui.load",fields:["transaction","eps()","p75(measurements.frames_slow_rate)","p75(measurements.time_to_initial_display)"],version:2,dataset:x.as.METRICS};return r.orderby=a,r}var F=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),C=a("./app/components/layouts/thirds.tsx"),E=a("./app/components/organizations/pageFilterBar.tsx"),L=a("./app/styles/space.tsx"),P=a("./app/utils/performance/contexts/pageError.tsx"),B=a("./app/views/starfish/components/datePicker.tsx"),N=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/react-router/es/index.js")),z=a("./app/components/compactSelect/index.tsx"),q=a("./app/utils.tsx"),O=a("./app/utils/useLocation.tsx"),D=a("./app/utils/queryClient.tsx"),T=a("./app/utils/usePageFilters.tsx");function X(){const e=(0,c.Z)(),{selection:t}=(0,T.Z)(),{environments:a,projects:r}=t;return(0,D.WE)([`/organizations/${e.slug}/releases/`,{query:{sort:"date",project:r,per_page:50,environment:a}}],{staleTime:1/0})}var R=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const A={value:"",label:(0,l.t)("All Releases")};function M(e){let{selectorName:t,selectorKey:a}=e;const{data:r,isLoading:s}=X(),i=(0,O.T)();let n=(0,_.ro)(i.query[a])??r?.[0]?.version??void 0;return s||(0,q.ri)(n)||(n=A.value),(0,R.tZ)(V,{triggerProps:{prefix:t},value:n,options:[...(r??[A]).map((e=>({value:e.version,label:e.shortVersion??e.version})))],onChange:e=>{N.browserHistory.push({...i,query:{...i.query,[a]:e.value}})}})}M.displayName="ReleaseSelector";const V=(0,F.Z)(z.Z,{target:"ekdcyq0"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){max-width:300px;}");var $=a("./app/views/starfish/components/starfishProjectSelector.tsx"),I=a("./app/components/charts/utils.tsx"),K=a("./app/components/loading/loadingContainer.tsx"),Q=a("./app/components/performance/layouts.tsx"),W=a("./app/constants/chartPalette.tsx"),Y=a("./app/utils/discover/charts.tsx"),H=a("./app/views/starfish/components/chart.tsx"),G=a("./app/components/panels/panel.tsx"),J=a("./app/styles/text.tsx");function U(e){let{title:t,children:a,button:r,subtitle:s}=e;return(0,R.tZ)(G.Z,{children:(0,R.BX)(re,{children:[(0,R.BX)(te,{children:[(0,R.BX)(ae,{children:[t&&(0,R.tZ)(ee,{children:t}),r]}),s&&(0,R.tZ)(se,{children:s})]}),a]})})}U.displayName="MiniChartPanel";const ee=(0,F.Z)("p",{target:"e1mibtmj4"})((e=>e.theme.text.cardTitle),";"),te=(0,F.Z)("div",{target:"e1mibtmj3"})("padding:0 ",(0,L.D)(1)," ",(0,L.D)(1)," 0;"),ae=(0,F.Z)("div",{target:"e1mibtmj2"})({name:"gt3bih",styles:"min-height:24px;width:100%;display:flex;align-items:center;justify-content:space-between"}),re=(0,F.Z)("div",{target:"e1mibtmj1"})("padding:",(0,L.D)(1.5)," ",(0,L.D)(2),";",J.Z,";"),se=(0,F.Z)("span",{target:"e1mibtmj0"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeMedium),";display:inline-block;");var ie=a("./app/views/starfish/utils/constants.tsx"),ne=a("./app/views/starfish/utils/useEventsStatsQuery.tsx"),oe=a("./app/components/gridEditable/sortLink.tsx"),le=a("./app/components/pagination.tsx"),de=a("./app/utils/discover/fieldRenderers.tsx"),pe=a("./app/utils/performanceForSentry/index.tsx"),ce=a("./app/views/starfish/components/tableCells/renderHeadCell.tsx"),ue=a("./app/views/starfish/utils/useSpansQuery.tsx"),me=a("./app/views/starfish/views/spans/types.tsx");const ge=[{key:"transaction",name:(0,l.t)("Screen"),width:h.z7},{key:"eps()",name:me.FS.throughput,width:h.z7},{key:"p75(measurements.frames_slow_rate)",name:me.FS.slowFrames,width:h.z7},{key:"p75(measurements.time_to_initial_display)",name:me.FS.ttid,width:h.z7}];function he(){const e=(0,O.T)(),t=(0,c.Z)(),a=j(e),s=v.ZP.fromNewQueryWithLocation(a,e),{isLoading:i,data:n,meta:o,pageLinks:l}=fe(s);return(0,R.BX)(r.Fragment,{children:[(0,R.tZ)(pe.oF,{id:"MobileServiceView.ViewsList",hasData:(0,q.ri)(n)&&n.length>0,children:(0,R.tZ)(h.ZP,{isLoading:i,data:n??[],columnOrder:ge,columnSortBy:s.getSorts(),grid:{renderHeadCell:t=>function(t){let{column:a,tableMeta:r}=t;const{key:i}=a,n=(0,ce.hp)(i),o={field:a.key,width:a.width},l=s.sortForField(o,r),d=l?l.kind:void 0,p=(0,v.M3)(o,r);return(0,R.tZ)(oe.Z,{align:n,title:a.name,direction:d,canSort:p,generateSortLink:function(){if(!r)return;const t=s.sortOnField(o,r).generateQueryStringObject();return{...e,query:{...e.query,sort:t.sort}}}})}({column:t,tableMeta:o}),renderBodyCell:function(a,r){return o&&o?.fields?(0,de.Js)(a.key,o.fields,!1)(r,{location:e,organization:t,unit:o.units?.[a.key]}):r[a.key]}},location:e})}),(0,R.tZ)(le.Z,{pageLinks:l})]})}he.displayName="ViewsList";const fe=e=>{const{isLoading:t,data:a,meta:r,pageLinks:s}=(0,ue.RX)({eventView:e,initialData:[],limit:50});return{isLoading:t,data:a,meta:r,pageLinks:s}},ve={"avg(measurements.app_start_cold)":"avg(app_start_cold)","avg(measurements.app_start_warm)":"avg(app_start_warm)","avg(measurements.time_to_initial_display)":"avg(time_to_initial_display)","avg(measurements.time_to_full_display)":"avg(time_to_full_display)","avg(measurements.frames_slow_rate)":"avg(frames_slow_rate)","avg(measurements.frames_frozen_rate)":"avg(frames_frozen_rate)"};function xe(){const e=(0,T.Z)(),t=(0,O.T)(),{data:a,isLoading:s}=X(),i=(0,_.ro)(t.query.release1)??a?.[0]?.version??void 0,n=(0,_.ro)(t.query.release2)??a?.[0]?.version??void 0,o=new w.MY(["event.type:transaction","transaction.op:ui.load"]);(0,H.K4)();const{isLoading:d,data:p,isError:c}=(0,ne.z)({eventView:v.ZP.fromNewQueryWithPageFilters({name:"",fields:[],yAxis:["avg(measurements.app_start_cold)","avg(measurements.app_start_warm)","avg(measurements.time_to_initial_display)","avg(measurements.time_to_full_display)","avg(measurements.frames_slow_rate)","avg(measurements.frames_frozen_rate)"],query:(0,q.ri)(i)&&""!==i?o.copy().addStringFilter(`release:${i}`).formatString():o.formatString(),dataset:x.as.METRICS,version:2,interval:(0,I.ZS)(e.selection.datetime,ie.R)},e.selection),enabled:!s,referrer:"api.starfish-web-service.span-category-breakdown-timeseries",initialData:{}}),{data:u}=(0,ne.z)({eventView:v.ZP.fromNewQueryWithPageFilters({name:"",fields:[],yAxis:["avg(measurements.app_start_cold)","avg(measurements.app_start_warm)","avg(measurements.time_to_initial_display)","avg(measurements.time_to_full_display)","avg(measurements.frames_slow_rate)","avg(measurements.frames_frozen_rate)"],query:(0,q.ri)(n)&&""!==n?o.copy().addStringFilter(`release:${n}`).formatString():o.formatString(),dataset:x.as.METRICS,version:2,interval:(0,I.ZS)(e.selection.datetime,ie.R)},e.selection),enabled:!s&&i!==n,referrer:"api.starfish-web-service.span-category-breakdown-timeseries",initialData:{}});return s?(0,R.tZ)(K.Z,{}):(0,R.BX)("div",{"data-test-id":"starfish-movile-view",children:[(0,R.tZ)(_e,{minSize:300,children:(0,R.tZ)(we,{children:function(){const e={"avg(measurements.app_start_cold)":[],"avg(measurements.app_start_warm)":[],"avg(measurements.time_to_initial_display)":[],"avg(measurements.time_to_full_display)":[],"avg(measurements.frames_slow_rate)":[],"avg(measurements.frames_frozen_rate)":[]};return(0,q.ri)(p)&&Object.keys(p).forEach((t=>{const a=`${i}`;t in e&&e[t].push({seriesName:a,color:W.$[1][0],data:p[t]?.data.map((e=>({name:1e3*e[0],value:e[1][0].count})))??[]})})),(0,q.ri)(u)&&Object.keys(u).forEach((t=>{const a=`${n}`;t in e&&e[t].push({seriesName:a,color:W.$[1][1],data:u[t]?.data.map((e=>({name:1e3*e[0],value:e[1][0].count})))??[]})})),(0,R.BX)(r.Fragment,{children:[(0,R.tZ)(ye,{children:(0,R.BX)(U,{title:(0,l.t)("App Initialization"),children:[(0,R.tZ)(be,{children:ve["avg(measurements.app_start_cold)"]}),(0,R.tZ)(H.ZP,{height:125,data:e["avg(measurements.app_start_cold)"],loading:d,utc:!1,grid:{left:"0",right:"0",top:"16px",bottom:"0"},showLegend:!0,definedAxisTicks:2,isLineChart:!0,aggregateOutputFormat:"duration",tooltipFormatterOptions:{valueFormatter:e=>(0,Y.Ew)(e,"duration")},errored:c}),(0,R.tZ)(Ze,{}),(0,R.tZ)(be,{children:ve["avg(measurements.app_start_warm)"]}),(0,R.tZ)(H.ZP,{height:125,data:e["avg(measurements.app_start_warm)"],loading:d,showLegend:!0,utc:!1,grid:{left:"0",right:"0",top:"16px",bottom:"0"},aggregateOutputFormat:"duration",definedAxisTicks:2,stacked:!0,isLineChart:!0,tooltipFormatterOptions:{valueFormatter:e=>(0,Y.Ew)(e,"duration")},errored:c})]})}),(0,R.tZ)(ye,{children:(0,R.BX)(U,{title:(0,l.t)("Perceived Screen Load"),children:[(0,R.tZ)(be,{children:ve["avg(measurements.time_to_initial_display)"]}),(0,R.tZ)(H.ZP,{height:125,data:e["avg(measurements.time_to_initial_display)"],loading:d,utc:!1,grid:{left:"0",right:"0",top:"16px",bottom:"0"},showLegend:!0,definedAxisTicks:2,isLineChart:!0,aggregateOutputFormat:"duration",tooltipFormatterOptions:{valueFormatter:e=>(0,Y.Ew)(e,"duration")},errored:c}),(0,R.tZ)(Ze,{}),(0,R.tZ)(be,{children:ve["avg(measurements.time_to_full_display)"]}),(0,R.tZ)(H.ZP,{height:125,data:e["avg(measurements.time_to_full_display)"],loading:d,showLegend:!0,utc:!1,grid:{left:"0",right:"0",top:"16px",bottom:"0"},aggregateOutputFormat:"duration",definedAxisTicks:2,stacked:!0,isLineChart:!0,tooltipFormatterOptions:{valueFormatter:e=>(0,Y.Ew)(e,"duration")},errored:c})]})}),(0,R.tZ)(ye,{children:(0,R.BX)(U,{title:(0,l.t)("Responsiveness"),children:[(0,R.tZ)(be,{children:ve["avg(measurements.frames_slow_rate)"]}),(0,R.tZ)(H.ZP,{height:125,data:e["avg(measurements.frames_slow_rate)"],loading:d,utc:!1,grid:{left:"0",right:"0",top:"16px",bottom:"0"},showLegend:!0,definedAxisTicks:2,isLineChart:!0,aggregateOutputFormat:"percentage",tooltipFormatterOptions:{valueFormatter:e=>(0,Y.Ew)(e,"percentage")},errored:c}),(0,R.tZ)(Ze,{}),(0,R.tZ)(be,{children:ve["avg(measurements.frames_frozen_rate)"]}),(0,R.tZ)(H.ZP,{height:125,data:e["avg(measurements.frames_frozen_rate)"],loading:d,showLegend:!0,utc:!1,grid:{left:"0",right:"0",top:"16px",bottom:"0"},aggregateOutputFormat:"percentage",definedAxisTicks:2,stacked:!0,isLineChart:!0,tooltipFormatterOptions:{valueFormatter:e=>(0,Y.Ew)(e,"percentage")},errored:c})]})})]})}()})}),(0,R.tZ)(he,{})]})}xe.displayName="MobileStarfishView";const _e=(0,F.Z)(Q.c,{target:"eo7o8vu4"})("margin-bottom:",(0,L.D)(2),";"),we=(0,F.Z)("div",{target:"eo7o8vu3"})("display:flex;flex-direction:row;flex-wrap:wrap;gap:",(0,L.D)(2),";"),ye=(0,F.Z)("div",{target:"eo7o8vu2"})({name:"82a6rk",styles:"flex:1"}),Ze=(0,F.Z)("div",{target:"eo7o8vu1"})("margin-top:",(0,L.D)(3),";"),be=(0,F.Z)("div",{target:"eo7o8vu0"})("margin-bottom:",(0,L.D)(1.5),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:bold;");var Se=a("./app/components/charts/eventsRequest.tsx"),ke=a("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),je=a("./app/utils/withApi.tsx"),Fe=a("./app/views/starfish/colours.tsx"),Ce=a("./app/views/starfish/utils/chartValueFormatters/formatThroughput.ts"),Ee=a("./app/views/starfish/views/webServiceView/spanGroupBreakdownContainer.tsx"),Le=a("../node_modules/query-string/index.js"),Pe=a("./app/components/assistant/guideAnchor.tsx"),Be=a("./app/components/links/link.tsx"),Ne=a("./app/components/searchBar.tsx"),ze=a("./app/components/tooltip.tsx"),qe=a("./app/utils/analytics.tsx"),Oe=a("./app/utils/discover/discoverQuery.tsx"),De=a("./app/utils/discover/fields.tsx"),Te=a("./app/views/starfish/components/tableCells/throughputCell.tsx"),Xe=a("./app/views/starfish/components/tableCells/timeSpentCell.tsx");const Re=[(0,l.t)("Endpoint"),me.FS.throughput,me.FS.p95,me.FS.errorCount,me.FS.timeSpent];function Ae(e){let{eventView:t,location:a,organization:s,setError:i}=e;const[n,o]=(0,r.useState)([]),[d,p]=(0,r.useState)(t);function c(e){const r={};return e?.data?.[0]&&Object.keys(e.data[0]).forEach((e=>{e.startsWith("equation|(percentile_range(transaction.duration,0.95,lessOrEquals")&&(r["p95()"]=e)})),(r,i)=>function(e,r,i,n){if(!e||!e.meta)return i[r.key];const o=e.meta,l=String(r.key),d=(0,de.Js)(l,o,!1)(i,{organization:s,location:a});if("transaction"===l){let e="";return i["http.method"]&&(e=`${i["http.method"]} `),(0,R.BX)(Be.Z,{to:`/organizations/${s.slug}/starfish/endpoint-overview/?${Le.stringify({endpoint:i.transaction,"http.method":i["http.method"],statsPeriod:t.statsPeriod,project:t.project,start:t.start,end:t.end})}`,style:{display:"block",width:"100%"},onClick:()=>{(0,qe.Gi)("starfish.web_service_view.endpoint_list.endpoint.clicked",{organization:s,endpoint:i.transaction})},children:[e,i.transaction]})}if(l===S){const e=Number(i["sum(transaction.duration)"]),t=Number(i[S]);return(0,R.tZ)(Xe.z,{timeSpentPercentage:t,totalSpanTime:e})}if("tps()"===l)return(0,R.tZ)(Te.Z,{throughputPerSecond:i[l]});if("project"===l)return null;const p=(0,De.LY)(l),c=i[p];return"integer"===o[p]&&"number"==typeof c&&c>999?(0,R.tZ)(ze.u,{title:c.toLocaleString(),containerDisplayMode:"block",position:"right",children:d}):d}(e,r,i)}function u(e){const r=Re;return(i,n)=>function(e,r,i){let n="right";"Endpoint"===i&&(n="left");const o={field:"equation"===r.column?.kind?r.key:r.name,width:r.width},l={};e&&Object.keys(e).forEach((t=>{l[(0,De.LY)(t)]=e[t]}));const d=t.sortForField(o,l),p=(0,v.M3)(o,l),c=d?d.kind:void 0;return(0,R.tZ)(oe.Z,{align:n,title:i||o.field,direction:c,canSort:p,generateSortLink:function(){if(!e)return;const r=t.sortOnField(o,l).generateQueryStringObject();return{...a,query:{...a.query,sort:r.sort}}},onClick:()=>{(0,qe.Gi)("starfish.web_service_view.endpoint_list.header.clicked",{organization:s,direction:"desc"===c?"asc":"desc",header:i||o.field})}})}(e,i,r[n])}function m(e,t){o((a=>a.map(((a,r)=>r===e?Number(t.width??h.z7):a))))}(0,r.useEffect)((()=>{p((e=>{const a=t.clone();return a.query=e.query,a}))}),[t]);const g=t.getColumns().filter((e=>"project"!==e.name&&"http.method"!==e.name&&"total.transaction_duration"!==e.name&&"sum(transaction.duration)"!==e.name)).map(((e,t)=>"number"==typeof n[t]?{...e,width:n[t]}:e)),f=t.getSorts();return(0,R.BX)(Pe.Z,{target:"performance_table",position:"top-start",children:[(0,R.tZ)(Ve,{placeholder:(0,l.t)("Search for endpoints"),onSearch:function(e){const a=t.clone();a.query+=`transaction:*${e}*`,p(a),(0,qe.Gi)("starfish.web_service_view.endpoint_list.search",{organization:s,query:e})}}),(0,R.tZ)(Oe.Z,{eventView:d,orgSlug:s.slug,location:a,setError:e=>i(e?.message),referrer:"api.starfish.endpoint-list",queryExtras:{dataset:"metrics"},children:e=>{let{pageLinks:t,isLoading:s,tableData:i}=e;return(0,R.BX)(r.Fragment,{children:[(0,R.tZ)(h.ZP,{isLoading:s,data:i?i.data:[],columnOrder:g,columnSortBy:f,grid:{onResizeColumn:m,renderHeadCell:u(i?.meta),renderBodyCell:c(i)},location:a}),(0,R.tZ)(le.Z,{pageLinks:t})]})}})]})}Ae.displayName="EndpointList";const Me=Ae,Ve=(0,F.Z)(Ne.Z,{target:"e152i1y80"})("margin-bottom:",(0,L.D)(2),";"),$e=(0,je.Z)(Se.Z);function Ie(e){const{organization:t,eventView:a}=e,s=(0,T.Z)(),i=(0,ke.u)(),[n,o]=(0,r.useState)(!0);return(0,H.K4)([n]),(0,R.BX)("div",{"data-test-id":"starfish-view",children:[(0,R.tZ)(Ke,{minSize:300,children:(0,R.BX)(Qe,{children:[(0,R.tZ)(We,{children:(0,R.tZ)(Ee._2,{})}),(0,R.tZ)(Ye,{children:function(){const e=new w.MY(["event.type:transaction","has:http.method","transaction.op:http.server"]);return(0,R.tZ)($e,{query:e.formatString(),includePrevious:!1,partial:!0,interval:(0,I.ZS)(s.selection.datetime,ie.R),includeTransformedData:!0,limit:1,environment:a.environment,project:a.project,period:a.statsPeriod,referrer:"api.starfish-web-service.homepage-charts",start:a.start,end:a.end,organization:t,yAxis:["tps()","http_error_count()","p95(transaction.duration)"],dataset:x.as.METRICS,children:e=>{let{loading:t,results:a}=e;if(!a||!a[0]||!a[1])return null;const s={seriesName:(0,l.t)("Requests"),data:a[0].data},n={seriesName:(0,l.t)("5XX Responses"),color:W.$[5][3],data:a[1].data},d={seriesName:(0,l.t)("Requests"),data:a[2].data};return o(t),(0,R.BX)(r.Fragment,{children:[(0,R.tZ)(U,{title:me.FS.p95,children:(0,R.tZ)(H.ZP,{height:71,data:[d],loading:t,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},definedAxisTicks:2,isLineChart:!0,chartColors:[Fe.Tn],tooltipFormatterOptions:{valueFormatter:e=>(0,Y.Ew)(e,"duration")}})}),(0,R.tZ)(U,{title:me.FS.throughput,children:(0,R.tZ)(H.ZP,{height:71,data:[s],loading:t,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},aggregateOutputFormat:"rate",definedAxisTicks:2,stacked:!0,isLineChart:!0,chartColors:[Fe.SQ],tooltipFormatterOptions:{valueFormatter:e=>(0,Ce.Z)(e)}})}),(0,R.tZ)(U,{title:me.FS.errorCount,children:(0,R.tZ)(H.ZP,{height:71,data:[n],loading:t,utc:!1,grid:{left:"0",right:"0",top:"8px",bottom:"0"},definedAxisTicks:2,isLineChart:!0,chartColors:i.charts.getColorPalette(2)})})]})}})}()})]})}),(0,R.tZ)(Me,{...e,setError:(0,P.De)().setPageError})]})}Ie.displayName="StarfishView";const Ke=(0,F.Z)(Q.c,{target:"epbipxo3"})("margin-bottom:",(0,L.D)(2),";"),Qe=(0,F.Z)("div",{target:"epbipxo2"})("display:flex;flex-direction:row;flex-wrap:wrap;gap:",(0,L.D)(2),";"),We=(0,F.Z)("div",{target:"epbipxo1"})({name:"1189xqs",styles:"flex:2"}),Ye=(0,F.Z)("div",{target:"epbipxo0"})({name:"82a6rk",styles:"flex:1"});function He(e){const t=e.selection.projects[0],a=y.a[t]||Z.Nx.BACKEND,s=(0,R.BX)(r.Fragment,{children:[(0,R.BX)(E.Z,{condensed:!0,children:[(0,R.tZ)($.Z,{}),(0,R.tZ)(B.Z,{})]}),a===Z.Nx.MOBILE&&(0,R.BX)(E.Z,{condensed:!0,children:[(0,R.tZ)(M,{selectorKey:"release1",selectorName:(0,l.t)("Release 1")}),(0,R.tZ)(M,{selectorKey:"release2",selectorName:(0,l.t)("Release 2")})]})]}),i=(()=>{switch(a){case Z.Nx.MOBILE:return xe;case Z.Nx.BACKEND:default:return Ie}})();return(0,R.tZ)(C.T3,{children:(0,R.BX)(P.V_,{children:[(0,R.tZ)(C.h4,{children:(0,R.tZ)(C.oB,{children:(0,R.tZ)(C.Dx,{children:(()=>{switch(a){case Z.Nx.MOBILE:return(0,l.t)("Mobile Application");case Z.Nx.BACKEND:default:return(0,l.t)("Web Service")}})()})})}),(0,R.tZ)(C.uT,{children:(0,R.BX)(C.or,{fullWidth:!0,children:[(0,R.tZ)(P.YY,{}),(0,R.BX)(r.Fragment,{children:[(0,R.tZ)(Ge,{children:s}),(0,R.tZ)(i,{...e})]})]})})]})})}He.displayName="StarfishLanding";const Ge=(0,F.Z)("div",{target:"e160gsn70"})("display:grid;grid-template-rows:auto auto auto;gap:",(0,L.D)(2),";margin-bottom:",(0,L.D)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-rows:auto;grid-template-columns:auto 1fr auto;}");function Je(e){let{selection:t,location:a,router:s}=e;const m=(0,p.Z)(),S=(0,c.Z)(),F=(0,r.useRef)(!1),C=(0,u.Z)(t.datetime),E=(0,d.gp)(S),L=function(e){let{withStaticFilters:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const{query:s}=e,i=r.projects[0],n=y.a[i]||Z.Nx.BACKEND,o=(()=>{switch(n){case Z.Nx.MOBILE:return j(e);case Z.Nx.BACKEND:default:return function(e){const{query:t}=e,a=(0,_.ro)(t.sort,"-time_spent_percentage"),r={id:void 0,name:(0,l.t)("Performance"),query:"event.type:transaction has:http.method transaction.op:http.server",fields:["transaction","http.method","tps()","p95(transaction.duration)","http_error_count()","time_spent_percentage()","sum(transaction.duration)"],version:2,dataset:x.as.METRICS};return r.orderby=a,r}(e)}})(),d=s.start&&s.end,p=Array(o.fields.length).fill(h.z7);p[o.fields.length-1]="110",o.widths=p,s.statsPeriod||d||(o.range=k(a));const c=(0,_.ro)(s.query,"");return o.query=`${o.query} ${function(e,t){const a=new w.MY(e);if(a.freeText.length>0){const e=a.freeText.join(" ");a.setFilterValues("transaction",[(0,f.D)(e)],!1),a.freeText=[]}return t&&(a.tokens=a.tokens.filter((e=>e.key&&b.includes(e.key)))),a.formatString()}(c,t)}`,v.ZP.fromNewQueryWithLocation(o,e)}(a,{withStaticFilters:E},S,t);return(0,r.useEffect)((()=>{if(!F.current)return(0,n.QK)(m,S.slug,t),void(F.current=!0);i()(C,t.datetime)||(0,n.QK)(m,S.slug,t)}),[t.datetime,C,t,m,S,a]),(0,R.tZ)(o.Z,{title:(0,l.t)("Service Overview"),orgSlug:S.slug,children:(0,R.tZ)(g.M,{children:(0,R.tZ)(He,{router:s,eventView:L,organization:S,location:a,selection:t,withStaticFilters:E})})})}Je.displayName="WebServiceView";const Ue=(0,m.Z)(Je)},"../node_modules/lodash/negate.js":e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"../node_modules/lodash/omitBy.js":(e,t,a)=>{var r=a("../node_modules/lodash/_baseIteratee.js"),s=a("../node_modules/lodash/negate.js"),i=a("../node_modules/lodash/pickBy.js");e.exports=function(e,t){return i(e,s(r(t)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_starfish_views_webServiceView_index_tsx-node_modules_lodash_omitBy_js.40c9c915b0792164753f01c78509888b.js.map