"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionTags_index_tsx"],{"./app/components/charts/components/visualMap.tsx":(e,t,a)=>{function n(e){return e}a.d(t,{Z:()=>n}),a("../node_modules/echarts/lib/component/visualMap.js")},"./app/components/gridEditable/sortLink.tsx":(e,t,a)=>{a.d(t,{Z:()=>g});var n=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=a("../node_modules/react-router/es/index.js"),r=a("./app/components/links/link.tsx"),i=a("./app/icons/index.tsx"),s=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{align:t,title:a,canSort:n,generateSortLink:r,onClick:i,direction:l,replace:g}=e;const p=r();if(!p||!n)return(0,s.tZ)(d,{align:t,children:a});const m=l?(0,s.tZ)(u,{size:"xs",direction:"desc"===l?"down":"up"}):null;return(0,s.BX)(c,{align:t,to:p,onClick:e=>{g&&(e.preventDefault(),o.browserHistory.replace(p)),i?.(e)},children:[a," ",m]})}l.displayName="SortLink";const c=(0,n.Z)((e=>{const{align:t,css:a,...n}=e;return(0,s.tZ)(r.Z,{...n})}),{target:"esdhr0u2"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),d=(0,n.Z)("div",{target:"esdhr0u1"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),u=(0,n.Z)(i.CC,{target:"esdhr0u0"})({name:"40f4ru",styles:"vertical-align:top"}),g=l},"./app/components/radio.tsx":(e,t,a)=>{a.d(t,{Z:()=>s});var n=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=a("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),r=a("./app/styles/animations.tsx");const i=(0,n.Z)("input",{target:"e72tocb0"})("display:flex;padding:0;width:",(e=>"small"===e.radioSize?"1rem":"1.5rem"),";height:",(e=>"small"===e.radioSize?"1rem":"1.5rem"),";position:relative;border-radius:50%;align-items:center;justify-content:center;border:1px solid ",(e=>e.theme.border),";box-shadow:inset ",(e=>e.theme.dropShadowMedium),";background:none;appearance:none;transition:border 0.1s,box-shadow 0.1s;margin:0!important;&:focus,&.focus-visible{outline:none;border-color:",(e=>e.theme.focusBorder),";box-shadow:",(e=>e.theme.focusBorder)," 0 0 0 1px;}&:checked:after{content:'';",(e=>((e,t)=>(0,o.iv)("display:block;width:","small"===e.radioSize?"0.5rem":"0.875rem",";height:","small"===e.radioSize?"0.5rem":"0.875rem",";border-radius:50%;background-color:",t.active,";animation:0.2s ",r.kQ," ease;opacity:",e.disabled?.4:null,";",""))(e,e.theme)),";}");i.defaultProps={type:"radio"};const s=i},"./app/views/performance/transactionSummary/transactionTags/index.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>Je});var n=a("./app/locale.tsx"),o=a("./app/utils/discover/eventView.tsx"),r=a("./app/utils/queryString.tsx"),i=a("./app/utils/tokenizeSearch.tsx"),s=a("./app/utils/withOrganization.tsx"),l=a("./app/utils/withProjects.tsx"),c=a("./app/views/performance/transactionSummary/pageLayout.tsx"),d=a("./app/views/performance/transactionSummary/tabs.tsx"),u=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),g=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/react/index.js")),p=a("../node_modules/react-router/es/index.js"),m=a("./app/components/charts/styles.tsx"),h=a("./app/components/compactSelect/index.tsx"),y=a("./app/components/datePageFilter.tsx"),f=a("./app/components/environmentPageFilter.tsx"),Z=a("./app/components/events/searchBar.tsx"),b=a("./app/components/layouts/thirds.tsx"),v=a("./app/components/organizations/pageFilterBar.tsx"),w=a("./app/components/organizations/pageFilters/parse.tsx"),x=a("./app/components/placeholder.tsx"),k=a("./app/components/questionTooltip.tsx"),C=a("./app/components/radio.tsx"),S=a("./app/styles/space.tsx"),j=a("./app/utils/analytics.tsx"),D=a("./app/utils/performance/segmentExplorer/segmentExplorerQuery.tsx"),T=a("./app/views/performance/transactionSummary/utils.tsx"),_=a("./app/views/performance/transactionSummary/filter.tsx"),q=a("./app/views/performance/transactionSummary/transactionOverview/tagExplorer.tsx");let L;!function(e){e.DURATION="transaction.duration",e.LCP="measurements.lcp"}(L||(L={}));const B=[{label:(0,n.t)("LCP"),value:L.LCP},{label:(0,n.t)("Duration"),value:L.DURATION}];var z=a("./app/utils/discover/genericDiscoverQuery.tsx"),A=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function V(e){const{aggregateColumn:t}=e;return function(a){const{eventView:n}=a,o=n.getEventsAPIPayload(a.location);return o.aggregateColumn=t,o.sort=e.sort,o.tagKey=e.tagKey,o.numBucketsPerKey=e.numBucketsPerKey,o}}function P(e,t){return e.aggregateColumn!==t.aggregateColumn||e.sort!==t.sort||e.tagKey!==t.tagKey}function N(e){return(0,A.tZ)(z.ZP,{route:"events-facets-performance-histogram",getRequestPayload:V(e),shouldRefetchData:P,...e})}N.displayName="TagKeyHistogramQuery";const R=N;var F=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),X=a("../node_modules/react-dom/profiling.js"),K=a("../node_modules/react-popper/lib/esm/usePopper.js"),O=a("../node_modules/@emotion/react/dist/emotion-element-6a883da9.browser.esm.js"),M=a("../node_modules/@react-aria/overlays/dist/import.mjs"),E=a("../node_modules/@react-stately/overlays/dist/import.mjs"),I=a("../node_modules/@sentry/utils/esm/string.js"),H=a("../node_modules/lodash/memoize.js"),Q=a.n(H);a("./app/components/charts/components/visualMap.tsx"),a("../node_modules/echarts/lib/chart/heatmap.js"),a("../node_modules/echarts/lib/component/visualMap.js");var W=a("./app/components/charts/baseChart.tsx");const $=(0,g.forwardRef)(((e,t)=>{const{series:a,seriesOptions:n,visualMaps:o,...r}=e;return(0,A.tZ)(W.Z,{ref:t,options:{visualMap:o},...r,series:a.map((e=>{let{seriesName:t,data:a,dataArray:o,...r}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{data:t,...a}=e;return{data:t,...a,type:"heatmap"}}({...n,...r,name:t,data:o||a.map((e=>{let{value:t,name:a}=e;return[a,t]}))})}))})}));var G=a("./app/components/charts/transitionChart.tsx"),U=a("./app/components/charts/transparentLoadingMask.tsx"),Y=a("./app/components/loadingIndicator.tsx"),J=a("./app/components/overlay.tsx"),ee=a("./app/components/panels/panel.tsx"),te=a("./app/components/performanceDuration.tsx"),ae=a("./app/components/quickTrace/styles.tsx"),ne=a("./app/components/truncate.tsx"),oe=a("./app/utils/discover/charts.tsx"),re=a("./app/utils/formatters.tsx"),ie=a("./app/utils/getDynamicText.tsx");function se(e,t){return e.query!==t.query}function le(e){return(0,A.tZ)(z.ZP,{route:"events",shouldRefetchData:se,...e})}le.displayName="TagTransactionsQuery";const ce=le;var de=a("./app/views/performance/utils.tsx"),ue=a("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),ge=a("./app/views/performance/transactionSummary/transactionTags/utils.tsx");class pe{constructor(e){(0,F.Z)(this,"boundingRect",void 0),this.boundingRect=e.getBoundingClientRect()}getBoundingClientRect(){return this.boundingRect}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const me=Q()((()=>{let e=document.getElementById("heatmap-portal");return e||(e=document.createElement("div"),e.setAttribute("id","heatmap-portal"),document.body.appendChild(e),e)}));function he(e){const{tableData:t,isLoading:a,organization:o,eventView:i,location:s,tagKey:l,transactionName:c,aggregateColumn:d}=e,u=(0,g.useRef)(null),[p,m]=(0,g.useState)(),[h,y]=(0,g.useState)(null),[f,Z]=(0,g.useState)(null),[b,v]=(0,g.useState)(),w=["#D1BAFC","#9282F3","#6056BA","#313087","#021156"],C=new Set,j=t&&t.histogram&&t.histogram.data&&t.histogram.data.length?t.histogram.data:void 0,D=t&&t.tags&&t.tags.data?t.tags.data:void 0,_=j&&(q=j[0],Object.keys(q).find((e=>e.includes("histogram"))));var q;const L=D?D.map((e=>e.tags_value)).reverse():[];let B=0;const z=_&&j?j.map((e=>{const t=e[_],a=(0,de.YL)(t),n=e.tags_value;return C.add(a),B=Math.max(B,e.count),[a,n,e.count]})):null;z?.sort(((e,t)=>{const a=t[0]===e[0]?1:0;return t[a]-e[a]}));const V={height:290,animation:!1,colors:w,tooltip:{},yAxis:{type:"category",data:Array.from(L),splitArea:{show:!0},axisLabel:{formatter:e=>(0,I.$G)(e,30)}},xAxis:{type:"category",splitArea:{show:!0},data:Array.from(C),axisLabel:{show:!0,showMinLabel:!0,showMaxLabel:!0,formatter:e=>(0,oe.gu)(e,"number")},axisLine:{},axisPointer:{show:!1},axisTick:{show:!0,interval:0,alignWithLabel:!0}},grid:{left:(0,S.D)(3),right:(0,S.D)(3),top:"25px",bottom:(0,S.D)(4)}},P=[{min:0,max:B,show:!1,orient:"horizontal",calculable:!0,inRange:{color:w}}],N=[];z&&N.push({seriesName:"Count",dataArray:z,label:{show:!0,formatter:e=>(0,re.Du)(e.value[2])},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}});const R=(0,E.d)({}),{overlayProps:F}=(0,M.Ir)({isOpen:R.isOpen,onClose:R.close,isDismissable:!0,shouldCloseOnBlur:!0,shouldCloseOnInteractOutside:e=>!u.current?.getEchartsInstance().getDom().contains(e)},{current:h??null}),{styles:H,state:Q}=(0,K.D)(p,h,{placement:"bottom",strategy:"absolute",modifiers:[{name:"computeStyles",options:{gpuAcceleration:!1}},{name:"offset",options:{offset:[0,8]}},{name:"arrow",options:{element:f,padding:4}},{name:"preventOverflow",enabled:!0,options:{padding:12,altAxis:!0}}]}),W=(0,O.u)(),ee=p&&R.isOpen?(0,A.tZ)(J.w,{ref:y,zIndex:W.zIndex.dropdown,style:H.popper,...F,children:(0,A.tZ)(J.a,{arrowProps:{ref:Z,style:H.arrow,placement:Q?.placement},children:b&&(0,A.tZ)(ce,{query:b.getQueryWithAdditionalConditions(),location:s,eventView:b,orgSlug:o.slug,limit:4,referrer:"api.performance.tag-page",children:e=>{let{isLoading:t,tableData:a}=e;if(t)return(0,A.tZ)(ye,{children:(0,A.tZ)(Y.Z,{size:40,hideMessage:!0})});const i=(0,ue.xr)({orgSlug:o.slug,transaction:c,projectID:(0,r.ro)(s.query.project),query:{...b.generateQueryStringObject(),query:b.getQueryWithAdditionalConditions()}});return(0,A.BX)("div",{children:[a?.data.length?null:(0,A.tZ)(x.Z,{}),[...a?.data??[]].slice(0,3).map((e=>{const t=(0,T.vd)(c)(o,e,s.query);return(0,A.tZ)(ae.hP,{width:"small",to:t,children:(0,A.BX)(fe,{children:[(0,A.tZ)(ne.Z,{value:e.id,maxLength:12}),(0,A.tZ)(ae.df,{children:(0,A.tZ)(te.Z,{milliseconds:Number(e[d]),abbreviation:!0})})]})},e.id)})),i&&a&&a.data.length>3?(0,A.tZ)(ae.hP,{width:"small",to:i,children:(0,A.tZ)(fe,{children:(0,n.t)("View all events")})}):null]})}})})}):null,se=j&&(0,ge.oT)(j[0]);return(0,A.BX)(Ze,{children:[(0,A.BX)(be,{children:[(0,n.t)("Heat Map"),(0,A.tZ)(k.Z,{size:"sm",position:"top",title:(0,n.t)("This heatmap shows the frequency for each duration across the most common tag values")})]}),(0,A.BX)(G.Z,{loading:a,reloading:a,children:[(0,A.tZ)(U.Z,{visible:a}),(0,A.BX)(g.Fragment,{children:[(0,X.createPortal)((0,A.tZ)("div",{children:ee}),me()),(0,ie.Z)({value:(0,A.tZ)($,{ref:u,visualMaps:P,series:N,onClick:e=>{const t=e.event.event,a=new pe(t.target);m(a);const n=i.clone();n.fields=[{field:d}];const[r,s]=e.value;if(se&&j){const t=j[e.dataIndex],a=parseInt(`${t[se.histogramField]}`,10),o=a+se.bucketSize;n.additionalConditions.setFilterValues(d,[`>=${a}`,`<${o}`])}l&&n.additionalConditions.setFilterValues(l,[s]),v(n),(0,ge.bZ)(o),R.isOpen||R.open()},...V}),fixed:(0,A.tZ)(x.Z,{height:"290px",testId:"skeleton-ui"})})]})]})]})}he.displayName="TagsHeatMap";const ye=(0,u.Z)("div",{target:"e1s6hpsc3"})({name:"kxllrv",styles:"width:200px;height:100px;display:flex;align-items:center;justify-content:center"}),fe=(0,u.Z)("div",{target:"e1s6hpsc2"})({name:"17wn5yb",styles:"width:100%;display:flex;flex-direction:row;justify-content:space-between"}),Ze=(0,u.Z)(ee.Z,{target:"e1s6hpsc1"})("padding:",(0,S.D)(3)," ",(0,S.D)(3)," 0 ",(0,S.D)(3),";margin-bottom:0;border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;"),be=(0,u.Z)(m.ws,{target:"e1s6hpsc0"})(""),ve=he;var we=a("./app/components/gridEditable/index.tsx"),xe=a("./app/components/gridEditable/sortLink.tsx"),ke=a("./app/components/links/link.tsx"),Ce=a("./app/components/pagination.tsx"),Se=a("./app/icons/iconAdd.tsx"),je=a("./app/utils/discover/fields.tsx"),De=a("./app/utils/performanceForSentry/index.tsx"),Te=a("./app/views/discover/table/cellAction.tsx");const _e="tags_cursor";class qe extends g.Component{constructor(){super(...arguments),(0,F.Z)(this,"state",{widths:[]}),(0,F.Z)(this,"renderHeadCellWithMeta",((e,t,a)=>(n,o)=>this.renderHeadCell(e,t,n,a[o]))),(0,F.Z)(this,"handleTagValueClick",((e,t,a)=>{const n=(0,r.ro)(e.query.query),o=new i.MY(n??"");o.addFilterValues(t,[a]);const s=o.formatString();p.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(s).trim()}})})),(0,F.Z)(this,"handleCellAction",((e,t,a)=>n=>{const{eventView:o,location:r,organization:i}=this.props;(0,ge.bZ)(i);const s=(0,T.xf)(o.query);(0,Te.rh)(s,n,{...e,name:a.id},t),p.browserHistory.push({pathname:r.pathname,query:{...r.query,[_e]:void 0,query:s.formatString()}})})),(0,F.Z)(this,"generateReleaseLocation",(e=>{const{organization:t,location:a}=this.props,{project:n}=a.query;return{pathname:`/organizations/${t.slug}/releases/${encodeURIComponent(e)}`,query:{project:n}}})),(0,F.Z)(this,"handleReleaseLinkClicked",(()=>{const{organization:e}=this.props;(0,j.Gi)("performance_views.tags.jump_to_release",{organization:e})})),(0,F.Z)(this,"renderBodyCell",((e,t,a)=>{const o=a[t.key],{location:r,eventView:s,organization:l}=e;if("key"===t.key)return a.tags_key;const c=[Te.eX.ADD,Te.eX.EXCLUDE];if("tagValue"===t.key){const e={...a,id:a.tags_key};return(0,A.tZ)(Te.ZP,{column:t,dataRow:e,handleCellAction:this.handleCellAction(t,a.tags_value,e),allowActions:c,children:"release"===t.name?(0,A.tZ)(ke.Z,{to:this.generateReleaseLocation(a.tags_value),onClick:this.handleReleaseLinkClicked,children:(0,A.tZ)(q.xS,{row:a})}):(0,A.tZ)(q.xS,{row:a})})}if("frequency"===t.key)return(0,A.tZ)(Be,{children:(0,re.rl)(a.frequency,0)});if("action"===t.key){const e=new i.MY(s.query).hasFilter(a.tags_key);return(0,A.tZ)(Be,{children:(0,A.tZ)(ke.Z,{disabled:e,to:"",onClick:()=>{(0,ge.bZ)(l),this.handleTagValueClick(r,a.tags_key,a.tags_value)},children:(0,A.BX)(ze,{children:[(0,A.tZ)(Se.N,{isCircled:!0}),(0,n.t)("Add to filter")]})})})}if("comparison"===t.key){const e=a.comparison,t=(0,re.rl)(e-1,0);return e>1?(0,n.t)("+%s slower",t):(0,n.t)("%s faster",t)}return"aggregate"===t.key?(0,A.tZ)(Be,{children:(0,A.tZ)(te.Z,{abbreviation:!0,milliseconds:a.aggregate})}):"sumdelta"===t.key?(0,A.tZ)(Be,{children:(0,A.tZ)(te.Z,{abbreviation:!0,milliseconds:a.sumdelta})}):"count"===t.key?(0,A.tZ)(Be,{children:o}):o})),(0,F.Z)(this,"renderBodyCellWithData",(e=>(t,a)=>this.renderBodyCell(e,t,a))),(0,F.Z)(this,"handleResizeColumn",((e,t)=>{const a=[...this.state.widths];a[e]=t.width?Number(t.width):we.z7,this.setState({widths:a})}))}renderHeadCell(e,t,a,n){const{location:o}=this.props,r=(0,je.qG)(a.key,a.type,t),i={field:a.key,width:a.width},s=e.sortForField(i,t),l=s?s.kind:void 0;return(0,A.tZ)(xe.Z,{align:r,title:n.name,direction:l,canSort:!0,generateSortLink:function(){if(!t)return;const a=e.sortOnField(i,t),{sort:n}=a.generateQueryStringObject();return{...o,query:{...o.query,[_e]:void 0,tagSort:n}}}})}render(){const{eventView:e,tagKey:t,location:a,isLoading:n,tableData:o,aggregateColumn:r,pageLinks:i,onCursor:s}=this.props,l=[...Ve].map((e=>{const a={...e};return"tagValue"===e.key&&t&&(a.name=t),"aggregate"===e.key&&"measurements.lcp"===r&&(a.name="Avg LCP"),a}));return(0,A.BX)(Le,{children:[(0,A.tZ)(De.oF,{id:"TransactionTags-TagValueTable",hasData:!!o?.data?.length,isLoading:n,children:(0,A.tZ)(we.ZP,{isLoading:n,data:o&&o.data?o.data:[],columnOrder:l,columnSortBy:[],grid:{renderHeadCell:this.renderHeadCellWithMeta(e,o?o.meta:{},l),renderBodyCell:this.renderBodyCellWithData(this.props),onResizeColumn:this.handleResizeColumn},location:a})}),(0,A.tZ)(Ce.Z,{pageLinks:i,onCursor:s,size:"sm"})]})}}qe.displayName="TagValueTable";const Le=(0,u.Z)("div",{target:"e5xewh12"})({name:"122h187",styles:">div{border-top-left-radius:0;border-top-right-radius:0;}"}),Be=(0,u.Z)("div",{target:"e5xewh11"})({name:"29h503",styles:"text-align:right;flex:1"}),ze=(0,u.Z)("div",{target:"e5xewh10"})("display:grid;grid-auto-flow:column;gap:",(0,S.D)(.5),";justify-content:flex-end;align-items:center;"),Ae="tableCursor",Ve=[{key:"tagValue",field:"tagValue",name:"Tag Values",width:-1,column:{kind:"field"}},{key:"frequency",field:"frequency",name:"Frequency",width:-1,column:{kind:"field"},canSort:!0},{key:"count",field:"count",name:"Events",width:-1,column:{kind:"field"},canSort:!0},{key:"aggregate",field:"aggregate",name:"Avg Duration",width:-1,column:{kind:"field"},canSort:!0},{key:"action",field:"action",name:"",width:-1,column:{kind:"field"}}];function Pe(e){const{eventView:t,location:a,organization:n,aggregateColumn:i,tagKey:s}=e,l=t.clone(),c=(e,t,a)=>p.browserHistory.push({pathname:t,query:{...a,[Ae]:e}}),d=(0,r.ro)(a.query?.[Ae]),u=(0,ge.oc)(a),m=(0,o.vp)(u);l.fields=Ve;const h=l.withSorts(m.length?m:[{field:"frequency",kind:"desc"}]);return(0,A.tZ)(g.Fragment,{children:s?(0,A.BX)(g.Fragment,{children:[(0,A.tZ)(R,{eventView:l,orgSlug:n.slug,location:a,aggregateColumn:i,numBucketsPerKey:40,tagKey:s,limit:8,cursor:d,sort:u??"-sumdelta",children:t=>{let{isLoading:a,tableData:n}=t;return(0,A.tZ)(ve,{...e,tagKey:s,aggregateColumn:i,tableData:n,isLoading:a})}}),(0,A.tZ)(D.Z,{eventView:h,orgSlug:n.slug,location:a,aggregateColumn:i,tagKey:s,limit:8,cursor:d,sort:u,allTagKeys:!0,children:t=>{let{isLoading:a,tableData:n,pageLinks:o}=t;return(0,A.tZ)(qe,{...e,eventView:h,tagKey:s,aggregateColumn:i,pageLinks:o,tableData:n,isLoading:a,onCursor:c})}})]}):(0,A.BX)(g.Fragment,{children:[(0,A.tZ)(ve,{...e,aggregateColumn:i,tableData:null,isLoading:!1}),(0,A.tZ)(qe,{...e,pageLinks:null,aggregateColumn:i,tableData:null,isLoading:!1})]})})}Pe.displayName="TagsDisplay";const Ne=Pe;function Re(e){const{eventView:t,location:a,organization:n,projects:o}=e,[r,i]=(0,g.useState)((0,q.e2)(_.f1.NONE,o,t));return(0,A.tZ)(b.or,{fullWidth:!0,children:(0,A.tZ)(D.Z,{eventView:t,orgSlug:n.slug,location:a,aggregateColumn:r,limit:20,sort:"-sumdelta",allTagKeys:!0,children:t=>{let{isLoading:a,tableData:n}=t;return(0,A.tZ)(Fe,{...e,isLoading:a,tableData:n,aggregateColumn:r,onChangeAggregateColumn:i})}})})}function Fe(e){const{eventView:t,location:a,organization:o,tableData:i,aggregateColumn:s,onChangeAggregateColumn:l,isLoading:c}=e,d=t.clone(),u=i?function(e){const t=[],a=[];return e.data.forEach((e=>{(e.comparison>1?t:a).push(e.tags_key)})),{suspectTags:t,otherTags:a}}(i):null,m=u?u.suspectTags:[],Z=u?u.otherTags:[],b=(0,ge.Zn)(a),x=[...m,...Z],k=b?x.find((e=>e===b)):void 0,C=x.length?x[0]:void 0,S=k??C,[D,T]=(0,g.useState)(S),_=(0,g.useRef)(""),q=(0,g.useCallback)((e=>{if(_.current!==e){const t=(0,w.fK)({...a.query||{},tagKey:e,[Ae]:void 0});p.browserHistory.replace({pathname:a.pathname,query:t}),T(e),_.current=(0,r.ro)(a.query.tagKey,"")}}),[a.query,a.pathname]);(0,g.useEffect)((()=>{S&&q(S)}),[S,q]),D&&d.additionalConditions.setFilterValues("has",[D]);const L=(0,r.ro)(a.query.query,"");return(0,A.BX)(Ee,{children:[(0,A.tZ)(Xe,{suspectTags:m,otherTags:Z,tagSelected:D,changeTag:(e,t)=>((0,j.Gi)("performance_views.tags.change_tag",{organization:o,from_tag:D,to_tag:e,is_other_tag:t}),q(e)),isLoading:c}),(0,A.BX)(He,{children:[(0,A.BX)(We,{children:[(0,A.BX)(v.Z,{condensed:!0,children:[(0,A.tZ)(f.Z,{}),(0,A.tZ)(y.Z,{alignDropdown:"left"})]}),(0,A.tZ)(Qe,{organization:o,projectIds:d.project,query:L,fields:d.fields,onSearch:e=>{const t=(0,w.fK)({...a.query||{},query:e});p.browserHistory.push({pathname:a.pathname,query:t})}}),(0,A.tZ)(h.Z,{value:s,options:B,onChange:e=>{(0,j.Gi)("performance_views.tags.change_aggregate_column",{organization:o,value:e.value}),l(e.value)},triggerProps:{prefix:(0,n.t)("X-Axis")}})]}),(0,A.tZ)(Ne,{...e,tagKey:D})]})]})}function Xe(e){const{suspectTags:t,otherTags:a,changeTag:o,tagSelected:r,isLoading:i}=e;return(0,A.BX)(Ie,{children:[(0,A.BX)(Me,{children:[(0,n.t)("Suspect Tags"),(0,A.tZ)(k.Z,{position:"top",title:(0,n.t)("Suspect tags are tags that often correspond to slower transaction"),size:"sm"})]}),i?(0,A.tZ)(x.Z,{height:"200px"}):t.length?t.map((e=>(0,A.BX)(Ke,{children:[(0,A.tZ)(C.Z,{"aria-label":e,checked:r===e,onChange:()=>o(e,!1)}),(0,A.tZ)(Oe,{className:"truncate",children:e})]},e))):(0,A.tZ)("div",{children:(0,n.t)("No tags detected.")}),(0,A.tZ)(T.uI,{}),(0,A.BX)(Me,{children:[(0,n.t)("Other Tags"),(0,A.tZ)(k.Z,{position:"top",title:(0,n.t)("Other common tags for this transaction"),size:"sm"})]}),i?(0,A.tZ)(x.Z,{height:"200px"}):a.length?a.map((e=>(0,A.BX)(Ke,{children:[(0,A.tZ)(C.Z,{"aria-label":e,checked:r===e,onChange:()=>o(e,!0)}),(0,A.tZ)(Oe,{className:"truncate",children:e})]},e))):(0,A.tZ)("div",{children:(0,n.t)("No tags detected.")})]})}Re.displayName="TagsPageContent",Fe.displayName="InnerContent",Xe.displayName="TagsSideBar";const Ke=(0,u.Z)("label",{target:"e1gjpb8k7"})("cursor:pointer;margin-bottom:",(0,S.D)(1),";font-weight:normal;display:grid;grid-auto-flow:column;grid-auto-columns:max-content 1fr;align-items:center;gap:",(0,S.D)(1),";"),Oe=(0,u.Z)("span",{target:"e1gjpb8k6"})({name:"1d3w5wq",styles:"width:100%"}),Me=(0,u.Z)(m.OT,{target:"e1gjpb8k5"})("margin-bottom:",(0,S.D)(2),";"),Ee=(0,u.Z)("div",{target:"e1gjpb8k4"})("margin:0;background-color:",(e=>e.theme.background),";flex-grow:1;@media (min-width: ",(e=>e.theme.breakpoints.medium),"){display:grid;grid-template-columns:auto 66%;align-content:start;gap:",(0,S.D)(3),";}@media (min-width: ",(e=>e.theme.breakpoints.large),"){grid-template-columns:225px minmax(100px, auto);}"),Ie=(0,u.Z)("div",{target:"e1gjpb8k3"})({name:"sarfoe",styles:"grid-column:1/2"}),He=(0,u.Z)("div",{target:"e1gjpb8k2"})({name:"g99mcu",styles:"grid-column:2/4;max-width:100%"}),Qe=(0,u.Z)(Z.Z,{target:"e1gjpb8k1"})("@media (min-width: ",(e=>e.theme.breakpoints.small),"){order:1;grid-column:1/6;}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){order:initial;grid-column:auto;}"),We=(0,u.Z)("div",{target:"e1gjpb8k0"})("display:grid;gap:",(0,S.D)(2),";margin-bottom:",(0,S.D)(2),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-template-columns:auto 1fr auto;}"),$e=Re;function Ge(e){const{location:t,organization:a,projects:n}=e;return(0,A.tZ)(c.ZP,{location:t,organization:a,projects:n,tab:d.Z.TAGS,getDocumentTitle:Ue,generateEventView:Ye,childComponent:$e})}function Ue(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,n.t)("Tags")].join(" — "):[(0,n.t)("Summary"),(0,n.t)("Tags")].join(" — ")}function Ye(e){let{location:t,transactionName:a}=e;const n=`(${(0,r.ro)(t.query.query,"")})`,s=new i.MY(n);return s.setFilterValues("event.type",["transaction"]),s.setFilterValues("transaction",[a]),o.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:a,fields:["transaction.duration"],query:s.formatString(),projects:[]},t)}Ge.displayName="TransactionTags";const Je=(0,l.Z)((0,s.Z)(Ge))}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionTags_index_tsx.b2ed8b18f20034c5cff4dd5f092681a4.js.map