"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_discover_homepage_tsx"],{"./app/views/discover/homepage.tsx":(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(t("../node_modules/core-js/modules/es.array.push.js"),t("../node_modules/react-router/es/index.js")),o=t("./app/components/deprecatedAsyncComponent.tsx"),r=t("./app/components/organizations/pageFilters/container.tsx"),n=t("./app/components/organizations/pageFilters/parse.tsx"),p=t("./app/components/organizations/pageFilters/persistence.tsx"),d=t("./app/utils/discover/eventView.tsx"),u=t("./app/utils/withApi.tsx"),c=t("./app/utils/withOrganization.tsx"),l=t("./app/utils/withPageFilters.tsx"),h=t("./app/views/discover/results.tsx"),g=t("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends o.Z{constructor(){super(...arguments),(0,a.Z)(this,"shouldReload",!0),(0,a.Z)(this,"setSavedQuery",(e=>{this.setState({savedQuery:e})}))}componentDidUpdate(e,s){const t=!s.savedQuery&&this.state.savedQuery,a=s.loading&&!this.state.loading,o=this.state.savedQuery&&""===this.props.location.search,r=d.ZP.fromLocation(this.props.location).isValid();if(this.state.savedQuery&&(a&&t&&!r||o)){const e=d.ZP.fromSavedQuery(this.state.savedQuery),s=(0,p.EU)(this.props.organization.slug);let t={...e.generateQueryStringObject()};s?.pinnedFilters&&s.pinnedFilters.forEach((e=>{if("projects"===e)t.project=s.state.project?.map(String);else if("datetime"===e){const{period:e,start:a,end:i,utc:o}=(0,n.Sg)(s.state);t={...t,statsPeriod:e??void 0,utc:o?.toString(),start:(0,n.gX)(a),end:(0,n.gX)(i)}}else t[e]=s.state[e]})),i.browserHistory.replace({...this.props.location,query:t})}}getEndpoints(){const{organization:e}=this.props,s=[];return e.features.includes("discover-query")&&s.push(["savedQuery",`/organizations/${e.slug}/discover/homepage/`]),s}onRequestSuccess(e){let{stateKey:s,data:t}=e;"savedQuery"===s&&""===t&&this.setState({savedQuery:null})}renderBody(){const{savedQuery:e,loading:s}=this.state;return(0,g.tZ)(h.Results,{...this.props,savedQuery:e??void 0,loading:s,setSavedQuery:this.setSavedQuery,isHomepage:!0})}}function v(e){return(0,g.tZ)(r.Z,{skipInitializeUrlParams:!0,children:(0,g.tZ)(m,{...e})})}v.displayName="HomepageContainer";const y=(0,u.Z)((0,c.Z)((0,l.Z)(v)))}}]);
//# sourceMappingURL=../sourcemaps/app_views_discover_homepage_tsx.1e3e4c3b3368243f3c8b02daa27aa235.js.map