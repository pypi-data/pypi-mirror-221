"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_createTeamModal_tsx"],{"./app/actionCreators/teams.tsx":(e,t,a)=>{a.d(t,{Cm:()=>u,PX:()=>i,s:()=>d,tT:()=>l,um:()=>m,z_:()=>c});var o=a("./app/actionCreators/indicator.tsx"),n=a("./app/locale.tsx"),r=a("./app/stores/teamStore.tsx");const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var a=arguments.length,o=new Array(a>2?a-2:0),n=2;n<a;n++)o[n-2]=arguments[n];return e[t]?.(...o)};async function i(e,t){const a=await e.requestPromise(`/organizations/${t.orgId}/user-teams/`);r.Z.loadUserTeams(a)}function c(e,t){r.Z.onUpdateSuccess(e,t)}function m(e,t,a){const o=`/organizations/${t.orgId}/members/${t.memberId??"me"}/teams/${t.teamId}/`;return e.request(o,{method:"POST",success:e=>{r.Z.onUpdateSuccess(t.teamId,e),s(a,"success",e)},error:e=>{s(a,"error",e)}})}function d(e,t,a){const o=`/organizations/${t.orgId}/members/${t.memberId||"me"}/teams/${t.teamId}/`;return e.request(o,{method:"DELETE",success:e=>{r.Z.onUpdateSuccess(t.teamId,e),s(a,"success",e)},error:e=>{s(a,"error",e)}})}function u(e,t,a){return e.requestPromise(`/organizations/${a.orgId}/teams/`,{method:"POST",data:t}).then((e=>(r.Z.onCreateSuccess(e),(0,o.S9)((0,n._N)("[team] has been added to the [organization] organization",{team:`#${e.slug}`,organization:a.orgId})),e)),(e=>{throw(0,o.Iw)((0,n._N)("Unable to create [team] in the [organization] organization",{team:`#${t.slug}`,organization:a.orgId})),e}))}function l(e,t){return e.requestPromise(`/teams/${t.orgId}/${t.teamId}/`,{method:"DELETE"}).then((e=>(r.Z.onRemoveSuccess(t.teamId),(0,o.S9)((0,n._N)("[team] has been removed from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e)),(e=>{throw(0,o.Iw)((0,n._N)("Unable to remove [team] from the [organization] organization",{team:`#${t.teamId}`,organization:t.orgId})),e}))}},"./app/components/modals/createTeamModal.tsx":(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var o=a("../node_modules/react/index.js"),n=a("./app/actionCreators/teams.tsx"),r=a("./app/components/forms/fields/textField.tsx"),s=a("./app/components/forms/form.tsx"),i=a("./app/locale.tsx"),c=a("./app/utils/slugify.tsx"),m=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{organization:t,formProps:a,...n}=e;return(0,m.BX)(o.Fragment,{children:[(0,m.tZ)("p",{children:(0,i.t)("Members of a team have access to specific areas, such as a new release or a new application feature.")}),(0,m.tZ)(s.Z,{submitLabel:(0,i.t)("Create Team"),apiEndpoint:`/organizations/${t.slug}/teams/`,apiMethod:"POST",onSubmit:(e,t,a)=>n.onSubmit?.(e,t,a),onSubmitSuccess:e=>n.onSuccess?.(e),requireChanges:!0,"data-test-id":"create-team-form",...a,children:(0,m.tZ)(r.Z,{name:"slug",label:(0,i.t)("Team Name"),placeholder:(0,i.t)("e.g. operations, web-frontend, desktop"),help:(0,i.t)("May contain lowercase letters, numbers, dashes and underscores."),required:!0,stacked:!0,flexibleControlStateSize:!0,inline:!1,transformInput:c.Z})})]})}d.displayName="CreateTeamForm";const u=d;var l=a("./app/utils/useApi.tsx");function p(e){let{Body:t,Header:a,...r}=e;const{onClose:s,closeModal:c,organization:d}=r,p=(0,l.Z)();return(0,m.BX)(o.Fragment,{children:[(0,m.tZ)(a,{closeButton:!0,children:(0,i.t)("Create Team")}),(0,m.tZ)(t,{children:(0,m.tZ)(u,{...r,onSubmit:async function(e,t,a){try{const a=await(0,n.Cm)(p,e,{orgId:d.slug});c(),s?.(a),t(a)}catch(e){a(e)}}})})]})}p.displayName="CreateTeamModal";const g=p},"./app/utils/slugify.tsx":(e,t,a)=>{function o(e){return e.normalize("NFKD").toLowerCase().replace(" ","-").replace(/[^a-z0-9-_]/g,"")}a.d(t,{Z:()=>o})},"./app/utils/useApi.tsx":(e,t,a)=>{a.d(t,{Z:()=>r});var o=a("../node_modules/react/index.js"),n=a("./app/api.tsx");const r=function(){let{persistInFlight:e,api:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=(0,o.useRef)();void 0===a.current&&void 0===t&&(a.current=new n.KU);const r=t??a.current,s=(0,o.useCallback)((()=>{e||r.clear()}),[r,e]);return(0,o.useEffect)((()=>s),[s]),r}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_createTeamModal_tsx.61e26b9d93abe3c614a338c802c0c81d.js.map