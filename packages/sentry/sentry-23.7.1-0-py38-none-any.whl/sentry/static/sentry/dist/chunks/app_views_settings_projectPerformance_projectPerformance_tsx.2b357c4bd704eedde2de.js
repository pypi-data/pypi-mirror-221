"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_projectPerformance_projectPerformance_tsx"],{"./app/components/forms/formPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),n=s("./app/components/forms/fieldFromConfig.tsx"),i=s("./app/components/panels/panel.tsx"),r=s("./app/components/panels/panelBody.tsx"),l=s("./app/components/panels/panelHeader.tsx"),d=s("./app/icons/index.tsx"),c=s("./app/utils/sanitizeQuerySelector.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){let{additionalFieldProps:t={},title:s,fields:a,access:h,disabled:m,renderFooter:_,renderHeader:b,collapsible:f,initiallyCollapsed:g=!1,...E}=e;const[D,T]=(0,o.useState)(g),S=(0,o.useCallback)((()=>T((e=>!e))),[]);return(0,p.BX)(i.Z,{id:"string"==typeof s?(0,c.m)(s):void 0,children:[s&&(0,p.BX)(l.Z,{children:[s,f&&(0,p.tZ)(u,{onClick:S,children:(0,p.tZ)(d.g6,{"data-test-id":"form-panel-collapse-chevron",direction:D?"down":"up",size:"xs"})})]}),(0,p.BX)(r.Z,{hidden:D,children:["function"==typeof b&&b({title:s,fields:a}),a.map((e=>{if("function"==typeof e)return e();const{defaultValue:s,...a}=e;return!0===m&&(a.disabled=!0,a.disabledReason=void 0),(0,p.tZ)(n.Z,{access:h,disabled:m,...E,...t,field:a,highlighted:E.highlighted===`#${e.name}`},e.name)})),"function"==typeof _&&_({title:s,fields:a})]})]})}h.displayName="FormPanel";const m=h,u=(0,a.Z)("span",{target:"eovlw60"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/components/forms/jsonForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),n=s("../node_modules/@sentry/browser/node_modules/@sentry/core/esm/exports.js"),i=s("../node_modules/scroll-to-element/index.js"),r=s.n(i),l=s("./app/utils.tsx"),d=s("./app/utils/sanitizeQuerySelector.tsx"),c=s("./app/utils/withSentryRouter.tsx"),p=s("./app/components/forms/formPanel.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends o.Component{constructor(){super(...arguments),(0,a.Z)(this,"state",{highlighted:this.props.location?.hash})}componentDidMount(){this.scrollToHash()}componentDidUpdate(e){if(this.props.location&&this.props.location.hash!==e.location.hash){const e=this.props.location.hash;this.scrollToHash(e),this.setState({highlighted:e})}}scrollToHash(e){const t=e||this.props.location?.hash;if(t)try{r()((0,d.m)(decodeURIComponent(t)),{align:"middle",offset:-100})}catch(e){n.Tb(e)}}shouldDisplayForm(e){const t=e.filter((e=>"function"!=typeof e&&(0,l.ri)(e?.visible)));if(e.length===t.length){const{additionalFieldProps:e,...s}=this.props;return!t.every((t=>"function"==typeof t.visible?!t.visible({...s,...e}):!t.visible))}return!0}renderForm(e){let{fields:t,formPanelProps:s,title:a}=e;return this.shouldDisplayForm(t)||s?.renderFooter||s?.renderHeader?(0,h.tZ)(p.Z,{title:a,fields:t,...s}):null}render(){const{access:e,collapsible:t,initiallyCollapsed:s,fields:a,title:n,forms:i,disabled:r,features:l,additionalFieldProps:d,renderFooter:c,renderHeader:p,location:m,params:u,router:_,routes:b,...f}=this.props,g={access:e,disabled:r,features:l,additionalFieldProps:d,renderFooter:c,renderHeader:p,highlighted:this.state.highlighted,collapsible:t,initiallyCollapsed:s};return(0,h.BX)("div",{...f,children:[void 0!==i&&i.map(((e,t)=>(0,h.tZ)(o.Fragment,{children:this.renderForm({formPanelProps:g,...e})},t))),void 0===i&&void 0!==a&&this.renderForm({fields:a,formPanelProps:g,title:n})]})}}m.displayName="JsonForm";const u=(0,c.Z)(m)},"./app/components/panels/panelFooter.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});const a=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"eqhqnhn0"})("border-top:1px solid ",(e=>e.theme.border),";color:",(e=>e.theme.subText),";font-size:14px;")},"./app/components/panels/panelHeader.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),n=s("./app/styles/space.tsx");const i=e=>{let{disablePadding:t,hasButtons:s}=e;return(0,o.iv)("padding:",s?(0,n.D)(1):(0,n.D)(2)," ",t?0:(0,n.D)(2),";","")},r=(0,a.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",i,";")},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});const a=function(e,t){let s=arguments.length>3?arguments[3]:void 0;const a=`${e} - ${t}`,o=s?`${a} - ${s}`:a;return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?o:`${o} - Sentry`}},"./app/views/deprecatedAsyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var a=s("./app/components/deprecatedAsyncComponent.tsx"),o=s("./app/components/sentryDocumentTitle.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends a.Z{getTitle(){return""}render(){return(0,n.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="DeprecatedAsyncView"},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var a=s("./app/components/acl/access.tsx"),o=s("./app/components/alert.tsx"),n=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=(0,n.t)("These settings can only be edited by users with the organization-level owner, manager, or team-level admin roles.");function l(e){let{access:t=["project:write"],project:s,team:n,...l}=e;return(0,i.tZ)(a.Z,{access:t,project:s,team:n,children:e=>{let{hasAccess:t}=e;return!t&&(0,i.tZ)(o.bZ,{"data-test-id":"project-permission-alert",type:"warning",...l,children:r})}})}l.displayName="PermissionAlert";const d=l},"./app/views/settings/projectPerformance/projectPerformance.tsx":(e,t,s)=>{s.d(t,{Yw:()=>N,ZP:()=>$,bG:()=>R});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/es.array.push.js"),s("../node_modules/react/index.js")),i=s("./app/actionCreators/indicator.tsx"),r=s("./app/components/acl/access.tsx"),l=s("./app/components/acl/feature.tsx"),d=s("./app/components/button.tsx"),c=s("./app/components/confirm.tsx"),p=s("./app/components/forms/fieldGroup/fieldWrapper.tsx"),h=s("./app/components/forms/form.tsx"),m=s("./app/components/forms/jsonForm.tsx"),u=s("./app/components/links/externalLink.tsx"),_=s("./app/components/loadingIndicator.tsx"),b=s("./app/components/panels/panel.tsx"),f=s("./app/components/panels/panelFooter.tsx"),g=s("./app/components/panels/panelHeader.tsx"),E=s("./app/components/panels/panelItem.tsx"),D=s("./app/locale.tsx"),T=s("./app/stores/configStore.tsx"),S=s("./app/stores/projectsStore.tsx"),y=s("./app/styles/space.tsx"),A=s("./app/utils/analytics.tsx"),v=s("./app/utils/formatters.tsx"),L=s("./app/utils/isActiveSuperuser.tsx"),x=s("./app/utils/routeTitle.tsx"),I=s("./app/views/deprecatedAsyncView.tsx"),Z=s("./app/views/settings/components/settingsPageHeader.tsx"),w=s("./app/views/settings/project/permissionAlert.tsx"),P=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const N={boostLatestRelease:(0,D.t)("Prioritize new releases"),boostEnvironments:(0,D.t)("Prioritize dev environments"),boostLowVolumeTransactions:(0,D.t)("Prioritize low-volume transactions"),ignoreHealthChecks:(0,D.t)("Deprioritize health checks")},B=[50,60,70,80,90,100,200,300,400,500,600,700,800,900,1e3,1500,2e3,2500,3e3,3500,4e3,4500,5e3,5500,6e3,6500,7e3,7500,8e3,8500,9e3,9500,1e4],C=[.2,.25,.3,.33,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95],j=[5e4,1e5,2e5,3e5,4e5,5e5,512e3,6e5,7e5,8e5,9e5,1e6,2e6,3e6,4e6,5e6,6e6,7e6,8e6,9e6,1e7],R="detector-threshold-settings";var O;let V;!function(e){e.N_PLUS_DB_ENABLED="n_plus_one_db_queries_detection_enabled",e.SLOW_DB_ENABLED="slow_db_queries_detection_enabled",e.DB_MAIN_THREAD_ENABLED="db_on_main_thread_detection_enabled",e.FILE_IO_ENABLED="file_io_on_main_thread_detection_enabled",e.CONSECUTIVE_DB_ENABLED="consecutive_db_queries_detection_enabled",e.RENDER_BLOCK_ASSET_ENABLED="large_render_blocking_asset_detection_enabled",e.UNCOMPRESSED_ASSET_ENABLED="uncompressed_assets_detection_enabled",e.LARGE_HTTP_PAYLOAD_ENABLED="large_http_payload_detection_enabled",e.N_PLUS_ONE_API_CALLS_ENABLED="n_plus_one_api_calls_detection_enabled",e.CONSECUTIVE_HTTP_ENABLED="consecutive_http_spans_detection_enabled"}(O||(O={})),function(e){e.SLOW_DB_DURATION="slow_db_query_duration_threshold",e.N_PLUS_DB_DURATION="n_plus_one_db_duration_threshold",e.N_PLUS_API_CALLS_DURATION="n_plus_one_api_calls_total_duration_threshold",e.RENDER_BLOCKING_ASSET_RATIO="render_blocking_fcp_ratio",e.LARGE_HTT_PAYLOAD_SIZE="large_http_payload_size_threshold",e.DB_ON_MAIN_THREAD_DURATION="db_on_main_thread_duration_threshold",e.FILE_IO_MAIN_THREAD_DURATION="file_io_on_main_thread_duration_threshold",e.UNCOMPRESSED_ASSET_DURATION="uncompressed_asset_duration_threshold",e.UNCOMPRESSED_ASSET_SIZE="uncompressed_asset_size_threshold",e.CONSECUTIVE_DB_MIN_TIME_SAVED="consecutive_db_min_time_saved_threshold",e.CONSECUTIVE_HTTP_MIN_TIME_SAVED="consecutive_http_spans_min_time_saved_threshold"}(V||(V={}));class k extends I.Z{constructor(){super(...arguments),(0,a.Z)(this,"handleDelete",(()=>{const{projectId:e}=this.props.params,{organization:t}=this.props;this.setState({loading:!0}),this.api.request(`/projects/${t.slug}/${e}/transaction-threshold/configure/`,{method:"DELETE",success:()=>{(0,A.Gi)("performance_views.project_transaction_threshold.clear",{organization:t})},complete:()=>this.fetchData()})})),(0,a.Z)(this,"handleThresholdsReset",(()=>{const{projectId:e}=this.props.params,{organization:t,project:s}=this.props;this.setState({loading:!0}),(0,A.Gi)("performance_views.project_issue_detection_thresholds_reset",{organization:t,project_slug:s.slug}),this.api.request(`/projects/${t.slug}/${e}/performance-issues/configure/`,{method:"DELETE",complete:()=>this.fetchData()})})),(0,a.Z)(this,"project_owner_detector_settings",(e=>{const t=this.state.performance_issue_settings,s=T.Z.get("supportEmail"),a=e?(0,D._N)("Detection of this issue has been disabled. Contact our support team at [link:support@sentry.io].",{link:(0,P.tZ)(u.Z,{href:"mailto:"+s})}):null,o=e=>e?e<1e3?`${e}ms`:e/1e3+"s":"",n=e=>e?e<1e6?e/1e3+"KB":e/1e6+"MB":"",i=e=>{const t=e&&1e3/e;return t?5*Math.floor(t/5)+"fps":""};return[{title:(0,D.t)("N+1 DB Queries"),fields:[{name:V.N_PLUS_DB_DURATION,type:"range",label:(0,D.t)("Minimum Total Duration"),defaultValue:100,help:(0,D.t)("Setting the value to 100ms, means that an eligible event will be stored as a N+1 DB Query Issue only if the total duration of the involved spans exceeds 100ms"),allowedValues:B,disabled:!(e&&t[O.N_PLUS_DB_ENABLED]),tickValues:[0,B.length-1],showTickLabels:!0,formatLabel:o,flexibleControlStateSize:!0,disabledReason:a}]},{title:(0,D.t)("Slow DB Queries"),fields:[{name:V.SLOW_DB_DURATION,type:"range",label:(0,D.t)("Minimum Duration"),defaultValue:1e3,help:(0,D.t)("Setting the value to 1s, means that an eligible event will be stored as a Slow DB Query Issue only if the duration of the involved db span exceeds 1s."),tickValues:[0,B.slice(5).length-1],showTickLabels:!0,allowedValues:B.slice(5),disabled:!(e&&t[O.SLOW_DB_ENABLED]),formatLabel:o,disabledReason:a}]},{title:(0,D.t)("N+1 API Calls"),fields:[{name:V.N_PLUS_API_CALLS_DURATION,type:"range",label:(0,D.t)("Minimum Total Duration"),defaultValue:300,help:(0,D.t)("Setting the value to 300ms, means that an eligible event will be stored as a N+1 API Calls Issue only if the total duration of the involved spans exceeds 300ms"),allowedValues:B.slice(5),disabled:!(e&&t[O.N_PLUS_ONE_API_CALLS_ENABLED]),tickValues:[0,B.slice(5).length-1],showTickLabels:!0,formatLabel:o,flexibleControlStateSize:!0,disabledReason:a}]},{title:(0,D.t)("Large Render Blocking Asset"),fields:[{name:V.RENDER_BLOCKING_ASSET_RATIO,type:"range",label:(0,D.t)("Minimum FCP Ratio"),defaultValue:.33,help:(0,D.t)("Setting the value to 33%, means that an eligible event will be stored as a Large Render Blocking Asset Issue only if the duration of the involved span is at least 33% of First Contentful Paint (FCP)."),allowedValues:C,tickValues:[0,C.length-1],showTickLabels:!0,disabled:!(e&&t[O.RENDER_BLOCK_ASSET_ENABLED]),formatLabel:e=>e&&(0,v.rl)(e),disabledReason:a}]},{title:(0,D.t)("Large HTTP Payload"),fields:[{name:V.LARGE_HTT_PAYLOAD_SIZE,type:"range",label:(0,D.t)("Minimum Size"),defaultValue:1e6,help:(0,D.t)("Setting the value to 1MB, means that an eligible event will be stored as a Large HTTP Payload Issue only if the involved HTTP span has a payload size that exceeds 1MB."),tickValues:[0,j.slice(1).length-1],showTickLabels:!0,allowedValues:j.slice(1),disabled:!(e&&t[O.LARGE_HTTP_PAYLOAD_ENABLED]),formatLabel:n,disabledReason:a}]},{title:(0,D.t)("DB on Main Thread"),fields:[{name:V.DB_ON_MAIN_THREAD_DURATION,type:"range",label:(0,D.t)("Frame Rate Drop"),defaultValue:16,help:(0,D.t)("Setting the value to 60fps, means that an eligible event will be stored as a DB on Main Thread Issue only if database spans on the main thread cause frame rate to drop below 60fps."),tickValues:[0,3],showTickLabels:!0,allowedValues:[10,16,33,50],disabled:!(e&&t[O.DB_MAIN_THREAD_ENABLED]),formatLabel:i,disabledReason:a}]},{title:(0,D.t)("File I/O on Main Thread"),fields:[{name:V.FILE_IO_MAIN_THREAD_DURATION,type:"range",label:(0,D.t)("Frame Rate Drop"),defaultValue:16,help:(0,D.t)("Setting the value to 60fps, means that an eligible event will be stored as a File I/O on Main Thread Issue only if File I/O spans on the main thread cause frame rate to drop below 60fps."),tickValues:[0,3],showTickLabels:!0,allowedValues:[10,16,33,50],disabled:!(e&&t[O.FILE_IO_ENABLED]),formatLabel:i,disabledReason:a}]},{title:(0,D.t)("Consecutive DB Queries"),fields:[{name:V.CONSECUTIVE_DB_MIN_TIME_SAVED,type:"range",label:(0,D.t)("Minimum Time Saved"),defaultValue:100,help:(0,D.t)("Setting the value to 100ms, means that an eligible event will be stored as a Consecutive DB Queries Issue only if the time saved by parallelizing the queries exceeds 100ms."),tickValues:[0,B.slice(0,23).length-1],showTickLabels:!0,allowedValues:B.slice(0,23),disabled:!(e&&t[O.CONSECUTIVE_DB_ENABLED]),formatLabel:o,disabledReason:a}]},{title:(0,D.t)("Uncompressed Asset"),fields:[{name:V.UNCOMPRESSED_ASSET_SIZE,type:"range",label:(0,D.t)("Minimum Size"),defaultValue:512e3,help:(0,D.t)("Setting the value to 512KB, means that an eligible event will be stored as an Uncompressed Asset Issue only if the size of the uncompressed asset being transferred exceeds 512KB."),tickValues:[0,j.slice(1).length-1],showTickLabels:!0,allowedValues:j.slice(1),disabled:!(e&&t[O.UNCOMPRESSED_ASSET_ENABLED]),formatLabel:n,disabledReason:a},{name:V.UNCOMPRESSED_ASSET_DURATION,type:"range",label:(0,D.t)("Minimum Duration"),defaultValue:500,help:(0,D.t)("Setting the value to 500ms, means that an eligible event will be stored as an Uncompressed Asset Issue only if the duration of the span responsible for transferring the uncompressed asset exceeds 500ms."),tickValues:[0,B.slice(5).length-1],showTickLabels:!0,allowedValues:B.slice(5),disabled:!(e&&t[O.UNCOMPRESSED_ASSET_ENABLED]),formatLabel:o,disabledReason:a}]},{title:(0,D.t)("Consecutive HTTP"),fields:[{name:V.CONSECUTIVE_HTTP_MIN_TIME_SAVED,type:"range",label:(0,D.t)("Minimum Time Saved"),defaultValue:2e3,help:(0,D.t)("Setting the value to 2s, means that an eligible event will be stored as a Consecutive HTTP Issue only if the time saved by parallelizing the http spans exceeds 2s."),tickValues:[0,B.slice(14).length-1],showTickLabels:!0,allowedValues:B.slice(14),disabled:!(e&&t[O.CONSECUTIVE_HTTP_ENABLED]),formatLabel:o,disabledReason:a}]}]}))}getTitle(){const{projectId:e}=this.props.params;return(0,x.Z)((0,D.t)("Performance"),e,!1)}getProjectEndpoint(e){let{orgId:t,projectId:s}=e;return`/projects/${t}/${s}/`}getPerformanceIssuesEndpoint(e){let{orgId:t,projectId:s}=e;return`/projects/${t}/${s}/performance-issues/configure/`}getEndpoints(){const{params:e,organization:t}=this.props,{projectId:s}=e,a=[["threshold",`/projects/${t.slug}/${s}/transaction-threshold/configure/`],["project",`/projects/${t.slug}/${s}/`]];if(t.features.includes("project-performance-settings-admin")){const e=["performance_issue_settings",`/projects/${t.slug}/${s}/performance-issues/configure/`];a.push(e)}return a}getRetentionPrioritiesData(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return{dynamicSamplingBiases:Object.entries(t[1].form).map((e=>{let[t,s]=e;return{id:t,active:s}}))}}getEmptyMessage(){return(0,D.t)("There is no threshold set for this project.")}renderLoading(){return(0,P.tZ)(H,{children:(0,P.tZ)(_.Z,{})})}get formFields(){return[{name:"metric",type:"select",label:(0,D.t)("Calculation Method"),options:[{value:"duration",label:(0,D.t)("Transaction Duration")},{value:"lcp",label:(0,D.t)("Largest Contentful Paint")}],help:(0,D._N)("This determines which duration is used to set your thresholds. By default, we use transaction duration which measures the entire length of the transaction. You can also set this to use a [link:Web Vital].",{link:(0,P.tZ)(u.Z,{href:"https://docs.sentry.io/product/performance/web-vitals/"})})},{name:"threshold",type:"string",label:(0,D.t)("Response Time Threshold (ms)"),placeholder:(0,D.t)("300"),help:(0,D._N)("Define what a satisfactory response time is based on the calculation method above. This will affect how your [link1:Apdex] and [link2:User Misery] thresholds are calculated. For example, misery will be 4x your satisfactory response time.",{link1:(0,P.tZ)(u.Z,{href:"https://docs.sentry.io/performance-monitoring/performance/metrics/#apdex"}),link2:(0,P.tZ)(u.Z,{href:"https://docs.sentry.io/product/performance/metrics/#user-misery"})})}]}get areAllConfigurationsDisabled(){let e=!0;return Object.values(O).forEach((t=>{e=e&&!this.state.performance_issue_settings[t]})),e}get performanceIssueFormFields(){return[{name:"performanceIssueCreationRate",type:"range",label:(0,D.t)("Performance Issue Creation Rate"),min:0,max:1,step:.01,defaultValue:0,help:(0,D.t)("This determines the rate at which performance issues are created. A rate of 0.0 will disable performance issue creation.")},{name:"performanceIssueSendToPlatform",type:"boolean",label:(0,D.t)("Send Occurrences To Platform"),defaultValue:!1,help:(0,D.t)("This determines whether performance issue occurrences are sent to the issues platform.")},{name:"performanceIssueCreationThroughPlatform",type:"boolean",label:(0,D.t)("Create Issues Through Issues Platform"),defaultValue:!1,help:(0,D.t)("This determines whether performance issues are created through the issues platform.")}]}get performanceIssueDetectorAdminFields(){return[{name:O.N_PLUS_DB_ENABLED,type:"boolean",label:(0,D.t)("N+1 DB Queries Detection Enabled"),defaultValue:!0,onChange:e=>this.setState({performance_issue_settings:{...this.state.performance_issue_settings,n_plus_one_db_queries_detection_enabled:e}})},{name:O.SLOW_DB_ENABLED,type:"boolean",label:(0,D.t)("Slow DB Queries Detection Enabled"),defaultValue:!0,onChange:e=>this.setState({performance_issue_settings:{...this.state.performance_issue_settings,slow_db_queries_detection_enabled:e}})},{name:O.N_PLUS_ONE_API_CALLS_ENABLED,type:"boolean",label:(0,D.t)("N+1 API Calls Detection Enabled"),defaultValue:!0,onChange:e=>this.setState({performance_issue_settings:{...this.state.performance_issue_settings,n_plus_one_api_calls_detection_enabled:e}})},{name:O.RENDER_BLOCK_ASSET_ENABLED,type:"boolean",label:(0,D.t)("Large Render Blocking Asset Detection Enabled"),defaultValue:!0,onChange:e=>this.setState({performance_issue_settings:{...this.state.performance_issue_settings,large_render_blocking_asset_detection_enabled:e}})},{name:O.CONSECUTIVE_DB_ENABLED,type:"boolean",label:(0,D.t)("Consecutive DB Queries Detection Enabled"),defaultValue:!0,onChange:e=>this.setState({performance_issue_settings:{...this.state.performance_issue_settings,consecutive_db_queries_detection_enabled:e}})},{name:O.LARGE_HTTP_PAYLOAD_ENABLED,type:"boolean",label:(0,D.t)("Large HTTP Payload Detection Enabled"),defaultValue:!0,onChange:e=>this.setState({performance_issue_settings:{...this.state.performance_issue_settings,large_http_payload_detection_enabled:e}})},{name:O.DB_MAIN_THREAD_ENABLED,type:"boolean",label:(0,D.t)("DB On Main Thread Detection Enabled"),defaultValue:!0,onChange:e=>this.setState({performance_issue_settings:{...this.state.performance_issue_settings,db_on_main_thread_detection_enabled:e}})},{name:O.FILE_IO_ENABLED,type:"boolean",label:(0,D.t)("File I/O on Main Thread Detection Enabled"),defaultValue:!0,onChange:e=>this.setState({performance_issue_settings:{...this.state.performance_issue_settings,file_io_on_main_thread_detection_enabled:e}})},{name:O.UNCOMPRESSED_ASSET_ENABLED,type:"boolean",label:(0,D.t)("Uncompressed Assets Detection Enabled"),defaultValue:!0,onChange:e=>this.setState({performance_issue_settings:{...this.state.performance_issue_settings,uncompressed_assets_detection_enabled:e}})},{name:O.CONSECUTIVE_HTTP_ENABLED,type:"boolean",label:(0,D.t)("Consecutive HTTP Detection Enabled"),defaultValue:!0,onChange:e=>this.setState({performance_issue_settings:{...this.state.performance_issue_settings,consecutive_http_spans_detection_enabled:e}})}]}get retentionPrioritiesFormFields(){return[{name:"boostLatestRelease",type:"boolean",label:N.boostLatestRelease,help:(0,D.t)("Captures more transactions for your new releases as they are being adopted"),getData:this.getRetentionPrioritiesData},{name:"boostEnvironments",type:"boolean",label:N.boostEnvironments,help:(0,D.t)('Captures more traces from environments that contain "debug", "dev", "local", "qa", and "test"'),getData:this.getRetentionPrioritiesData},{name:"boostLowVolumeTransactions",type:"boolean",label:N.boostLowVolumeTransactions,help:(0,D.t)("Balance high-volume endpoints so they don't drown out low-volume ones"),getData:this.getRetentionPrioritiesData},{name:"ignoreHealthChecks",type:"boolean",label:N.ignoreHealthChecks,help:(0,D.t)("Captures fewer of your health checks transactions"),getData:this.getRetentionPrioritiesData}]}get initialData(){const{threshold:e}=this.state;return{threshold:e.threshold,metric:e.metric}}renderBody(){const{organization:e,project:t}=this.props,s=`/projects/${e.slug}/${t.slug}/transaction-threshold/configure/`,a=["project:write"],o={orgId:e.slug,projectId:t.slug},p=this.getProjectEndpoint(o),u=this.getPerformanceIssuesEndpoint(o),_=(0,L.M)();return(0,P.BX)(n.Fragment,{children:[(0,P.tZ)(Z.Z,{title:(0,D.t)("Performance")}),(0,P.tZ)(w.Z,{project:t}),(0,P.tZ)(h.Z,{saveOnBlur:!0,allowUndo:!0,initialData:this.initialData,apiMethod:"POST",apiEndpoint:s,onSubmitSuccess:t=>{const s=this.initialData,a=s.metric===t.metric;(0,A.Gi)("performance_views.project_transaction_threshold.change",{organization:e,from:a?s.threshold:s.metric,to:a?t.threshold:t.metric,key:a?"threshold":"metric"}),this.setState({threshold:t})},children:(0,P.tZ)(r.Z,{access:a,project:t,children:e=>{let{hasAccess:t}=e;return(0,P.tZ)(m.Z,{title:(0,D.t)("General"),fields:this.formFields,disabled:!t,renderFooter:()=>(0,P.tZ)(U,{children:(0,P.tZ)(d.zx,{onClick:()=>this.handleDelete(),children:(0,D.t)("Reset All")})})})}})}),(0,P.tZ)(l.Z,{features:["organizations:dynamic-sampling"],children:(0,P.tZ)(h.Z,{saveOnBlur:!0,allowUndo:!0,initialData:t.dynamicSamplingBiases?.reduce(((e,t)=>(e[t.id]=t.active,e)),{})??{},onSubmitSuccess:(s,a,o,n)=>{S.Z.onUpdateSuccess(s),(0,A.Gi)(!0===n?.new?"dynamic_sampling_settings.priority_enabled":"dynamic_sampling_settings.priority_disabled",{organization:e,project_id:t.id,id:o})},apiMethod:"PUT",apiEndpoint:p,children:(0,P.tZ)(r.Z,{access:a,project:t,children:e=>{let{hasAccess:t}=e;return(0,P.tZ)(m.Z,{title:(0,D.t)("Retention Priorities"),fields:this.retentionPrioritiesFormFields,disabled:!t,renderFooter:()=>(0,P.tZ)(U,{children:(0,P.tZ)(d.zx,{external:!0,href:"https://docs.sentry.io/product/performance/performance-at-scale/",children:(0,D.t)("Read docs")})})})}})})}),(0,P.BX)(n.Fragment,{children:[(0,P.tZ)(l.Z,{features:["organizations:performance-issues-dev"],children:(0,P.tZ)(h.Z,{saveOnBlur:!0,allowUndo:!0,initialData:{performanceIssueCreationRate:this.state.project.performanceIssueCreationRate,performanceIssueSendToPlatform:this.state.project.performanceIssueSendToPlatform,performanceIssueCreationThroughPlatform:this.state.project.performanceIssueCreationThroughPlatform},apiMethod:"PUT",apiEndpoint:p,children:(0,P.tZ)(r.Z,{access:a,project:t,children:e=>{let{hasAccess:t}=e;return(0,P.tZ)(m.Z,{title:(0,D.t)("Performance Issues - All"),fields:this.performanceIssueFormFields,disabled:!t})}})})}),(0,P.BX)(l.Z,{features:["organizations:project-performance-settings-admin"],children:[_&&(0,P.tZ)(h.Z,{saveOnBlur:!0,allowUndo:!0,initialData:this.state.performance_issue_settings,apiMethod:"PUT",onSubmitError:e=>{403===e.status&&(0,i.Iw)((0,D.t)("This action requires active super user access. Please re-authenticate to make changes."))},apiEndpoint:u,children:(0,P.tZ)(m.Z,{title:(0,D.t)("### INTERNAL ONLY ### - Performance Issues Admin Detector Settings"),fields:this.performanceIssueDetectorAdminFields,disabled:!_})}),(0,P.tZ)(h.Z,{allowUndo:!0,initialData:this.state.performance_issue_settings,apiMethod:"PUT",apiEndpoint:u,saveOnBlur:!0,onSubmitSuccess:s=>{const[a,o]=Object.entries(s)[0];(0,A.Gi)("performance_views.project_issue_detection_threshold_changed",{organization:e,project_slug:t.slug,threshold_key:a,threshold_value:o})},children:(0,P.tZ)(r.Z,{access:a,project:t,children:e=>{let{hasAccess:t}=e;return(0,P.BX)("div",{id:R,children:[(0,P.tZ)(F,{children:(0,D.t)("Performance Issues - Detector Threshold Settings")}),(0,P.tZ)(M,{forms:this.project_owner_detector_settings(t),collapsible:!0,initiallyCollapsed:!0}),(0,P.tZ)(z,{children:(0,P.tZ)(U,{children:(0,P.tZ)(c.Z,{message:(0,D.t)("Are you sure you wish to reset all detector thresholds?"),onConfirm:()=>this.handleThresholdsReset(),disabled:!t||this.areAllConfigurationsDisabled,children:(0,P.tZ)(d.zx,{children:(0,D.t)("Reset All Thresholds")})})})})]})}})})]})]})]})}}const U=(0,o.Z)(E.Z,{target:"e1gxzgr04"})({name:"1f60if8",styles:"justify-content:flex-end"}),F=(0,o.Z)(g.Z,{target:"e1gxzgr03"})("border:1px solid ",(e=>e.theme.border),";border-bottom:none;"),M=(0,o.Z)(m.Z,{target:"e1gxzgr02"})(b.Z,"{margin-bottom:0;border-radius:0;border-bottom:0;}",p.Z,"{border-top:1px solid ",(e=>e.theme.border),";}",p.Z,"+",p.Z,"{border-top:0;}",b.Z,"+",b.Z,"{border-top:1px solid ",(e=>e.theme.border),";}",g.Z,"{border-bottom:0;text-transform:none;margin-bottom:0;background:none;padding:",(0,y.D)(3)," ",(0,y.D)(2),";}"),z=(0,o.Z)(f.Z,{target:"e1gxzgr01"})("background:",(e=>e.theme.background),";border:1px solid ",(e=>e.theme.border),";border-radius:0 0 calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px);",U,"{padding:",(0,y.D)(1.5),";}"),H=(0,o.Z)("div",{target:"e1gxzgr00"})({name:"lj2qtm",styles:"margin:18px 18px 0"}),$=k}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectPerformance_projectPerformance_tsx.ad8c94326ef897ad4a55a513c9a98a6a.js.map