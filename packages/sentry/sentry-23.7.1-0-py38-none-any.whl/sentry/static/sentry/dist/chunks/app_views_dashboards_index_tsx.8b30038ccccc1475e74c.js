"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_dashboards_index_tsx","app_views_dashboards_view_tsx"],{"./app/views/dashboards/index.tsx":(s,a,e)=>{e.r(a),e.d(a,{default:()=>m});var t=e("../node_modules/react/index.js"),r=e("./app/components/errorBoundary.tsx"),o=e("./app/components/errors/notFound.tsx"),d=e("./app/components/loadingIndicator.tsx"),n=e("./app/utils/withApi.tsx"),i=e("./app/utils/withOrganization.tsx"),p=e("./app/views/dashboards/detail.tsx"),h=e("./app/views/dashboards/orgDashboards.tsx"),l=e("./app/views/dashboards/types.tsx"),u=e("./app/views/dashboards/view.tsx"),c=e("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function b(s){const{organization:a,api:e,location:n,children:i}=s;if(a.features.includes("dashboards-edit"))return(0,c.tZ)(t.Fragment,{children:i});const b={...s.params,orgId:a.slug};return(0,c.tZ)(u.DashboardBasicFeature,{organization:a,children:(0,c.tZ)(h.Z,{api:e,location:n,params:b,organization:a,children:a=>{let{dashboard:e,dashboards:t,error:n,onDashboardUpdate:i}=a;return n?(0,c.tZ)(o.Z,{}):e?(0,c.tZ)(r.Z,{children:(0,c.tZ)(p.Z,{...s,initialState:l.n3.VIEW,dashboard:e,dashboards:t,onDashboardUpdate:i})}):(0,c.tZ)(d.Z,{})}})})}b.displayName="DashboardsV2Container";const m=(0,n.Z)((0,i.Z)(b))},"./app/views/dashboards/orgDashboards.tsx":(s,a,e)=>{e.d(a,{Z:()=>v});var t=e("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(e("../node_modules/core-js/modules/es.array.push.js"),e("../node_modules/react-router/es/index.js")),o=e("../node_modules/lodash/isEmpty.js"),d=e.n(o),n=e("../node_modules/lodash/isEqual.js"),i=e.n(n),p=e("./app/components/deprecatedAsyncComponent.tsx"),h=e("./app/components/errors/notFound.tsx"),l=e("./app/components/layouts/thirds.tsx"),u=e("./app/components/loadingIndicator.tsx"),c=e("./app/components/sentryDocumentTitle.tsx"),b=e("./app/locale.tsx"),m=e("./app/utils/routeAnalytics/withRouteAnalytics.tsx"),g=e("./app/utils/withDomainRequired.tsx"),x=e("./app/views/dashboards/layoutUtils.tsx"),w=e("./app/views/dashboards/utils.tsx"),Z=e("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends p.Z{constructor(){super(...arguments),(0,t.Z)(this,"state",{loading:!0,reloading:!1,error:!1,errors:{},dashboards:[],selectedDashboard:null})}componentDidUpdate(s){i()(s.params.dashboardId,this.props.params.dashboardId)||this.remountComponent()}getEndpoints(){const{organization:s,params:a}=this.props,e=`/organizations/${s.slug}/dashboards/`,t=[["dashboards",e]];return a.dashboardId&&(t.push(["selectedDashboard",`${e}${a.dashboardId}/`]),this.props.setEventNames("dashboards2.view","Dashboards2: View dashboard"),this.props.setRouteAnalyticsParams({dashboard_id:a.dashboardId})),t}onDashboardUpdate(s){this.setState({selectedDashboard:s})}getDashboards(){const{dashboards:s}=this.state;return Array.isArray(s)?s:[]}onRequestSuccess(s){let{stateKey:a,data:e}=s;const{params:t,organization:o,location:n}=this.props;if(t.dashboardId||"selectedDashboard"===a){const s=new Set(["project","environment","statsPeriod","start","end","utc","release"]);return void("selectedDashboard"===a&&(0,w.Lo)(e)&&d()(Object.keys(n.query).filter((a=>s.has(a))))&&r.browserHistory.replace({...n,query:{...n.query,project:e.projects,environment:e.environment,statsPeriod:e.period,start:e.start,end:e.end,utc:e.utc}}))}const i=e.length?e[0].id:"default-overview";r.browserHistory.replace((0,g.D)({pathname:`/organizations/${o.slug}/dashboard/${i}/`,query:{...n.query}}))}renderLoading(){return(0,Z.tZ)(l.T3,{withPadding:!0,children:(0,Z.tZ)(u.Z,{})})}renderBody(){const{children:s}=this.props,{selectedDashboard:a,error:e}=this.state;let t=a;return t=a?{...a,widgets:a.widgets.map(x.TE)}:null,s({error:e,dashboard:t,dashboards:this.getDashboards(),onDashboardUpdate:s=>this.onDashboardUpdate(s)})}renderError(s){return Object.values(this.state.errors).find((s=>s&&404===s.status))?(0,Z.tZ)(h.Z,{}):super.renderError(s,!0)}renderComponent(){const{organization:s,location:a}=this.props,{loading:e,selectedDashboard:t}=this.state;return s.features.includes("dashboards-basic")?e&&t&&(0,w.Lo)(t)&&d()(a.query)?this.renderLoading():(0,Z.tZ)(c.Z,{title:(0,b.t)("Dashboards"),orgSlug:s.slug,children:super.renderComponent()}):(r.browserHistory.replace((0,g.D)({pathname:`/organizations/${s.slug}/dashboards/`,query:{...a.query}})),null)}}const v=(0,m.Z)(y)},"./app/views/dashboards/view.tsx":(s,a,e)=>{e.r(a),e.d(a,{DashboardBasicFeature:()=>_,default:()=>f});var t=e("../node_modules/react/index.js"),r=e("../node_modules/react-router/es/index.js"),o=e("../node_modules/lodash/pick.js"),d=e.n(o),n=e("./app/actionCreators/dashboards.tsx"),i=e("./app/components/acl/feature.tsx"),p=e("./app/components/alert.tsx"),h=e("./app/components/errorBoundary.tsx"),l=e("./app/components/errors/notFound.tsx"),u=e("./app/components/layouts/thirds.tsx"),c=e("./app/components/loadingIndicator.tsx"),b=e("./app/locale.tsx"),m=e("./app/utils/useApi.tsx"),g=e("./app/utils/withOrganization.tsx"),x=e("./app/views/dashboards/detail.tsx"),w=e("./app/views/dashboards/orgDashboards.tsx"),Z=e("./app/views/dashboards/types.tsx"),y=e("./app/views/dashboards/utils.tsx"),v=e("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const D=["start","end","utc","period","project","environment","statsPeriod"];function j(s){const a=(0,m.Z)(),{organization:e,params:o,location:i}=s,p=o.dashboardId,u=e.slug,[b,g]=(0,t.useState)(),[j,f]=(0,t.useState)(Z.n3.VIEW);return(0,t.useEffect)((()=>{p&&"default-overview"!==p&&(0,n.a_)(a,u,p)}),[a,u,p]),(0,t.useEffect)((()=>{const s=(0,y.y1)(i.query);g(s),s&&(f(Z.n3.EDIT),r.browserHistory.replace({pathname:i.pathname,query:d()(i.query,D)}))}),[i.pathname,i.query]),(0,v.tZ)(_,{organization:e,children:(0,v.tZ)(w.Z,{api:a,location:i,params:o,organization:e,children:a=>{let{dashboard:e,dashboards:t,error:r,onDashboardUpdate:o}=a;return r?(0,v.tZ)(l.Z,{}):e?(0,v.tZ)(h.Z,{children:(0,v.tZ)(x.Z,{...s,initialState:j,dashboard:e,dashboards:t,onDashboardUpdate:o,newWidget:b,onSetNewWidget:()=>g(void 0)})}):(0,v.tZ)(c.Z,{})}})})}j.displayName="ViewEditDashboard";const f=(0,g.Z)(j);function _(s){let{organization:a,children:e}=s;return(0,v.tZ)(i.Z,{hookName:"feature-disabled:dashboards-page",features:["organizations:dashboards-basic"],organization:a,renderDisabled:()=>(0,v.tZ)(u.T3,{withPadding:!0,children:(0,v.tZ)(p.bZ,{type:"warning",children:(0,b.t)("You don't have access to this feature")})}),children:e})}_.displayName="DashboardBasicFeature"}}]);
//# sourceMappingURL=../sourcemaps/app_views_dashboards_index_tsx.04532cb71a715ebca65815cc8da05062.js.map