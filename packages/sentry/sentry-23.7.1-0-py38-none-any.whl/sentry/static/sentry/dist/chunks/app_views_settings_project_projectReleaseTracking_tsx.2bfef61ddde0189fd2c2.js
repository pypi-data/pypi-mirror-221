"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_project_projectReleaseTracking_tsx"],{"./app/components/pluginList.tsx":(e,t,n)=>{n.d(t,{Z:()=>v});var s=n("./app/actionCreators/plugins.tsx"),o=n("./app/components/acl/access.tsx"),i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=n("./app/components/button.tsx"),a=n("./app/components/panels/panel.tsx"),l=n("./app/components/panels/panelBody.tsx"),p=n("./app/components/panels/panelHeader.tsx"),c=n("./app/components/textOverflow.tsx"),d=n("./app/locale.tsx"),u=n("./app/plugins/components/pluginIcon.tsx"),h=n("./app/styles/space.tsx"),g=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m(e){let{disabled:t,plugins:n,onEnablePlugin:s}=e;return 0===n.length?null:(0,g.BX)(a.Z,{children:[(0,g.tZ)(p.Z,{children:(0,d.t)("Inactive Integrations")}),(0,g.tZ)(l.Z,{children:(0,g.tZ)(Z,{children:n.map((e=>(0,g.tZ)(x,{disabled:t,title:t?(0,d.t)("You do not have permission to set up an integration."):"",onClick:()=>s(e),className:`ref-plugin-enable-${e.id}`,children:(0,g.BX)(b,{children:[(0,g.tZ)(y,{pluginId:e.id}),(0,g.tZ)(c.Z,{children:e.shortName||e.name})]})},e.id)))})})]})}m.displayName="InactivePlugins";const Z=(0,i.Z)("div",{target:"e1mpcvbx3"})("display:flex;padding:",(0,h.D)(1),";flex:1;flex-wrap:wrap;"),x=(0,i.Z)(r.zx,{target:"e1mpcvbx2"})("margin:",(0,h.D)(1),";width:175px;text-align:center;font-size:",(e=>e.theme.fontSizeSmall),";color:#889ab0;letter-spacing:0.1px;font-weight:600;text-transform:uppercase;border:1px solid #eee;background:inherit;border-radius:",(e=>e.theme.borderRadius),";padding:10px;&:hover{border-color:#ccc;}"),b=(0,i.Z)("div",{target:"e1mpcvbx1"})({name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"}),y=(0,i.Z)(u.ZP,{target:"e1mpcvbx0"})("margin-right:",(0,h.D)(1),";"),w=m;var f=n("./app/components/panels/panelItem.tsx"),k=n("./app/components/pluginConfig.tsx");function j(e){let{organization:t,project:n,pluginList:i,onDisablePlugin:r=(()=>{}),onEnablePlugin:l=(()=>{})}=e;const p=(0,o.d)(["project:write"],{organization:t,project:n}),c=e=>{(0,s.rR)({projectId:n.slug,orgId:t.slug,pluginId:e.slug}),r(e)};return i.length?(0,g.BX)("div",{children:[i.filter((e=>e.enabled)).map((e=>(0,g.tZ)(k.Z,{data:e,organization:t,project:n,onDisablePlugin:c},e.id))),(0,g.tZ)(w,{disabled:!p,plugins:i.filter((e=>!e.enabled&&!e.isHidden)),onEnablePlugin:e=>{(0,s.Cg)({projectId:n.slug,orgId:t.slug,pluginId:e.slug}),l(e)}})]}):(0,g.tZ)(a.Z,{children:(0,g.tZ)(f.Z,{children:(0,d.t)("Oops! Looks like there aren't any available integrations installed.")})})}j.displayName="PluginList";const v=j},"./app/utils/routeTitle.tsx":(e,t,n)=>{n.d(t,{Z:()=>s});const s=function(e,t){let n=arguments.length>3?arguments[3]:void 0;const s=`${e} - ${t}`,o=n?`${s} - ${n}`:s;return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?o:`${o} - Sentry`}},"./app/utils/withPlugins.tsx":(e,t,n)=>{n.d(t,{Z:()=>u});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/react/index.js"),i=n("./app/actionCreators/plugins.tsx"),r=n("./app/stores/pluginsStore.tsx"),a=n("./app/utils.tsx"),l=n("./app/utils/getDisplayName.tsx"),p=n("./app/utils/withOrganization.tsx"),c=n("./app/utils/withProject.tsx"),d=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u=function(e){class t extends o.Component{constructor(){super(...arguments),(0,s.Z)(this,"state",{plugins:[],loading:!0}),(0,s.Z)(this,"unsubscribe",r.Z.listen((e=>{let{plugins:t,loading:n}=e;this.setState({plugins:t,loading:n})}),void 0))}componentDidMount(){this.fetchPlugins()}componentDidUpdate(e,t,n){const{organization:s,project:o}=this.props,i=e.organization||n?.organization,r=e.project||n?.project;if(!(0,a.ri)(r)||!(0,a.ri)(i))return;const l=i.slug===s.slug,p=r.slug===o?.slug;l&&p||this.fetchPlugins()}componentWillUnmount(){this.unsubscribe()}fetchPlugins(){const{organization:e,project:t}=this.props;t&&e&&(0,i.MM)({projectId:t.slug,orgId:e.slug})}render(){return(0,d.tZ)(e,{...this.props,plugins:this.state})}}return t.displayName="WithPlugins",(0,s.Z)(t,"displayName",`withPlugins(${(0,l.Z)(e)})`),(0,p.Z)((0,c.Z)(t))}},"./app/views/deprecatedAsyncView.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var s=n("./app/components/deprecatedAsyncComponent.tsx"),o=n("./app/components/sentryDocumentTitle.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends s.Z{getTitle(){return""}render(){return(0,i.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="DeprecatedAsyncView"},"./app/views/settings/project/projectReleaseTracking.tsx":(e,t,n)=>{n.r(t),n.d(t,{ProjectReleaseTracking:()=>T,default:()=>I});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("./app/actionCreators/indicator.tsx"),i=n("./app/components/alert.tsx"),r=n("./app/components/autoSelectText.tsx"),a=n("./app/components/button.tsx"),l=n("./app/components/confirm.tsx"),p=n("./app/components/forms/fieldGroup/index.tsx"),c=n("./app/components/links/externalLink.tsx"),d=n("./app/components/loadingIndicator.tsx"),u=n("./app/components/panels/panel.tsx"),h=n("./app/components/panels/panelBody.tsx"),g=n("./app/components/panels/panelHeader.tsx"),m=n("./app/components/pluginList.tsx"),Z=n("./app/components/textCopyInput.tsx"),x=n("./app/locale.tsx"),b=n("./app/utils/getDynamicText.tsx"),y=n("./app/utils/routeTitle.tsx"),w=n("./app/utils/withPlugins.tsx"),f=n("./app/views/deprecatedAsyncView.tsx"),k=n("./app/views/settings/components/settingsPageHeader.tsx"),j=n("./app/views/settings/components/text/textBlock.tsx"),v=n("./app/components/acl/access.tsx"),_=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const P={token:"YOUR_TOKEN",webhookUrl:"YOUR_WEBHOOK_URL"};class T extends f.Z{constructor(){super(...arguments),(0,s.Z)(this,"handleRegenerateToken",(()=>{const{organization:e}=this.props,{projectId:t}=this.props.params;this.api.request(`/projects/${e.slug}/${t}/releases/token/`,{method:"POST",data:{project:t},success:e=>{this.setState({data:{token:e.token,webhookUrl:e.webhookUrl}}),(0,o.S9)((0,x.t)("Your deploy token has been regenerated. You will need to update any existing deploy hooks."))},error:()=>{(0,o.Iw)((0,x.t)("Unable to regenerate deploy token, please try again"))}})}))}getTitle(){const{projectId:e}=this.props.params;return(0,y.Z)((0,x.t)("Releases"),e,!1)}getEndpoints(){const{organization:e}=this.props,{projectId:t}=this.props.params;return[["data",`/projects/${e.slug}/${t}/releases/token/`,{},{allowError:e=>e&&403===e.status}]]}getReleaseWebhookIntructions(){const{webhookUrl:e}=this.state.data||P;return"curl "+e+" \\\n  -X POST \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"version\": \"abcdefg\"}'"}renderBody(){const{organization:e,project:t,plugins:n}=this.props,s=(0,v.d)(["project:write"],{organization:e,project:t});if(n.loading)return(0,_.tZ)(d.Z,{});const o=n.plugins.filter((e=>"release-tracking"===e.type&&e.hasConfiguration));let{token:y,webhookUrl:w}=this.state.data||P;return y=(0,b.Z)({value:y,fixed:"__TOKEN__"}),w=(0,b.Z)({value:w,fixed:"__WEBHOOK_URL__"}),(0,_.BX)("div",{children:[(0,_.tZ)(k.Z,{title:(0,x.t)("Release Tracking")}),(0,_.tZ)(j.Z,{children:(0,x.t)("Configure release tracking for this project to automatically record new releases of your application.")}),!s&&(0,_.tZ)(i.bZ,{type:"warning",children:(0,x.t)("You do not have sufficient permissions to access Release tokens, placeholders are displayed below.")}),(0,_.BX)(u.Z,{children:[(0,_.tZ)(g.Z,{children:(0,x.t)("Client Configuration")}),(0,_.BX)(h.Z,{withPadding:!0,children:[(0,_.tZ)("p",{children:(0,x._N)("Start by binding the [release] attribute in your application, take a look at [link] to see how to configure this for the SDK you are using.",{link:(0,_.tZ)(c.Z,{href:"https://docs.sentry.io/platform-redirect/?next=/configuration/releases/",children:"our docs"}),release:(0,_.tZ)("code",{children:"release"})})}),(0,_.tZ)("p",{children:(0,x.t)("This will annotate each event with the version of your application, as well as automatically create a release entity in the system the first time it's seen.")}),(0,_.tZ)("p",{children:(0,x.t)("In addition you may configure a release hook (or use our API) to push a release and include additional metadata with it.")})]})]}),(0,_.BX)(u.Z,{children:[(0,_.tZ)(g.Z,{children:(0,x.t)("Deploy Token")}),(0,_.BX)(h.Z,{children:[(0,_.tZ)(p.Z,{label:(0,x.t)("Token"),help:(0,x.t)("A unique secret which is used to generate deploy hook URLs"),children:(0,_.tZ)(Z.Z,{children:y})}),(0,_.tZ)(p.Z,{label:(0,x.t)("Regenerate Token"),help:(0,x.t)("If a service becomes compromised, you should regenerate the token and re-configure any deploy hooks with the newly generated URL."),children:(0,_.tZ)("div",{children:(0,_.tZ)(l.Z,{disabled:!s,priority:"danger",onConfirm:this.handleRegenerateToken,message:(0,x.t)("Are you sure you want to regenerate your token? Your current token will no longer be usable."),children:(0,_.tZ)(a.zx,{priority:"danger",children:(0,x.t)("Regenerate Token")})})})})]})]}),(0,_.BX)(u.Z,{children:[(0,_.tZ)(g.Z,{children:(0,x.t)("Webhook")}),(0,_.BX)(h.Z,{withPadding:!0,children:[(0,_.tZ)("p",{children:(0,x.t)("If you simply want to integrate with an existing system, sometimes its easiest just to use a webhook.")}),(0,_.tZ)(r.Z,{children:(0,_.tZ)("pre",{children:w})}),(0,_.tZ)("p",{children:(0,x.t)('The release webhook accepts the same parameters as the "Create a new Release" API endpoint.')}),(0,b.Z)({value:(0,_.tZ)(r.Z,{children:(0,_.tZ)("pre",{children:this.getReleaseWebhookIntructions()})}),fixed:(0,_.tZ)("pre",{children:"curl __WEBHOOK_URL__ \\\n  -X POST \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"version\": \"abcdefg\"}'"})})]})]}),(0,_.tZ)(m.Z,{organization:e,project:t,pluginList:o}),(0,_.BX)(u.Z,{children:[(0,_.tZ)(g.Z,{children:(0,x.t)("API")}),(0,_.BX)(h.Z,{withPadding:!0,children:[(0,_.tZ)("p",{children:(0,x.t)("You can notify Sentry when you release new versions of your application via our HTTP API.")}),(0,_.tZ)("p",{children:(0,x._N)("See the [link:releases documentation] for more information.",{link:(0,_.tZ)(c.Z,{href:"https://docs.sentry.io/workflow/releases/"})})})]})]})]})}}const I=(0,w.Z)(T)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectReleaseTracking_tsx.dadfa1df905ab7fc7f8061d857852b3a.js.map