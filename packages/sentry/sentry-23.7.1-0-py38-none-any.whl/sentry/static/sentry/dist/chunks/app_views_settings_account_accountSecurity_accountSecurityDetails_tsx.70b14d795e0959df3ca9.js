"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_account_accountSecurity_accountSecurityDetails_tsx"],{"./app/components/panels/panelHeader.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),i=n("./app/styles/space.tsx");const o=e=>{let{disablePadding:t,hasButtons:n}=e;return(0,a.iv)("padding:",n?(0,i.D)(1):(0,i.D)(2)," ",t?0:(0,i.D)(2),";","")},r=(0,s.Z)("div",{target:"e1dzfr4k0"})("display:flex;align-items:center;justify-content:space-between;color:",(e=>e.lightText?e.theme.gray300:e.theme.gray400),";font-size:",(e=>e.theme.fontSizeSmall),";font-weight:600;text-transform:uppercase;border-bottom:1px solid ",(e=>e.theme.border),";border-radius:calc(",(e=>e.theme.panelBorderRadius)," - 1px) calc(",(e=>e.theme.panelBorderRadius)," - 1px) 0 0;background:",(e=>e.theme.backgroundSecondary),";line-height:1;position:relative;",o,";")},"./app/views/deprecatedAsyncView.tsx":(e,t,n)=>{n.d(t,{Z:()=>o});var s=n("./app/components/deprecatedAsyncComponent.tsx"),a=n("./app/components/sentryDocumentTitle.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends s.Z{getTitle(){return""}render(){return(0,i.tZ)(a.Z,{title:this.getTitle(),children:this.renderComponent()})}}o.displayName="DeprecatedAsyncView"},"./app/views/settings/account/accountSecurity/accountSecurityDetails.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/react/index.js")),o=n("./app/actionCreators/indicator.tsx"),r=n("./app/components/button.tsx"),c=n("./app/components/circleIndicator.tsx"),d=n("./app/components/dateTime.tsx"),l=n("./app/components/tooltip.tsx"),m=n("./app/locale.tsx"),p=n("./app/styles/space.tsx"),u=n("./app/views/deprecatedAsyncView.tsx"),h=n("./app/components/confirm.tsx"),g=n("./app/components/copyToClipboardButton.tsx"),Z=n("./app/components/emptyMessage.tsx"),v=n("./app/components/panels/panel.tsx"),y=n("./app/components/panels/panelAlert.tsx"),x=n("./app/components/panels/panelBody.tsx"),f=n("./app/components/panels/panelHeader.tsx"),w=n("./app/components/panels/panelItem.tsx"),b=n("./app/icons/index.tsx"),D=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function z(e){let{className:t,isEnrolled:n,codes:s,onRegenerateBackupCodes:a}=e;if(!n||!s)return null;const i=s.join(" \n");return(0,D.BX)(C,{className:t,children:[(0,D.BX)(f.Z,{hasButtons:!0,children:[(0,m.t)("Unused Codes"),(0,D.BX)(R,{children:[(0,D.tZ)(g.m,{text:i,size:"sm"}),(0,D.tZ)(r.zx,{size:"sm",onClick:()=>{const e=window.frames.printable;e.document.write(s.join("<br>")),e.print(),e.document.close()},"aria-label":(0,m.t)("print"),children:(0,D.tZ)(b.nS,{})}),(0,D.tZ)(r.zx,{size:"sm",download:"sentry-recovery-codes.txt",href:`data:text/plain;charset=utf-8,${i}`,"aria-label":(0,m.t)("download"),children:(0,D.tZ)(b.Dj,{})}),(0,D.tZ)(h.Z,{onConfirm:a,message:(0,m.t)("Are you sure you want to regenerate recovery codes? Your old codes will no longer work."),children:(0,D.tZ)(r.zx,{priority:"danger",size:"sm",children:(0,m.t)("Regenerate Codes")})})]})]}),(0,D.BX)(x.Z,{children:[(0,D.tZ)(y.Z,{type:"warning",children:(0,m.t)("Make sure to save a copy of your recovery codes and store them in a safe place.")}),(0,D.tZ)("div",{children:!!s.length&&s.map((e=>(0,D.tZ)(j,{children:e},e)))}),!s.length&&(0,D.tZ)(Z.Z,{children:(0,m.t)("You have no more recovery codes to use")})]}),(0,D.tZ)("iframe",{"data-test-id":"frame",name:"printable",style:{display:"none"}})]})}z.displayName="RecoveryCodes";const B=z,C=(0,a.Z)(v.Z,{target:"e1vz5wf52"})("margin-top:",(0,p.D)(4),";"),R=(0,a.Z)("div",{target:"e1vz5wf51"})("display:grid;grid-auto-flow:column;gap:",(0,p.D)(1),";"),j=(0,a.Z)(w.Z,{target:"e1vz5wf50"})("font-family:",(e=>e.theme.text.familyMono),";padding:",(0,p.D)(2),";");var S=n("./app/views/settings/account/accountSecurity/components/removeConfirm.tsx"),k=n("./app/components/input.tsx"),_=n("./app/views/settings/account/accountSecurity/components/confirmHeader.tsx"),E=n("./app/views/settings/components/text/textBlock.tsx");function X(e){const{className:t,isEnrolled:n,devices:s,id:a,onRemoveU2fDevice:i,onRenameU2fDevice:o}=e;if("u2f"!==a||!n)return null;const c=s?.length,d=1===c;return(0,D.BX)(v.Z,{className:t,children:[(0,D.tZ)(f.Z,{children:(0,m.t)("Device name")}),(0,D.BX)(x.Z,{children:[!c&&(0,D.tZ)(Z.Z,{children:(0,m.t)("You have not added any U2F devices")}),c&&s?.map(((e,t)=>(0,D.tZ)(U,{device:e,isLastDevice:d,onRenameU2fDevice:o,onRemoveU2fDevice:i},t))),(0,D.tZ)(P,{children:(0,D.tZ)(r.zx,{to:"/settings/account/security/mfa/u2f/enroll/",size:"sm",children:(0,m.t)("Add Another Device")})})]})]})}function U(e){const{device:t,isLastDevice:n,onRenameU2fDevice:s,onRemoveU2fDevice:a}=e,[o,c]=(0,i.useState)(t.name),[d,p]=(0,i.useState)(!1);return d?(0,D.BX)($,{children:[(0,D.BX)(T,{children:[(0,D.tZ)(A,{type:"text",value:o,onChange:e=>{c(e.target.value)}}),(0,D.tZ)(I,{date:t.timestamp})]}),(0,D.tZ)(N,{children:(0,D.tZ)(r.zx,{priority:"primary",size:"sm",onClick:()=>{s(t,o),p(!1)},children:"Rename Device"})}),(0,D.tZ)(N,{children:(0,D.tZ)(r.zx,{size:"sm",title:"Cancel rename",onClick:()=>{c(t.name),p(!1)},children:(0,D.tZ)(b.bM,{size:"xs"})})})]},t.name):(0,D.BX)($,{children:[(0,D.BX)(T,{children:[(0,D.tZ)(F,{children:t.name}),(0,D.tZ)(I,{date:t.timestamp})]}),(0,D.tZ)(N,{children:(0,D.tZ)(r.zx,{size:"sm",onClick:()=>p(!0),children:(0,m.t)("Rename Device")})}),(0,D.tZ)(N,{children:(0,D.tZ)(h.Z,{onConfirm:()=>a(t),disabled:n,message:(0,D.BX)(i.Fragment,{children:[(0,D.tZ)(_.Z,{children:(0,m.t)("Do you want to remove U2F device?")}),(0,D.tZ)(E.Z,{children:(0,m.t)('Are you sure you want to remove the U2F device "%s"?',t.name)})]}),children:(0,D.tZ)(r.zx,{size:"sm",priority:"danger",children:(0,D.tZ)(l.u,{disabled:!n,title:(0,m.t)("Can not remove last U2F device"),children:(0,D.tZ)(b.Fz,{size:"xs"})})})})})]},t.name)}X.displayName="U2fEnrolledDetails",U.displayName="Device";const A=(0,a.Z)(k.Z,{target:"e1cax5u67"})("width:50%;margin-right:",(0,p.D)(2),";"),$=(0,a.Z)(w.Z,{target:"e1cax5u66"})({name:"1hcx8jb",styles:"padding:0"}),T=(0,a.Z)("div",{target:"e1cax5u65"})("display:flex;align-items:center;justify-content:space-between;flex:1 1;height:72px;padding:",(0,p.D)(2),";padding-right:0;"),I=(0,a.Z)(d.Z,{target:"e1cax5u64"})("font-size:",(e=>e.theme.fontSizeRelativeSmall),";opacity:0.6;"),F=(0,a.Z)("div",{target:"e1cax5u63"})({name:"82a6rk",styles:"flex:1"}),N=(0,a.Z)("div",{target:"e1cax5u62"})("margin:",(0,p.D)(2),";"),P=(0,a.Z)(w.Z,{target:"e1cax5u61"})("justify-content:flex-end;padding:",(0,p.D)(2),";"),H=(0,a.Z)(X,{target:"e1cax5u60"})("margin-top:",(0,p.D)(4),";");var L=n("./app/views/settings/components/settingsPageHeader.tsx");const M="/users/me/authenticators/";function q(e){let{label:t,date:n}=e;return(0,D.BX)(i.Fragment,{children:[(0,D.tZ)(O,{children:t}),(0,D.tZ)("div",{children:n?(0,D.tZ)(d.Z,{date:n}):(0,m.t)("never")})]})}q.displayName="AuthenticatorDate";class V extends u.Z{constructor(){super(...arguments),(0,s.Z)(this,"handleRemove",(async e=>{const{authenticator:t}=this.state;if(!t||!t.authId)return;const n=e?`${e.key_handle}/`:"",s=e?e.name:(0,m.t)("Authenticator");this.setState({loading:!0});try{await this.api.requestPromise(`${M}${t.authId}/${n}`,{method:"DELETE"}),this.props.router.push("/settings/account/security"),(0,o.S9)((0,m.t)("%s has been removed",s))}catch{this.setState({loading:!1}),(0,o.Iw)((0,m.t)("Error removing %s",s))}})),(0,s.Z)(this,"handleRename",(async(e,t)=>{const{authenticator:n}=this.state;if(!n?.authId)return;const s=e?`${e.key_handle}/`:"";this.setState({loading:!0});const a={name:t};try{await this.api.requestPromise(`${M}${n.authId}/${s}`,{method:"PUT",data:a}),this.props.router.push(`/settings/account/security/mfa/${n.authId}`),(0,o.S9)((0,m.t)("Device was renamed"))}catch{this.setState({loading:!1}),(0,o.Iw)((0,m.t)("Error renaming the device"))}}))}getTitle(){return(0,m.t)("Security")}getEndpoints(){const{params:e}=this.props,{authId:t}=e;return[["authenticator",`${M}${t}/`]]}renderBody(){const{authenticator:e}=this.state;if(!e)return null;const{deleteDisabled:t,onRegenerateBackupCodes:n}=this.props;return(0,D.BX)(i.Fragment,{children:[(0,D.tZ)(L.Z,{title:(0,D.BX)(i.Fragment,{children:[(0,D.tZ)("span",{children:e.name}),(0,D.tZ)(K,{"data-test-id":"auth-status-"+(e.isEnrolled?"enabled":"disabled"),enabled:e.isEnrolled})]}),action:(0,D.BX)(G,{children:[e.isEnrolled&&e.allowRotationInPlace&&(0,D.tZ)(r.zx,{to:`/settings/account/security/mfa/${e.id}/enroll/`,children:(0,m.t)("Rotate Secret Key")}),e.isEnrolled&&e.removeButton&&(0,D.tZ)(l.u,{title:(0,m.t)("Two-factor authentication is required for at least one organization you're a member of."),disabled:!t,children:(0,D.tZ)(S.Z,{onConfirm:this.handleRemove,disabled:t,children:(0,D.tZ)(r.zx,{priority:"danger",children:e.removeButton})})})]})}),(0,D.tZ)(E.Z,{children:e.description}),(0,D.BX)(J,{children:[(0,D.tZ)(q,{label:(0,m.t)("Created at"),date:e.createdAt}),(0,D.tZ)(q,{label:(0,m.t)("Last used"),date:e.lastUsedAt})]}),(0,D.tZ)(H,{isEnrolled:e.isEnrolled,id:e.id,devices:e.devices,onRemoveU2fDevice:this.handleRemove,onRenameU2fDevice:this.handleRename}),e.isEnrolled&&e.phone&&(0,D.BX)(Q,{children:[(0,m.t)("Confirmation codes are sent to the following phone number"),":",(0,D.tZ)(W,{children:e.phone})]}),(0,D.tZ)(B,{onRegenerateBackupCodes:n,isEnrolled:e.isEnrolled,codes:e.codes})]})}}const Y=V,K=(0,a.Z)(c.Z,{target:"eiz5p955"})("margin-left:",(0,p.D)(1),";"),G=(0,a.Z)("div",{target:"eiz5p954"})("display:flex;justify-content:center;align-items:center;>*{margin-left:",(0,p.D)(1),";}"),J=(0,a.Z)("div",{target:"eiz5p953"})("display:grid;gap:",(0,p.D)(2),";grid-template-columns:max-content auto;"),O=(0,a.Z)("span",{target:"eiz5p952"})({name:"1efi8gv",styles:"font-weight:bold"}),Q=(0,a.Z)("div",{target:"eiz5p951"})("margin-top:",(0,p.D)(4),";"),W=(0,a.Z)("span",{target:"eiz5p950"})("font-weight:bold;margin-left:",(0,p.D)(1),";")},"./app/views/settings/account/accountSecurity/components/confirmHeader.tsx":(e,t,n)=>{n.d(t,{Z:()=>s});const s=(0,n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1slp61w0"})({name:"73b5fw",styles:"font-size:1.2em;margin-bottom:10px"})},"./app/views/settings/account/accountSecurity/components/removeConfirm.tsx":(e,t,n)=>{n.d(t,{Z:()=>m});var s=n("../node_modules/react/index.js"),a=n("./app/components/confirm.tsx"),i=n("./app/locale.tsx"),o=n("./app/views/settings/account/accountSecurity/components/confirmHeader.tsx"),r=n("./app/views/settings/components/text/textBlock.tsx"),c=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=(0,c.BX)(s.Fragment,{children:[(0,c.tZ)(o.Z,{children:(0,i.t)("Do you want to remove this method?")}),(0,c.tZ)(r.Z,{children:(0,i.t)("Removing the last authentication method will disable two-factor authentication completely.")})]});function l(e){return(0,c.tZ)(a.Z,{...e,message:d})}l.displayName="RemoveConfirm";const m=l}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_account_accountSecurity_accountSecurityDetails_tsx.8757ffc7a1267852666b05868baa6311.js.map