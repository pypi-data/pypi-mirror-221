{"version":3,"file":"chunks/app_components_splitDiff_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"sZAGA,MAAMA,EAAY,CAChBC,MAAOC,EAAAA,GACPC,MAAOC,EAAAA,GACPC,MAAOC,EAAAA,IAUT,SAASC,EAASC,GAAmD,IAAlD,UAACC,EAAS,KAAEC,EAAO,QAAO,KAAEC,EAAI,OAAEC,GAAcJ,EACjE,MAAMK,EAASb,EAAUU,GAEnBI,EAAYH,EAAKI,MAAM,MACvBC,EAAcJ,EAAOG,MAAM,OAC1BE,GACLH,EAAUI,OAASF,EAAYE,OAC3B,CAACJ,EAAWE,GACZ,CAACA,EAAaF,GACdK,EAAUF,EAAYG,KAAI,CAACC,EAAOC,IACtCT,EAAOC,EAAUQ,IAAU,GAAIN,EAAYM,IAAU,GAAI,CAACC,gBAAgB,MAG5E,OACEC,EAAAA,EAAAA,IAACC,EAAU,CAAChB,UAAWA,EAAW,eAAa,aAAYiB,UACzDF,EAAAA,EAAAA,IAACG,EAAS,CAAAD,SACPP,EAAQC,KAAI,CAACQ,EAAMC,KAClB,MAAMC,EAAiBF,EAAKG,MAAKC,GAAUA,EAAOC,QAC5CC,EAAmBN,EAAKG,MAAKC,GAAUA,EAAOG,UAEpD,OACEC,EAAAA,EAAAA,IAAA,MAAAV,SAAA,EACEF,EAAAA,EAAAA,IAACa,EAAI,CAACC,UAAWJ,EAAiBR,UAChCF,EAAAA,EAAAA,IAACe,EAAI,CAAAb,SACFE,EACEY,QAAOR,IAAWA,EAAOC,QACzBb,KAAI,CAACY,EAAQS,KACZjB,EAAAA,EAAAA,IAACkB,EAAI,CAASJ,UAAWN,EAAOG,QAAQT,SACrCM,EAAOW,OADCF,UAOnBjB,EAAAA,EAAAA,IAACoB,EAAG,KAEJpB,EAAAA,EAAAA,IAACa,EAAI,CAACQ,QAASf,EAAeJ,UAC5BF,EAAAA,EAAAA,IAACe,EAAI,CAAAb,SACFE,EACEY,QAAOR,IAAWA,EAAOG,UACzBf,KAAI,CAACY,EAAQS,KACZjB,EAAAA,EAAAA,IAACkB,EAAI,CAASG,QAASb,EAAOC,MAAMP,SACjCM,EAAOW,OADCF,WApBZZ,EA0BJ,OAMjB,CArDStB,EAASuC,YAAA,YAuDlB,MAAMrB,GAAasB,EAAAA,EAAAA,GAAO,QAAO,CAAAnC,OAAA,YAAdmC,CAAe,CAAAC,KAAA,UAAAC,OAAA,2DAM5BtB,GAAYoB,EAAAA,EAAAA,GAAO,QAAO,CAAAnC,OAAA,YAAdmC,CAAe,gBAChBG,GAAKA,EAAEC,MAAMC,KAAKC,YAAU,eAC9BH,GAAKA,EAAEC,MAAMG,eAAa,KAGnCjB,GAAOU,EAAAA,EAAAA,GAAO,KAAI,CAAAnC,OAAA,YAAXmC,CAAY,uBAErBG,GAAKA,EAAEZ,WAAc,qBAAoBY,EAAEC,MAAMI,KAAKC,cAAY,KAClEN,GAAKA,EAAEL,SAAY,qBAAoBK,EAAEC,MAAMI,KAAKE,YAAU,KAG5Db,GAAMG,EAAAA,EAAAA,GAAO,KAAI,CAAAnC,OAAA,YAAXmC,CAAY,CAAAC,KAAA,UAAAC,OAAA,eAIlBV,GAAOQ,EAAAA,EAAAA,GAAO,MAAK,CAAAnC,OAAA,YAAZmC,CAAa,CAAAC,KAAA,SAAAC,OAAA,gCAKpBP,GAAOK,EAAAA,EAAAA,GAAO,OAAM,CAAAnC,OAAA,YAAbmC,CAAc,8CAGvBG,GAAKA,EAAEZ,WAAc,qBAAoBY,EAAEC,MAAMI,KAAKpB,WAAS,KAC/De,GAAKA,EAAEL,SAAY,qBAAoBK,EAAEC,MAAMI,KAAKtB,SAAO,KAG/D,G","sources":["webpack:///./app/components/splitDiff.tsx"],"sourcesContent":["import styled from '@emotion/styled';\nimport {Change, diffChars, diffLines, diffWords} from 'diff';\n\nconst diffFnMap = {\n  chars: diffChars,\n  words: diffWords,\n  lines: diffLines,\n} as const;\n\ntype Props = {\n  base: string;\n  target: string;\n  className?: string;\n  type?: keyof typeof diffFnMap;\n};\n\nfunction SplitDiff({className, type = 'lines', base, target}: Props) {\n  const diffFn = diffFnMap[type];\n\n  const baseLines = base.split('\\n');\n  const targetLines = target.split('\\n');\n  const [largerArray] =\n    baseLines.length > targetLines.length\n      ? [baseLines, targetLines]\n      : [targetLines, baseLines];\n  const results = largerArray.map((_line, index) =>\n    diffFn(baseLines[index] || '', targetLines[index] || '', {newlineIsToken: true})\n  );\n\n  return (\n    <SplitTable className={className} data-test-id=\"split-diff\">\n      <SplitBody>\n        {results.map((line, j) => {\n          const highlightAdded = line.find(result => result.added);\n          const highlightRemoved = line.find(result => result.removed);\n\n          return (\n            <tr key={j}>\n              <Cell isRemoved={highlightRemoved}>\n                <Line>\n                  {line\n                    .filter(result => !result.added)\n                    .map((result, i) => (\n                      <Word key={i} isRemoved={result.removed}>\n                        {result.value}\n                      </Word>\n                    ))}\n                </Line>\n              </Cell>\n\n              <Gap />\n\n              <Cell isAdded={highlightAdded}>\n                <Line>\n                  {line\n                    .filter(result => !result.removed)\n                    .map((result, i) => (\n                      <Word key={i} isAdded={result.added}>\n                        {result.value}\n                      </Word>\n                    ))}\n                </Line>\n              </Cell>\n            </tr>\n          );\n        })}\n      </SplitBody>\n    </SplitTable>\n  );\n}\n\nconst SplitTable = styled('table')`\n  table-layout: fixed;\n  border-collapse: collapse;\n  width: 100%;\n`;\n\nconst SplitBody = styled('tbody')`\n  font-family: ${p => p.theme.text.familyMono};\n  font-size: ${p => p.theme.fontSizeSmall};\n`;\n\nconst Cell = styled('td')<{isAdded?: Change; isRemoved?: Change}>`\n  vertical-align: top;\n  ${p => p.isRemoved && `background-color: ${p.theme.diff.removedRow}`};\n  ${p => p.isAdded && `background-color: ${p.theme.diff.addedRow}`};\n`;\n\nconst Gap = styled('td')`\n  width: 20px;\n`;\n\nconst Line = styled('div')`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst Word = styled('span')<{isAdded?: boolean; isRemoved?: boolean}>`\n  white-space: pre-wrap;\n  word-break: break-all;\n  ${p => p.isRemoved && `background-color: ${p.theme.diff.removed}`};\n  ${p => p.isAdded && `background-color: ${p.theme.diff.added}`};\n`;\n\nexport default SplitDiff;\n"],"names":["diffFnMap","chars","diffChars","words","diffWords","lines","diffLines","SplitDiff","_ref","className","type","base","target","diffFn","baseLines","split","targetLines","largerArray","length","results","map","_line","index","newlineIsToken","_jsx","SplitTable","children","SplitBody","line","j","highlightAdded","find","result","added","highlightRemoved","removed","_jsxs","Cell","isRemoved","Line","filter","i","Word","value","Gap","isAdded","displayName","_styled","name","styles","p","theme","text","familyMono","fontSizeSmall","diff","removedRow","addedRow"],"sourceRoot":""}