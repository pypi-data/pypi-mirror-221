{"version":3,"file":"chunks/app_views_settings_organizationDeveloperSettings_subscriptionBox_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"yPAAO,MAAMA,EAAgB,CAAC,QAAS,QAAS,WAEnCC,EAAkB,CAC7BC,MAAO,QACPC,MAAO,QACPC,QAAS,Q,sjBCqBX,SAASC,EAAeC,GAQd,IARe,QACvBC,EAAO,wBACPC,EAAuB,MACvBC,EAAK,SACLC,EAAQ,aACRC,EAAY,SACZC,EAAQ,gBACRC,GAAkB,GACZP,EACN,MAAM,SAACQ,GAAYH,EAEnB,IAAII,EAAWP,GAA2BK,EACtCG,GAAUC,EAAAA,EAAAA,GACZ,uDACAhB,EAAAA,EAAgBW,IAGD,UAAbA,GAAyBE,EAASI,SAAS,8BAC7CH,GAAW,EACXC,GAAUC,EAAAA,EAAAA,GACR,+EAIAJ,IACFG,GAAUC,EAAAA,EAAAA,GAAE,wEAGd,MAAME,EAA+D,CAEnEjB,MAAQ,iCACNY,EAASI,SAAS,qBAAuB,WAAa,WAExDf,MAAO,UACPC,QAAS,4BAGX,OACEgB,EAAAA,EAAAA,IAACC,EAAAA,EAAO,CAACN,UAAWA,EAAUO,MAAON,EAAQO,UAC3CC,EAAAA,EAAAA,IAACC,EAAoB,CAACV,SAAUA,EAASQ,SAAA,EACvCC,EAAAA,EAAAA,IAACE,EAAgB,CAAAH,SAAA,EACfC,EAAAA,EAAAA,IAACG,EAAiB,CAAAJ,SAAA,CACfX,EACAH,IAASW,EAAAA,EAAAA,IAACQ,EAAAA,EAAY,CAACC,KAAK,YAE/BT,EAAAA,EAAAA,IAACU,EAAuB,CAAAP,SAAEJ,EAAaP,SAEzCQ,EAAAA,EAAAA,IAACW,EAAAA,EAAQ,CAEP,aAAYnB,EACZG,SAAUA,EACViB,GAAIpB,EACJqB,MAAOrB,EACPL,QAASA,EACTG,SAAUwB,GAAOxB,EAASE,EAAUsB,EAAIC,OAAO5B,UANzC,GAAEK,IAAWL,SAV0BK,EAqBvD,CA3DSP,EAAe+B,YAAA,kBA6DxB,SAAeC,EAAAA,EAAAA,GAAiBhC,GAE1BoB,GAAuBa,EAAAA,EAAAA,GAAO,MAAK,CAAAH,OAAA,aAAZG,CAAa,0DAG1BC,GAAKA,EAAEC,MAAMC,qBAAmB,aACnCF,GAAMA,EAAExB,SAAW,GAAM,GAAE,mBACrBwB,GAAKA,EAAEC,MAAME,cAAY,YAChCC,EAAAA,EAAAA,GAAM,KAAI,aACTA,EAAAA,EAAAA,GAAM,KAAI,2BAIjBjB,GAAmBY,EAAAA,EAAAA,GAAO,MAAK,CAAAH,OAAA,aAAZG,CAAa,CAAAM,KAAA,UAAAC,OAAA,yDAMhCf,GAA0BQ,EAAAA,EAAAA,GAAO,MAAK,CAAAH,OAAA,aAAZG,CAAa,cAC9BC,GAAKA,EAAEC,MAAMM,gBAAc,yBAE/BP,GAAKA,EAAEC,MAAMO,SAAO,KAGzBpB,GAAoBW,EAAAA,EAAAA,GAAO,MAAK,CAAAH,OAAA,aAAZG,CAAa,cACxBC,GAAKA,EAAEC,MAAMQ,eAAa,yBAE9BT,GAAKA,EAAEC,MAAMS,WAAS,sCAEdN,EAAAA,EAAAA,GAAM,KAAK,I","sources":["webpack:///./app/views/settings/organizationDeveloperSettings/constants.tsx","webpack:///./app/views/settings/organizationDeveloperSettings/subscriptionBox.tsx"],"sourcesContent":["export const EVENT_CHOICES = ['issue', 'error', 'comment'] as const;\n\nexport const PERMISSIONS_MAP = {\n  issue: 'Event',\n  error: 'Event',\n  comment: 'Event',\n} as const;\n","import styled from '@emotion/styled';\n\nimport Checkbox from 'sentry/components/checkbox';\nimport FeatureBadge from 'sentry/components/featureBadge';\nimport {Tooltip} from 'sentry/components/tooltip';\nimport {t} from 'sentry/locale';\nimport {space} from 'sentry/styles/space';\nimport {Organization} from 'sentry/types';\nimport withOrganization from 'sentry/utils/withOrganization';\nimport {\n  EVENT_CHOICES,\n  PERMISSIONS_MAP,\n} from 'sentry/views/settings/organizationDeveloperSettings/constants';\n\ntype Resource = (typeof EVENT_CHOICES)[number];\n\ntype Props = {\n  checked: boolean;\n  disabledFromPermissions: boolean;\n  isNew: boolean;\n  onChange: (resource: Resource, checked: boolean) => void;\n  organization: Organization;\n  resource: Resource;\n  webhookDisabled?: boolean;\n};\n\nfunction SubscriptionBox({\n  checked,\n  disabledFromPermissions,\n  isNew,\n  onChange,\n  organization,\n  resource,\n  webhookDisabled = false,\n}: Props) {\n  const {features} = organization;\n\n  let disabled = disabledFromPermissions || webhookDisabled;\n  let message = t(\n    \"Must have at least 'Read' permissions enabled for %s\",\n    PERMISSIONS_MAP[resource]\n  );\n\n  if (resource === 'error' && !features.includes('integrations-event-hooks')) {\n    disabled = true;\n    message = t(\n      'Your organization does not have access to the error subscription resource.'\n    );\n  }\n\n  if (webhookDisabled) {\n    message = t('Cannot enable webhook subscription without specifying a webhook url');\n  }\n\n  const DESCRIPTIONS: Record<(typeof EVENT_CHOICES)[number], string> = {\n    // Swap ignored for archived if the feature is enabled\n    issue: `created, resolved, assigned, ${\n      features.includes('escalating-issues') ? 'archived' : 'ignored'\n    }`,\n    error: 'created',\n    comment: 'created, edited, deleted',\n  };\n\n  return (\n    <Tooltip disabled={!disabled} title={message} key={resource}>\n      <SubscriptionGridItem disabled={disabled}>\n        <SubscriptionInfo>\n          <SubscriptionTitle>\n            {resource}\n            {isNew && <FeatureBadge type=\"new\" />}\n          </SubscriptionTitle>\n          <SubscriptionDescription>{DESCRIPTIONS[resource]}</SubscriptionDescription>\n        </SubscriptionInfo>\n        <Checkbox\n          key={`${resource}${checked}`}\n          aria-label={resource}\n          disabled={disabled}\n          id={resource}\n          value={resource}\n          checked={checked}\n          onChange={evt => onChange(resource, evt.target.checked)}\n        />\n      </SubscriptionGridItem>\n    </Tooltip>\n  );\n}\n\nexport default withOrganization(SubscriptionBox);\n\nconst SubscriptionGridItem = styled('div')<{disabled: boolean}>`\n  display: flex;\n  justify-content: space-between;\n  background: ${p => p.theme.backgroundSecondary};\n  opacity: ${p => (p.disabled ? 0.3 : 1)};\n  border-radius: ${p => p.theme.borderRadius};\n  margin: ${space(1.5)};\n  padding: ${space(1.5)};\n  box-sizing: border-box;\n`;\n\nconst SubscriptionInfo = styled('div')`\n  display: flex;\n  flex-direction: column;\n  align-self: center;\n`;\n\nconst SubscriptionDescription = styled('div')`\n  font-size: ${p => p.theme.fontSizeMedium};\n  line-height: 1;\n  color: ${p => p.theme.gray300};\n`;\n\nconst SubscriptionTitle = styled('div')`\n  font-size: ${p => p.theme.fontSizeLarge};\n  line-height: 1;\n  color: ${p => p.theme.textColor};\n  white-space: nowrap;\n  margin-bottom: ${space(0.75)};\n`;\n"],"names":["EVENT_CHOICES","PERMISSIONS_MAP","issue","error","comment","SubscriptionBox","_ref","checked","disabledFromPermissions","isNew","onChange","organization","resource","webhookDisabled","features","disabled","message","t","includes","DESCRIPTIONS","_jsx","Tooltip","title","children","_jsxs","SubscriptionGridItem","SubscriptionInfo","SubscriptionTitle","FeatureBadge","type","SubscriptionDescription","Checkbox","id","value","evt","target","displayName","withOrganization","_styled","p","theme","backgroundSecondary","borderRadius","space","name","styles","fontSizeMedium","gray300","fontSizeLarge","textColor"],"sourceRoot":""}