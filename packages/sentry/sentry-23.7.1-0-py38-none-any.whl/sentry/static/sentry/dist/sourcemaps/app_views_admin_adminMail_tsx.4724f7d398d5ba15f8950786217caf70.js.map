{"version":3,"file":"chunks/app_views_admin_adminMail_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/views/admin/adminMail.tsx","webpack:///./app/views/deprecatedAsyncView.tsx"],"sourcesContent":["import {addErrorMessage, addSuccessMessage} from 'sentry/actionCreators/indicator';\nimport {Button} from 'sentry/components/button';\nimport {t} from 'sentry/locale';\nimport DeprecatedAsyncView from 'sentry/views/deprecatedAsyncView';\n\ntype Data = {\n  mailFrom: string;\n  mailHost: string;\n  mailListNamespace: string;\n  mailPassword: string;\n  mailPort: string;\n  mailUseSsl: string;\n  mailUseTls: string;\n  mailUsername: string;\n  testMailEmail: string;\n};\n\ntype State = DeprecatedAsyncView['state'] & {data: Data};\n\nexport default class AdminMail extends DeprecatedAsyncView<{}, State> {\n  getEndpoints(): ReturnType<DeprecatedAsyncView['getEndpoints']> {\n    return [['data', '/internal/mail/']];\n  }\n\n  sendTestEmail = async () => {\n    const testMailEmail = this.state.data.testMailEmail;\n\n    try {\n      await this.api.requestPromise('/internal/mail/', {method: 'POST'});\n      addSuccessMessage(t('A test email has been sent to %s', testMailEmail));\n    } catch (error) {\n      addErrorMessage(\n        error.responseJSON\n          ? error.responseJSON.error\n          : t('Unable to send test email. Check your server logs')\n      );\n    }\n  };\n\n  renderBody() {\n    const {data} = this.state;\n    const {\n      mailHost,\n      mailPassword,\n      mailUsername,\n      mailPort,\n      mailUseTls,\n      mailUseSsl,\n      mailFrom,\n      mailListNamespace,\n      testMailEmail,\n    } = data;\n\n    return (\n      <div>\n        <h3>{t('SMTP Settings')}</h3>\n\n        <dl className=\"vars\">\n          <dt>{t('From Address')}</dt>\n          <dd>\n            <pre className=\"val\">{mailFrom}</pre>\n          </dd>\n\n          <dt>{t('Host')}</dt>\n          <dd>\n            <pre className=\"val\">\n              {mailHost}:{mailPort}\n            </pre>\n          </dd>\n\n          <dt>{t('Username')}</dt>\n          <dd>\n            <pre className=\"val\">{mailUsername || <em>{t('not set')}</em>}</pre>\n          </dd>\n\n          <dt>{t('Password')}</dt>\n          <dd>\n            <pre className=\"val\">\n              {mailPassword ? '********' : <em>{t('not set')}</em>}\n            </pre>\n          </dd>\n\n          <dt>{t('STARTTLS?')}</dt>\n          <dd>\n            <pre className=\"val\">{mailUseTls ? t('Yes') : t('No')}</pre>\n          </dd>\n\n          <dt>{t('SSL?')}</dt>\n          <dd>\n            <pre className=\"val\">{mailUseSsl ? t('Yes') : t('No')}</pre>\n          </dd>\n\n          <dt>{t('Mailing List Namespace')}</dt>\n          <dd>\n            <pre className=\"val\">{mailListNamespace}</pre>\n          </dd>\n        </dl>\n\n        <h3>{t('Test Settings')}</h3>\n\n        <p>\n          {t(\n            \"Send an email to your account's email address to confirm that everything is configured correctly.\"\n          )}\n        </p>\n\n        <Button onClick={this.sendTestEmail}>\n          {t('Send a test email to %s', testMailEmail)}\n        </Button>\n      </div>\n    );\n  }\n}\n","import DeprecatedAsyncComponent from 'sentry/components/deprecatedAsyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\nexport type AsyncViewState = DeprecatedAsyncComponent['state'];\nexport type AsyncViewProps = DeprecatedAsyncComponent['props'];\n\n/**\n * @deprecated use useApiQuery instead.\n *\n * Read the dev docs page on network requests for more information [1].\n *\n * [1]: https://develop.sentry.dev/frontend/network-requests/\n */\nexport default class DeprecatedAsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends DeprecatedAsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n"],"names":["AdminMail","DeprecatedAsyncView","constructor","arguments","_defineProperty","async","testMailEmail","this","state","data","api","requestPromise","method","addSuccessMessage","t","error","addErrorMessage","responseJSON","getEndpoints","renderBody","mailHost","mailPassword","mailUsername","mailPort","mailUseTls","mailUseSsl","mailFrom","mailListNamespace","_jsxs","children","_jsx","className","Button","onClick","sendTestEmail","DeprecatedAsyncComponent","getTitle","render","SentryDocumentTitle","title","renderComponent","displayName"],"sourceRoot":""}