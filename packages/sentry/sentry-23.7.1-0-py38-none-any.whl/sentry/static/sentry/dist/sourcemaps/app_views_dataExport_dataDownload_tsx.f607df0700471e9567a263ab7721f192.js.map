{"version":3,"file":"chunks/app_views_dataExport_dataDownload_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/dataExport.tsx","webpack:///./app/views/dataExport/dataDownload.tsx","webpack:///./app/views/deprecatedAsyncView.tsx"],"sourcesContent":["import {useCallback, useEffect, useRef, useState} from 'react';\nimport debounce from 'lodash/debounce';\n\nimport {addErrorMessage, addSuccessMessage} from 'sentry/actionCreators/indicator';\nimport {Client} from 'sentry/api';\nimport Feature from 'sentry/components/acl/feature';\nimport {Button} from 'sentry/components/button';\nimport {t} from 'sentry/locale';\nimport {Organization} from 'sentry/types';\nimport withApi from 'sentry/utils/withApi';\nimport withOrganization from 'sentry/utils/withOrganization';\n\n// NOTE: Coordinate with other ExportQueryType (src/sentry/data_export/base.py)\nexport enum ExportQueryType {\n  ISSUES_BY_TAG = 'Issues-by-Tag',\n  DISCOVER = 'Discover',\n}\n\ninterface DataExportPayload {\n  queryInfo: any;\n  queryType: ExportQueryType; // TODO(ts): Formalize different possible payloads\n}\n\ninterface DataExportProps {\n  api: Client;\n  organization: Organization;\n  payload: DataExportPayload;\n  children?: React.ReactNode;\n  disabled?: boolean;\n  icon?: React.ReactNode;\n}\n\nfunction DataExport({\n  api,\n  children,\n  disabled,\n  organization,\n  payload,\n  icon,\n}: DataExportProps): React.ReactElement {\n  const unmountedRef = useRef(false);\n  const [inProgress, setInProgress] = useState(false);\n\n  // We clear the indicator if export props change so that the user\n  // can fire another export without having to wait for the previous one to finish.\n  useEffect(() => {\n    if (inProgress) {\n      setInProgress(false);\n    }\n    // We are skipping the inProgress dependency because it would have fired on each handleDataExport\n    // call and would have immediately turned off the value giving users no feedback on their click action.\n    // An alternative way to handle this would have probably been to key the component by payload/queryType,\n    // but that seems like it can be a complex object so tracking changes could result in very brittle behavior.\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [payload.queryType, payload.queryInfo]);\n\n  // Tracking unmounting of the component to prevent setState call on unmounted component\n  useEffect(() => {\n    return () => {\n      unmountedRef.current = true;\n    };\n  }, []);\n\n  const handleDataExport = useCallback(() => {\n    setInProgress(true);\n\n    // This is a fire and forget request.\n    api\n      .requestPromise(`/organizations/${organization.slug}/data-export/`, {\n        includeAllArgs: true,\n        method: 'POST',\n        data: {\n          query_type: payload.queryType,\n          query_info: payload.queryInfo,\n        },\n      })\n      .then(([_data, _, response]) => {\n        // If component has unmounted, don't do anything\n        if (unmountedRef.current) {\n          return;\n        }\n\n        addSuccessMessage(\n          response?.status === 201\n            ? t(\n                \"Sit tight. We'll shoot you an email when your data is ready for download.\"\n              )\n            : t(\"It looks like we're already working on it. Sit tight, we'll email you.\")\n        );\n      })\n      .catch(err => {\n        // If component has unmounted, don't do anything\n        if (unmountedRef.current) {\n          return;\n        }\n        const message =\n          err?.responseJSON?.detail ??\n          t(\n            \"We tried our hardest, but we couldn't export your data. Give it another go.\"\n          );\n\n        addErrorMessage(message);\n        setInProgress(false);\n      });\n  }, [payload.queryInfo, payload.queryType, organization.slug, api]);\n\n  return (\n    <Feature features={['organizations:discover-query']}>\n      {inProgress ? (\n        <Button\n          size=\"sm\"\n          priority=\"default\"\n          title={t(\n            \"You can get on with your life. We'll email you when your data's ready.\"\n          )}\n          disabled\n          icon={icon}\n        >\n          {t(\"We're working on it...\")}\n        </Button>\n      ) : (\n        <Button\n          onClick={debounce(handleDataExport, 500)}\n          disabled={disabled || false}\n          size=\"sm\"\n          priority=\"default\"\n          title={t(\n            \"Put your data to work. Start your export and we'll email you when it's finished.\"\n          )}\n          icon={icon}\n        >\n          {children ? children : t('Export All to CSV')}\n        </Button>\n      )}\n    </Feature>\n  );\n}\n\nexport {DataExport};\nexport default withApi(withOrganization(DataExport));\n","import {Fragment} from 'react';\nimport {browserHistory, RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {Button} from 'sentry/components/button';\nimport {ExportQueryType} from 'sentry/components/dataExport';\nimport DateTime from 'sentry/components/dateTime';\nimport {IconDownload} from 'sentry/icons';\nimport {t, tct} from 'sentry/locale';\nimport {space} from 'sentry/styles/space';\nimport {normalizeUrl} from 'sentry/utils/withDomainRequired';\nimport Layout from 'sentry/views/auth/layout';\nimport DeprecatedAsyncView from 'sentry/views/deprecatedAsyncView';\n\nexport enum DownloadStatus {\n  EARLY = 'EARLY',\n  VALID = 'VALID',\n  EXPIRED = 'EXPIRED',\n}\n\ntype RouteParams = {\n  dataExportId: string;\n  orgId: string;\n};\n\ntype Download = {\n  checksum: string;\n  dateCreated: string;\n  id: number;\n  query: {\n    info: object;\n    type: ExportQueryType;\n  };\n  status: DownloadStatus;\n  user: {\n    email: string;\n    id: number;\n    username: string;\n  };\n  dateExpired?: string;\n  dateFinished?: string;\n};\n\ntype Props = {} & RouteComponentProps<RouteParams, {}>;\n\ntype State = {\n  download: Download;\n  errors: {\n    download: {\n      responseJSON: {\n        detail: string;\n      };\n      status: number;\n      statusText: string;\n    };\n  };\n} & DeprecatedAsyncView['state'];\n\nclass DataDownload extends DeprecatedAsyncView<Props, State> {\n  disableErrorReport = false;\n\n  getTitle(): string {\n    return t('Download Center');\n  }\n\n  getEndpoints(): ReturnType<DeprecatedAsyncView['getEndpoints']> {\n    const {orgId, dataExportId} = this.props.params;\n    return [['download', `/organizations/${orgId}/data-export/${dataExportId}/`]];\n  }\n\n  getActionLink(queryType): string {\n    const {orgId} = this.props.params;\n    switch (queryType) {\n      case ExportQueryType.ISSUES_BY_TAG:\n        return `/organizations/${orgId}/issues/`;\n      case ExportQueryType.DISCOVER:\n        return `/organizations/${orgId}/discover/queries/`;\n      default:\n        return '/';\n    }\n  }\n\n  renderDate(date: string | undefined): React.ReactNode {\n    if (!date) {\n      return null;\n    }\n    const d = new Date(date);\n    return (\n      <strong>\n        <DateTime date={d} />\n      </strong>\n    );\n  }\n\n  renderEarly(): React.ReactNode {\n    return (\n      <Fragment>\n        <Header>\n          <h3>\n            {t('What are')}\n            <i>{t(' you ')}</i>\n            {t('doing here?')}\n          </h3>\n        </Header>\n        <Body>\n          <p>\n            {t(\n              \"Not that its any of our business, but were you invited to this page? It's just that we don't exactly remember emailing you about it.\"\n            )}\n          </p>\n          <p>{t(\"Close this window and we'll email you when your download is ready.\")}</p>\n        </Body>\n      </Fragment>\n    );\n  }\n\n  renderExpired(): React.ReactNode {\n    const {query} = this.state.download;\n    const actionLink = this.getActionLink(query.type);\n    return (\n      <Fragment>\n        <Header>\n          <h3>{t('This is awkward.')}</h3>\n        </Header>\n        <Body>\n          <p>\n            {t(\n              \"That link expired, so your download doesn't live here anymore. Just picked up one day and left town.\"\n            )}\n          </p>\n          <p>\n            {t(\n              'Make a new one with your latest data. Your old download will never see it coming.'\n            )}\n          </p>\n          <DownloadButton href={actionLink} priority=\"primary\">\n            {t('Start a New Download')}\n          </DownloadButton>\n        </Body>\n      </Fragment>\n    );\n  }\n\n  openInDiscover() {\n    const {\n      download: {\n        query: {info},\n      },\n    } = this.state;\n    const {orgId} = this.props.params;\n\n    const to = {\n      pathname: `/organizations/${orgId}/discover/results/`,\n      query: info,\n    };\n\n    browserHistory.push(normalizeUrl(to));\n  }\n\n  renderOpenInDiscover() {\n    const {\n      download: {\n        query = {\n          type: ExportQueryType.ISSUES_BY_TAG,\n          info: {},\n        },\n      },\n    } = this.state;\n\n    // default to IssuesByTag because we don't want to\n    // display this unless we're sure its a discover query\n    const {type = ExportQueryType.ISSUES_BY_TAG} = query;\n\n    return type === 'Discover' ? (\n      <Fragment>\n        <p>{t('Need to make changes?')}</p>\n        <Button priority=\"primary\" onClick={() => this.openInDiscover()}>\n          {t('Open in Discover')}\n        </Button>\n        <br />\n      </Fragment>\n    ) : null;\n  }\n\n  renderValid(): React.ReactNode {\n    const {\n      download: {dateExpired, checksum},\n    } = this.state;\n    const {orgId, dataExportId} = this.props.params;\n\n    return (\n      <Fragment>\n        <Header>\n          <h3>{t('All done.')}</h3>\n        </Header>\n        <Body>\n          <p>{t(\"See, that wasn't so bad. Your data is all ready for download.\")}</p>\n          <Button\n            priority=\"primary\"\n            icon={<IconDownload />}\n            href={`/api/0/organizations/${orgId}/data-export/${dataExportId}/?download=true`}\n          >\n            {t('Download CSV')}\n          </Button>\n          <p>\n            {t(\"That link won't last forever — it expires:\")}\n            <br />\n            {this.renderDate(dateExpired)}\n          </p>\n          {this.renderOpenInDiscover()}\n          <p>\n            <small>\n              <strong>SHA1:{checksum}</strong>\n            </small>\n            <br />\n            {tct('Need help verifying? [link].', {\n              link: (\n                <a\n                  href=\"https://docs.sentry.io/product/discover-queries/query-builder/#filter-by-table-columns\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {t('Check out our docs')}\n                </a>\n              ),\n            })}\n          </p>\n        </Body>\n      </Fragment>\n    );\n  }\n\n  renderError(): React.ReactNode {\n    const {\n      errors: {download: err},\n    } = this.state;\n    const errDetail = err?.responseJSON?.detail;\n    return (\n      <Layout>\n        <main>\n          <Header>\n            <h3>\n              {err.status} - {err.statusText}\n            </h3>\n          </Header>\n          {errDetail && (\n            <Body>\n              <p>{errDetail}</p>\n            </Body>\n          )}\n        </main>\n      </Layout>\n    );\n  }\n\n  renderContent(): React.ReactNode {\n    const {download} = this.state;\n    switch (download.status) {\n      case DownloadStatus.EARLY:\n        return this.renderEarly();\n      case DownloadStatus.EXPIRED:\n        return this.renderExpired();\n      default:\n        return this.renderValid();\n    }\n  }\n\n  renderBody() {\n    return (\n      <Layout>\n        <main>{this.renderContent()}</main>\n      </Layout>\n    );\n  }\n}\n\nconst Header = styled('header')`\n  border-bottom: 1px solid ${p => p.theme.border};\n  padding: ${space(3)} 40px 0;\n  h3 {\n    font-size: 24px;\n    margin: 0 0 ${space(3)} 0;\n  }\n`;\n\nconst Body = styled('div')`\n  padding: ${space(2)} 40px;\n  max-width: 500px;\n  p {\n    margin: ${space(1.5)} 0;\n  }\n`;\n\nconst DownloadButton = styled(Button)`\n  margin-bottom: ${space(1.5)};\n`;\n\nexport default DataDownload;\n","import DeprecatedAsyncComponent from 'sentry/components/deprecatedAsyncComponent';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\n\nexport type AsyncViewState = DeprecatedAsyncComponent['state'];\nexport type AsyncViewProps = DeprecatedAsyncComponent['props'];\n\n/**\n * @deprecated use useApiQuery instead.\n *\n * Read the dev docs page on network requests for more information [1].\n *\n * [1]: https://develop.sentry.dev/frontend/network-requests/\n */\nexport default class DeprecatedAsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends DeprecatedAsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    return (\n      <SentryDocumentTitle title={this.getTitle()}>\n        {this.renderComponent() as React.ReactChild}\n      </SentryDocumentTitle>\n    );\n  }\n}\n"],"names":["ExportQueryType","DataExport","_ref","api","children","disabled","organization","payload","icon","unmountedRef","useRef","inProgress","setInProgress","useState","useEffect","queryType","queryInfo","current","handleDataExport","useCallback","requestPromise","slug","includeAllArgs","method","data","query_type","query_info","then","_ref2","_data","_","response","addSuccessMessage","status","t","catch","err","message","responseJSON","detail","addErrorMessage","_jsx","Feature","features","Button","size","priority","title","onClick","debounce","displayName","withApi","withOrganization","DownloadStatus","DataDownload","DeprecatedAsyncView","constructor","arguments","_defineProperty","getTitle","getEndpoints","orgId","dataExportId","this","props","params","getActionLink","ISSUES_BY_TAG","DISCOVER","renderDate","date","d","Date","DateTime","renderEarly","_jsxs","Fragment","Header","Body","renderExpired","query","state","download","actionLink","type","DownloadButton","href","openInDiscover","info","to","pathname","browserHistory","push","normalizeUrl","renderOpenInDiscover","renderValid","dateExpired","checksum","IconDownload","tct","link","target","rel","renderError","errors","errDetail","Layout","statusText","renderContent","EARLY","EXPIRED","renderBody","_styled","p","theme","border","space","DeprecatedAsyncComponent","render","SentryDocumentTitle","renderComponent"],"sourceRoot":""}