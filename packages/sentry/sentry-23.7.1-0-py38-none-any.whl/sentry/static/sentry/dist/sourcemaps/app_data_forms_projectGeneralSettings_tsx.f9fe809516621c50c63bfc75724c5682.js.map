{"version":3,"file":"chunks/app_data_forms_projectGeneralSettings_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/data/forms/projectGeneralSettings.tsx","webpack:///./app/utils/slugify.tsx"],"sourcesContent":["import {createFilter} from 'react-select';\nimport styled from '@emotion/styled';\nimport {PlatformIcon} from 'platformicons';\n\nimport {Field} from 'sentry/components/forms/types';\nimport platforms from 'sentry/data/platforms';\nimport {t, tct, tn} from 'sentry/locale';\nimport {space} from 'sentry/styles/space';\nimport {convertMultilineFieldValue, extractMultilineFields} from 'sentry/utils';\nimport getDynamicText from 'sentry/utils/getDynamicText';\nimport slugify from 'sentry/utils/slugify';\n\n// Export route to make these forms searchable by label/help\nexport const route = '/settings/:orgId/projects/:projectId/';\n\nconst getResolveAgeAllowedValues = () => {\n  let i = 0;\n  const values: number[] = [];\n  while (i <= 720) {\n    values.push(i);\n    if (i < 12) {\n      i += 1;\n    } else if (i < 24) {\n      i += 3;\n    } else if (i < 36) {\n      i += 6;\n    } else if (i < 48) {\n      i += 12;\n    } else {\n      i += 24;\n    }\n  }\n  return values;\n};\n\nconst RESOLVE_AGE_ALLOWED_VALUES = getResolveAgeAllowedValues();\n\nconst ORG_DISABLED_REASON = t(\n  \"This option is enforced by your organization's settings and cannot be customized per-project.\"\n);\n\nconst PlatformWrapper = styled('div')`\n  display: flex;\n  align-items: center;\n`;\nconst StyledPlatformIcon = styled(PlatformIcon)`\n  margin-right: ${space(1)};\n`;\n\nexport const fields: Record<string, Field> = {\n  name: {\n    name: 'name',\n    type: 'string',\n    required: true,\n    label: t('Name'),\n    placeholder: t('my-awesome-project'),\n    help: t('A name for this project'),\n    transformInput: slugify,\n    getData: (data: {name?: string}) => {\n      return {\n        name: data.name,\n        slug: data.name,\n      };\n    },\n\n    saveOnBlur: false,\n    saveMessageAlertType: 'info',\n    saveMessage: t('You will be redirected to the new project slug after saving'),\n  },\n\n  platform: {\n    name: 'platform',\n    type: 'select',\n    label: t('Platform'),\n    options: platforms.map(({id, name}) => ({\n      value: id,\n      label: (\n        <PlatformWrapper key={id}>\n          <StyledPlatformIcon platform={id} />\n          {name}\n        </PlatformWrapper>\n      ),\n    })),\n    help: t('The primary platform for this project'),\n    filterOption: createFilter({\n      stringify: option => {\n        const matchedPlatform = platforms.find(({id}) => id === option.value);\n        return `${matchedPlatform?.name} ${option.value}`;\n      },\n    }),\n  },\n\n  // TODO(recap): Move this to a separate page or debug files one, not general settings\n  recapServerUrl: {\n    name: 'recapServerUrl',\n    type: 'string',\n    placeholder: t('URL'),\n    label: t('Recap Server URL'),\n    help: t('URL to the Recap Server events should be polled from'),\n  },\n\n  recapServerToken: {\n    name: 'recapServerToken',\n    type: 'string',\n    placeholder: t('Token'),\n    label: t('Recap Server Token'),\n    help: t('Auth Token to the configured Recap Server'),\n  },\n\n  subjectPrefix: {\n    name: 'subjectPrefix',\n    type: 'string',\n    label: t('Subject Prefix'),\n    placeholder: t('e.g. [my-org]'),\n    help: t('Choose a custom prefix for emails from this project'),\n  },\n\n  resolveAge: {\n    name: 'resolveAge',\n    type: 'range',\n    allowedValues: RESOLVE_AGE_ALLOWED_VALUES,\n    label: t('Auto Resolve'),\n    help: t(\n      \"Automatically resolve an issue if it hasn't been seen for this amount of time\"\n    ),\n    formatLabel: val => {\n      val = Number(val);\n      if (val === 0) {\n        return t('Disabled');\n      }\n\n      if (val > 23 && val % 24 === 0) {\n        // Based on allowed values, val % 24 should always be true\n        val = val / 24;\n        return tn('%s day', '%s days', val);\n      }\n\n      return tn('%s hour', '%s hours', val);\n    },\n    saveOnBlur: false,\n    saveMessage: tct(\n      '[strong:Caution]: Enabling auto resolve will immediately resolve anything that has not been seen within this period of time. There is no undo!',\n      {\n        strong: <strong />,\n      }\n    ),\n    saveMessageAlertType: 'warning',\n  },\n  allowedDomains: {\n    name: 'allowedDomains',\n    type: 'string',\n    multiline: true,\n    autosize: true,\n    maxRows: 10,\n    rows: 1,\n    placeholder: t('https://example.com or example.com'),\n    label: t('Allowed Domains'),\n    help: t(\n      'Examples: https://example.com, *, *.example.com, *:80. Separate multiple entries with a newline'\n    ),\n    getValue: val => extractMultilineFields(val),\n    setValue: val => convertMultilineFieldValue(val),\n  },\n  scrapeJavaScript: {\n    name: 'scrapeJavaScript',\n    type: 'boolean',\n    // if this is off for the organization, it cannot be enabled for the project\n    disabled: ({organization, name}) => !organization[name],\n    disabledReason: ORG_DISABLED_REASON,\n    // `props` are the props given to FormField\n    setValue: (val, props) => props.organization && props.organization[props.name] && val,\n    label: t('Enable JavaScript source fetching'),\n    help: t('Allow Sentry to scrape missing JavaScript source context when possible'),\n  },\n  securityToken: {\n    name: 'securityToken',\n    type: 'string',\n    label: t('Security Token'),\n    help: t(\n      'Outbound requests matching Allowed Domains will have the header \"{token_header}: {token}\" appended'\n    ),\n    setValue: value => getDynamicText({value, fixed: '__SECURITY_TOKEN__'}),\n  },\n  securityTokenHeader: {\n    name: 'securityTokenHeader',\n    type: 'string',\n    placeholder: t('X-Sentry-Token'),\n    label: t('Security Token Header'),\n    help: t(\n      'Outbound requests matching Allowed Domains will have the header \"{token_header}: {token}\" appended'\n    ),\n  },\n  verifySSL: {\n    name: 'verifySSL',\n    type: 'boolean',\n    label: t('Verify TLS/SSL'),\n    help: t('Outbound requests will verify TLS (sometimes known as SSL) connections'),\n  },\n};\n","/**\n * Transforms the given string to a slugified version. (e.g. \"My Project\" => \"my-project\")\n *\n * Allows only lowercase alphanumeric values, hyphens, and underscores (should match backend validation rules).\n * Normalizes special characters to a-z where applicable (accents, ligatures, etc).\n * Converts spaces to hyphens.\n */\nexport default function slugify(str: string): string {\n  return str\n    .normalize('NFKD') // Converts accents/ligatures/etc to latin alphabet\n    .toLowerCase()\n    .replace(' ', '-')\n    .replace(/[^a-z0-9-_]/g, ''); // Remove all invalid characters\n}\n"],"names":["route","RESOLVE_AGE_ALLOWED_VALUES","getResolveAgeAllowedValues","i","values","push","ORG_DISABLED_REASON","t","PlatformWrapper","_styled","target","name","styles","StyledPlatformIcon","PlatformIcon","space","fields","type","required","label","placeholder","help","transformInput","slugify","getData","data","slug","saveOnBlur","saveMessageAlertType","saveMessage","platform","options","platforms","map","_ref","id","value","_jsxs","children","_jsx","filterOption","createFilter","stringify","option","matchedPlatform","find","_ref2","recapServerUrl","recapServerToken","subjectPrefix","resolveAge","allowedValues","formatLabel","val","Number","tn","tct","strong","allowedDomains","multiline","autosize","maxRows","rows","getValue","extractMultilineFields","setValue","convertMultilineFieldValue","scrapeJavaScript","disabled","_ref3","organization","disabledReason","props","securityToken","getDynamicText","fixed","securityTokenHeader","verifySSL","str","normalize","toLowerCase","replace"],"sourceRoot":""}