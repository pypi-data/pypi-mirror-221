{"version":3,"file":"chunks/app_views_releases_detail_commitsAndFiles_filesChanged_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/fileIcon.tsx","webpack:///./app/components/listGroup.tsx","webpack:///./app/components/fileChange.tsx","webpack:///./app/views/releases/detail/commitsAndFiles/filesChanged.tsx"],"sourcesContent":["import {IconFile} from 'sentry/icons';\nimport {fileExtensionToPlatform, getFileExtension} from 'sentry/utils/fileExtension';\nimport theme from 'sentry/utils/theme';\n\ntype Props = {\n  fileName: string;\n  className?: string;\n  size?: string;\n};\n\nfunction FileIcon({fileName, size: providedSize = 'sm', className}: Props) {\n  const fileExtension = getFileExtension(fileName);\n  const iconName = fileExtension ? fileExtensionToPlatform(fileExtension) : null;\n  const size = theme.iconSizes[providedSize] ?? providedSize;\n\n  if (!iconName) {\n    return <IconFile size={size} className={className} />;\n  }\n\n  return (\n    <img\n      src={require(`platformicons/svg/${iconName}.svg`)}\n      width={size}\n      height={size}\n      className={className}\n    />\n  );\n}\n\nexport default FileIcon;\n","import styled from '@emotion/styled';\n\nimport {space} from 'sentry/styles/space';\n\ntype ListGroupProps = {\n  striped?: boolean;\n};\n\ntype ListGroupItemProps = {\n  centered?: boolean;\n};\n\nconst ListGroupItem = styled('li')<ListGroupItemProps>`\n  position: relative;\n  display: block;\n  min-height: 36px;\n  border: 1px solid ${p => p.theme.border};\n\n  padding: ${space(0.5)} ${space(1.5)};\n\n  margin-bottom: -1px;\n  ${p => (p.centered ? 'text-align: center;' : '')}\n\n  &:first-child {\n    border-top-left-radius: ${p => p.theme.borderRadius};\n    border-top-right-radius: ${p => p.theme.borderRadius};\n  }\n  &:last-child {\n    border-bottom-left-radius: ${p => p.theme.borderRadius};\n    border-bottom-right-radius: ${p => p.theme.borderRadius};\n  }\n`;\n\nconst ListGroup = styled('ul')<ListGroupProps>`\n  box-shadow: 0 1px 0px rgba(0, 0, 0, 0.03);\n  background: ${p => p.theme.background};\n  padding: 0;\n  margin: 0;\n\n  ${p =>\n    p.striped\n      ? `\n    & > li:nth-child(odd) {\n      background: ${p.theme.backgroundSecondary};\n    }\n  `\n      : ''}\n`;\n\nexport {ListGroup, ListGroupItem};\n","import styled from '@emotion/styled';\n\nimport AvatarList from 'sentry/components/avatar/avatarList';\nimport FileIcon from 'sentry/components/fileIcon';\nimport {ListGroupItem} from 'sentry/components/listGroup';\nimport TextOverflow from 'sentry/components/textOverflow';\nimport {space} from 'sentry/styles/space';\nimport {AvatarUser, CommitAuthor} from 'sentry/types';\n\ntype Props = {\n  authors: CommitAuthor[];\n  filename: string;\n  className?: string;\n};\n\nfunction FileChange({filename, authors, className}: Props) {\n  return (\n    <FileItem className={className}>\n      <Filename>\n        <StyledFileIcon fileName={filename} />\n        <TextOverflow>{filename}</TextOverflow>\n      </Filename>\n      <div>\n        <AvatarList\n          users={authors as AvatarUser[]}\n          avatarSize={25}\n          typeMembers=\"authors\"\n        />\n      </div>\n    </FileItem>\n  );\n}\n\nconst FileItem = styled(ListGroupItem)`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst Filename = styled('div')`\n  font-size: ${p => p.theme.fontSizeMedium};\n  display: grid;\n  gap: ${space(1)};\n  margin-right: ${space(3)};\n  align-items: center;\n  grid-template-columns: max-content 1fr;\n`;\n\nconst StyledFileIcon = styled(FileIcon)`\n  color: ${p => p.theme.gray200};\n  border-radius: 3px;\n`;\n\nexport default FileChange;\n","import {Fragment} from 'react';\nimport {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\nimport {Location} from 'history';\n\nimport FileChange from 'sentry/components/fileChange';\nimport * as Layout from 'sentry/components/layouts/thirds';\nimport LoadingIndicator from 'sentry/components/loadingIndicator';\nimport Pagination from 'sentry/components/pagination';\nimport Panel from 'sentry/components/panels/panel';\nimport PanelBody from 'sentry/components/panels/panelBody';\nimport PanelHeader from 'sentry/components/panels/panelHeader';\nimport {t, tn} from 'sentry/locale';\nimport {CommitFile, Organization, Project, Repository} from 'sentry/types';\nimport {formatVersion} from 'sentry/utils/formatters';\nimport routeTitleGen from 'sentry/utils/routeTitle';\nimport DeprecatedAsyncView from 'sentry/views/deprecatedAsyncView';\n\nimport {getFilesByRepository, getQuery, getReposToRender} from '../utils';\n\nimport EmptyState from './emptyState';\nimport RepositorySwitcher from './repositorySwitcher';\nimport withReleaseRepos from './withReleaseRepos';\n\ntype Props = RouteComponentProps<{release: string}, {}> & {\n  location: Location;\n  orgSlug: Organization['slug'];\n  projectSlug: Project['slug'];\n  release: string;\n  releaseRepos: Repository[];\n  activeReleaseRepo?: Repository;\n} & DeprecatedAsyncView['props'];\n\ntype State = {\n  fileList: CommitFile[];\n} & DeprecatedAsyncView['state'];\n\nclass FilesChanged extends DeprecatedAsyncView<Props, State> {\n  getTitle() {\n    const {params, orgSlug, projectSlug} = this.props;\n\n    return routeTitleGen(\n      t('Files Changed - Release %s', formatVersion(params.release)),\n      orgSlug,\n      false,\n      projectSlug\n    );\n  }\n\n  getDefaultState(): State {\n    return {\n      ...super.getDefaultState(),\n      fileList: [],\n    };\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (prevProps.activeReleaseRepo?.name !== this.props.activeReleaseRepo?.name) {\n      this.remountComponent();\n      return;\n    }\n    super.componentDidUpdate(prevProps, prevState);\n  }\n\n  getEndpoints(): ReturnType<DeprecatedAsyncView['getEndpoints']> {\n    const {activeReleaseRepo: activeRepository, location, release, orgSlug} = this.props;\n\n    const query = getQuery({location, activeRepository});\n\n    return [\n      [\n        'fileList',\n        `/organizations/${orgSlug}/releases/${encodeURIComponent(release)}/commitfiles/`,\n        {query},\n      ],\n    ];\n  }\n\n  renderLoading() {\n    return this.renderBody();\n  }\n\n  renderContent() {\n    const {fileList, fileListPageLinks, loading} = this.state;\n    const {activeReleaseRepo} = this.props;\n\n    if (loading) {\n      return <LoadingIndicator />;\n    }\n\n    if (!fileList.length) {\n      return (\n        <EmptyState>\n          {!activeReleaseRepo\n            ? t('There are no changed files associated with this release.')\n            : t(\n                'There are no changed files associated with this release in the %s repository.',\n                activeReleaseRepo.name\n              )}\n        </EmptyState>\n      );\n    }\n\n    const filesByRepository = getFilesByRepository(fileList);\n    const reposToRender = getReposToRender(Object.keys(filesByRepository));\n\n    return (\n      <Fragment>\n        {reposToRender.map(repoName => {\n          const repoData = filesByRepository[repoName];\n          const files = Object.keys(repoData);\n          const fileCount = files.length;\n          return (\n            <Panel key={repoName}>\n              <PanelHeader>\n                <span>{repoName}</span>\n                <span>{tn('%s file changed', '%s files changed', fileCount)}</span>\n              </PanelHeader>\n              <PanelBody>\n                {files.map(filename => {\n                  const {authors} = repoData[filename];\n                  return (\n                    <StyledFileChange\n                      key={filename}\n                      filename={filename}\n                      authors={Object.values(authors)}\n                    />\n                  );\n                })}\n              </PanelBody>\n            </Panel>\n          );\n        })}\n        <Pagination pageLinks={fileListPageLinks} />\n      </Fragment>\n    );\n  }\n\n  renderBody() {\n    const {activeReleaseRepo, releaseRepos, router, location} = this.props;\n    return (\n      <Fragment>\n        {releaseRepos.length > 1 && (\n          <RepositorySwitcher\n            repositories={releaseRepos}\n            activeRepository={activeReleaseRepo}\n            location={location}\n            router={router}\n          />\n        )}\n        {this.renderContent()}\n      </Fragment>\n    );\n  }\n\n  renderComponent() {\n    return (\n      <Layout.Body>\n        <Layout.Main fullWidth>{super.renderComponent()}</Layout.Main>\n      </Layout.Body>\n    );\n  }\n}\n\nexport default withReleaseRepos(FilesChanged);\n\nconst StyledFileChange = styled(FileChange)`\n  border-radius: 0;\n  border-left: none;\n  border-right: none;\n  border-top: none;\n  :last-child {\n    border: none;\n    border-radius: 0;\n  }\n`;\n"],"names":["FileIcon","_ref","fileName","size","providedSize","className","fileExtension","getFileExtension","iconName","fileExtensionToPlatform","theme","iconSizes","_jsx","src","require","width","height","IconFile","displayName","ListGroupItem","_styled","target","p","border","space","centered","borderRadius","FileChange","filename","authors","_jsxs","FileItem","children","Filename","StyledFileIcon","TextOverflow","AvatarList","users","avatarSize","typeMembers","name","styles","fontSizeMedium","gray200","FilesChanged","DeprecatedAsyncView","getTitle","params","orgSlug","projectSlug","this","props","routeTitleGen","t","formatVersion","release","getDefaultState","super","fileList","componentDidUpdate","prevProps","prevState","activeReleaseRepo","remountComponent","getEndpoints","activeRepository","location","query","getQuery","encodeURIComponent","renderLoading","renderBody","renderContent","fileListPageLinks","loading","state","LoadingIndicator","length","EmptyState","filesByRepository","getFilesByRepository","reposToRender","getReposToRender","Object","keys","Fragment","map","repoName","repoData","files","fileCount","Panel","PanelHeader","tn","PanelBody","StyledFileChange","values","Pagination","pageLinks","releaseRepos","router","RepositorySwitcher","repositories","renderComponent","Layout","fullWidth","withReleaseRepos"],"sourceRoot":""}