{"version":3,"file":"chunks/app_views_settings_organizationSecurityAndPrivacy_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/data/forms/organizationSecurityAndPrivacyGroups.tsx","webpack:///./app/views/settings/organizationSecurityAndPrivacy/index.tsx"],"sourcesContent":["import {JsonFormObject} from 'sentry/components/forms/types';\nimport {t} from 'sentry/locale';\nimport {convertMultilineFieldValue, extractMultilineFields} from 'sentry/utils';\nimport {\n  formatStoreCrashReports,\n  getStoreCrashReportsValues,\n  SettingScope,\n} from 'sentry/utils/crashReports';\n\n// Export route to make these forms searchable by label/help\nexport const route = '/settings/:orgId/security-and-privacy/';\nconst formGroups: JsonFormObject[] = [\n  {\n    title: t('Security & Privacy'),\n    fields: [\n      {\n        name: 'require2FA',\n        type: 'boolean',\n        label: t('Require Two-Factor Authentication'),\n        help: t('Require and enforce two-factor authentication for all members'),\n        'aria-label': t(\n          'Enable to require and enforce two-factor authentication for all members'\n        ),\n        confirm: {\n          true: t(\n            'This will remove all members without two-factor authentication from your organization. It will also send them an email to setup 2FA and reinstate their access and settings. Do you want to continue?'\n          ),\n          false: t(\n            'Are you sure you want to allow users to access your organization without having two-factor authentication enabled?'\n          ),\n        },\n      },\n      {\n        name: 'requireEmailVerification',\n        type: 'boolean',\n        label: t('Require Email Verification'),\n        help: t('Require and enforce email address verification for all members'),\n        visible: ({features}) => features.has('required-email-verification'),\n        confirm: {\n          true: t(\n            'This will remove all members whose email addresses are not verified from your organization. It will also send them an email to verify their address and reinstate their access and settings. Do you want to continue?'\n          ),\n          false: t(\n            'Are you sure you want to allow users to access your organization without verifying their email address?'\n          ),\n        },\n      },\n      {\n        name: 'allowSharedIssues',\n        type: 'boolean',\n\n        label: t('Allow Shared Issues'),\n        help: t('Enable sharing of limited details on issues to anonymous users'),\n        confirm: {\n          true: t('Are you sure you want to allow sharing issues to anonymous users?'),\n        },\n      },\n      {\n        name: 'enhancedPrivacy',\n        type: 'boolean',\n\n        label: t('Enhanced Privacy'),\n        help: t(\n          'Enable enhanced privacy controls to limit personally identifiable information (PII) as well as source code in things like notifications'\n        ),\n        confirm: {\n          false: t(\n            'Disabling this can have privacy implications for ALL projects, are you sure you want to continue?'\n          ),\n        },\n      },\n      {\n        name: 'scrapeJavaScript',\n        type: 'boolean',\n        confirm: {\n          false: t(\n            \"Are you sure you want to disable sourcecode fetching for JavaScript events? This will affect Sentry's ability to aggregate issues if you're not already uploading sourcemaps as artifacts.\"\n          ),\n        },\n        label: t('Allow JavaScript Source Fetching'),\n        help: t('Allow Sentry to scrape missing JavaScript source context when possible'),\n      },\n      {\n        name: 'storeCrashReports',\n        type: 'select',\n        label: t('Store Native Crash Reports'),\n        help: t(\n          'Store native crash reports such as Minidumps for improved processing and download in issue details'\n        ),\n        visible: ({features}) => features.has('event-attachments'),\n        // HACK: some organization can have limit of stored crash reports a number that's not in the options (legacy reasons),\n        // we therefore display it in a placeholder\n        placeholder: ({value}) => formatStoreCrashReports(value),\n        choices: () =>\n          getStoreCrashReportsValues(SettingScope.ORGANIZATION).map(value => [\n            value,\n            formatStoreCrashReports(value),\n          ]),\n      },\n      {\n        name: 'allowJoinRequests',\n        type: 'boolean',\n\n        label: t('Allow Join Requests'),\n        help: t('Allow users to request to join your organization'),\n        'aria-label': t('Enable to allow users to request to join your organization'),\n        confirm: {\n          true: t(\n            'Are you sure you want to allow users to request to join your organization?'\n          ),\n        },\n        visible: ({hasSsoEnabled}) => !hasSsoEnabled,\n      },\n    ],\n  },\n  {\n    title: t('Data Scrubbing'),\n    fields: [\n      {\n        name: 'dataScrubber',\n        type: 'boolean',\n        label: t('Require Data Scrubber'),\n        help: t('Require server-side data scrubbing be enabled for all projects'),\n        'aria-label': t('Enable server-side data scrubbing'),\n        confirm: {\n          false: t(\n            'Disabling this can have privacy implications for ALL projects, are you sure you want to continue?'\n          ),\n        },\n      },\n      {\n        name: 'dataScrubberDefaults',\n        type: 'boolean',\n        label: t('Require Using Default Scrubbers'),\n        help: t(\n          'Require the default scrubbers be applied to prevent things like passwords and credit cards from being stored for all projects'\n        ),\n        'aria-label': t(\n          'Enable to apply default scrubbers to prevent things like passwords and credit cards from being stored'\n        ),\n        confirm: {\n          false: t(\n            'Disabling this can have privacy implications for ALL projects, are you sure you want to continue?'\n          ),\n        },\n      },\n      {\n        name: 'sensitiveFields',\n        type: 'string',\n        multiline: true,\n        autosize: true,\n        maxRows: 10,\n        rows: 1,\n        placeholder: 'e.g. email',\n        label: t('Global Sensitive Fields'),\n        help: t(\n          'Additional field names to match against when scrubbing data for all projects. Separate multiple entries with a newline.'\n        ),\n        'aria-label': t(\n          'Enter additional field names to match against when scrubbing data for all projects. Separate multiple entries with a newline.'\n        ),\n        extraHelp: t(\n          'Note: These fields will be used in addition to project specific fields.'\n        ),\n        getValue: val => extractMultilineFields(val),\n        setValue: val => convertMultilineFieldValue(val),\n      },\n      {\n        name: 'safeFields',\n        type: 'string',\n        multiline: true,\n        autosize: true,\n        maxRows: 10,\n        rows: 1,\n        placeholder: t('e.g. business-email'),\n        label: t('Global Safe Fields'),\n        help: t(\n          'Field names which data scrubbers should ignore. Separate multiple entries with a newline.'\n        ),\n        'aria-label': t(\n          'Enter field names which data scrubbers should ignore. Separate multiple entries with a newline.'\n        ),\n        extraHelp: t(\n          'Note: These fields will be used in addition to project specific fields'\n        ),\n        getValue: val => extractMultilineFields(val),\n        setValue: val => convertMultilineFieldValue(val),\n      },\n      {\n        name: 'scrubIPAddresses',\n        type: 'boolean',\n        label: t('Prevent Storing of IP Addresses'),\n        help: t(\n          'Preventing IP addresses from being stored for new events on all projects'\n        ),\n        'aria-label': t(\n          'Enable to prevent IP addresses from being stored for new events'\n        ),\n        confirm: {\n          false: t(\n            'Disabling this can have privacy implications for ALL projects, are you sure you want to continue?'\n          ),\n        },\n      },\n    ],\n  },\n];\n\nexport default formGroups;\n","import {Fragment, useEffect, useState} from 'react';\n\nimport {addErrorMessage} from 'sentry/actionCreators/indicator';\nimport {updateOrganization} from 'sentry/actionCreators/organizations';\nimport Form from 'sentry/components/forms/form';\nimport JsonForm from 'sentry/components/forms/jsonForm';\nimport SentryDocumentTitle from 'sentry/components/sentryDocumentTitle';\nimport organizationSecurityAndPrivacyGroups from 'sentry/data/forms/organizationSecurityAndPrivacyGroups';\nimport {t} from 'sentry/locale';\nimport {AuthProvider, Organization} from 'sentry/types';\nimport useApi from 'sentry/utils/useApi';\nimport useOrganization from 'sentry/utils/useOrganization';\nimport SettingsPageHeader from 'sentry/views/settings/components/settingsPageHeader';\n\nimport {DataScrubbing} from '../components/dataScrubbing';\n\nexport default function OrganizationSecurityAndPrivacyContent() {\n  const api = useApi();\n  const organization = useOrganization();\n  const [authProvider, setAuthProvider] = useState<AuthProvider | null>(null);\n\n  useEffect(() => {\n    async function fetchAuthProvider() {\n      try {\n        const response: AuthProvider = await api.requestPromise(\n          `/organizations/${organization.slug}/auth-provider/`\n        );\n        setAuthProvider(response);\n      } catch {\n        addErrorMessage(t('Unable to fetch authentication provider'));\n      }\n    }\n\n    fetchAuthProvider();\n  }, [organization.slug, api]);\n\n  const initialData = organization;\n  const endpoint = `/organizations/${organization.slug}/`;\n  const features = new Set(organization.features);\n  const relayPiiConfig = organization.relayPiiConfig;\n  const title = t('Security & Privacy');\n\n  function handleUpdateOrganization(data: Organization) {\n    // This will update OrganizationStore (as well as OrganizationsStore\n    // which is slightly incorrect because it has summaries vs a detailed org)\n    updateOrganization(data);\n  }\n\n  return (\n    <Fragment>\n      <SentryDocumentTitle title={title} orgSlug={organization.slug} />\n      <SettingsPageHeader title={title} />\n      <Form\n        data-test-id=\"organization-settings-security-and-privacy\"\n        apiMethod=\"PUT\"\n        apiEndpoint={endpoint}\n        initialData={initialData}\n        additionalFieldProps={{hasSsoEnabled: !!authProvider}}\n        onSubmitSuccess={handleUpdateOrganization}\n        onSubmitError={() => addErrorMessage(t('Unable to save change'))}\n        saveOnBlur\n        allowUndo\n      >\n        <JsonForm\n          features={features}\n          forms={organizationSecurityAndPrivacyGroups}\n          disabled={!organization.access.includes('org:write')}\n        />\n      </Form>\n      <DataScrubbing\n        additionalContext={t('These rules can be configured for each project.')}\n        endpoint={endpoint}\n        relayPiiConfig={relayPiiConfig}\n        organization={organization}\n        disabled={!organization.access.includes('org:write')}\n        onSubmitSuccess={data => handleUpdateOrganization({...organization, ...data})}\n      />\n    </Fragment>\n  );\n}\n"],"names":["route","title","t","fields","name","type","label","help","confirm","true","false","visible","_ref","features","has","_ref2","placeholder","_ref3","value","formatStoreCrashReports","choices","getStoreCrashReportsValues","SettingScope","ORGANIZATION","map","_ref4","hasSsoEnabled","multiline","autosize","maxRows","rows","extraHelp","getValue","val","extractMultilineFields","setValue","convertMultilineFieldValue","OrganizationSecurityAndPrivacyContent","api","useApi","organization","useOrganization","authProvider","setAuthProvider","useState","useEffect","async","response","requestPromise","slug","addErrorMessage","fetchAuthProvider","initialData","endpoint","Set","relayPiiConfig","handleUpdateOrganization","data","updateOrganization","_jsxs","Fragment","children","_jsx","SentryDocumentTitle","orgSlug","SettingsPageHeader","Form","apiMethod","apiEndpoint","additionalFieldProps","onSubmitSuccess","onSubmitError","saveOnBlur","allowUndo","JsonForm","forms","organizationSecurityAndPrivacyGroups","disabled","access","includes","DataScrubbing","additionalContext","displayName"],"sourceRoot":""}