{"version":3,"file":"chunks/app_components_events_rrwebReplayer_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"smBAaA,SAASA,EAA0BC,GAA6B,IAA5B,OAACC,EAAM,UAAEC,GAAiBF,EAC5D,MAAMG,GAAWC,EAAAA,EAAAA,QAAuB,MAoBxC,OAFAC,EAAAA,EAAAA,YAAU,UAfOC,IAAXL,GAIqB,OAArBE,EAASI,SAKb,IAAIC,EAAAA,EAAY,CACdC,OAAQN,EAASI,QACjBG,MAAO,CAACT,SAAQU,UAAU,IAIG,GAAE,CAACV,KAE7BW,EAAAA,EAAAA,IAAA,OAAKC,IAAKV,EAAUD,UAAWA,GACxC,CAtBSH,EAA0Be,YAAA,6BAwBnC,MAyRA,GAzR0BC,EAAAA,EAAAA,GAAOhB,EAA0B,CAAAU,OAAA,aAAjCM,CAAkC,w2BAgB1CC,GAAKA,EAAEC,MAAMC,WAAS,0aAmBpBF,GAAKA,EAAEC,MAAME,WAAS,qoBA+ClBH,GAAKA,EAAEC,MAAMG,QAAM,sYA2B5BJ,GAAKA,EAAEC,MAAMI,OAAOC,SAAO,sDAM3BC,EAAAA,EAAAA,GAAM,GAAE,kBACLP,GAAKA,EAAEC,MAAMO,YAAU,gDAEjBR,GAAKA,EAAEC,MAAMG,QAAM,6CAG9BJ,GAAKA,EAAEC,MAAMQ,WAAS,8IAYtBT,GAAKA,EAAEC,MAAMQ,WAAS,0GAWfT,GAAKA,EAAEC,MAAMS,aAAW,iOAqB1BV,GAAKA,EAAEC,MAAME,WAAS,0IAUtBH,GAAKA,EAAEC,MAAMC,WAAS,gGAO7BK,EAAAA,EAAAA,GAAM,KAAK,yDAGLP,GAAKA,EAAEC,MAAMU,eAAa,wCAI9BX,GAAKA,EAAEC,MAAMQ,WAAS,qMAcrBT,GAAKA,EAAEC,MAAMQ,WAAS,qDAKlBT,GAAKA,EAAEC,MAAMS,aAAW,+CAI7BV,GAAKA,EAAEC,MAAMW,OAAK,gBACbZ,GAAKA,EAAEC,MAAMY,QAAM,sfAgDbb,GAAKA,EAAEC,MAAMG,QAAM,sIAUzBJ,GAAKA,EAAEC,MAAMG,QAAM,8EAKnBJ,GAAKA,EAAEC,MAAMY,QAAM,iCCzSrC,SAASC,EAAa9B,GAAgB,IAAf,KAAC+B,GAAY/B,EAClC,MAAOC,EAAQ+B,IAAaC,EAAAA,EAAAA,YAiC5B,OAFA5B,EAAAA,EAAAA,YAAU,KA7BS6B,WACjB,IAaE,MAAMC,QAA4BC,QAAQC,IACxCN,EAAKO,KAAIJ,UACP,MAAMK,QAAaC,MAAMC,GAGzB,aAFmBF,EAAKG,QAEZzC,MAAM,KAItB+B,EAAUG,EAAKQ,OACjB,CAAE,MAAOC,GACPC,EAAAA,GAAwBD,EAC1B,GAGmBE,EAAY,GAAE,CAACf,KAE7BnB,EAAAA,EAAAA,IAACmC,EAAiB,CAAC9C,OAAQA,GACpC,CAnCS6B,EAAahB,YAAA,gBAqCtB,S","sources":["webpack:///./app/components/events/rrwebReplayer/baseRRWebReplayer.tsx","webpack:///./app/components/events/rrwebReplayer/index.tsx"],"sourcesContent":["import {useEffect, useRef} from 'react';\nimport styled from '@emotion/styled';\nimport RRWebPlayer from '@sentry-internal/rrweb-player';\n\nimport {space} from 'sentry/styles/space';\n\ntype RRWebEvents = ConstructorParameters<typeof RRWebPlayer>[0]['props']['events'];\n\ninterface Props {\n  className?: string;\n  events?: RRWebEvents;\n}\n\nfunction BaseRRWebReplayerComponent({events, className}: Props) {\n  const playerEl = useRef<HTMLDivElement>(null);\n\n  const initPlayer = () => {\n    if (events === undefined) {\n      return;\n    }\n\n    if (playerEl.current === null) {\n      return;\n    }\n\n    // eslint-disable-next-line no-new\n    new RRWebPlayer({\n      target: playerEl.current,\n      props: {events, autoPlay: false},\n    });\n  };\n\n  useEffect(() => void initPlayer(), [events]);\n\n  return <div ref={playerEl} className={className} />;\n}\n\nconst BaseRRWebReplayer = styled(BaseRRWebReplayerComponent)`\n  .replayer-mouse {\n    position: absolute;\n    width: 32px;\n    height: 32px;\n    transition: left 0.05s linear, top 0.05s linear;\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTkiIHZpZXdCb3g9IjAgMCAxMiAxOSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgMTZWMEwxMS42IDExLjZINC44TDQuNCAxMS43TDAgMTZaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNOS4xIDE2LjdMNS41IDE4LjJMMC43OTk5OTkgNy4xTDQuNSA1LjZMOS4xIDE2LjdaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNNC42NzQ1MSA4LjYxODUxTDIuODMwMzEgOS4zOTI3MUw1LjkyNzExIDE2Ljc2OTVMNy43NzEzMSAxNS45OTUzTDQuNjc0NTEgOC42MTg1MVoiIGZpbGw9ImJsYWNrIi8+CjxwYXRoIGQ9Ik0xIDIuNFYxMy42TDQgMTAuN0w0LjQgMTAuNkg5LjJMMSAyLjRaIiBmaWxsPSJibGFjayIvPgo8L3N2Zz4K');\n    border-color: transparent;\n  }\n  .replayer-mouse:after {\n    content: '';\n    display: inline-block;\n    width: 32px;\n    height: 32px;\n    background: ${p => p.theme.purple300};\n    border-radius: 100%;\n    transform: translate(-50%, -50%);\n    opacity: 0.3;\n  }\n  .replayer-mouse.active:after {\n    animation: click 0.2s ease-in-out 1;\n  }\n  .replayer-mouse.touch-device {\n    background-image: none;\n    width: 70px;\n    height: 70px;\n    border-radius: 100%;\n    margin-left: -37px;\n    margin-top: -37px;\n    border: 4px solid rgba(73, 80, 246, 0);\n    transition: left 0s linear, top 0s linear, border-color 0.2s ease-in-out;\n  }\n  .replayer-mouse.touch-device.touch-active {\n    border-color: ${p => p.theme.purple200};\n    transition: left 0.25s linear, top 0.25s linear, border-color 0.2s ease-in-out;\n  }\n  .replayer-mouse.touch-device:after {\n    opacity: 0;\n  }\n  .replayer-mouse.touch-device.active:after {\n    animation: touch-click 0.2s ease-in-out 1;\n  }\n  .replayer-mouse-tail {\n    position: absolute;\n    pointer-events: none;\n  }\n  @keyframes click {\n    0% {\n      opacity: 0.3;\n      width: 20px;\n      height: 20px;\n    }\n    50% {\n      opacity: 0.5;\n      width: 10px;\n      height: 10px;\n    }\n  }\n  @keyframes touch-click {\n    0% {\n      opacity: 0;\n      width: 20px;\n      height: 20px;\n    }\n    50% {\n      opacity: 0.5;\n      width: 10px;\n      height: 10px;\n    }\n  }\n  .replayer-wrapper > iframe {\n    border: none;\n  }\n  .rr-player {\n    width: auto !important;\n    height: auto !important;\n  }\n  .rr-player__frame {\n    width: 100% !important;\n    border-radius: 3px 3px 0 0;\n    border: 1px solid ${p => p.theme.border};\n    overflow: hidden;\n  }\n\n  .rr-player iframe {\n    width: 100% !important;\n    height: 100% !important;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border: 0;\n  }\n\n  .replayer-wrapper {\n    transform: scale(0.6) translate(0, 0) !important;\n    transform-origin: top left;\n    width: 166.66%;\n    height: 166.66%;\n    overflow: hidden;\n    position: relative;\n    box-shadow: inset 0 -1px 3px rgba(0, 0, 0, 0.08);\n  }\n\n  .replayer-mouse,\n  .replayer-mouse:after {\n    z-index: ${p => p.theme.zIndex.tooltip};\n  }\n\n  .rr-controller {\n    width: 100%;\n    display: block;\n    padding: ${space(2)} 0;\n    background: ${p => p.theme.background};\n    border-radius: 0 0 3px 3px;\n    border: 1px solid ${p => p.theme.border};\n    border-top: none;\n    position: relative;\n    color: ${p => p.theme.textColor};\n  }\n\n  .rr-timeline {\n    width: 100%;\n    display: grid;\n    grid-template-columns: 90px 1fr 90px;\n    align-items: center;\n  }\n\n  .rr-timeline__time {\n    text-align: center;\n    color: ${p => p.theme.textColor};\n  }\n\n  .rr-progress {\n    width: 100%;\n    height: 12px;\n    position: relative;\n    cursor: pointer;\n\n    &:before {\n      content: '';\n      background: ${p => p.theme.innerBorder};\n      border-radius: 3px;\n      display: block;\n      height: 6px;\n      position: absolute;\n      left: 0;\n      right: 0;\n      top: 3px;\n    }\n  }\n\n  .rr-progress.disabled {\n    cursor: not-allowed;\n  }\n\n  .rr-progress__step {\n    height: 6px;\n    position: absolute;\n    left: 0;\n    top: 3px;\n    border-radius: 3px;\n    background: ${p => p.theme.purple200};\n  }\n\n  .rr-progress__handler {\n    width: 20px;\n    height: 20px;\n    border-radius: 50%;\n    position: absolute;\n    top: 6px;\n    transform: translate(-50%, -50%);\n    background: ${p => p.theme.purple300};\n  }\n\n  .rr-controller__btns {\n    display: grid;\n    grid-auto-flow: column;\n    grid-auto-columns: max-content;\n    gap: ${space(0.75)};\n    align-items: center;\n    justify-content: center;\n    font-size: ${p => p.theme.fontSizeSmall};\n  }\n\n  .rr-controller__btns button {\n    color: ${p => p.theme.textColor};\n    width: 28px;\n    height: 28px;\n    display: flex;\n    padding: 0;\n    align-items: center;\n    justify-content: center;\n    background: none;\n    border: none;\n    border-radius: 50%;\n    cursor: pointer;\n    transition: background 200ms ease;\n\n    > svg {\n      fill: ${p => p.theme.textColor};\n    }\n  }\n\n  .rr-controller__btns button:active {\n    background: ${p => p.theme.innerBorder};\n  }\n\n  .rr-controller__btns button.active {\n    color: ${p => p.theme.white};\n    background: ${p => p.theme.active};\n  }\n\n  .rr-controller__btns button:disabled {\n    cursor: not-allowed;\n  }\n\n  .switch {\n    height: 1em;\n    display: flex;\n    align-items: center;\n  }\n\n  .switch.disabled {\n    opacity: 0.5;\n  }\n\n  .label {\n    margin: 0 8px;\n  }\n\n  .switch input[type='checkbox'] {\n    position: absolute;\n    visibility: hidden;\n  }\n\n  .switch label {\n    width: 32px;\n    height: 16px;\n    position: relative;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    margin: 0;\n    padding: 2px 3px;\n  }\n\n  .switch.disabled label {\n    cursor: not-allowed;\n  }\n\n  .switch label:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    border: 1px solid ${p => p.theme.border};\n    border-radius: 16px;\n  }\n\n  .switch label:after {\n    content: '';\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    transition: all 200ms ease;\n    background: ${p => p.theme.border};\n    z-index: 2;\n  }\n\n  .switch input[type='checkbox']:checked + label:after {\n    background: ${p => p.theme.active};\n    transform: translateX(16px);\n  }\n`;\n\nexport default BaseRRWebReplayer;\n","import {useEffect, useState} from 'react';\nimport * as Sentry from '@sentry/react';\nimport type RRWebPlayer from '@sentry-internal/rrweb-player';\n\nimport BaseRRWebReplayer from './baseRRWebReplayer';\n\ntype RRWebEvents = ConstructorParameters<typeof RRWebPlayer>[0]['props']['events'];\ninterface Props {\n  urls: string[];\n  className?: string;\n}\n\n/**\n * Downloads a list of replay JSONs, merges the resulting events within the\n * JSON and passes it to the replayer.\n */\nfunction RRWebReplayer({urls}: Props) {\n  const [events, setEvents] = useState<RRWebEvents>();\n\n  const loadEvents = async () => {\n    try {\n      // rrweb's recordings consist of:\n      // 1) \"checkout\" phase that essentially records the entire DOM\n      // 2) incremental updates (DOM changes/events)\n      //\n      // The \"checkout\" phase can be configured to happen at a time interval or\n      // an event interval. We want to support SDK clients that record a\n      // single, large JSON, but also clients that record the checkout and\n      // incremental updates in separate JSON files.\n      //\n      // Below we download all of the JSON files and merge them into a large\n      // list of events for the replayer. The replayer supports having a\n      // list that has multiple \"checkouts\".\n      const data: RRWebEvents[] = await Promise.all(\n        urls.map(async url => {\n          const resp = await fetch(url);\n          const json = await resp.json();\n\n          return json.events;\n        })\n      );\n\n      setEvents(data.flat());\n    } catch (err) {\n      Sentry.captureException(err);\n    }\n  };\n\n  useEffect(() => void loadEvents(), [urls]);\n\n  return <BaseRRWebReplayer events={events} />;\n}\n\nexport default RRWebReplayer;\n"],"names":["BaseRRWebReplayerComponent","_ref","events","className","playerEl","useRef","useEffect","undefined","current","RRWebPlayer","target","props","autoPlay","_jsx","ref","displayName","_styled","p","theme","purple300","purple200","border","zIndex","tooltip","space","background","textColor","innerBorder","fontSizeSmall","white","active","RRWebReplayer","urls","setEvents","useState","async","data","Promise","all","map","resp","fetch","url","json","flat","err","Sentry","loadEvents","BaseRRWebReplayer"],"sourceRoot":""}