{% extends 'admin/change_form.html' %}

{% load i18n admin_urls static admin_modify %}
{% load edc_dashboard_extras edc_admin_modify edc_navbar_extras %}

{% block extrahead %}
  {{ block.super }}
    <script src="{% static 'fontawesomefree/js/all.min.js' %}"></script>
{% endblock %}

{% block extrastyle %}{{ block.super }}
{%  for css in edc_model_admin_css_theme_path %}
<link rel='stylesheet' type="text/css" href='{% static css %}'>
{% endfor %}
<!-- hack to fix wrapping radiolists -->
<style>
  form div.radiolist label {
    width: 600px;
}
</style>
{% endblock %}

{% block dark-mode-vars %}
<link rel="stylesheet" type="text/css" href="{% static 'edc_model_admin/css/dark_mode.css' %}">
{% endblock %}

{% block breadcrumbs %}{% endblock %}

{% block branding %}
  <button type="button" class="btn btn-{% if LIVE_SYSTEM and not DEBUG %}live{% else %}test{% endif %}">
    {% if LIVE_SYSTEM and not DEBUG %}{{ LIVE|title }}{% else %}{{ TEST|title }}{% endif %}
  </button>&nbsp;
  {{ protocol_name |default:project_name }}: {{ request.site.name|title }} ({{ request.site.id }}) &nbsp;
  <a href="/">{% translate 'Home' %}</a> &rsaquo;
    {% if site_url %}
        <a href="{{ site_url }}">{% translate 'Administration' %}</a>
    {% endif %}
&rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
&rsaquo; {% if has_view_permission %}<a href="{% url opts|admin_urlname:'changelist' %}">{{ form_verbose_name|default:opts.verbose_name_plural|capfirst }}</a>{% else %}{{ form_verbose_name|default:opts.verbose_name_plural|capfirst }}{% endif %}
&rsaquo; {% if add %}{% blocktranslate with name=form_verbose_name|default:opts.verbose_name %}Add {{ name }}{% endblocktranslate %}{% else %}{{ original|truncatewords:"18" }}{% endif %}

{% endblock %}

{% block welcome-msg %}{% endblock %}

{% block userlinks %}{% logout_row %}{% endblock %}


{% block object-tools-items %}
  {% if show_history_label %}
  <li>
    {% url opts|admin_urlname:'history' original.pk|admin_urlquote as history_url %}
    <a href="{% add_preserved_filters history_url %}" class="historylink">{% translate history_label|default:"History" %}</a>
  </li>
  {% endif %}
  {% if has_absolute_url %}<li><a href="{{ absolute_url }}" class="viewsitelink">{% translate view_on_site_label|default:"View on site" %}</a></li>{% endif %}
{% endblock %}

{% block form_top %}
  {% instructions %}
  {% additional_instructions %}
{% endblock %}

{% block field_sets %}
{% for fieldset in adminform %}
    {% for inline_admin_formset in inline_admin_formsets %}
      {% if inline_admin_formset.formset.insert_before_fieldset and inline_admin_formset.formset.insert_before_fieldset == fieldset.name %}
        {% include inline_admin_formset.opts.template %}
      {% endif  %}
    {% endfor %}
    {% include "admin/includes/fieldset.html" %}
{% endfor %}
{% endblock %}


{% block inline_field_sets %}
    <!--begin inline_field_sets -->
    {% for inline_admin_formset in inline_admin_formsets %}
      {% if not inline_admin_formset.formset.insert_before_fieldset %}
        {% include inline_admin_formset.opts.template %}
      {% endif  %}
    {% endfor %}
    <!--end inline_field_sets -->
{% endblock %}

{% block submit_buttons_top %}{% edc_submit_row cancel_url cancel_url_kwargs cancel_url_querystring_data %}{% endblock %}

{% block submit_buttons_bottom %}

  {% edc_submit_row cancel_url cancel_url_kwargs cancel_url_querystring_data show_delete %}

  {% revision_row %}

{% endblock submit_buttons_bottom %}
