EXEC sp_configure 'clr enabled', 1;
RECONFIGURE;

GO

EXEC sp_configure 'show advanced option', '1'
RECONFIGURE;

GO

EXEC sp_configure 'clr strict security', 0;
RECONFIGURE;

GO

IF EXISTS(select name from sys.assemblies where name = 'django_clr')
DROP ASSEMBLY django_clr;

GO

CREATE ASSEMBLY django_clr
FROM 0x4d5a90000300000004000000ffff0000b800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000e1fba0e00b409cd21b8014ccd21546869732070726f6772616d2063616e6e6f742062652072756e20696e20444f53206d6f64652e0d0d0a2400000000000000504500004c010300000000000000000000000000e00002210b0108000006000000060000000000004e240000002000000040000000004000002000000002000004000000000000000400000000000000008000000002000000000000030040850000100000100000000010000010000000000000100000000000000000000000002400004b00000000400000f002000000000000000000000000000000000000006000000c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002e7465787400000054040000002000000006000000020000000000000000000000000000200000602e72737263000000f0020000004000000004000000080000000000000000000000000000400000402e72656c6f6300000c0000000060000000020000000c0000000000000000000000000000400000420000000000000000000000000000000030240000000000004800000002000500c82000003803000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e02280500000a2a133002002900000001000011023906000000033a02000000162a03730200000a0a06026f0300000a3906000000173801000000162a000000133002002a00000001000011023906000000033a02000000162a0317730400000a0a06026f0300000a3906000000173801000000162a000042534a4201000100000000000c00000076342e302e33303331390000000005006c00000054010000237e0000c00100001001000023537472696e677300000000d00200000800000023555300d8020000100000002347554944000000e80200005000000023426c6f620000000000000002000010471502000900000000fa013300160000010000000500000002000000030000000400000006000000030000000100000001000000030000000000ff000100000000000600110026000a00520058000a007f0058000e008c0093000e00ac00ca000000000001000000000001000100010010000a0000001100010001005020000000008618410001000100582000000000960052001b00010090200000000096009a001b000300000001004700000002004a00000001004700000002004a00090041000100110041000a00110077000f001100410014002100410001002900410001002e003300260040000b00050060000b0005002100048000000000000000000000000000000000a10000000400000000000000000000004500ea000000000004000000000000000000000045009300000000000400000000000000000000004500f6000000000000000000003c4d6f64756c653e00446a616e676f0053716c46756e6374696f6e417474726962757465004d6963726f736f66742e53716c5365727665722e536572766572002e63746f72006576007061747465726e0052656765780053797374656d2e546578742e526567756c617245787072657373696f6e730049734d617463680052656765784f7074696f6e73004f626a6563740053797374656d0049526567657800646a616e676f5f636c720052756e74696d65436f6d7061746962696c6974794174747269627574650053797374656d2e52756e74696d652e436f6d70696c657253657276696365730053797374656d2e44617461006d73636f726c696200646a616e676f5f636c722e646c6c000000000320000000000062ae8b5a8a9f5a41885af6b5c3d4b0ca00032000010401000000042001010e042001020e062002010e110d050002080e0e04070112091e01000100540216577261704e6f6e457863657074696f6e5468726f77730108b77a5c561934e08900002824000000000000000000003e240000002000000000000000000000000000000000000000000000302400000000000000005f436f72446c6c4d61696e006d73636f7265652e646c6c0000000000ff2500204000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100100000001800008000000000000000000000000000000100010000003000008000000000000000000000000000000100000000004800000058400000980200000000000000000000980234000000560053005f00560045005200530049004f004e005f0049004e0046004f0000000000bd04effe00000100000000000000000000000000000000003f000000000000000400000002000000000000000000000000000000440000000100560061007200460069006c00650049006e0066006f00000000002400040000005400720061006e0073006c006100740069006f006e00000000007f00b004f8010000010053007400720069006e006700460069006c00650049006e0066006f000000d401000001003000300037006600300034006200300000001c000200010043006f006d006d0065006e007400730000002000000024000200010043006f006d00700061006e0079004e0061006d00650000000000200000002c0002000100460069006c0065004400650073006300720069007000740069006f006e000000000020000000300008000100460069006c006500560065007200730069006f006e000000000030002e0030002e0030002e003000000038000b00010049006e007400650072006e0061006c004e0061006d006500000064006a0061006e0067006f005f0063006c007200000000002800020001004c006500670061006c0043006f0070007900720069006700680074000000200000002c00020001004c006500670061006c00540072006100640065006d00610072006b007300000000002000000048000f0001004f0072006900670069006e0061006c00460069006c0065006e0061006d006500000064006a0061006e0067006f005f0063006c0072002e0064006c006c0000000000240002000100500072006f0064007500630074004e0061006d0065000000000020000000280002000100500072006f006400750063007400560065007200730069006f006e000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000000c000000503400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

WITH PERMISSION_SET = SAFE;

GO

CREATE OR ALTER FUNCTION [django_regex] ( @ev nvarchar(max), @pattern nvarchar(max))
RETURNS INT AS
EXTERNAL NAME django_clr.Django.Regex

GO

CREATE OR ALTER FUNCTION [django_iregex] ( @ev nvarchar(max), @pattern nvarchar(max))
RETURNS INT AS
EXTERNAL NAME django_clr.Django.IRegex
