/* empty css                             */import{l as j,aR as z,a6 as F,r as O,c as q,H as n,ao as H,b as J,w as G,af as K,v as s,A as _,B as M,q as i,F as P,j as o,y as a,N as m,J as c,x as l,k as Q,D as f,aS as v,I as y,R as T,a9 as W,aa as X}from"./index-8ef8125d.js";import{L as I,_ as S,B as b,a as Y}from"./ListItem-bba986fb.js";import{A as Z}from"./Alert-bdc4de4a.js";import{C as x}from"./Container-32d4da6e.js";import{c as ee,b as te}from"./VMenu-a805d6b6.js";import{V as ne,j as g}from"./VBtn-49774b84.js";import{a as ae}from"./VCard-e81591ba.js";import{V as ie}from"./VToolbar-b4c95f12.js";import"./VListItem-b049d12d.js";/* empty css              */import"./index-a4f9d82d.js";const se=p=>(W("data-v-753093ab"),p=p(),X(),p),oe=se(()=>y("br",null,null,-1)),re={class:"line-clamp-1"},de={class:"line-clamp-1"},le=j({__name:"Providers",setup(p){z();const $=F(),u=O([]),V=q(()=>Object.values(n.providerManifests).filter(t=>!t.hidden&&(t.multi_instance||!u.value.find(r=>r.domain==t.domain))).sort((t,r)=>(t.name||n.providerManifests[t.domain].name).toUpperCase()>(r.name||n.providerManifests[r.domain].name).toUpperCase()?1:-1)),A=n.subscribe(H.PROVIDERS_UPDATED,()=>{w()});J(A);const w=async function(){u.value=await n.getProviderConfigs()},B=function(t){n.removeProviderConfig(t),u.value=u.value.filter(r=>r.instance_id!=t)},h=function(t){$.push(`/settings/editprovider/${t}`)},D=function(t){$.push(`/settings/addprovider/${t.domain}`)},U=function(t){t.enabled=!t.enabled,n.saveProviderConfig(t.domain,{enabled:t.enabled},t.instance_id)},N=function(t){n.getData("config/providers/reload",{instance_id:t}).catch(r=>alert(r))},E=function(t){window.open(t,"_blank")};return G(()=>n.providers,t=>{t&&w()},{immediate:!0}),(t,r)=>{const R=K("hold");return s(!0),_(P,null,M(i(v),d=>(s(),_("section",{key:d,style:{"margin-bottom":"10px"}},[o(ie,{color:"transparent",density:"compact",class:"titlebar"},{title:a(()=>[m(c(t.$t("settings.settings"))+" | "+c(t.$t(`settings.${d}providers`)),1)]),append:a(()=>[V.value.filter(e=>e.type==d).length?(s(),l(ee,{key:0},{activator:a(({props:e})=>[o(ne,Q(e,{color:"accent",variant:"outlined"}),{default:a(()=>[m(c(t.$t("settings.add_new_provider_button",[d])),1)]),_:2},1040)]),default:a(()=>[o(ae,{density:"compact"},{default:a(()=>[(s(!0),_(P,null,M(V.value.filter(e=>e.type==d),e=>(s(),l(I,{key:e.domain,density:"compact",style:{"padding-top":"0","padding-bottom":"0","margin-bottom":"0"},title:e.name,onClick:k=>D(e)},{prepend:a(()=>[o(S,{domain:e.domain,size:26,class:"media-thumb",style:{"margin-left":"10px"}},null,8,["domain"])]),_:2},1032,["title","onClick"]))),128))]),_:2},1024)]),_:2},1024)):f("",!0)]),_:2},1024),o(te),d==i(v).MUSIC&&u.value.filter(e=>e.type==i(v).MUSIC&&e.domain in i(n).providerManifests&&!i(n).providerManifests[e.domain].hidden).length==0?(s(),l(Z,{key:0,icon:"mdi-radio-tower"},{default:a(()=>[y("b",null,c(t.$t("settings.no_providers")),1),oe,m(" "+c(t.$t("settings.no_providers_detail")),1)]),_:1})):f("",!0),o(x,null,{default:a(()=>[(s(!0),_(P,null,M(u.value.filter(e=>e.type==d),e=>{var k;return T((s(),l(I,{key:e.instance_id,link:"","context-menu-items":[{label:"settings.configure",labelArgs:[],action:()=>{h(e.instance_id)},icon:"mdi-cog"},{label:e.enabled?"settings.disable":"settings.enable",labelArgs:[],action:()=>{U(e)},icon:"mdi-cancel",disabled:i(n).providerManifests[e.domain].builtin},{label:"settings.documentation",labelArgs:[],action:()=>{E(i(n).providerManifests[e.domain].documentation)},icon:"mdi-bookshelf",disabled:!i(n).providerManifests[e.domain].documentation},{label:"settings.sync",labelArgs:[],action:()=>{i(n).startSync(void 0,[e.instance_id])},icon:"mdi-sync",hide:((k=i(n).providers[e.instance_id])==null?void 0:k.available)&&d!=i(v).MUSIC},{label:"settings.delete",labelArgs:[],action:()=>{B(e.instance_id)},icon:"mdi-delete",hide:i(n).providerManifests[e.domain].builtin},{label:"settings.reload",labelArgs:[],action:()=>{N(e.instance_id)},icon:"mdi-refresh"}],onClick:C=>h(e.instance_id)},{prepend:a(()=>[o(S,{domain:e.domain,size:40,class:"listitem-media-thumb"},null,8,["domain"])]),title:a(()=>[y("div",re,c(e.name||i(n).providerManifests[e.domain].name),1)]),subtitle:a(()=>[y("div",de,c(i(n).providerManifests[e.domain].description),1)]),append:a(()=>{var C;return[i(n).syncTasks.value.filter(L=>L.provider_instance==e.instance_id).length>0?(s(),l(b,{key:0,icon:"",title:t.$t("settings.sync_running")},{default:a(()=>[o(g,{color:"grey"},{default:a(()=>[m(" mdi-sync ")]),_:1})]),_:1},8,["title"])):f("",!0),e.enabled?e.last_error?(s(),l(b,{key:2,icon:"",title:e.last_error},{default:a(()=>[o(g,{color:"red"},{default:a(()=>[m(" mdi-alert-circle ")]),_:1})]),_:2},1032,["title"])):(C=i(n).providers[e.instance_id])!=null&&C.available?f("",!0):(s(),l(b,{key:3,icon:"",title:t.$t("settings.not_loaded")},{default:a(()=>[o(g,{icon:"mdi-timer-sand"})]),_:1},8,["title"])):(s(),l(b,{key:1,icon:"",title:t.$t("settings.provider_disabled")},{default:a(()=>[o(g,{color:"grey"},{default:a(()=>[m(" mdi-cancel ")]),_:1})]),_:1},8,["title"]))]}),_:2},1032,["context-menu-items","onClick"])),[[R,()=>{h(e.instance_id)}]])}),128))]),_:2},1024)]))),128)}}});const Ce=Y(le,[["__scopeId","data-v-753093ab"]]);export{Ce as default};
