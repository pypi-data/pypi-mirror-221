import{p as _,g as ee,r as C,j as s,f as M,c as A,as as ie,aJ as ue,k as K,l as se,a6 as de,aU as v,aV as H,w as oe,v as o,A as E,x as b,y as n,F as Q,B as W,N as w,J as h,D as L,q as p,I as V}from"./index-8ef8125d.js";import{b as ne,c as re,d as ve,e as me,a as pe,V as ce}from"./VExpansionPanel-523a6df6.js";import{a as be,i as le,L as Ve,N as ke,x as ge,V as T}from"./VBtn-49774b84.js";import{e as he,f as Ce,m as fe,g as $e,u as Ee,c as X,h as Y,i as Z}from"./VCheckboxBtn-4c08e900.js";import{g as we,b as Se}from"./VMenu-a805d6b6.js";import{a as Ue,V as qe,d as Pe}from"./VCard-e81591ba.js";import{V as Re}from"./VSpacer-b8926de0.js";import{V as Ie}from"./VDialog-b35e6970.js";import{V as D}from"./VTextField-be284f64.js";const Te=_({...be(),...he()},"VForm"),Ae=ee()({name:"VForm",props:Te(),emits:{"update:modelValue":u=>!0,submit:u=>!0},setup(u,S){let{slots:k,emit:f}=S;const d=Ce(u),g=C();function U(m){m.preventDefault(),d.reset()}function q(m){const r=m,c=d.validate();r.then=c.then.bind(c),r.catch=c.catch.bind(c),r.finally=c.finally.bind(c),f("submit",r),r.defaultPrevented||c.then(B=>{var P;let{valid:F}=B;F&&((P=g.value)==null||P.submit())}),r.preventDefault()}return le(()=>{var m;return s("form",{ref:g,class:["v-form",u.class],style:u.style,novalidate:!0,onReset:U,onSubmit:q},[(m=k.default)==null?void 0:m.call(k,d)])}),we(d,g)}});const Be=_({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...fe(),...$e()},"VSwitch"),Fe=ee()({name:"VSwitch",inheritAttrs:!1,props:Be(),emits:{"update:focused":u=>!0,"update:modelValue":()=>!0,"update:indeterminate":u=>!0},setup(u,S){let{attrs:k,slots:f}=S;const d=M(u,"indeterminate"),g=M(u,"modelValue"),{loaderClasses:U}=Ve(u),{isFocused:q,focus:m,blur:r}=Ee(u),c=A(()=>typeof u.loading=="string"&&u.loading!==""?u.loading:u.color),B=ie(),F=A(()=>u.id||`switch-${B}`);function P(){d.value&&(d.value=!1)}return le(()=>{const[O,G]=ue(k),[y,z]=X.filterProps(u),[R,$]=Y.filterProps(u),I=C();function l(a){var i,e;a.stopPropagation(),a.preventDefault(),(e=(i=I.value)==null?void 0:i.input)==null||e.click()}return s(X,K({class:["v-switch",{"v-switch--inset":u.inset},{"v-switch--indeterminate":d.value},U.value,u.class],style:u.style},O,y,{id:F.value,focused:q.value}),{...f,default:a=>{let{id:i,messagesId:e,isDisabled:N,isReadonly:x,isValid:t}=a;return s(Y,K({ref:I},R,{modelValue:g.value,"onUpdate:modelValue":[J=>g.value=J,P],id:i.value,"aria-describedby":e.value,type:"checkbox","aria-checked":d.value?"mixed":void 0,disabled:N.value,readonly:x.value,onFocus:m,onBlur:r},G),{...f,default:()=>s("div",{class:"v-switch__track",onClick:l},null),input:J=>{let{textColorClasses:ae,textColorStyles:te}=J;return s("div",{class:["v-switch__thumb",ae.value],style:te.value},[u.loading&&s(ke,{name:"v-switch",active:!0,color:t.value===!1?void 0:c.value},{default:j=>f.loader?f.loader(j):s(ge,{active:j.isActive,color:j.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}}),Le=V("br",null,null,-1),Ne={class:"configcolumnleft"},xe={key:0},De=V("br",null,null,-1),Oe=V("br",null,null,-1),Ge=V("br",null,null,-1),ye={key:1},ze=V("br",null,null,-1),Je={key:2},je=V("br",null,null,-1),He={key:0,class:"configcolumnright"},Me=V("br",null,null,-1),Ke=V("br",null,null,-1),tl=se({__name:"EditConfig",props:{configEntries:{},disabled:{type:Boolean}},emits:["submit","action"],setup(u,{emit:S}){const k=u,f=de(),d=C(),g=C(!1),U=C(),q=C("basic"),m=C(!1),r=C(),c=C({}),B=A(()=>d.value?d.value.filter(l=>l.advanced&&!l.hidden).length>0:!1),F=A(()=>B.value?["basic","advanced"]:["basic"]),P=A(()=>{if(d.value){for(const l of d.value)if(l.required&&!(!R(l.value)||!R(l.default_value)||l.type==v.DIVIDER||l.type==v.LABEL))return!1;return!0}return!1});A(()=>{const l={};for(const a of k.configEntries)a.value!=null&&(a.type==v.SECURE_STRING&&a.value==H||(l[a.key]=a.value));return l}),oe(()=>k.configEntries,l=>{d.value=[];for(const a of l||[])a.value!==void 0&&a.value!==null&&(c.value[a.key]=a.value),(a.value==null||a.value==null)&&(a.value=a.default_value),d.value.push(a)},{immediate:!0});const O=async function(){const{valid:l}=await U.value.validate();return l},G=async function(){console.log("submit",I()),await O()&&S("submit",I())},y=async function(l){S("action",l,I())},z=function(l){window.open(l,"_blank")},R=function(l){return l==null},$=function(l){var a;if(!R(l.depends_on)){const i=(a=d.value)==null?void 0:a.find(e=>e.key==l.depends_on);if(i&&i.required&&R(i)||i&&i.type==v.BOOLEAN&&!i.value)return!0}return!1},I=function(){const l={};for(const a of k.configEntries)a.value==null&&(a.value=null),!(a.type==v.SECURE_STRING&&a.value==H)&&(l[a.key]=a.value);return l};return(l,a)=>(o(),E("section",null,[d.value?(o(),b(Ae,{key:0,ref_key:"form",ref:U,modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=i=>g.value=i),style:{"margin-right":"10px"},disabled:l.disabled},{default:n(()=>[s(ne,{modelValue:q.value,"onUpdate:modelValue":a[1]||(a[1]=i=>q.value=i),variant:"accordion",multiple:""},{default:n(()=>[(o(!0),E(Q,null,W(F.value,i=>(o(),b(re,{key:i,value:i},{default:n(()=>[i=="advanced"?(o(),b(ve,{key:0},{default:n(()=>[V("h3",null,h(l.$t("settings.advanced_settings")),1)]),_:1})):L("",!0),Le,s(me,null,{default:n(()=>[(o(!0),E(Q,null,W(d.value.filter(e=>e.advanced==(i=="advanced")&&!e.hidden),e=>{var N,x;return o(),E("div",{key:e.key,class:"configrow"},[V("div",Ne,[e.type==p(v).DIVIDER?(o(),E("div",xe,[De,s(Se),e.label?(o(),b(Z,{key:0,style:{"margin-left":"8px","margin-top":"10px","margin-bottom":"10px"}},{default:n(()=>[V("b",null,h(e.label),1)]),_:2},1024)):L("",!0),Oe,Ge])):e.type==p(v).LABEL?(o(),E("div",ye,[ze,s(Z,{style:{"margin-left":"8px","margin-top":"10px","margin-bottom":"10px"}},{default:n(()=>[w(h(l.$t(`settings.${e.key}`,e.label)),1)]),_:2},1024)])):e.type==p(v).ACTION||e.action&&!e.value?(o(),E("div",Je,[je,s(T,{class:"actionbutton",disabled:$(e),onClick:t=>{y(e.action||e.key),e.value=e.action?null:e.key}},{default:n(()=>[w(h(l.$t(`settings.${e.action||e.key}`,e.action_label||e.label)),1)]),_:2},1032,["disabled","onClick"])])):e.type==p(v).BOOLEAN?(o(),b(Fe,{key:3,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:l.$t(`settings.${e.key}`,e.label),color:"primary",disabled:$(e)},null,8,["modelValue","onUpdate:modelValue","label","disabled"])):(e.type==p(v).INTEGER||e.type==p(v).FLOAT)&&e.range&&e.range.length==2?(o(),b(pe,{key:4,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,disabled:$(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,class:"align-center",min:e.range[0],max:e.range[1],step:e.type==p(v).FLOAT?.5:1,"hide-details":"",style:{"margin-top":"10px","margin-bottom":"25px"},color:"primary"},{append:n(()=>[s(D,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,"hide-details":"","single-line":"",density:"compact",type:"number",style:{width:"70px"}},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","disabled","label","required","min","max","step"])):e.type==p(v).SECURE_STRING?(o(),b(D,{key:5,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,label:l.$t(`settings.${e.key}`,e.label),required:e.required,disabled:$(e),rules:[t=>!(!t&&e.required)||l.$t("settings.invalid_input")],type:m.value?"text":"password","append-inner-icon":m.value?"mdi-eye":typeof e.value=="string"&&e.value.includes(p(H))?"":"mdi-eye-off",variant:"outlined",clearable:"",readonly:!!e.action,"onClick:appendInner":a[0]||(a[0]=t=>m.value=!m.value),"onClick:clear":t=>e.value="#CLEAR#"},null,8,["modelValue","onUpdate:modelValue","label","required","disabled","rules","type","append-inner-icon","readonly","onClick:clear"])):e.options&&e.options.length>0?(o(),b(ce,{key:6,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,chips:e.multi_value,clearable:!0,multiple:e.multi_value,items:e.options,disabled:$(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,rules:[t=>!(!t&&e.required)||l.$t("settings.invalid_input")],variant:"outlined","onClick:clear":t=>e.value=null},null,8,["modelValue","onUpdate:modelValue","chips","multiple","items","disabled","label","required","rules","onClick:clear"])):e.type==p(v).INTEGER||e.type==p(v).FLOAT?(o(),b(D,{key:7,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,placeholder:(N=e.default_value)==null?void 0:N.toString(),disabled:$(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,rules:[t=>!(!t&&e.required)||l.$t("settings.invalid_input")],variant:"outlined",clearable:!e.required,type:"number","onClick:clear":t=>e.value=null},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","label","required","rules","clearable","onClick:clear"])):(o(),b(D,{key:8,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,placeholder:(x=e.default_value)==null?void 0:x.toString(),clearable:"",disabled:$(e),label:l.$t(`settings.${e.key}`,e.label),required:e.required,rules:[t=>!(!t&&e.required)||l.$t("settings.invalid_input")],variant:"outlined",readonly:!!e.action,"onClick:clear":t=>e.value=null},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled","label","required","rules","readonly","onClick:clear"]))]),e.description||e.help_link?(o(),E("div",He,[s(T,{icon:"mdi-help-box",variant:"plain",class:"helpicon",size:"x-large",onClick:t=>e.description?r.value=e:z(e.help_link)},null,8,["onClick"])])):L("",!0)])}),128))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),Me,s(T,{block:"",color:"primary",disabled:!P.value,onClick:G},{default:n(()=>[w(h(l.$t("settings.save")),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue","disabled"])):L("",!0),Ke,s(T,{block:"",onClick:a[3]||(a[3]=i=>p(f).back())},{default:n(()=>[w(h(l.$t("close")),1)]),_:1}),s(Ie,{"model-value":r.value!==void 0,width:"auto","onUpdate:modelValue":a[6]||(a[6]=i=>r.value=void 0)},{default:n(()=>[s(Ue,null,{default:n(()=>[s(qe,null,{default:n(()=>{var i;return[w(h((i=r.value)==null?void 0:i.description),1)]}),_:1}),s(Pe,null,{default:n(()=>{var i;return[(i=r.value)!=null&&i.help_link?(o(),b(T,{key:0,onClick:a[4]||(a[4]=e=>z(r.value.help_link))},{default:n(()=>[w(h(l.$t("read_more")),1)]),_:1})):L("",!0),s(Re),s(T,{color:"primary",onClick:a[5]||(a[5]=e=>r.value=void 0)},{default:n(()=>[w(h(l.$t("close")),1)]),_:1})]}),_:1})]),_:1})]),_:1},8,["model-value"])]))}});export{Fe as V,tl as _};
