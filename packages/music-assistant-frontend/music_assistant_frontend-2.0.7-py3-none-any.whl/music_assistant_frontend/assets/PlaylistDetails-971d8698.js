import{_ as v,f as _}from"./ItemsListing.vue_vue_type_style_index_0_lang-8e142c2f.js";import{_ as y,a as k}from"./ProviderDetails.vue_vue_type_script_setup_true_lang-86038b27.js";import{l as b,r as p,w as h,o as w,H as s,ao as D,b as I,v as l,A as E,j as T,x as n,D as u,ap as A}from"./index-8ef8125d.js";import"./ListviewItem-ade956db.js";import"./MediaItemThumb.vue_vue_type_style_index_0_lang-3622812c.js";import"./ListItem-bba986fb.js";import"./VBtn-49774b84.js";import"./VMenu-a805d6b6.js";import"./index-a4f9d82d.js";import"./VListItem-b049d12d.js";import"./VCheckboxBtn-4c08e900.js";import"./VCard-e81591ba.js";/* empty css                             */import"./PanelviewItem.vue_vue_type_style_index_0_lang-a068cbe2.js";import"./contextmenu-7e32a8e5.js";import"./eventbus-d154090d.js";import"./Alert-bdc4de4a.js";import"./Container-32d4da6e.js";/* empty css              */import"./VToolbar-b4c95f12.js";import"./VTextField-be284f64.js";import"./VBadge-8b6f3afa.js";import"./VRow-08fca7f1.js";import"./layout-2c008654.js";import"./VDialog-b35e6970.js";const Y=b({__name:"PlaylistDetails",props:{itemId:{},provider:{}},setup(c){const a=c,o=p(!1),e=p(),f=async function(){e.value=await s.getPlaylist(a.itemId,a.provider)};h(()=>a.itemId,t=>{t&&f()},{immediate:!0}),w(()=>{const t=s.subscribe(D.MEDIA_ITEM_ADDED,i=>{var m;const r=i.data;((m=e.value)==null?void 0:m.uri)==r.uri&&(o.value=!0)});I(t)});const d=async function(t){const i=[];return await s.getPlaylistTracks(a.itemId,a.provider,r=>{i.push(...r)},t.refresh),t.refresh&&await A(1e3),o.value=!1,_(i,t)};return(t,i)=>(l(),E("section",null,[T(y,{item:e.value},null,8,["item"]),e.value?(l(),n(v,{key:0,itemtype:"playlisttracks","parent-item":e.value,"show-provider":!1,"show-library":!1,"show-favorites-only-filter":!1,"show-track-number":!1,"load-data":d,"sort-keys":["position","position DESC","sort_name","sort_artist","sort_album"],"update-available":o.value,title:t.$t("playlist_tracks"),"allow-key-hooks":!0},null,8,["parent-item","update-available","title"])):u("",!0),e.value?(l(),n(k,{key:1,"item-details":e.value},null,8,["item-details"])):u("",!0)]))}});export{Y as default};
