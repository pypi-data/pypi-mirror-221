<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>plotagain.saveplotcontext.SavePlotContext &#8212; PlotAgain 1.0.5 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="plotagain.utils" href="plotagain.utils.html" />
    <link rel="prev" title="plotagain.saveplotcontext" href="plotagain.saveplotcontext.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="plotagain-saveplotcontext-saveplotcontext">
<h1>plotagain.saveplotcontext.SavePlotContext<a class="headerlink" href="#plotagain-saveplotcontext-saveplotcontext" title="Permalink to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="plotagain.saveplotcontext.SavePlotContext">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">plotagain.saveplotcontext.</span></span><span class="sig-name descname"><span class="pre">SavePlotContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">locals_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">globals_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'make_plot.py'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_show_plots</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plotagain.saveplotcontext.SavePlotContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Context manager which wraps matplotlib.pyplot. Usage:</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>`
with SavePlotContext(“/…/save-dir/”, locals(), …) as pla:</p>
<blockquote>
<div><p>pla.plot( … )
…
pla.title( … )
pla.show()</p>
</div></blockquote>
<p><a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a></p>
<p>Any calls to pla are passed to matplotlib.pyplot and all args and kwargs are stored. On exiting the ‘with’ block,
all args/kwargs are saved to save-dir/ as pickle files and a script is autogenerated to recreate the produced plots.
Using the locals() dict, the variable names of the objects passed in as arguments are inferred and re-used in the
autogenerated script. Any objects which don’t appear in the locals() dict are given the name ‘unnamed_arg’
post-fixed with an integer if multiple unnamed args are present.</p>
<p>Outside the ‘with’ block, all calls continue to be passed onto matplotlib.pyplot but nothing is stored or
recorded. This allows one to adobt a usage pattern of:</p>
<p><a href="#id7"><span class="problematic" id="id8">``</span></a>`
import matplotlib.pyplot as plt
from plotagain import SavePlotContext</p>
<p>…</p>
<dl class="simple">
<dt>with SavePlotContext(“/…/save-dir/”, locals(), …) as plt:</dt><dd><p>…</p>
</dd>
</dl>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a></p>
<p>Before the first ‘with’ block, the plt variable points to the actual matplotib.pyplot. Within the with variable plt
is re-assigned to a SavePlotContext instance and the behaviour is as decribed above. After the with block, plt is
still a SavePlotContext instance but the object will pass all calls directly to the actual matplotlib.pyplot without
any recording/storage or anything. This allows one to easily wrap existing matplotlib plotting code by through one
additional line of code</p>
<section id="attributes">
<h2>Attributes<a class="headerlink" href="#attributes" title="Permalink to this heading">¶</a></h2>
<dl class="simple">
<dt>save_dir<span class="classifier">Path</span></dt><dd><p>The path to a directory into which the argument pickles and autogenerated script are saved. If the directory
does not exist it is created. If the directory is not empty and self.overwrite is False, an exception is
raised.</p>
</dd>
<dt>outer_locals_dict</dt><dd><p>The locals() dict containing the variables in the local scope of the code which created the SavePlotContext</p>
</dd>
<dt>outer_globals_dict</dt><dd><p>The globals() dict containing the variables in the global scope of the code which created the SavePlotContext</p>
</dd>
<dt>overwrite</dt><dd><p>If False, the directory self.save_dir must be empty, otherwise an exception is raised</p>
</dd>
<dt>regenerate_script_name</dt><dd><p>The name of the autogenerated script</p>
</dd>
<dt>script_template_path</dt><dd><p>A path to the template used to autogenerate the script which recreates the plots created using this
SavePlotContext. See script_template.txt for an example</p>
</dd>
<dt>has_exited</dt><dd><p>Boolean tracking whether the contextmanager has exited. If the context manager has exited, all calls continue
to be passed onto matplotlib.pyplot but nothing is stored or recorded.</p>
</dd>
<dt>used_variables</dt><dd><p>A mapping from the variable name to the objects passed into any matplotlib.pyplot call</p>
</dd>
<dt>calls</dt><dd><p>A list of PyplotCall objects, one for each call made to matplotlib.pyplot. E.g. ‘plot’, ‘show’, ‘hist’</p>
</dd>
</dl>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading">¶</a></h2>
<dl class="simple">
<dt>save_dir</dt><dd><p>The path to a directory into which the argument pickles and autogenerated script are saved. If the directory
does not exist it is created. If the directory is not empty and self.overwrite is False, an exception is
raised</p>
</dd>
<dt>locals_dict</dt><dd><p>The dict returned by ‘locals()’ called in the scope of the plotting code</p>
</dd>
<dt>globals_dict</dt><dd><p>The dict returned by ‘globals()’ called in the scope of the plotting code</p>
</dd>
<dt>overwrite</dt><dd><p>If False, the directory self.save_dir must be empty, otherwise an exception is raised</p>
</dd>
<dt>script_name</dt><dd><p>The name of the autogenerated script</p>
</dd>
<dt>script_template</dt><dd><p>A path to the template used to autogenerate the script which recreates the plots created using this
SavePlotContext. See script_template.txt for an example</p>
</dd>
<dt>skip_show_plots</dt><dd><p>If set to True, calls for plt.show are NOT passed on to matplotlib.pyplot but are still stored for the
reconstruction script. Instead of plt.show, plt.close is called instead. Allows for execution without
pausing for plots. As an example, code developed locally is likely to involve lots of plots to check the
output at various stages. Code executed remotely is likely to be unsupervised and therefore the plots ought
not to render. Setting skip_show_plots to True allows for the disabling of manual checks while the plots
that would be displayed are still saved and accessible later if required. See set_skip_all_show_plots() for
a global flag of this nature</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="plotagain.saveplotcontext.SavePlotContext.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">locals_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">globals_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'make_plot.py'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">script_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_show_plots</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#plotagain.saveplotcontext.SavePlotContext.__init__" title="Permalink to this definition">¶</a></dt>
<dd><section id="id13">
<h3>Parameters<a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h3>
<dl class="simple">
<dt>save_dir</dt><dd><p>The path to a directory into which the argument pickles and autogenerated script are saved. If the directory
does not exist it is created. If the directory is not empty and self.overwrite is False, an exception is
raised</p>
</dd>
<dt>locals_dict</dt><dd><p>The dict returned by ‘locals()’ called in the scope of the plotting code</p>
</dd>
<dt>globals_dict</dt><dd><p>The dict returned by ‘globals()’ called in the scope of the plotting code</p>
</dd>
<dt>overwrite</dt><dd><p>If False, the directory self.save_dir must be empty, otherwise an exception is raised</p>
</dd>
<dt>script_name</dt><dd><p>The name of the autogenerated script</p>
</dd>
<dt>script_template</dt><dd><p>A path to the template used to autogenerate the script which recreates the plots created using this
SavePlotContext. See script_template.txt for an example</p>
</dd>
<dt>skip_show_plots</dt><dd><p>If set to True, calls for plt.show are NOT passed on to matplotlib.pyplot but are still stored for the
reconstruction script. Instead of plt.show, plt.close is called instead. Allows for execution without
pausing for plots. As an example, code developed locally is likely to involve lots of plots to check the
output at various stages. Code executed remotely is likely to be unsupervised and therefore the plots ought
not to render. Setting skip_show_plots to True allows for the disabling of manual checks while the plots
that would be displayed are still saved and accessible later if required. See set_skip_all_show_plots() for
a global flag of this nature</p>
</dd>
</dl>
</section>
</dd></dl>

<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#plotagain.saveplotcontext.SavePlotContext.__init__" title="plotagain.saveplotcontext.SavePlotContext.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>(save_dir, locals_dict[, overwrite, ...])</p></td>
<td><p>Parameters

save_dir

The path to a directory into which the argument pickles and autogenerated script are saved. If the directory
does not exist it is created. If the directory is not empty and self.overwrite is False, an exception is
raised

locals_dict

The dict returned by 'locals()' called in the scope of the plotting code

globals_dict

The dict returned by 'globals()' called in the scope of the plotting code

overwrite

If False, the directory self.save_dir must be empty, otherwise an exception is raised

script_name

The name of the autogenerated script

script_template

A path to the template used to autogenerate the script which recreates the plots created using this
SavePlotContext. See script_template.txt for an example

skip_show_plots

If set to True, calls for plt.show are NOT passed on to matplotlib.pyplot but are still stored for the
reconstruction script. Instead of plt.show, plt.close is called instead. Allows for execution without
pausing for plots. As an example, code developed locally is likely to involve lots of plots to check the
output at various stages. Code executed remotely is likely to be unsupervised and therefore the plots ought
not to render. Setting skip_show_plots to True allows for the disabling of manual checks while the plots
that would be displayed are still saved and accessible later if required. See set_skip_all_show_plots() for
a global flag of this nature</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">save</span></code>()</p></td>
<td><p>Saves all matplotlib.pyplot arguments and creates the script needed to reproduce the plots produced using this SavePlotContext instance</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_regenerate_script</span></code>()</p></td>
<td><p>Creates and saves a python script which reproduces all the plots produced using this SavePlotContext instance</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_used_variables</span></code>()</p></td>
<td><p>Saves a pickle file for each object passed in as an argument to a matplotlib.pyplot call</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_dir</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">outer_locals_dict</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">outer_globals_dict</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">overwrite</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">regenerate_script_name</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">skip_show_plots</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">has_exited</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">used_variables</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">calls</span></code></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</section>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">PlotAgain</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="plotagain.html">plotagain</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotagain.saveplotcontext.html">plotagain.saveplotcontext</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">plotagain.saveplotcontext.SavePlotContext</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotagain.utils.html">plotagain.utils</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api.html">API</a><ul>
      <li>Previous: <a href="plotagain.saveplotcontext.html" title="previous chapter">plotagain.saveplotcontext</a></li>
      <li>Next: <a href="plotagain.utils.html" title="next chapter">plotagain.utils</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, Jeremy Wilkinson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/generated/plotagain.saveplotcontext.SavePlotContext.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>